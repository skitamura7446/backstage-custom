(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1556],{19589:($n,Zt,e)=>{"use strict";e.d(Zt,{E:()=>Be});var o=e(12082),m=e(11638),p=e(7877),j=e(17899),B=e(14041),i=e(64947),k=e(23180),Ze=e(18690),Ke=e(73657),a=e(14451),De=e(27799),Ie=e(94389),ie=e(20947),G=e(20473),Ve=e(45917),he=e(39347),_e=e(63309),re=e(4832),Re=e(85121),I=e(17400),c=e(42226),R=e(69550),A=e(52755),_=e(89350),F=e(8911),Ae=e(33602),fe=e(48108),ve=e(77225),J=e(48972),v=e(71865),ee=e(98392),oe=e(55288),Rt=e(91360),w=e(50868),sn=e(1456),me=e(56558),kt=e(12285),yt=e(65730),mt=e(14360),It=e(58733);const Ne=C=>(...W)=>{const Q=W.length===0?[1]:W,rt=(ct,ut)=>typeof ct=="string"?ct:ut*ct;return Q.map(ct=>{const ut=rt(ct,C);return typeof ut=="number"?`${ut}px`:ut}).join(" ")};function Ct(C,W){if(!W||typeof W=="string")return;const Q=typeof W=="function"?W(C):W;if(Q)return{"@global":Q}}function ot(C,W){if(!(!W||typeof W=="string")){if(typeof W=="object"){const Q={...C},rt=C.spacing(1);return typeof rt=="number"&&(Q.spacing=Ne(rt)),Object.fromEntries(Object.entries(W).map(([ct,ut])=>typeof ut=="function"?[ct,ut({theme:Q})]:[ct,ut]))}return W}}const zt=/^&.Mui-([\w-]+)$/;function Tt(C){let W=C;if(!C||typeof C!="object")return W;for(const Q of Object.keys(C)){const rt=C[Q];if(!(!rt||typeof rt!="object"))for(const ct of Object.keys(rt)){const ut=ct,tn=ut.match(zt);if(tn){const[,mn]=tn,{[ut]:Cn,...An}=rt;Cn&&(W={...W,[Q]:An,[mn]:Cn})}}}return W}function Kt(C,W={}){const Q={},rt={};for(const ct of Object.keys(W)){const ut=W[ct];ut&&("styleOverrides"in ut&&(ct==="MuiCssBaseline"?Q[ct]=Ct(C,ut.styleOverrides):Q[ct]=Tt(ot(C,ut.styleOverrides))),"defaultProps"in ut&&(rt[ct]=ut.defaultProps))}return{overrides:Q,props:rt}}const lt={wave:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,wave2:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,round:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`},ft={darkGrey:["#171717","#383838"],marineBlue:["#006D8F","#0049A1"],veryBlue:["#0027AF","#270094"],rubyRed:["#98002B","#8D1134"],toastyOrange:["#BE2200","#A41D00"],purpleSky:["#8912CA","#3E00EA"],eveningSea:["#00FFF2","#035355"],teal:["#005B4B"],pinkSea:["#C8077A","#C2297D"],greens:["#4BB8A5","#187656"]};function $t(C){var W;const{colors:Q,shape:rt,options:ct}=C,tn=`linear-gradient(90deg, ${(Q.length===1?[Q[0],Q[0]]:Q).join(", ")})`,mn=`${rt},  ${tn}`,Cn=(W=ct==null?void 0:ct.fontColor)!=null?W:"#FFFFFF";return{colors:Q,shape:rt,backgroundImage:mn,fontColor:Cn}}const an={home:$t({colors:ft.teal,shape:lt.wave}),documentation:$t({colors:ft.pinkSea,shape:lt.wave2}),tool:$t({colors:ft.purpleSky,shape:lt.round}),service:$t({colors:ft.marineBlue,shape:lt.wave}),website:$t({colors:ft.veryBlue,shape:lt.wave}),library:$t({colors:ft.rubyRed,shape:lt.wave}),other:$t({colors:ft.darkGrey,shape:lt.wave}),app:$t({colors:ft.toastyOrange,shape:lt.wave}),apis:$t({colors:ft.teal,shape:lt.wave2}),card:$t({colors:ft.greens,shape:lt.wave})},St=16,jt='"Helvetica Neue", Helvetica, Roboto, Arial, sans-serif',D="home";function U(C){const{palette:W,htmlFontSize:Q=St,fontFamily:rt=jt,defaultPageTheme:ct=D,pageTheme:ut=an,typography:tn}=C;if(!ut[ct])throw new Error(`${ct} is not defined in pageTheme.`);const mn={htmlFontSize:Q,fontFamily:rt,h1:{fontSize:54,fontWeight:700,marginBottom:10},h2:{fontSize:40,fontWeight:700,marginBottom:8},h3:{fontSize:32,fontWeight:700,marginBottom:6},h4:{fontWeight:700,fontSize:28,marginBottom:6},h5:{fontWeight:700,fontSize:24,marginBottom:4},h6:{fontWeight:700,fontSize:20,marginBottom:2}};return{palette:W,typography:tn!=null?tn:mn,page:ut[ct],getPageTheme:({themeId:Cn})=>{var An;return(An=ut[Cn])!=null?An:ut[ct]}}}const O={MuiCssBaseline:{styleOverrides:C=>({html:{height:"100%",fontFamily:C.typography.fontFamily},body:{height:"100%",fontFamily:C.typography.fontFamily,overscrollBehaviorY:"none",fontSize:"0.875rem",lineHeight:1.43},a:{color:"inherit",textDecoration:"none"}})},MuiGrid:{defaultProps:{spacing:2}},MuiSwitch:{defaultProps:{color:"primary"}},MuiTableRow:{styleOverrides:{root:({theme:C})=>({"&:nth-of-type(odd)":{backgroundColor:C.palette.background.default}}),hover:{"&:hover":{cursor:"pointer"}},head:({theme:C})=>({"&:nth-of-type(odd)":{backgroundColor:C.palette.background.paper}})}},MuiTableCell:{styleOverrides:{root:({theme:C})=>({wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:C.spacing(3,2,3,2.5),borderBottom:0}),sizeSmall:({theme:C})=>({padding:C.spacing(1.5,2,1.5,2.5)}),head:({theme:C})=>({wordBreak:"break-word",overflow:"hidden",color:C.palette.textSubtle,fontWeight:"normal",lineHeight:"1"})}},MuiTabs:{styleOverrides:{root:{minHeight:24}}},MuiTab:{styleOverrides:{root:({theme:C})=>({color:C.palette.link,minHeight:24,textTransform:"initial",letterSpacing:"0.07em","&:hover":{color:(0,sn.e$)(C.palette.link,.3),background:(0,sn.a)(C.palette.link,.95)},[C.breakpoints.up("md")]:{minWidth:120,fontSize:C.typography.pxToRem(14),fontWeight:500}}),textColorPrimary:({theme:C})=>({color:C.palette.link})}},MuiTableSortLabel:{styleOverrides:{root:{color:"inherit","&:hover":{color:"inherit"},"&:focus":{color:"inherit"},"&.Mui-active":{fontWeight:"bold",color:"inherit"}}}},MuiListItemText:{styleOverrides:{dense:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}},MuiButton:{styleOverrides:{text:{padding:void 0}}},MuiChip:{styleOverrides:{root:({theme:C})=>({marginRight:C.spacing(1),marginBottom:C.spacing(1)}),label:({theme:C})=>({lineHeight:C.spacing(2.5),fontWeight:C.typography.fontWeightMedium,fontSize:C.spacing(1.75)}),labelSmall:({theme:C})=>({fontSize:C.spacing(1.5)}),deleteIcon:({theme:C})=>({width:C.spacing(3),height:C.spacing(3),margin:C.spacing(0,.75,0,-.75)}),deleteIconSmall:({theme:C})=>({width:C.spacing(2),height:C.spacing(2),margin:C.spacing(0,.5,0,-.5)})}},MuiCard:{styleOverrides:{root:{display:"flex",flexDirection:"column"}}},MuiCardHeader:{styleOverrides:{root:{paddingBottom:0}}},MuiCardContent:{styleOverrides:{root:{flexGrow:1,"&:last-child":{paddingBottom:void 0}}}},MuiCardActions:{styleOverrides:{root:{justifyContent:"flex-end"}}},MuiLink:{defaultProps:{underline:"hover"}},MuiPaper:{styleOverrides:{root:{backgroundImage:"unset"}}}};var M=(C,W,Q)=>{if(!W.has(C))throw TypeError("Cannot "+Q)},te=(C,W,Q)=>(M(C,W,"read from private field"),Q?Q.call(C):W.get(C)),ge=(C,W,Q)=>{if(W.has(C))throw TypeError("Cannot add the same private member more than once");W instanceof WeakSet?W.add(C):W.set(C,Q)},ze=(C,W,Q,rt)=>(M(C,W,"write to private field"),rt?rt.call(C,Q):W.set(C,Q),Q),bt;class Qe{constructor(W,Q){ge(this,bt,new Map),ze(this,bt,new Map),W&&te(this,bt).set("v4",W),Q&&te(this,bt).set("v5",Q)}getTheme(W){return te(this,bt).get(W)}}bt=new WeakMap;function Mt(C){const W=U(C),Q={...O,...C.components},rt=(0,me.A)({...W,components:Q}),ct=Kt(rt,Q),ut={...(0,ee.A)(W),...ct};return new Qe(ut,rt)}function rn(C){const W=adaptV4Theme(C),Q=createTheme$2(C);return new Qe(Q,W)}const Ft={light:{type:"light",mode:"light",background:{default:"#F8F8F8",paper:"#FFFFFF"},status:{ok:"#1DB954",warning:"#FF9800",error:"#E22134",running:"#1F5493",pending:"#FFED51",aborted:"#757575"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#1F5493"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#000000",textVerySubtle:"#DDD",textSubtle:"#6E6E6E",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#2196F3",link:"#0A6EBE",gold:"#FFD600",navigation:{background:"#171717",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#181818",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}},dark:{type:"dark",mode:"dark",background:{default:"#333333",paper:"#424242"},status:{ok:"#71CF88",warning:"#FFB84D",error:"#F84C55",running:"#3488E3",pending:"#FEF071",aborted:"#9E9E9E"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#9CC9FF",dark:"#82BAFD"},secondary:{main:"#FF88B2"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#FFFFFF",textVerySubtle:"#727272",textSubtle:"#CCCCCC",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#82BAFD",link:"#9CC9FF",gold:"#FFD600",navigation:{background:"#424242",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#404040",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}}},Et={light:Mt({palette:Ft.light}),dark:Mt({palette:Ft.dark})};mt.A.configure(C=>`v5-${C}`);const we=(0,oe.A)({productionPrefix:"jss4-"});function nt(C){const{children:W,theme:Q,noCssBaseline:rt=!1}=C,ct=Q.getTheme("v4"),ut=Q.getTheme("v5");let tn;rt||(tn=B.createElement(It.Ay,null));let mn=B.createElement(B.Fragment,null,tn,W);return ct&&(mn=B.createElement(Rt.Ay,{generateClassName:we},B.createElement(w.A,{theme:ct},mn))),ut&&(mn=B.createElement(kt.A,{injectFirst:!0},B.createElement(yt.A,{theme:ut},mn))),mn}function Lt(C){var W,Q,rt,ct;return{props:{MuiGrid:(Q=(W=O)==null?void 0:W.MuiGrid)==null?void 0:Q.defaultProps,MuiSwitch:(ct=(rt=O)==null?void 0:rt.MuiSwitch)==null?void 0:ct.defaultProps},...U(C)}}function Wt(C){return Kt(C,O).overrides}function le(C){const W=Lt(C),Q=(0,ee.A)(W),rt=Wt(Q);return{...Q,overrides:rt}}const $e=le({palette:Ft.light}),xt=le({palette:Ft.dark});var Yt=e(75962),se=e(87145);const ke=[(0,m.bW)({api:p.q,deps:{configApi:p.p},factory:({configApi:C})=>o.Yi.compile(`${C.getString("backend.baseUrl")}/api/{{ pluginId }}`)}),(0,m.bW)({api:p.l,deps:{},factory:()=>new o.$K}),(0,m.bW)({api:p.a,deps:{},factory:()=>new o.R8}),(0,m.bW)({api:p.r,deps:{alertApi:p.l},factory:({alertApi:C})=>{const W=new o.i3(C,new o.Fb);return o.u_.forward(W,{hidden:!1}),W}}),(0,m.bW)({api:p.x,deps:{errorApi:p.r},factory:({errorApi:C})=>o.gu.create({errorApi:C})}),(0,m.bW)({api:p.s,deps:{configApi:p.p,identityApi:p.t,discoveryApi:p.q},factory:({configApi:C,identityApi:W,discoveryApi:Q})=>(0,o.FA)({middleware:[o.W.resolvePluginProtocol({discoveryApi:Q}),o.W.injectIdentityAuth({identityApi:W,config:C})]})}),(0,m.bW)({api:p.v,deps:{},factory:()=>new o.aQ}),(0,m.bW)({api:p.g,deps:{discoveryApi:p.q,oauthRequestApi:p.v,configApi:p.p},factory:({discoveryApi:C,oauthRequestApi:W,configApi:Q})=>o.kF.create({configApi:Q,discoveryApi:C,oauthRequestApi:W,environment:Q.getOptionalString("auth.environment")})}),(0,m.bW)({api:p.m,deps:{discoveryApi:p.q,oauthRequestApi:p.v,configApi:p.p},factory:({discoveryApi:C,oauthRequestApi:W,configApi:Q})=>o.n5.create({configApi:Q,discoveryApi:C,oauthRequestApi:W,environment:Q.getOptionalString("auth.environment")})}),(0,m.bW)({api:p.d,deps:{discoveryApi:p.q,oauthRequestApi:p.v,configApi:p.p},factory:({discoveryApi:C,oauthRequestApi:W,configApi:Q})=>o.Qf.create({configApi:Q,discoveryApi:C,oauthRequestApi:W,defaultScopes:["read:user"],environment:Q.getOptionalString("auth.environment")})}),(0,m.bW)({api:p.o,deps:{discoveryApi:p.q,oauthRequestApi:p.v,configApi:p.p},factory:({discoveryApi:C,oauthRequestApi:W,configApi:Q})=>o.gE.create({configApi:Q,discoveryApi:C,oauthRequestApi:W,environment:Q.getOptionalString("auth.environment")})}),(0,m.bW)({api:p.e,deps:{discoveryApi:p.q,oauthRequestApi:p.v,configApi:p.p},factory:({discoveryApi:C,oauthRequestApi:W,configApi:Q})=>o.WW.create({configApi:Q,discoveryApi:C,oauthRequestApi:W,environment:Q.getOptionalString("auth.environment")})}),(0,m.bW)({api:p.h,deps:{discoveryApi:p.q,oauthRequestApi:p.v,configApi:p.p},factory:({discoveryApi:C,oauthRequestApi:W,configApi:Q})=>o.kI.create({configApi:Q,discoveryApi:C,oauthRequestApi:W,environment:Q.getOptionalString("auth.environment")})}),(0,m.bW)({api:p.i,deps:{discoveryApi:p.q,oauthRequestApi:p.v,configApi:p.p},factory:({discoveryApi:C,oauthRequestApi:W,configApi:Q})=>o.Ke.create({configApi:Q,discoveryApi:C,oauthRequestApi:W,defaultScopes:["team"],environment:Q.getOptionalString("auth.environment")})}),(0,m.bW)({api:p.j,deps:{discoveryApi:p.q,oauthRequestApi:p.v,configApi:p.p},factory:({discoveryApi:C,oauthRequestApi:W,configApi:Q})=>o.l9.create({configApi:Q,discoveryApi:C,oauthRequestApi:W,defaultScopes:["REPO_READ"]})}),(0,m.bW)({api:p.k,deps:{discoveryApi:p.q,oauthRequestApi:p.v,configApi:p.p},factory:({discoveryApi:C,oauthRequestApi:W,configApi:Q})=>o.l2.create({configApi:Q,discoveryApi:C,oauthRequestApi:W,environment:Q.getOptionalString("auth.environment")})}),(0,m.bW)({api:j.x9,deps:{discovery:p.q,identity:p.t,config:p.p},factory:({config:C,discovery:W,identity:Q})=>j.ak.create({config:C,discovery:W,identity:Q})})];function pe({children:C}){return(0,Ze.Ri)()?B.createElement(B.Fragment,null,C):B.createElement(Ze.fS,null,C)}const Le=()=>B.createElement(k.M,{status:"404",statusMessage:"PAGE NOT FOUND"}),et=({step:C,error:W})=>{let Q="";return C==="load-config"?Q=`The configuration failed to load, someone should have a look at this error: ${W.message}`:C==="load-chunk"&&(Q=`Lazy loaded chunk failed to load, try to reload the page: ${W.message}`),B.createElement(pe,null,B.createElement(k.M,{status:"501",statusMessage:Q}))},pt=({error:C,resetError:W,plugin:Q})=>B.createElement(k.bJ,{title:`Error in ${Q==null?void 0:Q.getId()}`,defaultExpanded:!0,error:C},B.createElement(i.A,{variant:"outlined",onClick:W},"Retry")),Bt={Progress:k.ke,Router:Ke.Kd,NotFoundErrorPage:Le,BootErrorPage:et,ErrorBoundaryFallback:pt},en={brokenImage:De.A,catalog:F.A,scaffolder:ie.A,techdocs:G.A,search:Ve.A,chat:he.A,dashboard:_e.A,docs:re.A,email:Re.A,github:c.A,group:Ae.A,help:R.A,"kind:api":I.A,"kind:component":_.A,"kind:domain":a.A,"kind:group":Ae.A,"kind:location":A.A,"kind:system":Ie.A,"kind:user":fe.A,"kind:resource":J.A,"kind:template":v.A,user:fe.A,warning:ve.A},Ce=[{id:"light",title:"Light Theme",variant:"light",icon:B.createElement(se.A,null),Provider:({children:C})=>B.createElement(nt,{theme:Et.light,children:C})},{id:"dark",title:"Dark Theme",variant:"dark",icon:B.createElement(Yt.A,null),Provider:({children:C})=>B.createElement(nt,{theme:Et.dark,children:C})}];function Be(C){var W,Q,rt,ct;return(0,o.Z8)({...C,apis:(W=C==null?void 0:C.apis)!=null?W:[],bindRoutes:C==null?void 0:C.bindRoutes,components:{...Bt,...C==null?void 0:C.components},configLoader:C==null?void 0:C.configLoader,defaultApis:ke,icons:{...en,...C==null?void 0:C.icons},plugins:(Q=C==null?void 0:C.plugins)!=null?Q:[],featureFlags:(rt=C==null?void 0:C.featureFlags)!=null?rt:[],themes:(ct=C==null?void 0:C.themes)!=null?ct:Ce})}},75757:($n,Zt,e)=>{"use strict";e.d(Zt,{K3:()=>re,cr:()=>k,dJ:()=>_e});var o=e(29835),m=e(3399),p=e(10288),j=e.n(p),B=e(94214),i=e.n(B);const k=Symbol.for("CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111");function Ze(Re){return!Re.cursor}const Ke="catalog";var a=Object.defineProperty,De=(Re,I,c)=>I in Re?a(Re,I,{enumerable:!0,configurable:!0,writable:!0,value:c}):Re[I]=c,Ie=(Re,I,c)=>(De(Re,typeof I!="symbol"?I+"":I,c),c);class ie{constructor(I){Ie(this,"discoveryApi"),Ie(this,"fetchApi"),this.discoveryApi=I.discoveryApi,this.fetchApi=I.fetchApi||{fetch:j()}}async analyzeLocation(I,c){const R=await this.discoveryApi.getBaseUrl(Ke),A="/analyze-location",_=B.parse(A).expand({});return await this.fetchApi.fetch(`${R}${_}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"POST",body:JSON.stringify(I.body)})}async createLocation(I,c){const R=await this.discoveryApi.getBaseUrl(Ke),A="/locations{?dryRun}",_=B.parse(A).expand({...I.query});return await this.fetchApi.fetch(`${R}${_}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"POST",body:JSON.stringify(I.body)})}async deleteEntityByUid(I,c){const R=await this.discoveryApi.getBaseUrl(Ke),A="/entities/by-uid/{uid}",_=B.parse(A).expand({uid:I.path.uid});return await this.fetchApi.fetch(`${R}${_}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"DELETE"})}async deleteLocation(I,c){const R=await this.discoveryApi.getBaseUrl(Ke),A="/locations/{id}",_=B.parse(A).expand({id:I.path.id});return await this.fetchApi.fetch(`${R}${_}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"DELETE"})}async getEntities(I,c){const R=await this.discoveryApi.getBaseUrl(Ke),A="/entities{?fields,limit,filter*,offset,after,order*}",_=B.parse(A).expand({...I.query});return await this.fetchApi.fetch(`${R}${_}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"GET"})}async getEntitiesByQuery(I,c){const R=await this.discoveryApi.getBaseUrl(Ke),A="/entities/by-query{?fields,limit,orderField*,cursor,filter*,fullTextFilterTerm,fullTextFilterFields}",_=B.parse(A).expand({...I.query});return await this.fetchApi.fetch(`${R}${_}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"GET"})}async getEntitiesByRefs(I,c){const R=await this.discoveryApi.getBaseUrl(Ke),A="/entities/by-refs",_=B.parse(A).expand({});return await this.fetchApi.fetch(`${R}${_}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"POST",body:JSON.stringify(I.body)})}async getEntityAncestryByName(I,c){const R=await this.discoveryApi.getBaseUrl(Ke),A="/entities/by-name/{kind}/{namespace}/{name}/ancestry",_=B.parse(A).expand({kind:I.path.kind,namespace:I.path.namespace,name:I.path.name});return await this.fetchApi.fetch(`${R}${_}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"GET"})}async getEntityByName(I,c){const R=await this.discoveryApi.getBaseUrl(Ke),A="/entities/by-name/{kind}/{namespace}/{name}",_=B.parse(A).expand({kind:I.path.kind,namespace:I.path.namespace,name:I.path.name});return await this.fetchApi.fetch(`${R}${_}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"GET"})}async getEntityByUid(I,c){const R=await this.discoveryApi.getBaseUrl(Ke),A="/entities/by-uid/{uid}",_=B.parse(A).expand({uid:I.path.uid});return await this.fetchApi.fetch(`${R}${_}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"GET"})}async getEntityFacets(I,c){const R=await this.discoveryApi.getBaseUrl(Ke),A="/entity-facets{?facet*,filter*}",_=B.parse(A).expand({...I.query});return await this.fetchApi.fetch(`${R}${_}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"GET"})}async getLocation(I,c){const R=await this.discoveryApi.getBaseUrl(Ke),A="/locations/{id}",_=B.parse(A).expand({id:I.path.id});return await this.fetchApi.fetch(`${R}${_}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"GET"})}async getLocations(I,c){const R=await this.discoveryApi.getBaseUrl(Ke),A="/locations",_=B.parse(A).expand({});return await this.fetchApi.fetch(`${R}${_}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"GET"})}async refreshEntity(I,c){const R=await this.discoveryApi.getBaseUrl(Ke),A="/refresh",_=B.parse(A).expand({});return await this.fetchApi.fetch(`${R}${_}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"POST",body:JSON.stringify(I.body)})}async validateEntity(I,c){const R=await this.discoveryApi.getBaseUrl(Ke),A="/validate-entity",_=B.parse(A).expand({});return await this.fetchApi.fetch(`${R}${_}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"POST",body:JSON.stringify(I.body)})}}var G=Object.defineProperty,Ve=(Re,I,c)=>I in Re?G(Re,I,{enumerable:!0,configurable:!0,writable:!0,value:c}):Re[I]=c,he=(Re,I,c)=>(Ve(Re,typeof I!="symbol"?I+"":I,c),c);class _e{constructor(I){he(this,"apiClient"),this.apiClient=new ie(I)}async getEntityAncestors(I,c){return await this.requestRequired(await this.apiClient.getEntityAncestryByName({path:(0,o.KU)(I.entityRef)},c))}async getLocationById(I,c){return await this.requestOptional(await this.apiClient.getLocation({path:{id:I}},c))}async getEntities(I,c){const{filter:R=[],fields:A=[],order:_,offset:F,limit:Ae,after:fe}=I!=null?I:{},ve=[];if(_)for(const ee of[_].flat())ee&&ve.push(`${ee.order}:${ee.field}`);const J=await this.requestRequired(await this.apiClient.getEntities({query:{fields:A,limit:Ae,filter:this.getFilterValue(R),offset:F,after:fe,order:_?ve:void 0}},c)),v=(ee,oe)=>{var Rt,w;if(((Rt=ee.metadata)==null?void 0:Rt.name)===void 0||ee.kind===void 0||((w=oe.metadata)==null?void 0:w.name)===void 0||oe.kind===void 0)return 0;const sn=(0,o.U2)(ee),me=(0,o.U2)(oe);return sn<me?-1:sn>me?1:0};return{items:J.sort(v)}}async getEntitiesByRefs(I,c){const R=await this.apiClient.getEntitiesByRefs({body:I},c);if(!R.ok)throw await m.o3.fromResponse(R);const{items:A}=await R.json();return{items:A.map(_=>_!=null?_:void 0)}}async queryEntities(I={},c){var R,A;const _={};if(Ze(I)){const{fields:F=[],filter:Ae,limit:fe,orderFields:ve,fullTextFilter:J}=I;_.filter=this.getFilterValue(Ae),fe!==void 0&&(_.limit=fe),ve!==void 0&&(_.orderField=(Array.isArray(ve)?ve:[ve]).map(({field:ee,order:oe})=>`${ee},${oe}`)),F.length&&(_.fields=F);const v=(R=J==null?void 0:J.term)==null?void 0:R.trim();v&&(_.fullTextFilterTerm=v),(A=J==null?void 0:J.fields)!=null&&A.length&&(_.fullTextFilterFields=J.fields)}else{const{fields:F=[],limit:Ae,cursor:fe}=I;_.cursor=fe,Ae!==void 0&&(_.limit=Ae),F.length&&(_.fields=F)}return this.apiClient.getEntitiesByQuery({query:_},c).then(F=>F.json())}async getEntityByRef(I,c){return this.requestOptional(await this.apiClient.getEntityByName({path:(0,o.KU)(I)},c))}async getEntityByName(I,c){const{kind:R,namespace:A="default",name:_}=I;return this.requestOptional(await this.apiClient.getEntityByName({path:{kind:R,namespace:A,name:_}},c))}async refreshEntity(I,c){const R=await this.apiClient.refreshEntity({body:{entityRef:I}},c);if(R.status!==200)throw new Error(await R.text())}async getEntityFacets(I,c){const{filter:R=[],facets:A}=I;return await this.requestOptional(await this.apiClient.getEntityFacets({query:{facet:A,filter:this.getFilterValue(R)}},c))}async addLocation(I,c){const{type:R="url",target:A,dryRun:_}=I,F=await this.apiClient.createLocation({body:{type:R,target:A},query:{dryRun:_?"true":void 0}},c);if(F.status!==201)throw new Error(await F.text());const{location:Ae,entities:fe,exists:ve}=await F.json();if(!Ae)throw new Error(`Location wasn't added: ${A}`);return{location:Ae,entities:fe,exists:ve}}async getLocationByRef(I,c){return(await this.requestRequired(await this.apiClient.getLocations({},c))).map(A=>A.data).find(A=>I===(0,o.KL)(A))}async removeLocationById(I,c){await this.requestIgnored(await this.apiClient.deleteLocation({path:{id:I}},c))}async removeEntityByUid(I,c){await this.requestIgnored(await this.apiClient.deleteEntityByUid({path:{uid:I}},c))}async validateEntity(I,c,R){const A=await this.apiClient.validateEntity({body:{entity:I,location:c}},R);if(A.ok)return{valid:!0};if(A.status!==400)throw await m.o3.fromResponse(A);const{errors:_=[]}=await A.json();return{valid:!1,errors:_}}async requestIgnored(I){if(!I.ok)throw await m.o3.fromResponse(I)}async requestRequired(I){if(!I.ok)throw await m.o3.fromResponse(I);return I.json()}async requestOptional(I){if(!I.ok){if(I.status===404)return;throw await m.o3.fromResponse(I)}return await I.json()}getFilterValue(I=[]){const c=[];for(const R of[I].flat()){const A=[];for(const[_,F]of Object.entries(R))for(const Ae of[F].flat())Ae===k?A.push(_):typeof Ae=="string"&&A.push(`${_}=${Ae}`);A.length&&c.push(A.join(","))}return c}}const re="backstage.io/catalog-processing"},29835:($n,Zt,e)=>{"use strict";e.d(Zt,{Cr:()=>Xa,Eo:()=>Qa,Ey:()=>N,I4:()=>ja,IB:()=>ae,KL:()=>Ua,KU:()=>F,Kx:()=>Fe,L8:()=>at,P:()=>Ve,Qz:()=>gt,U2:()=>Ae,ZD:()=>q,_P:()=>G,aY:()=>yr,fO:()=>H,fT:()=>Je,jn:()=>wt,nC:()=>We,oQ:()=>ie,r2:()=>wa,sA:()=>un,sM:()=>_,tj:()=>pe,u0:()=>Pt,vv:()=>ue,yz:()=>se,zj:()=>dn,zu:()=>xt});var o=e(45250),m=e.n(o),p=e(11601),j=e.n(p);function B(Ge){return Ge.kind.toLocaleUpperCase("en-US")==="API"}function i(Ge){return Ge.kind.toLocaleUpperCase("en-US")==="COMPONENT"}function k(Ge){return Ge.kind.toLocaleUpperCase("en-US")==="DOMAIN"}function Ze(Ge){return Ge.kind.toLocaleUpperCase("en-US")==="GROUP"}function Ke(Ge){return Ge.kind.toLocaleUpperCase("en-US")==="LOCATION"}function a(Ge){return Ge.kind.toLocaleUpperCase("en-US")==="RESOURCE"}function De(Ge){return Ge.kind.toLocaleUpperCase("en-US")==="SYSTEM"}function Ie(Ge){return Ge.kind.toLocaleUpperCase("en-US")==="USER"}const ie="default",G="backstage.io/view-url",Ve="backstage.io/edit-url",he="kubernetes.io/api-server",_e="kubernetes.io/api-server-certificate-authority",re="kubernetes.io/auth-provider";var Re=Object.defineProperty,I=(Ge,X,it)=>X in Ge?Re(Ge,X,{enumerable:!0,configurable:!0,writable:!0,value:it}):Ge[X]=it,c=(Ge,X,it)=>(I(Ge,typeof X!="symbol"?X+"":X,it),it);class R{constructor(X=ie){c(this,"namespace"),this.namespace=X}async enforce(X){return X.metadata.namespace?X:lodash.merge({metadata:{namespace:this.namespace}},X)}}function A(Ge){let X=Ge.indexOf(":");const it=Ge.indexOf("/");it!==-1&&it<X&&(X=-1);const _n=X===-1?void 0:Ge.slice(0,X),xn=it===-1?void 0:Ge.slice(X+1,it),ea=Ge.slice(Math.max(X+1,it+1));if(_n===""||xn===""||ea==="")throw new TypeError(`Entity reference "${Ge}" was not on the form [<kind>:][<namespace>/]<name>`);return{kind:_n,namespace:xn,name:ea}}function _(Ge){return{kind:Ge.kind,namespace:Ge.metadata.namespace||ie,name:Ge.metadata.name}}function F(Ge,X){var it,_n,xn,ea;if(!Ge)throw new Error("Entity reference must not be empty");const ha=X==null?void 0:X.defaultKind,$a=(X==null?void 0:X.defaultNamespace)||ie;let Ka,va,xa;if(typeof Ge=="string"){const Da=A(Ge);Ka=(it=Da.kind)!=null?it:ha,va=(_n=Da.namespace)!=null?_n:$a,xa=Da.name}else Ka=(xn=Ge.kind)!=null?xn:ha,va=(ea=Ge.namespace)!=null?ea:$a,xa=Ge.name;if(Ka)if(va){if(!xa){const Da=JSON.stringify(Ge);throw new Error(`Entity reference ${Da} had missing or empty name`)}}else{const Da=JSON.stringify(Ge);throw new Error(`Entity reference ${Da} had missing or empty namespace`)}else{const Da=JSON.stringify(Ge);throw new Error(`Entity reference ${Da} had missing or empty kind (e.g. did not start with "component:" or similar)`)}return{kind:Ka,namespace:va,name:xa}}function Ae(Ge){var X,it;let _n,xn,ea;return"metadata"in Ge?(_n=Ge.kind,xn=(X=Ge.metadata.namespace)!=null?X:ie,ea=Ge.metadata.name):(_n=Ge.kind,xn=(it=Ge.namespace)!=null?it:ie,ea=Ge.name),`${_n.toLocaleLowerCase("en-US")}:${xn.toLocaleLowerCase("en-US")}/${ea.toLocaleLowerCase("en-US")}`}var fe=Object.defineProperty,ve=(Ge,X,it)=>X in Ge?fe(Ge,X,{enumerable:!0,configurable:!0,writable:!0,value:it}):Ge[X]=it,J=(Ge,X,it)=>(ve(Ge,typeof X!="symbol"?X+"":X,it),it);class v{constructor(X){J(this,"parentRef");const{kind:it,namespace:_n,name:xn}=F(X,{defaultKind:"Group",defaultNamespace:ie});if(it.toLocaleUpperCase("en-US")!=="GROUP")throw new TypeError("group parent must be a group");this.parentRef=Ae({kind:it,namespace:_n,name:xn})}async enforce(X){if(X.kind!=="Group")return X;const it=X;return it.spec.parent||Ae(it)!==this.parentRef&&(it.spec.parent=this.parentRef),it}}class ee{static isValidPrefixAndOrSuffix(X,it,_n,xn){if(typeof X!="string")return!1;const ea=X.split(it);return ea.length===1?xn(ea[0]):ea.length===2?_n(ea[0])&&xn(ea[1]):!1}static isJsonSafe(X){try{return m().isEqual(X,JSON.parse(JSON.stringify(X)))}catch{return!1}}static isValidDnsSubdomain(X){return typeof X=="string"&&X.length>=1&&X.length<=253&&X.split(".").every(ee.isValidDnsLabel)}static isValidDnsLabel(X){return typeof X=="string"&&X.length>=1&&X.length<=63&&/^[a-z0-9]+(?:\-+[a-z0-9]+)*$/.test(X)}static isValidTag(X){return typeof X=="string"&&X.length>=1&&X.length<=63&&/^[a-z0-9+#]+(\-[a-z0-9+#]+)*$/.test(X)}static isValidUrl(X){if(typeof X!="string")return!1;try{return new URL(X),!0}catch{return!1}}static isValidString(X){var it;return typeof X=="string"&&((it=X==null?void 0:X.trim())==null?void 0:it.length)>=1}static isNonEmptyString(X){var it;return typeof X=="string"&&((it=X==null?void 0:X.trim())==null?void 0:it.length)>=1}}var oe="http://json-schema.org/draft-07/schema",Rt="EntityEnvelope",w="The envelope skeleton parts of an entity - whatever is necessary to be able to give it a ref and pass to further validation / policy checking.",sn=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService"}}],me="object",kt=["apiVersion","kind","metadata"],yt=!0,mt={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{type:"object",required:["name"],additionalProperties:!0,properties:{name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1}}}},It={$schema:oe,$id:Rt,description:w,examples:sn,type:me,required:kt,additionalProperties:yt,properties:mt},Ne="http://json-schema.org/draft-07/schema",Ct="Entity",ot="The parts of the format that's common to all versions/kinds of entity.",zt=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],Tt="object",Kt=["apiVersion","kind","metadata"],lt=!1,ft={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{$ref:"EntityMeta"},spec:{type:"object",description:"The specification data describing the entity itself."},relations:{type:"array",description:"The relations that this entity has with other entities.",items:{$ref:"common#relation"}},status:{$ref:"common#status"}},$t={$schema:Ne,$id:Ct,description:ot,examples:zt,type:Tt,required:Kt,additionalProperties:lt,properties:ft},an="http://json-schema.org/draft-07/schema",St="EntityMeta",jt="Metadata fields common to all versions/kinds of entity.",D=[{uid:"e01199ab-08cc-44c2-8e19-5c29ded82521",etag:"lsndfkjsndfkjnsdfkjnsd==",name:"my-component-yay",namespace:"the-namespace",labels:{"backstage.io/custom":"ValueStuff"},annotations:{"example.com/bindings":"are-secret"},tags:["java","data"]}],U="object",O=["name"],M=!0,te={uid:{type:"string",description:"A globally unique ID for the entity. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, but the server is free to reject requests that do so in such a way that it breaks semantics.",examples:["e01199ab-08cc-44c2-8e19-5c29ded82521"],minLength:1},etag:{type:"string",description:"An opaque string that changes for each update operation to any part of the entity, including metadata. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, and the server will then reject the operation if it does not match the current stored value.",examples:["lsndfkjsndfkjnsdfkjnsd=="],minLength:1},name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1},title:{type:"string",description:"A display name of the entity, to be presented in user interfaces instead of the name property, when available.",examples:["React SSR Template"],minLength:1},description:{type:"string",description:"A short (typically relatively few words, on one line) description of the entity."},labels:{type:"object",description:"Key/value pairs of identifying information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},annotations:{type:"object",description:"Key/value pairs of non-identifying auxiliary information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},tags:{type:"array",description:"A list of single-valued strings, to for example classify catalog entities in various ways.",items:{type:"string",minLength:1}},links:{type:"array",description:"A list of external hyperlinks related to the entity. Links can provide additional contextual information that may be located outside of Backstage itself. For example, an admin dashboard or external CMS page.",items:{type:"object",required:["url"],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://admin.example-org.com"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["Admin Dashboard"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},type:{type:"string",description:"An optional value to categorize links into specific groups.",examples:["runbook","documentation","logs","dashboard"],minLength:1}}}}},ge={$schema:an,$id:St,description:jt,examples:D,type:U,required:O,additionalProperties:M,properties:te},ze="http://json-schema.org/draft-07/schema",bt="common",Qe="object",Mt="Common definitions to import from other schemas",rn={reference:{$id:"#reference",type:"object",description:"A reference by name to another entity.",required:["kind","namespace","name"],additionalProperties:!1,properties:{kind:{type:"string",description:"The kind field of the entity.",minLength:1},namespace:{type:"string",description:"The metadata.namespace field of the entity.",minLength:1},name:{type:"string",description:"The metadata.name field of the entity.",minLength:1}}},relation:{$id:"#relation",type:"object",description:"A directed relation from one entity to another.",required:["type","targetRef"],additionalProperties:!1,properties:{type:{type:"string",minLength:1,pattern:"^\\w+$",description:"The type of relation."},target:{$ref:"#reference",deprecated:!0},targetRef:{type:"string",minLength:1,description:"The entity ref of the target of this relation."}}},status:{$id:"#status",type:"object",description:"The current status of the entity, as claimed by various sources.",required:[],additionalProperties:!0,properties:{items:{type:"array",items:{$ref:"#statusItem"}}}},statusItem:{$id:"#statusItem",type:"object",description:"A specific status item on a well known format.",required:["type","level","message"],additionalProperties:!0,properties:{type:{type:"string",minLength:1},level:{$ref:"#statusLevel",description:"The status level / severity of the status item."},message:{type:"string",description:"A brief message describing the status, intended for human consumption."},error:{$ref:"#error",description:"An optional serialized error object related to the status."}}},statusLevel:{$id:"#statusLevel",type:"string",description:"A status level / severity.",enum:["info","warning","error"]},error:{$id:"#error",type:"object",description:"A serialized error object.",required:["name","message"],additionalProperties:!0,properties:{name:{type:"string",examples:["Error","InputError"],description:"The type name of the error",minLength:1},message:{type:"string",description:"The message of the error"},code:{type:"string",description:"An error code associated with the error"},stack:{type:"string",description:"An error stack trace"}}}},Ft={$schema:ze,$id:bt,type:Qe,description:Mt,definitions:rn};const Et=new Map,we=[It,$t,ge,Ft];function nt(Ge){if(!(Ge!=null&&Ge.length))throw new TypeError("Unknown error");const X=Ge[0];throw new TypeError(`${X.instancePath||"<root>"} ${X.message}${X.params?` - ${Object.entries(X.params).map(([it,_n])=>`${it}: ${_n}`).join(", ")}`:""}`)}function Lt(Ge,X={}){var it;const _n=(it=X==null?void 0:X.disableCache)!=null?it:!1,xn=_n?"":JSON.stringify(Ge);if(!_n){const Ka=Et.get(xn);if(Ka)return Ka}const ea=Wt(Ge),ha=new(j())({allowUnionTypes:!0,allErrors:!0,validateSchema:!0});ea.length&&ha.addSchema(ea,void 0,void 0,!0);const $a=ha.compile(Ge);return _n||Et.set(xn,$a),$a}function Wt(Ge){if(typeof Ge!="object")return[];const X=new Set;Ge.$id&&X.add(Ge.$id);const it=new Array,_n=[Ge];for(;_n.length;){const xn=_n.pop();for(const ea of le(xn))if(!X.has(ea)){X.add(ea);const ha=we.find($a=>$a.$id===ea);ha&&(it.push(ha),_n.push(ha))}}return it}function*le(Ge){const X=[Ge];for(;X.length;){const it=X.pop();if(typeof it=="object"&&it)for(const[_n,xn]of Object.entries(it))_n==="$ref"&&typeof xn=="string"?yield xn.split("#")[0]:X.push(xn)}}function $e(Ge){const X=Lt(Ge||It);return it=>{if(X(it)===!0)return it;throw nt(X.errors)}}function xt(Ge){const X=Lt(Ge);return it=>{var _n;if(X(it)===!0)return it;const ea=(_n=X.errors)==null?void 0:_n.filter(ha=>["/kind","/apiVersion"].includes(ha.instancePath));if(ea!=null&&ea.length&&ea.every(ha=>ha.keyword==="enum"))return!1;throw nt(X.errors)}}function Yt(Ge){const X=Lt(Ge||$t);return it=>{if(X(it)===!0)return it;throw nt(X.errors)}}class se{static isValidApiVersion(X){return ee.isValidPrefixAndOrSuffix(X,"/",ee.isValidDnsSubdomain,it=>it.length>=1&&it.length<=63&&/^[a-z0-9A-Z]+$/.test(it))}static isValidKind(X){return typeof X=="string"&&X.length>=1&&X.length<=63&&/^[a-zA-Z][a-z0-9A-Z]*$/.test(X)}static isValidObjectName(X){return typeof X=="string"&&X.length>=1&&X.length<=63&&/^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(X)}static isValidNamespace(X){return ee.isValidDnsLabel(X)}static isValidLabelKey(X){return ee.isValidPrefixAndOrSuffix(X,"/",ee.isValidDnsSubdomain,se.isValidObjectName)}static isValidLabelValue(X){return X===""||se.isValidObjectName(X)}static isValidAnnotationKey(X){return ee.isValidPrefixAndOrSuffix(X,"/",ee.isValidDnsSubdomain,se.isValidObjectName)}static isValidAnnotationValue(X){return typeof X=="string"}}const ke={isValidApiVersion:se.isValidApiVersion,isValidKind:se.isValidKind,isValidEntityName:se.isValidObjectName,isValidNamespace:se.isValidNamespace,isValidLabelKey:se.isValidLabelKey,isValidLabelValue:se.isValidLabelValue,isValidAnnotationKey:se.isValidAnnotationKey,isValidAnnotationValue:se.isValidAnnotationValue,isValidTag:Ge=>typeof Ge=="string"&&Ge.length>=1&&Ge.length<=63&&/^[a-z0-9:+#]+(\-[a-z0-9:+#]+)*$/.test(Ge)};function pe(Ge={}){return{...ke,...Ge}}var Le=Object.defineProperty,et=(Ge,X,it)=>X in Ge?Le(Ge,X,{enumerable:!0,configurable:!0,writable:!0,value:it}):Ge[X]=it,pt=(Ge,X,it)=>(et(Ge,typeof X!="symbol"?X+"":X,it),it);class Bt{constructor(X=pe()){pt(this,"validators"),this.validators=X}async enforce(X){var it,_n,xn,ea,ha,$a,Ka;function va(h,l,y){if(l==null)throw new Error(`${h} must have a value`);let z;try{z=y(l)}catch(Oe){throw new Error(`${h} could not be validated, ${Oe}`)}if(!z){let Oe;switch(y.name){case"isValidLabelValue":case"isValidObjectName":Oe="a string that is sequences of [a-zA-Z0-9] separated by any of [-_.], at most 63 characters in total";break;case"isValidLabelKey":case"isValidApiVersion":case"isValidAnnotationKey":Oe="a valid prefix and/or suffix";break;case"isValidNamespace":case"isValidDnsLabel":Oe="a string that is sequences of [a-z0-9] separated by [-], at most 63 characters in total";break;case"isValidTag":Oe="a string that is sequences of [a-z0-9+#] separated by [-], at most 63 characters in total";break;case"isValidAnnotationValue":Oe="a string";break;case"isValidKind":Oe="a string that is a sequence of [a-zA-Z][a-z0-9A-Z], at most 63 characters in total";break;case"isValidUrl":Oe="a string that is a valid url";break;case"isValidString":case"isNonEmptyString":Oe="a non empty string";break;default:Oe=void 0;break}const st=Oe?` expected ${Oe} but found "${l}".`:"";throw new Error(`"${h}" is not valid;${st} To learn more about catalog file format, visit: https://github.com/backstage/backstage/blob/master/docs/architecture-decisions/adr002-default-catalog-file-format.md`)}}function xa(h,l,y){return l===void 0||va(h,l,y)}va("apiVersion",X.apiVersion,this.validators.isValidApiVersion),va("kind",X.kind,this.validators.isValidKind),va("metadata.name",X.metadata.name,this.validators.isValidEntityName),xa("metadata.namespace",X.metadata.namespace,this.validators.isValidNamespace);for(const[h,l]of Object.entries((it=X.metadata.labels)!=null?it:[]))va(`labels.${h}`,h,this.validators.isValidLabelKey),va(`labels.${h}`,l,this.validators.isValidLabelValue);for(const[h,l]of Object.entries((_n=X.metadata.annotations)!=null?_n:[]))va(`annotations.${h}`,h,this.validators.isValidAnnotationKey),va(`annotations.${h}`,l,this.validators.isValidAnnotationValue);const Da=(xn=X.metadata.tags)!=null?xn:[];for(let h=0;h<Da.length;++h)va(`tags.${h}`,Da[h],this.validators.isValidTag);const er=(ea=X.metadata.links)!=null?ea:[];for(let h=0;h<er.length;++h)va(`links.${h}.url`,(ha=er[h])==null?void 0:ha.url,ee.isValidUrl),xa(`links.${h}.title`,($a=er[h])==null?void 0:$a.title,ee.isNonEmptyString),xa(`links.${h}.icon`,(Ka=er[h])==null?void 0:Ka.icon,se.isValidObjectName);return X}}var en=Object.defineProperty,Ce=(Ge,X,it)=>X in Ge?en(Ge,X,{enumerable:!0,configurable:!0,writable:!0,value:it}):Ge[X]=it,Be=(Ge,X,it)=>(Ce(Ge,typeof X!="symbol"?X+"":X,it),it);const C=null;class W{constructor(X=C){Be(this,"knownFields"),this.knownFields=X}async enforce(X){for(const it of Object.keys(X))if(!this.knownFields.includes(it))throw new Error(`Unknown field ${it}`);return X}}var Q=Object.defineProperty,rt=(Ge,X,it)=>X in Ge?Q(Ge,X,{enumerable:!0,configurable:!0,writable:!0,value:it}):Ge[X]=it,ct=(Ge,X,it)=>(rt(Ge,typeof X!="symbol"?X+"":X,it),it);class ut{constructor(){ct(this,"validate")}async enforce(X){if(!this.validate){const xn=new Ajv({allowUnionTypes:!0});this.validate=xn.addSchema([Ft,ge],void 0,void 0,!0).compile($t)}if(this.validate(X)===!0)return X;const[_n]=this.validate.errors||[];throw _n?new Error(`Malformed envelope, ${_n.instancePath||"<root>"} ${_n.message}`):new Error("Malformed envelope, Unknown error")}}class tn{constructor(X){this.policies=X}async enforce(X){let it=X;for(const _n of this.policies){const xn=await _n.enforce(it);if(!xn)throw new Error(`Policy ${_n.constructor.name} did not return a result`);it=xn}return it}}class mn{constructor(X){this.policies=X}async enforce(X){for(const it of this.policies){const _n=await it.enforce(X);if(_n)return _n}throw new Error("The entity did not match any known policy")}}const Cn={allOf(Ge){return new tn(Ge)},oneOf(Ge){return new mn(Ge)}};var An="http://json-schema.org/draft-07/schema",Gn="ApiV1alpha1",Mn="An API describes an interface that can be exposed by a component. The API can be defined in different formats, like OpenAPI, AsyncAPI, GraphQL, gRPC, or other formats.",Wn=[{apiVersion:"backstage.io/v1alpha1",kind:"API",metadata:{name:"artist-api",description:"Retrieve artist details",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"openapi",lifecycle:"production",owner:"artist-relations-team",system:"artist-engagement-portal",definition:`openapi: "3.0.0"
info:...`}}],P=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["API"]},spec:{type:"object",required:["type","lifecycle","owner","definition"],properties:{type:{type:"string",description:"The type of the API definition.",examples:["openapi","asyncapi","graphql","grpc","trpc"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the API.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the API.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the API belongs to.",minLength:1},definition:{type:"string",description:"The definition of the API, based on the format defined by the type.",minLength:1}}}}}],K={$schema:An,$id:Gn,description:Mn,examples:Wn,allOf:P};function be(Ge){let X;return{async check(it){return X||(X=xt(Ge)),X(it)===it}}}const vt=be(K);var Ot="http://json-schema.org/draft-07/schema",Vt="ComponentV1alpha1",ne='A Component describes a software component. It is typically intimately linked to the source code that constitutes the component, and should be what a developer may regard a "unit of software", usually with a distinct deployable or linkable artifact.',Pe=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],je=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Component"]},spec:{type:"object",required:["type","lifecycle","owner"],properties:{type:{type:"string",description:"The type of component.",examples:["service","website","library"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the component.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the component belongs to.",minLength:1},subcomponentOf:{type:"string",description:"An entity reference to another component of which the component is a part.",minLength:1},providesApis:{type:"array",description:"An array of entity references to the APIs that are provided by the component.",items:{type:"string",minLength:1}},consumesApis:{type:"array",description:"An array of entity references to the APIs that are consumed by the component.",items:{type:"string",minLength:1}},dependsOn:{type:"array",description:"An array of references to other entities that the component depends on to function.",items:{type:"string",minLength:1}}}}}}],Jt={$schema:Ot,$id:Vt,description:ne,examples:Pe,allOf:je};const qt=be(Jt);var cn="http://json-schema.org/draft-07/schema",on="DomainV1alpha1",wn="A Domain groups a collection of systems that share terminology, domain models, business purpose, or documentation, i.e. form a bounded context.",Kn=[{apiVersion:"backstage.io/v1alpha1",kind:"Domain",metadata:{name:"artists",description:"Everything about artists"},spec:{owner:"artist-relations-team"}}],Yn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Domain"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1}}}}}],oa={$schema:cn,$id:on,description:wn,examples:Kn,allOf:Yn};const vn=be(oa);var ra="http://json-schema.org/draft-07/schema",ia="GroupV1alpha1",na="A group describes an organizational entity, such as for example a team, a business unit, or a loose collection of people in an interest group. Members of these groups are modeled in the catalog as kind User.",da=[{apiVersion:"backstage.io/v1alpha1",kind:"Group",metadata:{name:"infrastructure",description:"The infra business unit"},spec:{type:"business-unit",profile:{displayName:"Infrastructure",email:"infrastructure@example.com",picture:"https://example.com/groups/bu-infrastructure.jpeg"},parent:"ops",children:["backstage","other"]}}],_a=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Group"]},spec:{type:"object",required:["type","children"],properties:{type:{type:"string",description:"The type of group. There is currently no enforced set of values for this field, so it is left up to the adopting organization to choose a nomenclature that matches their org hierarchy.",examples:["team","business-unit","product-area","root"],minLength:1},profile:{type:"object",description:"Optional profile information about the group, mainly for display purposes. All fields of this structure are also optional. The email would be a group email of some form, that the group may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the group, and that a browser could fetch and render on a group page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Infrastructure"],minLength:1},email:{type:"string",description:"An email where this entity can be reached.",examples:["infrastructure@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this entity.",examples:["https://example.com/groups/bu-infrastructure.jpeg"],minLength:1}}},parent:{type:"string",description:"The immediate parent group in the hierarchy, if any. Not all groups must have a parent; the catalog supports multi-root hierarchies. Groups may however not have more than one parent. This field is an entity reference.",examples:["ops"],minLength:1},children:{type:"array",description:"The immediate child groups of this group in the hierarchy (whose parent field points to this group). The list must be present, but may be empty if there are no child groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["backstage","other"],minLength:1}},members:{type:"array",description:"The users that are members of this group. The entries of this array are entity references.",items:{type:"string",examples:["jdoe"],minLength:1}}}}}}],qn={$schema:ra,$id:ia,description:na,examples:da,allOf:_a};const Ea=be(qn);var Z="http://json-schema.org/draft-07/schema",Ue="LocationV1alpha1",tt="A location is a marker that references other places to look for catalog data.",ht=[{apiVersion:"backstage.io/v1alpha1",kind:"Location",metadata:{name:"org-data"},spec:{type:"url",targets:["http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-consultants.yaml"]}}],Se=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Location"]},spec:{type:"object",required:[],properties:{type:{type:"string",description:"The single location type, that's common to the targets specified in the spec. If it is left out, it is inherited from the location type that originally read the entity data.",examples:["url"],minLength:1},target:{type:"string",description:"A single target as a string. Can be either an absolute path/URL (depending on the type), or a relative path such as ./details/catalog-info.yaml which is resolved relative to the location of this Location entity itself.",examples:["./details/catalog-info.yaml"],minLength:1},targets:{type:"array",description:"A list of targets as strings. They can all be either absolute paths/URLs (depending on the type), or relative paths such as ./details/catalog-info.yaml which are resolved relative to the location of this Location entity itself.",items:{type:"string",examples:["./details/catalog-info.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml"],minLength:1}},presence:{type:"string",description:"Whether the presence of the location target is required and it should be considered an error if it can not be found",default:"required",examples:["required"],enum:["required","optional"]}}}}}],Y={$schema:Z,$id:Ue,description:tt,examples:ht,allOf:Se};const Ee=be(Y),ue="ownedBy",at="ownerOf",N="consumesApi",H="apiConsumedBy",q="providesApi",ae="apiProvidedBy",We="dependsOn",Je="dependencyOf",Fe="parentOf",gt="childOf",Pt="memberOf",dn="hasMember",wt="partOf",un="hasPart";var gn="http://json-schema.org/draft-07/schema",En="ResourceV1alpha1",Nn="A resource describes the infrastructure a system needs to operate, like BigTable databases, Pub/Sub topics, S3 buckets or CDNs. Modelling them together with components and systems allows to visualize resource footprint, and create tooling around them.",On=[{apiVersion:"backstage.io/v1alpha1",kind:"Resource",metadata:{name:"artists-db",description:"Stores artist details"},spec:{type:"database",owner:"artist-relations-team",system:"artist-engagement-portal"}}],Ln=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Resource"]},spec:{type:"object",required:["type","owner"],properties:{type:{type:"string",description:"The type of resource.",examples:["database","s3-bucket","cluster"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the resource.",examples:["artist-relations-team","user:john.johnson"],minLength:1},dependsOn:{type:"array",description:"An array of references to other entities that the resource depends on to function.",items:{type:"string",minLength:1}},system:{type:"string",description:"An entity reference to the system that the resource belongs to.",minLength:1}}}}}],Sn={$schema:gn,$id:En,description:Nn,examples:On,allOf:Ln};const In=be(Sn);var pn="http://json-schema.org/draft-07/schema",yn="SystemV1alpha1",aa="A system is a collection of resources and components. The system may expose or consume one or several APIs. It is viewed as abstraction level that provides potential consumers insights into exposed features without needing a too detailed view into the details of all components. This also gives the owning team the possibility to decide about published artifacts and APIs.",sa=[{apiVersion:"backstage.io/v1alpha1",kind:"System",metadata:{name:"artist-engagement-portal",description:"Handy tools to keep artists in the loop"},spec:{owner:"artist-relations-team",domain:"artists"}}],ba=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["System"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},domain:{type:"string",description:"An entity reference to the domain that the system belongs to.",examples:["artists"],minLength:1}}}}}],Ca={$schema:pn,$id:yn,description:aa,examples:sa,allOf:ba};const Na=be(Ca);var Fa="http://json-schema.org/draft-07/schema",La="UserV1alpha1",Pa="A user describes a person, such as an employee, a contractor, or similar. Users belong to Group entities in the catalog. These catalog user entries are connected to the way that authentication within the Backstage ecosystem works. See the auth section of the docs for a discussion of these concepts.",za=[{apiVersion:"backstage.io/v1alpha1",kind:"User",metadata:{name:"jdoe"},spec:{profile:{displayName:"Jenny Doe",email:"jenny-doe@example.com",picture:"https://example.com/staff/jenny-with-party-hat.jpeg"},memberOf:["team-b","employees"]}}],Ya=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["User"]},spec:{type:"object",required:["memberOf"],properties:{profile:{type:"object",description:"Optional profile information about the user, mainly for display purposes. All fields of this structure are also optional. The email would be a primary email of some form, that the user may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the user, and that a browser could fetch and render on a profile page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Jenny Doe"],minLength:1},email:{type:"string",description:"An email where this user can be reached.",examples:["jenny-doe@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this user.",examples:["https://example.com/staff/jenny-with-party-hat.jpeg"],minLength:1}}},memberOf:{type:"array",description:"The list of groups that the user is a direct member of (i.e., no transitive memberships are listed here). The list must be present, but may be empty if the user is not member of any groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["team-b","employees"],minLength:1}}}}}}],Ja={$schema:Fa,$id:La,description:Pa,examples:za,allOf:Ya};const lr=be(Ja),Qa="backstage.io/managed-by-location",wa="backstage.io/managed-by-origin-location",ja="backstage.io/source-location",Ga=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i;function yr(Ge){if(typeof Ge!="string")throw new TypeError(`Unable to parse location ref '${Ge}', unexpected argument ${typeof Ge}`);const X=Ge.indexOf(":");if(X<0)throw new TypeError(`Unable to parse location ref '${Ge}', expected '<type>:<target>', e.g. 'url:https://host/path'`);const it=Ge.substring(0,X).trim(),_n=Ge.substring(X+1).trim();if(!it||!_n)throw new TypeError(`Unable to parse location ref '${Ge}', expected '<type>:<target>', e.g. 'url:https://host/path'`);if(it==="http"||it==="https")throw new TypeError(`Invalid location ref '${Ge}', please prefix it with 'url:', e.g. 'url:${Ge}'`);if(Ga.test(_n))throw new TypeError(`Invalid location ref '${Ge}', target is a javascript: URL`);return{type:it,target:_n}}function Ua(Ge){const{type:X,target:it}=Ge;if(X){if(!it)throw new TypeError("Unable to stringify location ref, empty target")}else throw new TypeError("Unable to stringify location ref, empty type");if(Ga.test(it))throw new TypeError(`Invalid location ref '${X}:${it}', target is a javascript: URL`);return`${X}:${it}`}function Xa(Ge){var X,it,_n,xn,ea;const ha=(ea=(it=(X=Ge.metadata)==null?void 0:X.annotations)==null?void 0:it[ja])!=null?ea:(xn=(_n=Ge.metadata)==null?void 0:_n.annotations)==null?void 0:xn[Qa];if(!ha)throw new Error(`Entity '${Ae(Ge)}' is missing location`);return yr(ha)}},12082:($n,Zt,e)=>{"use strict";e.d(Zt,{$K:()=>_a,Lz:()=>it,l2:()=>ra,Ke:()=>Kn,l9:()=>oa,i3:()=>at,Fb:()=>ae,W:()=>Sn,iO:()=>_o,Qf:()=>rt,WW:()=>ut,kF:()=>Cn,n5:()=>je,R8:()=>Ea,aQ:()=>La,gE:()=>Wn,kI:()=>on,u_:()=>We,Yi:()=>Ee,gu:()=>Qa,FA:()=>wt,Z8:()=>Uo});var o=e(14041),m=e(39067),p=e.n(m),j=e(97388),B=e(96403),i=e.n(B),k=e(7877),Ze=e(11638),Ke=e(46195),a=e(46108),De=e.n(a),Ie=e(48875),ie=e.n(Ie);const G=null;function Ve(d,n){let s,f=!1;const T={};try{s=n!=null&&n.key?d.getConfig(n.key):d;for(const ye of G){const Xe=s.getOptionalNumber(ye);Xe!==void 0&&(T[ye]=Xe,f=!0)}}catch(ye){throw new InputError(`Failed to read duration from config, ${ye}`)}try{if(!f){const Xe=G.map(qe=>`'${qe}'`).join(", ");throw new Error(`Needs one or more of ${Xe}`)}const ye=s.keys().filter(Xe=>!G.includes(Xe));if(ye.length){const Xe=ye.length===1?"property":"properties",qe=ye.map(Xt=>`'${Xt}'`).join(", "),Ut=G.map(Xt=>`'${Xt}'`).join(", ");throw new Error(`Unknown ${Xe} ${qe}; expected one or more of ${Ut}`)}}catch(ye){let Xe="Failed to read duration from config";throw n!=null&&n.key&&(Xe+=` at '${n.key}'`),new InputError(`${Xe}, ${ye}`)}return T}var he=Object.defineProperty,_e=(d,n,s)=>n in d?he(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,re=(d,n,s)=>(_e(d,typeof n!="symbol"?n+"":n,s),s);const Re=/^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;function I(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)}function c(d){if(d===null)return"null";if(Array.isArray(d))return"array";const n=typeof d;return n==="number"&&isNaN(d)?"nan":n==="string"&&d===""?"empty-string":n}const R={type(d,n,s,f){return`Invalid type in config for key '${d}' in '${n}', got ${s}, wanted ${f}`},missing(d){return`Missing required config value at '${d}'`},convert(d,n,s){return`Unable to convert config value for key '${d}' in '${n}' to a ${s}`}};class A{constructor(n,s="mock-config",f,T=""){this.data=n,this.context=s,this.fallback=f,this.prefix=T,re(this,"filteredKeys"),re(this,"notifiedFilteredKeys",new Set)}static fromConfigs(n){return n.length===0?new A(void 0):n.reduce((s,{data:f,context:T,filteredKeys:ye,deprecatedKeys:Xe})=>{const qe=new A(f,T,s);if(qe.filteredKeys=ye,Xe)for(const{key:Ut,description:Xt}of Xe)console.warn(`The configuration key '${Ut}' of ${T} is deprecated and may be removed soon. ${Xt||""}`);return qe},void 0)}has(n){var s,f;return this.readValue(n)!==void 0?!0:(f=(s=this.fallback)==null?void 0:s.has(n))!=null?f:!1}keys(){var n,s;const f=this.data?Object.keys(this.data):[],T=(s=(n=this.fallback)==null?void 0:n.keys())!=null?s:[];return[...new Set([...f,...T])]}get(n){const s=this.getOptional(n);if(s===void 0)throw new Error(R.missing(this.fullKey(n!=null?n:"")));return s}getOptional(n){var s,f;const T=De()(this.readValue(n)),ye=(s=this.fallback)==null?void 0:s.getOptional(n);return T===void 0?ye:ye===void 0?T:ie()({},{value:ye},{value:T},(Xe,qe)=>!I(qe)||!I(Xe)?qe:void 0).value}getConfig(n){const s=this.getOptionalConfig(n);if(s===void 0)throw new Error(R.missing(this.fullKey(n)));return s}getOptionalConfig(n){var s;const f=this.readValue(n),T=(s=this.fallback)==null?void 0:s.getOptionalConfig(n);if(I(f))return this.copy(f,n,T);if(f!==void 0)throw new TypeError(R.type(this.fullKey(n),this.context,c(f),"object"));return T}getConfigArray(n){const s=this.getOptionalConfigArray(n);if(s===void 0)throw new Error(R.missing(this.fullKey(n)));return s}getOptionalConfigArray(n){var s;const f=this.readConfigValue(n,T=>{if(!Array.isArray(T))return{expected:"object-array"};for(const[ye,Xe]of T.entries())if(!I(Xe))return{expected:"object-array",value:Xe,key:`${n}[${ye}]`};return!0});if(f)return f.map((T,ye)=>this.copy(T,`${n}[${ye}]`))}getNumber(n){const s=this.getOptionalNumber(n);if(s===void 0)throw new Error(R.missing(this.fullKey(n)));return s}getOptionalNumber(n){const s=this.readConfigValue(n,T=>typeof T=="number"||typeof T=="string"||{expected:"number"});if(typeof s=="number"||s===void 0)return s;const f=Number(s);if(!Number.isFinite(f))throw new Error(R.convert(this.fullKey(n),this.context,"number"));return f}getBoolean(n){const s=this.getOptionalBoolean(n);if(s===void 0)throw new Error(R.missing(this.fullKey(n)));return s}getOptionalBoolean(n){const s=this.readConfigValue(n,T=>typeof T=="boolean"||typeof T=="number"||typeof T=="string"||{expected:"boolean"});if(typeof s=="boolean"||s===void 0)return s;const f=String(s).trim();if(/^(?:y|yes|true|1|on)$/i.test(f))return!0;if(/^(?:n|no|false|0|off)$/i.test(f))return!1;throw new Error(R.convert(this.fullKey(n),this.context,"boolean"))}getString(n){const s=this.getOptionalString(n);if(s===void 0)throw new Error(R.missing(this.fullKey(n)));return s}getOptionalString(n){return this.readConfigValue(n,s=>typeof s=="string"&&s!==""||{expected:"string"})}getStringArray(n){const s=this.getOptionalStringArray(n);if(s===void 0)throw new Error(R.missing(this.fullKey(n)));return s}getOptionalStringArray(n){return this.readConfigValue(n,s=>{if(!Array.isArray(s))return{expected:"string-array"};for(const[f,T]of s.entries())if(typeof T!="string"||T==="")return{expected:"string-array",value:T,key:`${n}[${f}]`};return!0})}fullKey(n){return`${this.prefix}${this.prefix?".":""}${n}`}copy(n,s,f){const T=new A(n,this.context,f,this.fullKey(s));return T.filteredKeys=this.filteredKeys,T}readConfigValue(n,s){var f,T;const ye=this.readValue(n);if(ye===void 0)return(T=this.fallback)==null?void 0:T.readConfigValue(n,s);const Xe=s(ye);if(Xe!==!0){const{key:qe=n,value:Ut=ye,expected:Xt}=Xe;throw new TypeError(R.type(this.fullKey(qe),this.context,c(Ut),Xt))}return ye}readValue(n){const s=n?n.split("."):[];for(const T of s)if(!Re.test(T))throw new TypeError(`Invalid config key '${n}'`);if(this.data===void 0)return;let f=this.data;for(const[T,ye]of s.entries())if(I(f))f=f[ye];else if(f!==void 0){const Xe=this.fullKey(s.slice(0,T).join("."));throw new TypeError(R.type(Xe,this.context,c(f),"object"))}return f}}var _=e(18690),F=e(21613),Ae=e(91638),fe=e(59294),ve=e(46155),J=e.n(ve),v=e(45145),ee=e(47304),oe=Object.defineProperty,Rt=(d,n,s)=>n in d?oe(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,w=(d,n,s)=>(Rt(d,typeof n!="symbol"?n+"":n,s),s);class sn{constructor(...n){w(this,"holders"),this.holders=n}get(n){for(const s of this.holders){const f=s.get(n);if(f)return f}}}const me=(0,j.tK)("api-context"),kt=d=>{var n;const{apis:s,children:f}=d,T=(n=(0,o.useContext)(me))==null?void 0:n.atVersion(1),ye=T?new sn(s,T):s;return o.createElement(me.Provider,{value:(0,j.Bl)({1:ye}),children:f})};kt.propTypes={apis:p().shape({get:p().func.isRequired}).isRequired,children:p().node};var yt=Object.defineProperty,mt=(d,n,s)=>n in d?yt(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,It=(d,n,s)=>(mt(d,typeof n!="symbol"?n+"":n,s),s);class Ne{constructor(n){this.factories=n,It(this,"apis",new Map)}static validateFactories(n,s){for(const f of s){const T=[f],ye=new Set;for(;T.length;){const Xe=T.shift(),qe=n.get(Xe);if(qe)for(const Ut of Object.values(qe.deps)){if(Ut.id===f.id)throw new Error(`Circular dependency of api factory for ${f}`);ye.has(Ut)||(ye.add(Ut),T.push(Ut))}}}}get(n){return this.load(n)}load(n,s=[]){const f=this.apis.get(n.id);if(f)return f;const T=this.factories.get(n);if(!T)return;if(s.includes(T.api))throw new Error(`Circular dependency of api factory for ${T.api}`);const ye=this.loadDeps(n,T.deps,[...s,T.api]),Xe=T.factory(ye);return this.apis.set(n.id,Xe),Xe}loadDeps(n,s,f){const T={};for(const ye in s)if(s.hasOwnProperty(ye)){const Xe=s[ye],qe=this.load(Xe,f);if(!qe)throw new Error(`No API factory available for dependency ${Xe} of dependent ${n}`);T[ye]=qe}return T}}var Ct=Object.defineProperty,ot=(d,n,s)=>n in d?Ct(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,zt=(d,n,s)=>(ot(d,typeof n!="symbol"?n+"":n,s),s),Tt=(d=>(d[d.default=10]="default",d[d.app=50]="app",d[d.static=100]="static",d))(Tt||{});class Kt{constructor(){zt(this,"factories",new Map)}register(n,s){const f=Tt[n],T=this.factories.get(s.api.id);return T&&T.priority>=f?!1:(this.factories.set(s.api.id,{priority:f,factory:s}),!0)}get(n){const s=this.factories.get(n.id);if(s)return s.factory}getAllApis(){const n=new Set;for(const{factory:s}of this.factories.values())n.add(s.api);return n}}function lt(d){return new Promise((n,s)=>{const f=d.width||500,T=d.height||700,ye=window.screen.width/2-f/2,Xe=window.screen.height/2-T/2,qe=window.open(d.url,d.name,`menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${f},height=${T},top=${Xe},left=${ye}`);let Ut="";if(!qe||typeof qe.closed=="undefined"||qe.closed){const Tn=new Error("Failed to open auth popup.");Tn.name="PopupRejectedError",s(Tn);return}const Xt=Tn=>{if(Tn.source!==qe||Tn.origin!==d.origin)return;const{data:la}=Tn;if(la.type==="config_info"){Ut=la.targetOrigin;return}if(la.type!=="authorization_response")return;const jn=la;if("error"in jn){const ca=new Error(jn.error.message);ca.name=jn.error.name,s(ca)}else n(jn.response);kn()},Vn=setInterval(()=>{if(qe.closed){const Tn=`Login failed, ${Ut&&Ut!==window.location.origin?`Incorrect app origin, expected ${Ut}`:"popup was closed"}`,la=new Error(Tn);la.name="PopupClosedError",s(la),kn()}},100);function kn(){window.removeEventListener("message",Xt),clearInterval(Vn)}window.addEventListener("message",Xt)})}var ft=Object.defineProperty,$t=(d,n,s)=>n in d?ft(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,an=(d,n,s)=>($t(d,typeof n!="symbol"?n+"":n,s),s);let St=!1;function jt(d){return[...d].join(" ")}class D{constructor(n){an(this,"discoveryApi"),an(this,"environment"),an(this,"provider"),an(this,"joinScopesFunc"),an(this,"authRequester"),an(this,"sessionTransform"),an(this,"enableExperimentalRedirectFlow"),an(this,"popupOptions");var s;const{configApi:f,discoveryApi:T,environment:ye,provider:Xe,joinScopes:qe=jt,oauthRequestApi:Ut,sessionTransform:Xt=kn=>kn,popupOptions:Vn}=n;!St&&!f&&(console.warn("DEPRECATION WARNING: Authentication providers require a configApi instance to configure the authentication flow. Please provide one to the authentication provider constructor."),St=!0),this.enableExperimentalRedirectFlow=f&&(s=f.getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?s:!1,this.authRequester=Ut.createAuthRequester({provider:Xe,onAuthRequest:async kn=>this.enableExperimentalRedirectFlow?this.executeRedirect(kn):this.showPopup(kn)}),this.discoveryApi=T,this.environment=ye,this.provider=Xe,this.joinScopesFunc=qe,this.sessionTransform=Xt,this.popupOptions=Vn}async createSession(n){return n.instantPopup?this.enableExperimentalRedirectFlow?this.executeRedirect(n.scopes):this.showPopup(n.scopes):this.authRequester(n.scopes)}async refreshSession(n){const s=await fetch(await this.buildUrl("/refresh",{optional:!0,...n&&{scope:this.joinScopesFunc(n)}}),{headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(T=>{throw new Error(`Auth refresh request failed, ${T}`)});if(!s.ok){const T=new Error(`Auth refresh request failed, ${s.statusText}`);throw T.status=s.status,T}const f=await s.json();if(f.error){const T=new Error(f.error.message);throw f.error.name&&(T.name=f.error.name),T}return await this.sessionTransform(f)}async removeSession(){const n=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(s=>{throw new Error(`Logout request failed, ${s}`)});if(!n.ok){const s=new Error(`Logout request failed, ${n.statusText}`);throw s.status=n.status,s}}async showPopup(n){var s,f,T,ye,Xe,qe,Ut,Xt;const Vn=this.joinScopesFunc(n),kn=await this.buildUrl("/start",{scope:Vn,origin:window.location.origin,flow:"popup"}),Tn=(f=(s=this.popupOptions)==null?void 0:s.size)!=null&&f.fullscreen?window.screen.width:((ye=(T=this.popupOptions)==null?void 0:T.size)==null?void 0:ye.width)||450,la=(qe=(Xe=this.popupOptions)==null?void 0:Xe.size)!=null&&qe.fullscreen?window.screen.height:((Xt=(Ut=this.popupOptions)==null?void 0:Ut.size)==null?void 0:Xt.height)||730,jn=await lt({url:kn,name:`${this.provider.title} Login`,origin:new URL(kn).origin,width:Tn,height:la});return await this.sessionTransform(jn)}async executeRedirect(n){const s=this.joinScopesFunc(n);return window.location.href=await this.buildUrl("/start",{scope:s,origin:window.location.origin,redirectUrl:window.location.href,flow:"redirect"}),new Promise(()=>{})}async buildUrl(n,s){const f=await this.discoveryApi.getBaseUrl("auth"),T=this.buildQueryString({...s,env:this.environment});return`${f}/${this.provider.id}${n}${T}`}buildQueryString(n){if(!n)return"";const s=Object.entries(n).map(([f,T])=>{if(typeof T=="string")return`${encodeURIComponent(f)}=${encodeURIComponent(T)}`;if(T)return encodeURIComponent(f)}).filter(Boolean).join("&");return s?`?${s}`:""}}var U=Object.defineProperty,O=(d,n,s)=>n in d?U(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,M=(d,n,s)=>(O(d,typeof n!="symbol"?n+"":n,s),s);class te{constructor(n){M(this,"discoveryApi"),M(this,"environment"),M(this,"provider");const{discoveryApi:s,environment:f,provider:T}=n;this.discoveryApi=s,this.environment=f,this.provider=T}async createSession(){const n=await this.buildUrl("/start"),s=await lt({url:n,name:`${this.provider.title} Login`,origin:new URL(n).origin,width:450,height:730});return{...s,id:s.profile.email}}async refreshSession(){}async removeSession(){const n=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(s=>{throw new Error(`Logout request failed, ${s}`)});if(!n.ok){const s=new Error(`Logout request failed, ${n.statusText}`);throw s.status=n.status,s}}async buildUrl(n){return`${await this.discoveryApi.getBaseUrl("auth")}/${this.provider.id}${n}?env=${this.environment}`}}function ge(d,n){for(const s of n)if(!d.has(s))return!1;return!0}class ze{constructor(n){this.options=n}sessionExistsAndHasScope(n,s){if(!n)return!1;if(!s||this.options.sessionScopes===void 0)return!0;const f=this.options.sessionScopes(n);return ge(f,s)}getExtendedScope(n,s){const f=new Set(this.options.defaultScopes);if(n&&this.options.sessionScopes!==void 0){const T=this.options.sessionScopes(n);for(const ye of T)f.add(ye)}if(s)for(const T of s)f.add(T);return f}}var bt=Object.defineProperty,Qe=(d,n,s)=>n in d?bt(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,Mt=(d,n,s)=>(Qe(d,typeof n!="symbol"?n+"":n,s),s);class rn{constructor(){Mt(this,"isClosed",!1),Mt(this,"terminatingError"),Mt(this,"observable",new(i())(n=>this.isClosed?(this.terminatingError?n.error(this.terminatingError):n.complete(),()=>{}):(this.subscribers.add(n),()=>{this.subscribers.delete(n)}))),Mt(this,"subscribers",new Set)}[Symbol.observable](){return this}get closed(){return this.isClosed}next(n){if(this.isClosed)throw new Error("PublishSubject is closed");this.subscribers.forEach(s=>s.next(n))}error(n){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.terminatingError=n,this.subscribers.forEach(s=>s.error(n))}complete(){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.subscribers.forEach(n=>n.complete())}subscribe(n,s,f){const T=typeof n=="function"?{next:n,error:s,complete:f}:n;return this.observable.subscribe(T)}}class Ft{constructor(n){Mt(this,"isClosed"),Mt(this,"currentValue"),Mt(this,"terminatingError"),Mt(this,"observable"),Mt(this,"subscribers",new Set),this.isClosed=!1,this.currentValue=n,this.terminatingError=void 0,this.observable=new(i())(s=>this.isClosed?(this.terminatingError?s.error(this.terminatingError):s.complete(),()=>{}):(s.next(this.currentValue),this.subscribers.add(s),()=>{this.subscribers.delete(s)}))}[Symbol.observable](){return this}get closed(){return this.isClosed}next(n){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.currentValue=n,this.subscribers.forEach(s=>s.next(n))}error(n){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.terminatingError=n,this.subscribers.forEach(s=>s.error(n))}complete(){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.subscribers.forEach(n=>n.complete())}subscribe(n,s,f){const T=typeof n=="function"?{next:n,error:s,complete:f}:n;return this.observable.subscribe(T)}}var Et=Object.defineProperty,we=(d,n,s)=>n in d?Et(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,nt=(d,n,s)=>(we(d,typeof n!="symbol"?n+"":n,s),s);class Lt{constructor(){nt(this,"subject",new Ft(k.S.SignedOut)),nt(this,"signedIn",!1)}setIsSignedIn(n){this.signedIn!==n&&(this.signedIn=n,this.subject.next(this.signedIn?k.S.SignedIn:k.S.SignedOut))}sessionState$(){return this.subject}}var Wt=Object.defineProperty,le=(d,n,s)=>n in d?Wt(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,$e=(d,n,s)=>(le(d,typeof n!="symbol"?n+"":n,s),s);class xt{constructor(n){$e(this,"connector"),$e(this,"helper"),$e(this,"sessionScopesFunc"),$e(this,"sessionShouldRefreshFunc"),$e(this,"stateTracker",new Lt),$e(this,"refreshPromise"),$e(this,"currentSession");const{connector:s,defaultScopes:f=new Set,sessionScopes:T,sessionShouldRefresh:ye}=n;this.connector=s,this.sessionScopesFunc=T,this.sessionShouldRefreshFunc=ye,this.helper=new ze({sessionScopes:T,defaultScopes:f})}async getSession(n){if(this.helper.sessionExistsAndHasScope(this.currentSession,n.scopes)){if(!this.sessionShouldRefreshFunc(this.currentSession))return this.currentSession;try{const f=await this.collapsedSessionRefresh(n.scopes),T=this.sessionScopesFunc(this.currentSession),ye=this.sessionScopesFunc(f);return ge(ye,T)&&(this.currentSession=f),f}catch(f){if(n.optional)return;throw f}}if(!this.currentSession&&!n.instantPopup)try{const s=await this.collapsedSessionRefresh(n.scopes);return this.currentSession=s,this.getSession(n)}catch{}if(!n.optional)return this.currentSession=await this.connector.createSession({...n,scopes:this.helper.getExtendedScope(this.currentSession,n.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,await this.connector.removeSession(),this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}async collapsedSessionRefresh(n){if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.connector.refreshSession(this.helper.getExtendedScope(this.currentSession,n));try{const s=await this.refreshPromise;return this.stateTracker.setIsSignedIn(!0),s}finally{delete this.refreshPromise}}}var Yt=Object.defineProperty,se=(d,n,s)=>n in d?Yt(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,ke=(d,n,s)=>(se(d,typeof n!="symbol"?n+"":n,s),s);class pe{constructor(n){ke(this,"connector"),ke(this,"helper"),ke(this,"stateTracker",new Lt),ke(this,"currentSession");const{connector:s,defaultScopes:f=new Set,sessionScopes:T}=n;this.connector=s,this.helper=new ze({sessionScopes:T,defaultScopes:f})}setSession(n){this.currentSession=n,this.stateTracker.setIsSignedIn(Boolean(n))}async getSession(n){if(this.helper.sessionExistsAndHasScope(this.currentSession,n.scopes))return this.currentSession;if(!n.optional)return this.currentSession=await this.connector.createSession({...n,scopes:this.helper.getExtendedScope(this.currentSession,n.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}}var Le=Object.defineProperty,et=(d,n,s)=>n in d?Le(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,pt=(d,n,s)=>(et(d,typeof n!="symbol"?n+"":n,s),s);class Bt{constructor(n){pt(this,"manager"),pt(this,"storageKey"),pt(this,"schema"),pt(this,"sessionShouldRefreshFunc"),pt(this,"helper");const{manager:s,storageKey:f,schema:T,sessionScopes:ye,sessionShouldRefresh:Xe=()=>!1}=n;this.manager=s,this.storageKey=f,this.schema=T,this.sessionShouldRefreshFunc=Xe,this.helper=new ze({sessionScopes:ye,defaultScopes:new Set})}setSession(n){this.manager.setSession(n),this.saveSession(n)}async getSession(n){const{scopes:s}=n,f=this.loadSession();if(this.helper.sessionExistsAndHasScope(f,s)&&!this.sessionShouldRefreshFunc(f))return this.manager.setSession(f),f;const T=await this.manager.getSession(n);return this.saveSession(T),T}async removeSession(){localStorage.removeItem(this.storageKey),await this.manager.removeSession()}sessionState$(){return this.manager.sessionState$()}loadSession(){try{const n=localStorage.getItem(this.storageKey);if(n){const s=JSON.parse(n,(f,T)=>(T==null?void 0:T.__type)==="Set"?new Set(T.__value):T);try{return this.schema.parse(s)}catch(f){throw console.log(`Failed to load session from local storage because it did not conform to the expected schema, ${f}`),f}}return}catch{localStorage.removeItem(this.storageKey);return}}saveSession(n){if(n===void 0){localStorage.removeItem(this.storageKey);return}try{this.schema.parse(n)}catch(s){console.warn(`Failed to save session to local storage because it did not conform to the expected schema, ${s}`);return}localStorage.setItem(this.storageKey,JSON.stringify(n,(s,f)=>f instanceof Set?{__type:"Set",__value:Array.from(f)}:f))}}var en=Object.defineProperty,Ce=(d,n,s)=>n in d?en(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,Be=(d,n,s)=>(Ce(d,typeof n!="symbol"?n+"":n,s),s);const C={id:"oauth2",title:"Your Identity Provider",icon:()=>null};class W{constructor(n){Be(this,"sessionManager"),Be(this,"scopeTransform"),this.sessionManager=n.sessionManager,this.scopeTransform=n.scopeTransform}static create(n){const{configApi:s,discoveryApi:f,environment:T="development",provider:ye=C,oauthRequestApi:Xe,defaultScopes:qe=[],scopeTransform:Ut=Tn=>Tn,popupOptions:Xt}=n,Vn=new D({configApi:s,discoveryApi:f,environment:T,provider:ye,oauthRequestApi:Xe,sessionTransform({backstageIdentity:Tn,...la}){var jn;const ca={...la,providerInfo:{idToken:la.providerInfo.idToken,accessToken:la.providerInfo.accessToken,scopes:W.normalizeScopes(Ut,la.providerInfo.scope),expiresAt:la.providerInfo.expiresInSeconds?new Date(Date.now()+la.providerInfo.expiresInSeconds*1e3):void 0}};if(Tn){const Va=(jn=Tn.expiresInSeconds)!=null?jn:la.providerInfo.expiresInSeconds;ca.backstageIdentity={token:Tn.token,identity:Tn.identity,expiresAt:Va?new Date(Date.now()+Va*1e3):void 0}}return ca},popupOptions:Xt}),kn=new xt({connector:Vn,defaultScopes:new Set(qe),sessionScopes:Tn=>Tn.providerInfo.scopes,sessionShouldRefresh:Tn=>{var la,jn;let ca=1/0;return(la=Tn.providerInfo)!=null&&la.expiresAt&&(ca=Math.min(ca,(Tn.providerInfo.expiresAt.getTime()-Date.now())/1e3)),(jn=Tn.backstageIdentity)!=null&&jn.expiresAt&&(ca=Math.min(ca,(Tn.backstageIdentity.expiresAt.getTime()-Date.now())/1e3)),ca<60*5}});return new W({sessionManager:kn,scopeTransform:Ut})}async signIn(){await this.getAccessToken()}async signOut(){await this.sessionManager.removeSession()}sessionState$(){return this.sessionManager.sessionState$()}async getAccessToken(n,s){var f;const T=W.normalizeScopes(this.scopeTransform,n),ye=await this.sessionManager.getSession({...s,scopes:T});return(f=ye==null?void 0:ye.providerInfo.accessToken)!=null?f:""}async getIdToken(n={}){var s;const f=await this.sessionManager.getSession({...n,scopes:new Set(["openid"])});return(s=f==null?void 0:f.providerInfo.idToken)!=null?s:""}async getBackstageIdentity(n={}){const s=await this.sessionManager.getSession(n);return s==null?void 0:s.backstageIdentity}async getProfile(n={}){const s=await this.sessionManager.getSession(n);return s==null?void 0:s.profile}static normalizeScopes(n,s){if(!s)return new Set;const f=Array.isArray(s)?s:s.split(/[\s|,]/).filter(Boolean);return new Set(n(f))}}const Q={id:"github",title:"GitHub",icon:()=>null};class rt{static create(n){const{configApi:s,discoveryApi:f,environment:T="development",provider:ye=Q,oauthRequestApi:Xe,defaultScopes:qe=["read:user"]}=n;return W.create({configApi:s,discoveryApi:f,oauthRequestApi:Xe,provider:ye,environment:T,defaultScopes:qe})}}const ct={id:"gitlab",title:"GitLab",icon:()=>null};class ut{static create(n){const{configApi:s,discoveryApi:f,environment:T="development",provider:ye=ct,oauthRequestApi:Xe,defaultScopes:qe=["read_user"]}=n;return W.create({configApi:s,discoveryApi:f,oauthRequestApi:Xe,provider:ye,environment:T,defaultScopes:qe})}}const tn={id:"google",title:"Google",icon:()=>null},mn="https://www.googleapis.com/auth/";class Cn{static create(n){const{configApi:s,discoveryApi:f,oauthRequestApi:T,environment:ye="development",provider:Xe=tn,defaultScopes:qe=["openid",`${mn}userinfo.email`,`${mn}userinfo.profile`]}=n;return W.create({configApi:s,discoveryApi:f,oauthRequestApi:T,provider:Xe,environment:ye,defaultScopes:qe,scopeTransform(Ut){return Ut.map(Xt=>Xt==="openid"?Xt:Xt==="profile"||Xt==="email"?`${mn}userinfo.${Xt}`:Xt.startsWith(mn)?Xt:`${mn}${Xt}`)}})}}const An={id:"okta",title:"Okta",icon:()=>null},Gn=new Set(["openid","profile","email","phone","address","groups","offline_access"]),Mn="okta.";class Wn{static create(n){const{configApi:s,discoveryApi:f,environment:T="development",provider:ye=An,oauthRequestApi:Xe,defaultScopes:qe=["openid","email","profile","offline_access"]}=n;return W.create({configApi:s,discoveryApi:f,oauthRequestApi:Xe,provider:ye,environment:T,defaultScopes:qe,scopeTransform(Ut){return Ut.map(Xt=>Gn.has(Xt)||Xt.startsWith(Mn)?Xt:`${Mn}${Xt}`)}})}}const P=Ke.z.object({profile:Ke.z.object({email:Ke.z.string().optional(),displayName:Ke.z.string().optional(),picture:Ke.z.string().optional()}),backstageIdentity:Ke.z.object({token:Ke.z.string(),identity:Ke.z.object({type:Ke.z.literal("user"),userEntityRef:Ke.z.string(),ownershipEntityRefs:Ke.z.array(Ke.z.string())})})}),K={id:"saml",title:"SAML",icon:()=>null};class be{constructor(n){this.sessionManager=n}static create(n){const{discoveryApi:s,environment:f="development",provider:T=K}=n,ye=new te({discoveryApi:s,environment:f,provider:T}),Xe=new pe({connector:ye}),qe=new Bt({manager:Xe,storageKey:`${T.id}Session`,schema:P});return new be(qe)}sessionState$(){return this.sessionManager.sessionState$()}async signIn(){await this.getBackstageIdentity({})}async signOut(){await this.sessionManager.removeSession()}async getBackstageIdentity(n={}){const s=await this.sessionManager.getSession(n);return s==null?void 0:s.backstageIdentity}async getProfile(n={}){const s=await this.sessionManager.getSession(n);return s==null?void 0:s.profile}}var vt=Object.defineProperty,Ot=(d,n,s)=>n in d?vt(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,Vt=(d,n,s)=>(Ot(d,typeof n!="symbol"?n+"":n,s),s);const ne={id:"microsoft",title:"Microsoft",icon:()=>null},Pe=class Ir{constructor(n){Vt(this,"oauth2"),Vt(this,"configApi"),Vt(this,"environment"),Vt(this,"provider"),Vt(this,"oauthRequestApi"),Vt(this,"discoveryApi"),Vt(this,"scopeTransform");const{configApi:s,environment:f="development",provider:T=ne,oauthRequestApi:ye,discoveryApi:Xe,defaultScopes:qe=["openid","offline_access","profile","email","User.Read"],scopeTransform:Ut=Xt=>Xt.concat("offline_access")}=n;this.configApi=s,this.environment=f,this.provider=T,this.oauthRequestApi=ye,this.discoveryApi=Xe,this.scopeTransform=Ut,this.oauth2={[Ir.MicrosoftGraphID]:W.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform,defaultScopes:qe})}}static create(n){return new Ir(n)}microsoftGraph(){return this.oauth2[Ir.MicrosoftGraphID]}static resourceForScopes(n){var s;const f=[...new Set(n.split(" ").map(Ir.resourceForScope).filter(ye=>ye!=="openid"))];if(f.length>1)return Promise.reject(new Error(`Requested access token with scopes from multiple Azure resources: ${f.join(", ")}. Access tokens can only have a single audience.`));const T=(s=f[0])!=null?s:Ir.MicrosoftGraphID;return Promise.resolve(T)}static resourceForScope(n){var s;const f=(s=n.match(/^(?<resourceURI>.*)\/(?<scp>[^\/]*)$/))==null?void 0:s.groups;if(f){const{resourceURI:T}=f;return T.replace(/^api:\/\//,"")}switch(n){case"email":case"openid":case"offline_access":case"profile":return"openid";default:return Ir.MicrosoftGraphID}}async getAccessToken(n,s){const f=n===void 0?Ir.MicrosoftGraphID:await Ir.resourceForScopes(Array.isArray(n)?n.join(" "):n);return f in this.oauth2||(this.oauth2[f]=W.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform})),this.oauth2[f].getAccessToken(n,s)}getIdToken(n){return this.microsoftGraph().getIdToken(n)}getProfile(n){return this.microsoftGraph().getProfile(n)}getBackstageIdentity(n){return this.microsoftGraph().getBackstageIdentity(n)}signIn(){return this.microsoftGraph().signIn()}signOut(){return this.microsoftGraph().signOut()}sessionState$(){return this.microsoftGraph().sessionState$()}};Vt(Pe,"MicrosoftGraphID","00000003-0000-0000-c000-000000000000");let je=Pe;const Jt={id:"onelogin",title:"onelogin",icon:()=>null},qt=new Set(["openid","profile","email","phone","address","groups","offline_access"]),cn="onelogin.";class on{static create(n){const{configApi:s,discoveryApi:f,environment:T="development",provider:ye=Jt,oauthRequestApi:Xe}=n;return W.create({configApi:s,discoveryApi:f,oauthRequestApi:Xe,provider:ye,environment:T,defaultScopes:["openid","email","profile","offline_access"],scopeTransform(qe){return qe.map(Ut=>qt.has(Ut)||Ut.startsWith(cn)?Ut:`${cn}${Ut}`)}})}}const wn={id:"bitbucket",title:"Bitbucket",icon:()=>null};class Kn{static create(n){const{configApi:s,discoveryApi:f,environment:T="development",provider:ye=wn,oauthRequestApi:Xe,defaultScopes:qe=["team"]}=n;return W.create({configApi:s,discoveryApi:f,oauthRequestApi:Xe,provider:ye,environment:T,defaultScopes:qe})}}const Yn={id:"bitbucketServer",title:"Bitbucket Server",icon:()=>null};class oa{static create(n){const{configApi:s,discoveryApi:f,environment:T="development",provider:ye=Yn,oauthRequestApi:Xe,defaultScopes:qe=["PROJECT_ADMIN"]}=n;return W.create({configApi:s,discoveryApi:f,oauthRequestApi:Xe,provider:ye,environment:T,defaultScopes:qe})}}const vn={id:"atlassian",title:"Atlassian",icon:()=>null};class ra{static create(n){const{configApi:s,discoveryApi:f,environment:T="development",provider:ye=vn,oauthRequestApi:Xe}=n;return W.create({configApi:s,discoveryApi:f,oauthRequestApi:Xe,provider:ye,environment:T})}}var ia=Object.defineProperty,na=(d,n,s)=>n in d?ia(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,da=(d,n,s)=>(na(d,typeof n!="symbol"?n+"":n,s),s);class _a{constructor(){da(this,"subject",new rn)}post(n){this.subject.next(n)}alert$(){return this.subject}}class qn{constructor(n){this.actualApis=n}static fromApis(n){return new qn(n)}captureEvent(n){this.actualApis.forEach(s=>{try{s.captureEvent(n)}catch{}})}}class Ea{captureEvent(n){}}var Z=Object.defineProperty,Ue=(d,n,s)=>n in d?Z(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,tt=(d,n,s)=>(Ue(d,typeof n!="symbol"?n+"":n,s),s);const ht="theme";class Se{constructor(n){this.themes=n,tt(this,"activeThemeId"),tt(this,"subject",new Ft(void 0))}static createWithStorage(n){var s;const f=new Se(n);if(!window.localStorage)return f;const T=(s=window.localStorage.getItem(ht))!=null?s:void 0;return f.setActiveThemeId(T),f.activeThemeId$().subscribe(ye=>{ye?window.localStorage.setItem(ht,ye):window.localStorage.removeItem(ht)}),window.addEventListener("storage",ye=>{var Xe;if(ye.key===ht){const qe=(Xe=localStorage.getItem(ht))!=null?Xe:void 0;f.setActiveThemeId(qe)}}),f}getInstalledThemes(){return this.themes.slice()}activeThemeId$(){return this.subject}getActiveThemeId(){return this.activeThemeId}setActiveThemeId(n){this.activeThemeId=n,this.subject.next(n)}}const Y="Invalid discovery URL pattern,";class Ee{constructor(n){this.parts=n}static compile(n){const s=n.split(/\{\{\s*pluginId\s*\}\}/),f=s.join("pluginId");let T;try{T=new URL(f)}catch{throw new Error(`${Y} URL '${f}' is invalid`)}if(T.hash)throw new Error(`${Y} URL must not have a hash`);if(T.search)throw new Error(`${Y} URL must not have a query`);if(f.endsWith("/"))throw new Error(`${Y} URL must not end with a slash`);return new Ee(s)}async getBaseUrl(n){return this.parts.join(encodeURIComponent(n))}}class ue{constructor(n,s){this.endpoints=n,this.defaultEndpoint=s}static fromConfig(n,s){var f,T;const ye=(f=s==null?void 0:s.pathPattern)!=null?f:"/api/{{ pluginId }}",Xe=n.getString("backend.baseUrl"),qe=(T=n.getOptionalConfigArray("discovery.endpoints"))==null?void 0:T.flatMap(Ut=>{const Xt=typeof Ut.get("target")=="object"?Ut.getString("target.external"):Ut.getString("target"),Vn=Ee.compile(Xt);return Ut.getStringArray("plugins").map(kn=>[kn,Vn])});return new ue(new Map(qe),Ee.compile(`${Xe}${ye}`))}async getBaseUrl(n){const s=this.endpoints.get(n);return s?s.getBaseUrl(n):this.defaultEndpoint.getBaseUrl(n)}}class at{constructor(n,s){this.alertApi=n,this.errorApi=s}post(n,s){return s!=null&&s.hidden||this.alertApi.post({message:n.message,severity:"error"}),this.errorApi.post(n,s)}error$(){return this.errorApi.error$()}}var N=Object.defineProperty,H=(d,n,s)=>n in d?N(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,q=(d,n,s)=>(H(d,typeof n!="symbol"?n+"":n,s),s);class ae{constructor(){q(this,"subject",new rn)}post(n,s){this.subject.next({error:n,context:s})}error$(){return this.subject}}class We{static forward(n,s){window.addEventListener("unhandledrejection",f=>{n.post(f.reason,s)})}}var Je=Object.defineProperty,Fe=(d,n,s)=>n in d?Je(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,gt=(d,n,s)=>(Fe(d,typeof n!="symbol"?n+"":n,s),s);function Pt(d){if(d.length<3)throw new Error(`The '${d}' feature flag must have a minimum length of three characters.`);if(d.length>150)throw new Error(`The '${d}' feature flag must not exceed 150 characters.`);if(!d.match(/^[a-z]+[a-z0-9-]+$/))throw new Error(`The '${d}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`)}class dn{constructor(){gt(this,"registeredFeatureFlags",[]),gt(this,"flags")}registerFlag(n){Pt(n.name),this.registeredFeatureFlags.push(n)}getRegisteredFlags(){return this.registeredFeatureFlags.slice()}isActive(n){return this.flags||(this.flags=this.load()),this.flags.get(n)===k.F.Active}save(n){this.flags||(this.flags=this.load()),n.merge||this.flags.clear();for(const[f,T]of Object.entries(n.states))this.flags.set(f,T);const s=Array.from(this.flags.entries()).filter(([,f])=>f===k.F.Active);window.localStorage.setItem("featureFlags",JSON.stringify(Object.fromEntries(s)))}load(){try{const n=window.localStorage.getItem("featureFlags");if(!n)return new Map;const s=JSON.parse(n);if(typeof s!="object"||s===null||Array.isArray(s))return new Map;const f=Object.entries(s).filter(([T,ye])=>(Pt(T),ye===k.F.Active));return new Map(f)}catch{return new Map}}}function wt(d){var n;let s=d.baseImplementation||e.g.fetch;const f=[(n=d.middleware)!=null?n:[]].flat().reverse();for(const T of f)s=T.apply(s);return{fetch:s}}class un{constructor(n,s,f,T){this.identityApi=n,this.allowUrl=s,this.headerName=f,this.headerValue=T}static create(n){var s,f;const T=gn(n),ye=((s=n.header)==null?void 0:s.name)||"authorization",Xe=((f=n.header)==null?void 0:f.value)||(qe=>`Bearer ${qe}`);return new un(n.identityApi,T,ye,Xe)}apply(n){return async(s,f)=>{const T=new Request(s,f),{token:ye}=await this.identityApi.getCredentials();return T.headers.get(this.headerName)||typeof ye!="string"||!ye||!this.allowUrl(T.url)?n(s,f):(T.headers.set(this.headerName,this.headerValue(ye)),n(T))}}}function gn(d){return d.allowUrl?d.allowUrl:d.urlPrefixAllowlist?En(d.urlPrefixAllowlist):d.config?En([d.config.getString("backend.baseUrl")]):()=>!1}function En(d){const n=d.map(s=>s.replace(/\/$/,""));return s=>n.some(f=>s===f||s.startsWith(`${f}/`))}function Nn(d,n){return!n||n==="/"?d:`${d.replace(/\/$/,"")}/${n.replace(/^\//,"")}`}class On{constructor(n){this.discoveryApi=n}apply(n){return async(s,f)=>{const T=new Request(s,f),ye="plugin://";if(!T.url.startsWith(ye))return n(s,f);const{hostname:Xe,pathname:qe,search:Ut,hash:Xt,username:Vn,password:kn}=new URL(`http://${T.url.substring(ye.length)}`);let Tn=await this.discoveryApi.getBaseUrl(Xe);if(Vn||kn){const jn=new URL(Tn),ca=`${Vn}${kn?`:${kn}`:""}@`;Tn=`${jn.protocol}//${ca}${jn.host}${jn.pathname}`}const la=`${Nn(Tn,qe)}${Ut}${Xt}`;return n(la,typeof s=="string"||Ln(s)?f:s)}}}function Ln(d){return typeof d=="object"&&(d==null?void 0:d.constructor)===URL}class Sn{static resolvePluginProtocol(n){return new On(n.discoveryApi)}static injectIdentityAuth(n){return un.create(n)}constructor(){}}var In=Object.defineProperty,pn=(d,n,s)=>n in d?In(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,yn=(d,n,s)=>(pn(d,typeof n!="symbol"?n+"":n,s),s);function aa(d,n){for(const s of n)if(!d.has(s))return!1;return!0}function sa(d,...n){const s=new Set(d);for(const f of n)for(const T of f)s.add(T);return s}class ba{constructor(){yn(this,"requests",[]),yn(this,"subject",new Ft(this.getCurrentPending()))}request(n){return new Promise((s,f)=>{this.requests.push({scopes:n,resolve:s,reject:f}),this.subject.next(this.getCurrentPending())})}resolve(n,s){this.requests=this.requests.filter(f=>aa(n,f.scopes)?(f.resolve(s),!1):!0),this.subject.next(this.getCurrentPending())}reject(n){this.requests.forEach(s=>s.reject(n)),this.requests=[],this.subject.next(this.getCurrentPending())}pending(){return this.subject}getCurrentPending(){const n=this.requests.length===0?void 0:this.requests.slice(1).reduce((s,f)=>sa(s,f.scopes),this.requests[0].scopes);return{scopes:n,resolve:s=>{n&&this.resolve(n,s)},reject:s=>{n&&this.reject(s)}}}}var Ca=Object.defineProperty,Na=(d,n,s)=>n in d?Ca(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,Fa=(d,n,s)=>(Na(d,typeof n!="symbol"?n+"":n,s),s);class La{constructor(){Fa(this,"subject",new Ft([])),Fa(this,"currentRequests",[]),Fa(this,"handlerCount",0)}createAuthRequester(n){const s=new ba,f=this.handlerCount;return this.handlerCount++,s.pending().subscribe({next:T=>{const ye=this.currentRequests.slice(),Xe=this.makeAuthRequest(T,n);Xe?ye[f]=Xe:delete ye[f],this.currentRequests=ye,this.subject.next(ye.filter(Boolean))}}),T=>s.request(T)}makeAuthRequest(n,s){const{scopes:f}=n;if(f)return{provider:s.provider,trigger:async()=>{const T=await s.onAuthRequest(f);n.resolve(T)},reject:()=>{const T=new Error("Login failed, rejected by user");T.name="RejectedError",n.reject(T)}}}authRequest$(){return this.subject}}var Pa=Object.defineProperty,za=(d,n,s)=>n in d?Pa(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,Ya=(d,n,s)=>(za(d,typeof n!="symbol"?n+"":n,s),s);const Ja=new Map,lr=class Zr{constructor(n,s){this.namespace=n,this.errorApi=s,Ya(this,"subscribers",new Set),Ya(this,"observable",new(i())(f=>(this.subscribers.add(f),()=>{this.subscribers.delete(f)})))}static create(n){var s;return new Zr((s=n.namespace)!=null?s:"",n.errorApi)}static addStorageEventListener(){window.addEventListener("storage",n=>{var s;for(const[f,T]of Ja.entries())(s=n.key)!=null&&s.startsWith(f)&&T.handleStorageChange(n.key)})}get(n){return this.snapshot(n).value}snapshot(n){let s,f="absent";try{const T=localStorage.getItem(this.getKeyName(n));T&&(s=JSON.parse(T,(ye,Xe)=>(typeof Xe=="object"&&Xe!==null&&Object.freeze(Xe),Xe)),f="present")}catch{this.errorApi.post(new Error(`Error when parsing JSON config from storage for: ${n}`))}return{key:n,value:s,presence:f}}forBucket(n){const s=`${this.namespace}/${n}`;return Ja.has(s)||Ja.set(s,new Zr(s,this.errorApi)),Ja.get(s)}async set(n,s){localStorage.setItem(this.getKeyName(n),JSON.stringify(s)),this.notifyChanges(n)}async remove(n){localStorage.removeItem(this.getKeyName(n)),this.notifyChanges(n)}observe$(n){return Zr.hasSubscribed||(Zr.addStorageEventListener(),Zr.hasSubscribed=!0),this.observable.filter(({key:s})=>s===n)}handleStorageChange(n){if(!(n!=null&&n.startsWith(this.namespace)))return;const s=n==null?void 0:n.slice(`${this.namespace}/`.length);s.includes("/")||this.notifyChanges(decodeURIComponent(s))}getKeyName(n){return`${this.namespace}/${encodeURIComponent(n)}`}notifyChanges(n){const s=this.snapshot(n);for(const f of this.subscribers)f.next(s)}};Ya(lr,"hasSubscribed",!1);let Qa=lr;const wa=(0,o.createContext)(void 0);function ja(){const[d]=(0,_.AV)(o.createElement(_.qh,{index:!0,element:o.createElement("div",null)}));return!d.index}const Ga=(d,n)=>{try{const s=(0,F.ue)(n,{pathname:d}),f=s==null?void 0:s.filter(Ut=>{var Xt;return((Xt=Ut==null?void 0:Ut.route.routeRefs)==null?void 0:Xt.size)>0}).pop(),T=f==null?void 0:f.route;if(!T||T.path===""&&d!=="/")return;let ye;T.routeRefs.size===1&&(ye=T.routeRefs.values().next().value);let Xe;T.plugins.size===1&&(Xe=T.plugins.values().next().value);const qe=Object.entries((f==null?void 0:f.params)||{}).reduce((Ut,[Xt,Vn])=>(Vn!==void 0&&Xt!=="*"&&(Ut[Xt]=Vn),Ut),{});return{extension:"App",pluginId:(Xe==null?void 0:Xe.getId())||"root",...ye?{routeRef:ye.id}:{},_routeNodeType:T.element,params:qe}}catch{return}},yr=({pathname:d,search:n,hash:s,attributes:f})=>{const T=(0,Ze.st)();return(0,o.useEffect)(()=>{T.captureEvent("navigate",`${d}${n}${s}`,{attributes:f})},[T,d,n,s,f]),null},Ua=({routeObjects:d})=>{const{pathname:n,search:s,hash:f}=(0,_.zy)(),{params:T,...ye}=Ga(n,d)||{params:{}};return o.createElement(Ze.Ig,{attributes:ye},o.createElement(yr,{pathname:n,search:s,hash:f,attributes:T}))};function Xa(d){return ja()?Ge(d):""}function Ge(d){var n;let{pathname:s}=new URL((n=d.getOptionalString("app.baseUrl"))!=null?n:"/","http://sample.dev");return s=s.replace(/\/*$/,""),s}function X({component:d,appIdentityProxy:n,children:s}){const[f,T]=(0,o.useState)(),ye=(0,k.u)(k.p),Xe=Ge(ye);return f?(n.setTarget(f,{signOutTargetUrl:Xe||"/"}),o.createElement(o.Fragment,null,s)):o.createElement(d,{onSignInSuccess:T})}function it(d){const{Router:n,SignInPage:s}=(0,Ze.nm)().getComponents(),f=(0,k.u)(k.p),T=Ge(f),ye=`${T}/*`,Xe=(0,o.useContext)(wa);if(!Xe)throw new Error("AppRouter must be rendered within the AppProvider");const{routeObjects:qe,appIdentityProxy:Ut}=Xe;return s?ja()?o.createElement(n,null,o.createElement(Ua,{routeObjects:qe}),o.createElement(X,{component:s,appIdentityProxy:Ut},o.createElement(_.BV,null,o.createElement(_.qh,{path:ye,element:o.createElement(o.Fragment,null,d.children)})))):o.createElement(n,{basename:T},o.createElement(Ua,{routeObjects:qe}),o.createElement(X,{component:s,appIdentityProxy:Ut},d.children)):(Ut.setTarget({getUserId:()=>"guest",getIdToken:async()=>{},getProfile:()=>({email:"guest@example.com",displayName:"Guest"}),getProfileInfo:async()=>({email:"guest@example.com",displayName:"Guest"}),getBackstageIdentity:async()=>({type:"user",userEntityRef:"user:default/guest",ownershipEntityRefs:["user:default/guest"]}),getCredentials:async()=>({}),signOut:async()=>{}},{signOutTargetUrl:T||"/"}),ja()?o.createElement(n,null,o.createElement(Ua,{routeObjects:qe}),o.createElement(_.BV,null,o.createElement(_.qh,{path:ye,element:o.createElement(o.Fragment,null,d.children)}))):o.createElement(n,{basename:T},o.createElement(Ua,{routeObjects:qe}),d.children))}(0,Ze.h3)(it,"core.type","AppRouter");function _n(d){const n={};for(const f in d.collectors)d.collectors.hasOwnProperty(f)&&(n[f]=d.collectors[f]());const s=[{node:o.Children.toArray(d.root),parent:void 0,contexts:{}}];for(;s.length!==0;){const{node:f,parent:T,contexts:ye}=s.shift();o.Children.forEach(f,Xe=>{if(!(0,o.isValidElement)(Xe))return;const qe={};for(const Ut in n)if(n.hasOwnProperty(Ut)){const Xt=n[Ut];qe[Ut]=Xt.visit(Xt.accumulator,Xe,T,ye[Ut])}for(const Ut of d.discoverers){const Xt=Ut(Xe);Xt&&s.push({node:Xt,parent:Xe,contexts:qe})}})}return Object.fromEntries(Object.entries(n).map(([f,T])=>[f,T.accumulator]))}function xn(d,n){return()=>({accumulator:d(),visit:n})}function ea(d){var n;return(n=d.props)==null?void 0:n.children}function ha(d){var n,s,f;if((n=d.props)!=null&&n.path&&((s=d.props)!=null&&s.element))return(f=d.props)==null?void 0:f.element}const $a=xn(()=>new Set,(d,n)=>{const s=(0,Ze.E0)(n,"core.plugin");s&&d.add(s)}),Ka=d=>{const{children:n}=d,s=(0,k.u)(k.f),f="with"in d?s.isActive(d.with):!s.isActive(d.without);return o.createElement(o.Fragment,null,f?n:null)};(0,Ze.h3)(Ka,"core.featureFlagged",!0);const va={caseSensitive:!1,path:"*",element:"match-all",routeRefs:new Set,plugins:new Set};function xa(d){var n,s;const f=d;return f!=null&&f.type?(s=(n=f.type.displayName)!=null?n:f.type.name)!=null?s:String(f.type):String(f)}const Da=d=>{const n=new Set;return d&&n.add(d),n};function er(d,n=new Array){return o.Children.forEach(d,s=>{if(!(0,o.isValidElement)(s))return;const f=(0,Ze.E0)(s,"core.mountPoint");if(f){const T=(0,Ze.E0)(s,"core.plugin");n.push({routeRef:f,plugin:T})}er(s.props.children,n)}),n}const h=xn(()=>({paths:new Map,parents:new Map,objects:new Array}),(d,n,s,f)=>{var T,ye,Xe,qe,Ut,Xt,Vn;if(f!=null&&f.isElementAncestor)return f;if((s==null?void 0:s.props.element)===n)return{...f,isElementAncestor:!0};const kn=(T=n.props)==null?void 0:T.path,Tn=(0,Ze.E0)(n,"core.mountPoint");if(Tn&&kn)throw new Error(`Path property may not be set directly on a routable extension "${xa(n)}"`);const la=(Xe=(ye=f==null?void 0:f.obj)==null?void 0:ye.children)!=null?Xe:d.objects;if(kn!==void 0){if(typeof kn!="string")throw new Error(`Element path must be a string at "${xa(n)}"`);const jn=kn.startsWith("/")?kn.slice(1):kn,ca=n.props.element;if((0,Ze.E0)(n,"core.gatherMountPoints")){if(ca)throw new Error(`Mount point gatherers may not have an element prop "${xa(n)}"`);const Va={path:jn,element:"gathered",routeRefs:new Set,caseSensitive:Boolean((qe=n.props)==null?void 0:qe.caseSensitive),children:[va],plugins:new Set};return la.push(Va),{obj:Va,gatherPath:jn,routeRef:f==null?void 0:f.routeRef,gatherRouteRef:f==null?void 0:f.routeRef}}if(ca){const[Va,...ma]=er(ca);if(ma.length>0)throw new Error(`Route element with path "${kn}" may not contain multiple routable extensions`);if(!Va)return f;const{routeRef:ir,plugin:Lr}=Va,bo={path:jn,element:"mounted",routeRefs:new Set([ir]),caseSensitive:Boolean((Ut=n.props)==null?void 0:Ut.caseSensitive),children:[va],plugins:Da(Lr)};return la.push(bo),d.paths.set(ir,jn),d.parents.set(ir,f==null?void 0:f.routeRef),{obj:bo,routeRef:ir!=null?ir:f==null?void 0:f.routeRef,gatherPath:jn,gatherRouteRef:f==null?void 0:f.gatherRouteRef}}}if(Tn){if((f==null?void 0:f.gatherPath)===void 0)throw new Error(`Routable extension "${xa(n)}" with mount point "${Tn}" must be assigned a path`);(Xt=f==null?void 0:f.obj)==null||Xt.routeRefs.add(Tn);const jn=(0,Ze.E0)(n,"core.plugin");return jn&&((Vn=f==null?void 0:f.obj)==null||Vn.plugins.add(jn)),d.paths.set(Tn,f.gatherPath),d.parents.set(Tn,f==null?void 0:f.gatherRouteRef),{...f,routeRef:Tn}}return f}),l=xn(()=>({paths:new Map,parents:new Map,objects:new Array}),(d,n,s,f)=>{var T,ye,Xe,qe,Ut;if((s==null?void 0:s.props.element)===n)return f;let Xt=f==null?void 0:f.obj,Vn=f==null?void 0:f.routeRef,kn=f==null?void 0:f.sticky;const Tn=(T=n.props)==null?void 0:T.path,la=(ye=Xt==null?void 0:Xt.children)!=null?ye:d.objects,jn=Boolean((Xe=n.props)==null?void 0:Xe.caseSensitive);let ca=f==null?void 0:f.path;if((0,Ze.E0)(n,"core.gatherMountPoints")){if(!Tn)throw new Error("Mount point gatherer must have a path");ca=Tn}const Va=(qe=n.props)==null?void 0:qe.element;let ma=(0,Ze.E0)(n,"core.mountPoint");if(!ma&&(0,o.isValidElement)(Va)&&(ma=(0,Ze.E0)(Va,"core.mountPoint")),ma){let Lr=Tn;if(ca&&(Lr?ca=void 0:Lr=ca),!Lr)throw new Error("Mounted routable extension must have a path");d.paths.set(ma,Lr),Vn&&kn?(d.parents.set(ma,Vn),Tn&&(Vn=ma,kn=!1)):(d.parents.set(ma,Vn),Vn=ma),Tn?(Xt={caseSensitive:jn,path:Tn,element:"mounted",routeRefs:new Set([ma]),children:[va],plugins:Da((0,Ze.E0)(n.props.element,"core.plugin"))},la.push(Xt)):Xt==null||Xt.routeRefs.add(ma)}if((0,Ze.E0)(n,"core.gatherMountPoints")&&(kn=!0),(0,Ze.E0)(n,"core.gatherMountPoints")){if(!Tn)throw new Error("Mount point gatherer must have a path");ma||(Xt={caseSensitive:jn,path:Tn,element:"gathered",routeRefs:new Set,children:[va],plugins:((Ut=f==null?void 0:f.obj)==null?void 0:Ut.plugins)||new Set},la.push(Xt))}return{obj:Xt,path:ca,routeRef:Vn,sticky:kn}}),y=xn(()=>new Set,(d,n)=>{if(n.type===Ka){const s=n.props;d.add("with"in s?s.with:s.without)}}),z=(0,j.Q6)("route-ref-type",()=>Symbol("route-ref-type"));function Oe(d){return d[z]==="absolute"}function st(d){return d[z]==="sub"}function Dt(d){return d[z]==="external"}function Qt(...d){const n=d.join("/").replace(/\/\/+/g,"/");return n!=="/"&&n.endsWith("/")?n.slice(0,-1):n}function Rn(d,n,s){let f,T="";if(Oe(d))f=d;else if(st(d))f=d.parent,T=d.path;else if(Dt(d)){const qe=s.get(d);if(!qe)return[void 0,""];if(Oe(qe))f=qe;else if(st(qe))f=qe.parent,T=qe.path;else throw new Error(`ExternalRouteRef was bound to invalid target, ${qe}`)}else throw d[z]?new Error(`Unknown or invalid route ref type, ${d[z]}`):new Error(`Unknown object passed to useRouteRef, got ${d}`);if(!f)return[void 0,""];const ye=n.get(f);if(ye===void 0)return[void 0,""];const Xe=Qt(ye,T);return[f,Xe]}function zn(d,n,s,f,T){var ye;const Xe=(ye=(0,F.ue)(T,n))!=null?ye:[],qe=Array();let Ut=-1;for(let kn=d;kn&&(Ut=Xe.findIndex(Tn=>Tn.route.routeRefs.has(kn)),Ut===-1);kn=f.get(kn))qe.unshift(kn);qe.length===0&&(Ut-=1);const Xt=Ut===-1?"":Xe[Ut].pathname,Vn=qe.slice(0,-1).map(kn=>{const Tn=s.get(kn);if(Tn===void 0)throw new Error(`No path for ${kn}`);if(Tn.includes(":"))throw new Error(`Cannot route to ${d} with parent ${kn} as it has parameters`);return Tn});return`${Qt(Xt,...Vn)}/`}class Fn{constructor(n,s,f,T,ye){this.routePaths=n,this.routeParents=s,this.routeObjects=f,this.routeBindings=T,this.appBasePath=ye}resolve(n,s){const[f,T]=Rn(n,this.routePaths,this.routeBindings);if(!f)return;let ye;typeof s=="string"?ye=this.trimPath(s):s.pathname?ye={...s,pathname:this.trimPath(s.pathname)}:ye=s;const Xe=this.appBasePath+zn(f,ye,this.routePaths,this.routeParents,this.routeObjects);return(...[Ut])=>{const Xt=Ut&&J()(Ut,Vn=>typeof Vn=="string"?Vn.replaceAll(/[&?#;\/]/g,kn=>encodeURIComponent(kn)):Vn);return Qt(Xe,(0,F.tW)(T,Xt))}}trimPath(n){return n&&(n.startsWith(this.appBasePath)?n.slice(this.appBasePath.length):n)}}const Sa=(0,j.tK)("routing-context"),Ha=({routePaths:d,routeParents:n,routeObjects:s,routeBindings:f,basePath:T="",children:ye})=>{const Xe=new Fn(d,n,s,f,T),qe=(0,j.Bl)({1:Xe});return o.createElement(Sa.Provider,{value:qe},ye)};function ar(d,n){const s=new Set(n.values());s.delete(void 0);for(const f of n.keys()){if(s.has(f))continue;let T=f,ye="";for(;T;){const qe=d.get(T);if(qe===void 0)throw new Error(`No path for ${T}`);ye=Qt(qe,ye),T=n.get(T)}const Xe=ye.match(/:(\w+)/g);if(Xe){for(let qe=0;qe<Xe.length;qe++)for(let Ut=qe+1;Ut<Xe.length;Ut++)if(Xe[Ut]===Xe[qe])throw new Error(`Parameter ${Xe[Ut]} is duplicated in path ${ye}`)}}}function rr(d,n){for(const s of n)if(s.externalRoutes){for(const[f,T]of Object.entries(s.externalRoutes))if(!T.optional&&!d.has(T))throw new Error(`External route '${f}' of the '${s.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`)}}const qr=(0,j.tK)("app-context"),eo=({appContext:d,children:n})=>{const s=(0,j.Bl)({1:d});return o.createElement(qr.Provider,{value:s,children:n})};var kr=Object.defineProperty,to=(d,n,s)=>n in d?kr(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,Ur=(d,n,s)=>(to(d,typeof n!="symbol"?n+"":n,s),s);function Wr(d){return new Error(`Tried to access IdentityApi ${d} before app was loaded`)}function Dr(d){console.warn(`WARNING: Call to ${d} is deprecated and will break in the future`)}class cr{constructor(){Ur(this,"target"),Ur(this,"waitForTarget"),Ur(this,"resolveTarget",()=>{}),Ur(this,"signOutTargetUrl","/"),this.waitForTarget=new Promise(n=>{this.resolveTarget=n})}setTarget(n,s){this.target=n,this.signOutTargetUrl=s.signOutTargetUrl,this.resolveTarget(n)}getUserId(){if(!this.target)throw Wr("getUserId");if(!this.target.getUserId)throw new Error("IdentityApi does not implement getUserId");return Dr("getUserId"),this.target.getUserId()}getProfile(){if(!this.target)throw Wr("getProfile");if(!this.target.getProfile)throw new Error("IdentityApi does not implement getProfile");return Dr("getProfile"),this.target.getProfile()}async getProfileInfo(){return this.waitForTarget.then(n=>n.getProfileInfo())}async getBackstageIdentity(){const n=await this.waitForTarget.then(s=>s.getBackstageIdentity());return n.userEntityRef.match(/^.*:.*\/.*$/)||console.warn(`WARNING: The App IdentityApi provided an invalid userEntityRef, '${n.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`),n}async getCredentials(){return this.waitForTarget.then(n=>n.getCredentials())}async getIdToken(){return this.waitForTarget.then(n=>{if(!n.getIdToken)throw new Error("IdentityApi does not implement getIdToken");return Dr("getIdToken"),n.getIdToken()})}async signOut(){await this.waitForTarget.then(n=>n.signOut()),window.location.href=this.signOutTargetUrl}}function Cr(d,n,s){if(d!==void 0){const T=s.find(ye=>ye.id===d);if(T)return T}if(n){const T=s.find(ye=>ye.variant==="dark");if(T)return T}const f=s.find(T=>T.variant==="light");return f||s[0]}const Ar=()=>{const d=(0,o.useMemo)(()=>window.matchMedia("(prefers-color-scheme: dark)"),[]),[n,s]=(0,o.useState)(d.matches);return(0,o.useEffect)(()=>{const f=T=>{s(T.matches)};return d.addListener(f),()=>{d.removeListener(f)}},[d]),n};function Pr({children:d}){const n=(0,k.u)(k.n),s=(0,v.A)(n.activeThemeId$(),n.getActiveThemeId()),f=Boolean(window.matchMedia)?Ar():!1,T=Cr(s,f,n.getInstalledThemes());if(!T)throw new Error("App has no themes");return o.createElement(T.Provider,{children:d})}const Nr=async()=>Fr();function Fr(d="__APP_INJECTED_RUNTIME_CONFIG__"){const n=[{context:"app-config.yaml",data:{app:{title:"Scaffolded Backstage App",baseUrl:"http://localhost:3000"},organization:{name:"My Company"},backend:{baseUrl:"http://localhost:7007"},integrations:{github:[{host:"github.com"}]},techdocs:{builder:"local"},catalog:{import:{entityFilename:"catalog-info.yaml",pullRequestBranchName:"backstage-integration"}}}}];if(!n)throw new Error("No static configuration provided");if(!Array.isArray(n))throw new Error("Static configuration has invalid format");const s=n.slice();if(d!=="__app_injected_runtime_config__".toLocaleUpperCase("en-US"))try{const T=JSON.parse(d);Array.isArray(T)?s.push(...T):s.push({data:T,context:"env"})}catch(T){throw new Error(`Failed to load runtime configuration, ${T}`)}const f=window.__APP_CONFIG__;return f&&s.push({context:"window",data:f}),s}var no=Object.defineProperty,ao=(d,n,s)=>n in d?no(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,ro=(d,n,s)=>(ao(d,typeof n!="symbol"?n+"":n,s),s);class oo{constructor(){ro(this,"apis",[])}add(n,s){return this.apis.push([n.id,s]),s}build(){return new ur(new Map(this.apis))}}class ur{constructor(n){this.apis=n}static builder(){return new oo}static from(n){return new ur(new Map(n.map(([s,f])=>[s.id,f])))}static with(n,s){return new ur(new Map([[n.id,s]]))}with(n,s){return new ur(new Map([...this.apis,[n.id,s]]))}get(n){return this.apis.get(n.id)}}function io(d){const n=new Map;return d&&d({bind:(f,T)=>{for(const[ye,Xe]of Object.entries(T)){const qe=f[ye];if(!qe)throw new Error(`Key ${ye} is not an existing external route`);if(!Xe&&!qe.optional)throw new Error(`External route ${ye} is required but was undefined`);Xe&&n.set(qe,Xe)}}}),n}var Kr=(d,n,s)=>{if(!n.has(d))throw TypeError("Cannot "+s)},Za=(d,n,s)=>(Kr(d,n,"read from private field"),s?s.call(d):n.get(d)),$r=(d,n,s)=>{if(n.has(d))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(d):n.set(d,s)},Mr=(d,n,s,f)=>(Kr(d,n,"write to private field"),f?f.call(d,s):n.set(d,s),s),_r,dr,Sr;const mr="language",or="en",so=class Qo{constructor(n,s){$r(this,_r,void 0),$r(this,dr,void 0),$r(this,Sr,void 0),Mr(this,_r,n),Mr(this,dr,s),Mr(this,Sr,new Ft({language:Za(this,dr)}))}static create(n){var s,f;const T=(s=n==null?void 0:n.availableLanguages)!=null?s:[or];if(T.length!==new Set(T).size)throw new Error(`Supported languages may not contain duplicates, got '${T.join("', '")}'`);if(!T.includes(or))throw new Error(`Supported languages must include '${or}'`);const ye=(f=n==null?void 0:n.defaultLanguage)!=null?f:or;if(!T.includes(ye))throw new Error(`Initial language must be one of the supported languages, got '${ye}'`);return new Qo(T,ye)}static createWithStorage(n){const s=Qo.create(n);if(!window.localStorage)return s;const f=window.localStorage.getItem(mr),{languages:T}=s.getAvailableLanguages();return f&&T.includes(f)&&s.setLanguage(f),s.language$().subscribe(({language:ye})=>{ye!==window.localStorage.getItem(mr)&&window.localStorage.setItem(mr,ye)}),window.addEventListener("storage",ye=>{var Xe;if(ye.key===mr){const qe=(Xe=localStorage.getItem(mr))!=null?Xe:void 0;qe&&s.setLanguage(qe)}}),s}getAvailableLanguages(){return{languages:Za(this,_r).slice()}}setLanguage(n){const s=n!=null?n:or;if(s!==Za(this,dr)){if(s&&!Za(this,_r).includes(s))throw new Error(`Failed to change language to '${s}', available languages are '${Za(this,_r).join("', '")}'`);Mr(this,dr,s),Za(this,Sr).next({language:s})}}getLanguage(){return{language:Za(this,dr)}}language$(){return Za(this,Sr)}};_r=new WeakMap,dr=new WeakMap,Sr=new WeakMap;let lo=so;function co(d){const n=d;if(n.$$type!=="@backstage/TranslationResource")throw new Error(`Invalid translation resource, bad type '${n.$$type}'`);if(n.version!=="v1")throw new Error(`Invalid translation resource, bad version '${n.version}'`);return n}function uo(d){const n=d;if(n.$$type!=="@backstage/TranslationRef")throw new Error(`Invalid translation ref, bad type '${n.$$type}'`);if(n.version!=="v1")throw new Error(`Invalid translation ref, bad version '${n.version}'`);return n}var zr=(d,n,s)=>{if(!n.has(d))throw TypeError("Cannot "+s)},g=(d,n,s)=>(zr(d,n,"read from private field"),s?s.call(d):n.get(d)),S=(d,n,s)=>{if(n.has(d))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(d):n.set(d,s)},L=(d,n,s,f)=>(zr(d,n,"write to private field"),f?f.call(d,s):n.set(d,s),s),$=(d,n,s)=>(zr(d,n,"access private method"),s),de,xe,He,Ye,At,Gt,Nt,ln,Pn,fn,Dn,Zn,bn,ta,ua,Hn;function Bn(d){return Object.fromEntries(Object.entries(d).filter(n=>n[1]!==null))}class Jn{constructor(n){this.onLoad=n,S(this,Ye),S(this,de,new Set),S(this,xe,new Map),S(this,He,new Map)}addTranslationResource(n){const s=co(n);for(const f of s.resources){const T=$(this,Ye,At).call(this,f.language,s.id);g(this,He).has(T)||g(this,He).set(T,f.loader)}}needsLoading(n,s){const f=$(this,Ye,At).call(this,n,s);return g(this,He).get(f)?!g(this,de).has(f):!1}async load(n,s){const f=$(this,Ye,At).call(this,n,s),T=g(this,He).get(f);if(!T||g(this,de).has(f))return;const ye=g(this,xe).get(f);if(ye){await ye;return}const Xe=T().then(qe=>{this.onLoad({language:n,namespace:s,messages:qe.messages}),g(this,de).add(f)},qe=>{throw g(this,de).add(f),qe});g(this,xe).set(f,Xe),await Xe}}de=new WeakMap,xe=new WeakMap,He=new WeakMap,Ye=new WeakSet,At=function(d,n){return`${d}/${n}`};const ga=class ji{constructor(n,s,f){S(this,Dn),S(this,bn),S(this,ua),S(this,Gt,void 0),S(this,Nt,void 0),S(this,ln,void 0),S(this,Pn,new Set),S(this,fn,new Set),L(this,Gt,n),L(this,Nt,s),L(this,ln,f)}static create(n){const{languages:s}=n.languageApi.getAvailableLanguages(),f=(0,ee.Q_)({fallbackLng:or,supportedLngs:s,interpolation:{escapeValue:!1},ns:[],defaultNS:!1,fallbackNS:!1,initImmediate:!1});if(f.init(),!f.isInitialized)throw new Error("i18next was unexpectedly not initialized");const{language:T}=n.languageApi.getLanguage();T!==or&&f.changeLanguage(T);const ye=new Jn(Ut=>{f.addResourceBundle(Ut.language,Ut.namespace,Bn(Ut.messages),!1,!0)}),Xe=(n==null?void 0:n.resources)||[];for(let Ut=Xe.length-1;Ut>=0;Ut--){const Xt=Xe[Ut];Xt.$$type==="@backstage/TranslationResource"?ye.addTranslationResource(Xt):Xt.$$type==="@backstage/TranslationMessages"&&f.addResourceBundle(or,Xt.id,Bn(Xt.messages),!0,!1)}const qe=new ji(f,ye,n.languageApi.getLanguage().language);return n.languageApi.language$().subscribe(({language:Ut})=>{var Xt;$(Xt=qe,Dn,Zn).call(Xt,Ut)}),qe}getTranslation(n){const s=uo(n);return $(this,ua,Hn).call(this,s),$(this,bn,ta).call(this,s)}translation$(n){const s=uo(n);return $(this,ua,Hn).call(this,s),new(i())(f=>{let T={};const ye=()=>{T={};const qe=T;g(this,Nt).load(g(this,ln),s.id).then(()=>{if(qe===T){const Ut=$(this,bn,ta).call(this,s);Ut.ready&&f.next(Ut)}},Ut=>{qe===T&&f.error(Array.isArray(Ut)?Ut[0]:Ut)})},Xe=()=>{const qe=$(this,bn,ta).call(this,s);qe.ready?f.next(qe):ye()};return g(this,Nt).needsLoading(g(this,ln),s.id)&&ye(),g(this,fn).add(Xe),()=>{g(this,fn).delete(Xe)}})}};Gt=new WeakMap,Nt=new WeakMap,ln=new WeakMap,Pn=new WeakMap,fn=new WeakMap,Dn=new WeakSet,Zn=function(d){g(this,ln)!==d&&(L(this,ln,d),g(this,Gt).changeLanguage(d),g(this,fn).forEach(n=>n()))},bn=new WeakSet,ta=function(d){return g(this,Nt).needsLoading(g(this,ln),d.id)?{ready:!1}:{ready:!0,t:g(this,Gt).getFixedT(null,d.id)}},ua=new WeakSet,Hn=function(d){if(g(this,Pn).has(d.id))return;g(this,Pn).add(d.id);const n=d.getDefaultMessages();g(this,Gt).addResourceBundle(or,d.id,n,!0,!1);const s=d.getDefaultResource();s&&g(this,Nt).addTranslationResource(s)};let Ra=ga;function fa(d){const n=new URL(d);return n.protocol=document.location.protocol,n.hostname=document.location.hostname,n.port=document.location.port,n.toString().replace(/\/$/,"")}function ya(d){const n=A.fromConfigs(d),s=n.getOptionalString("app.baseUrl"),f=n.getOptionalString("backend.baseUrl");let T=d,ye,Xe;if(s&&f){const qe=new URL(s).origin,Ut=new URL(f).origin;if(qe===Ut){const Xt=fa(f);f!==Xt&&(ye=Xt)}}if(s){const qe=fa(s);s!==qe&&(Xe=qe)}return(Xe||ye)&&(T=T.concat({data:{app:Xe&&{baseUrl:Xe},backend:ye&&{baseUrl:ye}},context:"relative-resolver"})),T}var Ta=Object.defineProperty,Rr=(d,n,s)=>n in d?Ta(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,Oa=(d,n,s)=>(Rr(d,typeof n!="symbol"?n+"":n,s),s),Eo=(d,n,s)=>{if(!n.has(d))throw TypeError("Cannot "+s)},vo=(d,n,s)=>(Eo(d,n,"read from private field"),s?s.call(d):n.get(d)),yo=(d,n,s)=>{if(n.has(d))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(d):n.set(d,s)},xo=(d,n,s,f)=>(Eo(d,n,"write to private field"),f?f.call(d,s):n.set(d,s),s),jr;function Zo(d,n,s){var f;const T=Boolean(d),ye=(0,Ae.default)(d||(()=>Promise.resolve([])));let Xe;if(T&&ye.loading){const{Progress:Xt}=n;Xe=o.createElement(Xt,null)}else if(ye.error){const{BootErrorPage:Xt}=n;Xe=o.createElement(Xt,{step:"load-config",error:ye.error})}const{ThemeProvider:qe=Pr}=n;return Xe?{node:o.createElement(kt,{apis:ur.with(k.n,s)},o.createElement(qe,null,Xe))}:{api:A.fromConfigs((f=ye.value)!=null&&f.length?ya(ye.value):[])}}class qo{constructor(n){this.app=n}getPlugins(){return this.app.getPlugins()}getSystemIcon(n){return this.app.getSystemIcon(n)}getSystemIcons(){return this.app.getSystemIcons()}getComponents(){return this.app.getComponents()}}class Bo{constructor(n){Oa(this,"apiHolder"),Oa(this,"configApi"),Oa(this,"apis"),Oa(this,"icons"),Oa(this,"plugins"),Oa(this,"featureFlags"),Oa(this,"components"),Oa(this,"themes"),Oa(this,"configLoader"),Oa(this,"defaultApis"),Oa(this,"bindRoutes"),Oa(this,"appLanguageApi"),Oa(this,"translationResources"),Oa(this,"appIdentityProxy",new cr),Oa(this,"apiFactoryRegistry"),yo(this,jr,!1);var s,f,T,ye,Xe,qe,Ut,Xt,Vn;this.apis=(s=n.apis)!=null?s:[],this.icons=n.icons,this.plugins=new Set((f=n.plugins)!=null?f:[]),this.featureFlags=(T=n.featureFlags)!=null?T:[],this.components=n.components,this.themes=n.themes,this.configLoader=(ye=n.configLoader)!=null?ye:Nr,this.defaultApis=(Xe=n.defaultApis)!=null?Xe:[],this.bindRoutes=n.bindRoutes,this.apiFactoryRegistry=new Kt,this.appLanguageApi=lo.createWithStorage({defaultLanguage:(qe=n.__experimentalTranslations)==null?void 0:qe.defaultLanguage,availableLanguages:(Ut=n.__experimentalTranslations)==null?void 0:Ut.availableLanguages}),this.translationResources=(Vn=(Xt=n.__experimentalTranslations)==null?void 0:Xt.resources)!=null?Vn:[]}getPlugins(){return Array.from(this.plugins)}getSystemIcon(n){return this.icons[n]}getSystemIcons(){return this.icons}getComponents(){return this.components}createRoot(n){const s=this.getProvider();return()=>o.createElement(s,null,n)}getProvider(){if(vo(this,jr))throw new Error("app.getProvider() or app.createRoot() has already been called, and can only be called once");xo(this,jr,!0);const n=new qo(this);let s=!1;return({children:T})=>{const ye=(0,o.useRef)(!0),Xe=(0,o.useMemo)(()=>Se.createWithStorage(this.themes),[]),{routing:qe,featureFlags:Ut,routeBindings:Xt}=(0,o.useMemo)(()=>{const jn=ja();jn&&console.warn(`
DEPRECATION WARNING: React Router Beta is deprecated and support for it will be removed in a future release.
                     Please migrate to use React Router v6 stable.
                     See https://backstage.io/docs/tutorials/react-router-stable-migration
`);const ca=_n({root:T,discoverers:[ea,ha],collectors:{routing:jn?l:h,collectedPlugins:$a,featureFlags:y}});return ca.collectedPlugins.forEach(Va=>this.plugins.add(Va)),this.verifyPlugins(this.plugins),this.getApiHolder(),{...ca,routeBindings:io(this.bindRoutes)}},[T]);s||(s=!0,ar(qe.paths,qe.parents),rr(Xt,this.plugins));const Vn=Zo(this.configLoader,this.components,Xe),kn="api"in Vn;if(kn){const{api:jn}=Vn;this.configApi=jn}if("node"in Vn)return Vn.node;if(kn&&ye.current){ye.current=!1;const jn=this.getApiHolder().get(k.f);if(jn){for(const ma of this.featureFlags)jn.registerFlag({...ma,pluginId:""});for(const ma of this.plugins.values())if("getFeatureFlags"in ma)for(const ir of ma.getFeatureFlags())jn.registerFlag({name:ir.name,pluginId:ma.getId()});else for(const ir of ma.output())ir.type==="feature-flag"&&jn.registerFlag({name:ir.name,pluginId:ma.getId()});const ca=jn.getRegisteredFlags(),Va=new Set(ca.map(ma=>ma.name));for(const ma of Ut)Va.has(ma)||jn.registerFlag({name:ma,pluginId:""})}}const{ThemeProvider:Tn=Pr,Progress:la}=this.components;return o.createElement(kt,{apis:this.getApiHolder()},o.createElement(eo,{appContext:n},o.createElement(Tn,null,o.createElement(Ha,{routePaths:qe.paths,routeParents:qe.parents,routeObjects:qe.objects,routeBindings:Xt,basePath:Xa(Vn.api)},o.createElement(wa.Provider,{value:{routeObjects:qe.objects,appIdentityProxy:this.appIdentityProxy}},o.createElement(o.Suspense,{fallback:o.createElement(la,null)},T))))))}}getRouter(){return it}getApiHolder(){if(this.apiHolder){for(const n of this.plugins)for(const s of n.getApis())this.apiFactoryRegistry.get(s.api)||this.apiFactoryRegistry.register("default",s);return Ne.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder}this.apiFactoryRegistry.register("static",{api:k.n,deps:{},factory:()=>Se.createWithStorage(this.themes)}),this.apiFactoryRegistry.register("static",{api:k.p,deps:{},factory:()=>{if(!this.configApi)throw new Error("Tried to access config API before config was loaded");return this.configApi}}),this.apiFactoryRegistry.register("static",{api:k.t,deps:{},factory:()=>this.appIdentityProxy}),this.apiFactoryRegistry.register("static",{api:fe.pl,deps:{},factory:()=>this.appLanguageApi}),this.apiFactoryRegistry.register("default",{api:fe.Jm,deps:{languageApi:fe.pl},factory:({languageApi:n})=>Ra.create({languageApi:n,resources:this.translationResources})}),this.apiFactoryRegistry.register("default",{api:k.f,deps:{},factory:()=>new dn});for(const n of this.defaultApis)this.apiFactoryRegistry.register("default",n);for(const n of this.plugins)for(const s of n.getApis())if(!this.apiFactoryRegistry.register("default",s))throw new Error(`Plugin ${n.getId()} tried to register duplicate or forbidden API factory for ${s.api}`);for(const n of this.apis)if(!this.apiFactoryRegistry.register("app",n))throw new Error(`Duplicate or forbidden API factory for ${n.api} in app`);return Ne.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder=new Ne(this.apiFactoryRegistry),this.apiHolder}verifyPlugins(n){const s=new Set;for(const f of n){const T=f.getId();if(s.has(T))throw new Error(`Duplicate plugin found '${T}'`);s.add(T)}}}jr=new WeakMap;function Uo(d){return new Bo(d)}let Ao=!1;const _o=d=>{const n=(0,Ze.nm)(),{NotFoundErrorPage:s}=n.getComponents(),f=(0,o.useMemo)(()=>ja(),[]),ye=[...(0,Ze.OJ)(d.children,Xe=>Xe.getElements().flatMap(qe=>{var Ut;let Xt=qe.props.path;if(Xt==="")return[];Xt=(Ut=Xt==null?void 0:Xt.replace(/\/\*$/,""))!=null?Ut:"/";let Vn=f?qe:qe.props.element;return!f&&!Vn&&(Vn=qe,Ao||(console.warn("DEPRECATION WARNING: All elements within <FlatRoutes> must be of type <Route> with an element prop. Existing usages of <Navigate key=[path] to=[to] /> should be replaced with <Route path=[path] element={<Navigate to=[to] />} />."),Ao=!0)),[{path:Xt,element:Vn,children:qe.props.children?[{path:Xt==="/"?"/":"*",element:qe.props.children}]:void 0}]}).sort((qe,Ut)=>Ut.path.localeCompare(qe.path)).map(qe=>({...qe,path:qe.path==="/"?"/":`${qe.path}/*`}))),{path:"*",element:o.createElement(s,null)}];return(0,_.Ye)(ye)};(0,Ze.h3)(_o,"core.type","FlatRoutes")},23180:($n,Zt,e)=>{"use strict";e.d(Zt,{Db:()=>un,eu:()=>Ca,BI:()=>Ei,cy:()=>lc,fX:()=>us,z7:()=>Xa,UC:()=>Po,dv:()=>fi,lz:()=>Ua,ly:()=>Ge,wB:()=>Oe,DT:()=>X,zZ:()=>Dt,Vf:()=>ds,pp:()=>Fn,M:()=>Ks,bJ:()=>Za,Hk:()=>ms,Y9:()=>To,Pu:()=>L,ST:()=>Ml,of:()=>li,nO:()=>Oa,s3:()=>$l,f1:()=>ki,v0:()=>ln,N_:()=>wa,z9:()=>Ga,rW:()=>fn,h2:()=>Ar,z3:()=>ta,Mm:()=>Hn,YW:()=>Io,dT:()=>Wl,ke:()=>Bn,_1:()=>Mr,kE:()=>ci,l6:()=>s,Bx:()=>rl,Mj:()=>Ui,Cn:()=>Fo,uk:()=>Bi,GE:()=>nl,tW:()=>Al,Ds:()=>vl,O6:()=>Li,hl:()=>sl,c_:()=>bo,Xs:()=>ma,So:()=>ca,Ek:()=>ir,W$:()=>Lr,EV:()=>Va,tA:()=>is,md:()=>Ps,Yl:()=>vs,xO:()=>ic,XI:()=>gi,ny:()=>ps,Bp:()=>ur,hC:()=>Or,HZ:()=>Ko,FS:()=>mo,Ut:()=>Ro});var o=e(7877),m=e(11638),p=e(29365),j=e(38097),B=e(72501),i=e(32881),k=e(74219),Ze=e(65398),Ke=e.n(Ze),a=e(14041),De=e(18846),Ie=e(64947),ie=e(76891),G=e(93453),Ve=e(46805),he=e(61477),_e=e(19087),re=e(58837),Re=e(54917),I=e(268),c=e(7031),R=e(99703),A=e(60882),_=e(50868),F=e(49203),Ae=e(53373),fe=e.n(Ae),ve=e(45250),J=e(18690),v=e(73657),ee=e(21613),oe=e(77125),Rt=e(20279),w=e(40697),sn=e(25577),me=e(71677),kt=e(99594),yt=e(51100),mt=e(5893),It=e(25534),Ne=e(1517),Ct=e(67566),ot=e(41809),zt=e(67991),Tt=e.n(zt),Kt=e(12784),lt=e.n(Kt),ft=e(22249),$t=e(1121),an=e(24260),St=e(20644),jt=e.n(St),D=e(45145),U=e(78149),O=e(42899);const M=e.p+"static/missingAnnotation.67f79e98..svg",te=e.p+"static/noInformation.4b426325..svg",ge=e.p+"static/createComponent.975d1e1e..svg",ze=e.p+"static/noBuild.1715fa71..svg";var bt=e(58007),Qe=e(8109),Mt=e(5951),rn=e(8973),Ft=e(29655),Et=e(91567),we=e(9181),nt=e(6924),Lt=e(60767),Wt=e(28138),le=e(37197),$e=e(43144),xt=e(86613),Yt=e(68887),se=e(63798),ke=e(91467),pe=e(3399),Le=e(62220),et=e.n(Le),pt=e(33742),Bt=e(88951),en=e(40703),Ce=e(59469),Be=e(48653),C=e(45685),W=e(52235),Q=e(90147),rt=e(69076),ct=e(67720),ut=e(95061),tn=e(41857),mn=e(48543),Cn=e(26343),An=e(81215),Gn=e(10437),Mn=e(95479),Wn=e.n(Mn),P=e(61009),K=e(13677),be=e(54801),vt=e(9719),Ot=e(46423),Vt=e(28233),ne=e(55197),Pe=e(45810),je=e.n(Pe),Jt=e(27799),qt=e(93285),cn=e(38605),on=e(31653),wn=e(25301),Kn=e(83313),Yn=e(89019),oa=e(62461),vn=e(64704),ra=e(6774),ia=e(75625),na=e(65859),da=e(5416),_a=e(33494),qn=e(80113),Ea=e(26229),Z=e(46802),Ue=e(78467),tt=e(16975);const ht=e.p+"static/mic-drop.fe3ef4d0..svg";var Se=e(45634),Y=e(1125),Ee=e(73845),ue=e(27326),at=e(97388),N=e(13085),H=e(79065),q=e(55704),ae=e(94509),We=e(16249),Je=e(62248),Fe=e(46195),gt=e(80824),Pt=e(51253),dn=e(3514),wt=e.n(dn);function un(t){const[r,u]=(0,a.useState)([]),E=(0,o.u)(o.l),{anchorOrigin:b={vertical:"top",horizontal:"center"},transientTimeoutMs:x}=t,V=x!=null?x:5e3;(0,a.useEffect)(()=>{const Me=E.alert$().subscribe(dt=>u(_t=>_t.concat(dt)));return()=>{Me.unsubscribe()}},[E]);const[ce]=r;if((0,a.useEffect)(()=>{if(ce&&ce.display==="transient"){const Me=setTimeout(()=>{u(dt=>{const _t=dt.filter(nn=>nn!==ce);return _t.length===dt.length?dt:_t})},V);return()=>clearTimeout(Me)}},[ce,V]),r.length===0)return null;const Te=()=>{u(Me=>Me.filter(dt=>dt!==ce))};return a.createElement(j.A,{open:!0,anchorOrigin:b},a.createElement(k.A,{action:a.createElement(p.A,{color:"inherit",size:"small",onClick:Te,"data-testid":"error-button-close"},a.createElement(i.A,null)),severity:ce.severity},a.createElement(B.A,{component:"span"},String(ce.message),r.length>1&&a.createElement("em",null,` (${r.length-1} older ${Ke()("message",r.length-1)})`))))}const gn="@backstage/autologout:lastSeenOnline",En=({enableEffect:t,autologoutIsEnabled:r,idleTimeoutSeconds:u,lastSeenOnlineStore:E,identityApi:b})=>{useEffect(()=>{if(r&&t){const x=E.get();if(x){const ce=Math.ceil(new Date().getTime()/1e3),Te=Math.ceil(x.getTime()/1e3);ce-Te>u&&b.signOut()}E.save(new Date)}else E.delete()},[r,t,b,u,E])},Nn=t=>{const{idleTimer:r,setOpen:u,open:E,promptTimeoutMillis:b,remainingTime:x,setRemainingTime:V}=t;useEffect(()=>{const dt=setInterval(()=>{V(Math.ceil(r.getRemainingTime()))},500);return()=>{clearInterval(dt)}},[r,V]);const ce=()=>{u(!1),r.activate()},Me=Math.max(x-b/1e3,0)>1?"seconds":"second";return React.createElement(Dialog,{open:E,"data-testid":"inactivity-prompt-dialog"},React.createElement(DialogTitle,null,"Logging out due to inactivity"),React.createElement(DialogContent,null,React.createElement(DialogContentText,null,"You are about to be disconnected in"," ",React.createElement("b",null,Math.ceil(x/1e3)," ",Me),". Are you still there?")),React.createElement(DialogActions,null,React.createElement(Button$1,{onClick:ce,color:"secondary",variant:"contained",size:"small"},"Yes! Don't log me out")))};class On{constructor(r){this.key=r}save(r){localStorage.setItem(this.key,r.toJSON())}delete(){localStorage.removeItem(this.key)}get(){const r=localStorage.getItem(this.key);return r!==null?new Date(Date.parse(r)):null}}const Ln=({idleTimeoutMinutes:t,events:r,useWorkerTimers:u,logoutIfDisconnected:E,promptBeforeIdleSeconds:b,promptOpen:x,setPromptOpen:V,remainingTimeCountdown:ce,setRemainingTimeCountdown:Te,identityApi:Me,lastSeenOnlineStore:dt})=>{const _t=b*1e3,nn=_t>0,Ht=async()=>{V(!0),Te(_t)},hn=()=>{V(!1),Te(0),Me.signOut()},Un=()=>{V(!1),Te(0)},Qn=(ka,tr)=>{dt.save(new Date)},pa=useIdleTimer({timeout:t*60*1e3,events:r,crossTab:!0,name:"autologout-timer",timers:u?workerTimers:void 0,onIdle:hn,onActive:nn?Un:void 0,onAction:E?Qn:void 0,onPrompt:nn?Ht:void 0,promptBeforeIdle:nn?_t:void 0,syncTimers:1e3});return React.createElement(React.Fragment,null,nn&&React.createElement(Nn,{idleTimer:pa,open:x,setOpen:V,remainingTime:ce,setRemainingTime:Te,promptTimeoutMillis:_t}))},Sn={enabled:!0,idleTimeoutMinutes:.5,promptBeforeIdleSeconds:10,useWorkerTimers:!0,logoutIfDisconnected:!0},In=null,pn=(t,r)=>{var u,E,b,x,V,ce,Te,Me,dt,_t;return{enabled:(E=(u=t.getOptionalBoolean("auth.autologout.enabled"))!=null?u:r.enabled)!=null?E:Sn.enabled,idleTimeoutMinutes:(x=(b=t.getOptionalNumber("auth.autologout.idleTimeoutMinutes"))!=null?b:r.idleTimeoutMinutes)!=null?x:Sn.idleTimeoutMinutes,promptBeforeIdleSeconds:(ce=(V=t.getOptionalNumber("auth.autologout.promptBeforeIdleSeconds"))!=null?V:r.promptBeforeIdleSeconds)!=null?ce:Sn.promptBeforeIdleSeconds,useWorkerTimers:(Me=(Te=t.getOptionalBoolean("auth.autologout.useWorkerTimers"))!=null?Te:r.useWorkerTimers)!=null?Me:Sn.useWorkerTimers,logoutIfDisconnected:(_t=(dt=t.getOptionalBoolean("auth.autologout.logoutIfDisconnected"))!=null?dt:r.logoutIfDisconnected)!=null?_t:Sn.logoutIfDisconnected}},yn=t=>{const r=useApi(identityApiRef),u=useApi(configApiRef),[E,b]=useState(!1);useEffect(()=>{async function Un(Qn){(await Qn.getCredentials()).token?b(!0):b(!1)}Un(r)},[r]);const{enabled:x,idleTimeoutMinutes:V,promptBeforeIdleSeconds:ce,logoutIfDisconnected:Te,useWorkerTimers:Me}=useMemo(()=>pn(u,t),[u,t]);useEffect(()=>{if(V<.5)throw new Error("\u274C idleTimeoutMinutes property should be >= 0.5 minutes (30 seconds).");if(ce<0)throw new Error("\u274C promptBeforeIdleSeconds property should be >= 0 seconds. Set to 0 to disable the prompt.");if(V*60<=ce)throw new Error("\u274C promptBeforeIdleSeconds should be smaller than idleTimeoutMinutes")},[V,ce]);const dt=useMemo(()=>new On(gn),[]),[_t,nn]=useState(!1),[Ht,hn]=useState(0);return En({enableEffect:Te,autologoutIsEnabled:x&&E,idleTimeoutSeconds:V*60,lastSeenOnlineStore:dt,identityApi:r}),!x||!E?null:React.createElement(Ln,{idleTimeoutMinutes:V,promptBeforeIdleSeconds:ce,useWorkerTimers:Me,events:In,logoutIfDisconnected:Te,promptOpen:_t,setPromptOpen:nn,remainingTimeCountdown:Ht,setRemainingTimeCountdown:hn,identityApi:r,lastSeenOnlineStore:dt})};function aa(t){let r=0;for(let E=0;E<t.length;E++)r=t.charCodeAt(E)+((r<<5)-r);let u="#";for(let E=0;E<3;E++){const b=r>>E*8&255;u+=`00${b.toString(16)}`.slice(-2)}return u}function sa(t){var r;const u=t.trim().split(" "),E=(r=u[0])!=null?r:"",b=u.length>1?u[u.length-1]:"";return E&&b?`${E.charAt(0)}${b.charAt(0)}`:E.charAt(0)}const ba=(0,re.A)(t=>({avatar:{width:"4rem",height:"4rem",color:t.palette.common.white},avatarText:{fontWeight:t.typography.fontWeightBold,letterSpacing:"1px",textTransform:"uppercase"}}),{name:"BackstageAvatar"});function Ca(t){const{displayName:r,picture:u,customStyles:E}=t,b=ba();let x={...E};const V={fontFamily:x.fontFamily,fontSize:x.fontSize,fontWeight:x.fontWeight};return u||(x={backgroundColor:aa(r||""),...E}),a.createElement(_e.A,{alt:r,src:u,className:b.avatar,style:x},r&&a.createElement(B.A,{variant:"h6",component:"span",className:b.avatarText,style:V},sa(r)))}function Na(){const[t]=(0,J.AV)(a.createElement(J.qh,{index:!0,element:a.createElement("div",null)}));return!t.index}const Fa=(0,re.A)({visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",userSelect:"none",whiteSpace:"nowrap",height:1,width:1},externalLink:{position:"relative"}},{name:"Link"}),La=t=>/^([a-z+.-]+):/.test(t),Pa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,za=window.open;if(za&&!za.__backstage){const t=function(...u){const E=String(u[0]);if(Pa.test(E))throw new Error("Rejected window.open() with a javascript: URL as a security precaution");return za.apply(this,u)};t.__backstage=!0,window.open=t}const Ya=()=>{try{return(0,o.u)(o.p).getOptionalString("app.baseUrl")}catch{return}},Ja=()=>{var t;const r="http://sample.dev",u=(t=Ya())!=null?t:"/",{pathname:E}=new URL(u,r);return(0,ve.trimEnd)(E,"/")},lr=t=>{let r=String(t);const u=Ja(),E=La(r),b=r.startsWith(u);return!E&&!b&&(r=u.concat(r)),r},Qa=t=>{var r;return t instanceof Array?t.map(Qa).join(" ").trim():typeof t=="object"&&t?Qa((r=t==null?void 0:t.props)==null?void 0:r.children):["string","number"].includes(typeof t)?String(t):""},wa=a.forwardRef(({onClick:t,noTrack:r,...u},E)=>{const b=Fa(),x=(0,m.st)(),V=Na()?lr(u.to):u.to,ce=Qa(u.children)||V,Te=La(V),Me=Te&&!!/^https?:/.exec(V);if(Pa.test(V))throw new Error("Link component rejected javascript: URL as a security precaution");const dt=_t=>{t==null||t(_t),r||x.captureEvent("click",ce,{attributes:{to:V}})};return Te?a.createElement(F.A,{...Me?{target:"_blank",rel:"noopener"}:{},...u,...u["aria-label"]?{"aria-label":`${u["aria-label"]}, Opens in a new window`}:{},ref:E,href:V,onClick:dt,className:fe()(b.externalLink,u.className)},u.children,a.createElement(B.A,{component:"span",className:b.visuallyHidden},", Opens in a new window")):a.createElement(F.A,{...u,ref:E,component:v.N_,to:V,onClick:dt})}),ja=a.forwardRef((t,r)=>a.createElement(wa,{ref:r,...t,color:"initial"})),Ga=a.forwardRef((t,r)=>a.createElement(Ie.A,{ref:r,component:ja,...t})),yr=null;function Ua(t){const{text:r,tooltipDelay:u=1e3,tooltipText:E="Text copied to clipboard","aria-label":b="Copy text"}=t,x=(0,o.u)(o.r),[V,ce]=(0,a.useState)(!1),[{error:Te},Me]=(0,yt.A)();(0,a.useEffect)(()=>{Te&&x.post(Te)},[Te,x]);const dt=_t=>{_t.stopPropagation(),ce(!0),Me(r)};return a.createElement(a.Fragment,null,a.createElement(me.Ay,{id:"copy-test-tooltip",title:E,placement:"top",leaveDelay:u,onClose:()=>ce(!1),open:V},a.createElement(p.A,{onClick:dt,"aria-label":b},a.createElement(kt.A,null))))}function Xa(t){const{text:r,language:u,showLineNumbers:E=!1,highlightedNumbers:b,customStyle:x,showCopyCodeButton:V=!1}=t,ce=(0,Re.A)(),Te=ce.palette.type==="dark"?w.A:sn.A,Me=ce.palette.type==="dark"?"#256bf3":"#e6ffed";return a.createElement(oe.A,{position:"relative"},a.createElement(Rt.A,{customStyle:x,language:u,style:Te,showLineNumbers:E,wrapLines:!0,lineNumberStyle:{color:ce.palette.textVerySubtle},lineProps:dt=>b!=null&&b.includes(dt)?{style:{backgroundColor:Me}}:{}},r),V&&a.createElement(oe.A,{position:"absolute",top:0,right:0},a.createElement(Ua,{text:r})))}function Ge(t){const{title:r,to:u}=t,E=(0,mt.A)(b=>b.breakpoints.down("xs"));return u?E?a.createElement(p.A,{component:v.N_,color:"primary",title:r,size:"small",to:u},a.createElement(It.A,null)):a.createElement(Ie.A,{component:v.N_,variant:"contained",color:"primary",to:u},r):null}var X;(t=>{(r=>{r.TOP_BOTTOM="TB",r.BOTTOM_TOP="BT",r.LEFT_RIGHT="LR",r.RIGHT_LEFT="RL"})(t.Direction||(t.Direction={})),(r=>{r.UP_LEFT="UL",r.UP_RIGHT="UR",r.DOWN_LEFT="DL",r.DOWN_RIGHT="DR"})(t.Alignment||(t.Alignment={})),(r=>{r.NETWORK_SIMPLEX="network-simplex",r.TIGHT_TREE="tight-tree",r.LONGEST_PATH="longest-path"})(t.Ranker||(t.Ranker={})),(r=>{r.LEFT="l",r.RIGHT="r",r.CENTER="c"})(t.LabelPosition||(t.LabelPosition={}))})(X||(X={}));const it=(0,re.A)(t=>({node:{fill:t.palette.primary.light,stroke:t.palette.primary.light},text:{fill:t.palette.primary.contrastText}}),{name:"BackstageDependencyGraphDefaultNode"});function _n({node:{id:t}}){const r=it(),[u,E]=a.useState(0),[b,x]=a.useState(0),V=a.useRef(null);a.useLayoutEffect(()=>{if(V.current){let{height:dt,width:_t}=V.current.getBBox();dt=Math.round(dt),_t=Math.round(_t),(dt!==b||_t!==u)&&(E(_t),x(dt))}},[u,b]);const ce=10,Te=u+ce*2,Me=b+ce*2;return a.createElement("g",null,a.createElement("rect",{className:r.node,width:Te,height:Me,rx:10}),a.createElement("text",{ref:V,className:r.text,y:Me/2,x:Te/2,textAnchor:"middle",alignmentBaseline:"middle"},t))}const xn="arrow-marker",ea="node",ha="edge",$a="label",Ka=(0,ft.A)(t=>({node:{transition:`${t.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphNode"}),va=t=>a.createElement(_n,{...t});function xa({render:t=va,setNode:r,node:u}){const{width:E,height:b,x=0,y:V=0}=u,ce=u,Te=Ka(),Me=a.useRef(null);return a.useLayoutEffect(()=>{if(Me.current){let{height:dt,width:_t}=Me.current.getBBox();dt=Math.round(dt),_t=Math.round(_t),(dt!==b||_t!==E)&&r(u.id,{...u,height:dt,width:_t})}},[u,E,b,r]),a.createElement("g",{ref:Me,"data-testid":ea,className:Te.node,transform:`translate(${x-E/2},${V-b/2})`},t({node:ce}))}const Da=(0,ft.A)(t=>({text:{fill:t.palette.textContrast}}),{name:"BackstageDependencyGraphDefaultLabel"});function er({edge:{label:t}}){const r=Da();return a.createElement("text",{className:r.text,textAnchor:"middle"},t)}const h=(0,ft.A)(t=>({path:{strokeWidth:1,stroke:t.palette.textSubtle,fill:"none",transition:`${t.transitions.duration.shortest}ms`},label:{transition:`${t.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphEdge"}),l=t=>a.createElement(er,{...t});function y({render:t=l,setEdge:r,id:u,edge:E,curve:b}){const{x=0,y:V=0,width:ce,height:Te,points:Me}=E,dt=E,_t=h(),nn=a.useRef(null);a.useLayoutEffect(()=>{if(nn.current){let{height:Un,width:Qn}=nn.current.getBBox();Un=Math.round(Un),Qn=Math.round(Qn),(Un!==Te||Qn!==ce)&&r(u,{...E,height:Un,width:Qn})}},[E,Te,ce,r,u]);let Ht="";const hn=a.useMemo(()=>$t.A().x(Un=>Un.x).y(Un=>Un.y).curve(an[b]),[b]);if(Me){const Un=Me.filter(Qn=>jt()(Qn.x)&&jt()(Qn.y));Ht=hn(Un)||""}return a.createElement(a.Fragment,null,Ht&&a.createElement("path",{"data-testid":ha,className:_t.path,d:Ht}),dt.label?a.createElement("g",{ref:nn,"data-testid":$a,className:_t.label,transform:`translate(${x},${V})`},t({edge:dt})):null)}const z="workspace";function Oe(t){var r,u;const{edges:E,nodes:b,renderNode:x,direction:V=X.Direction.TOP_BOTTOM,align:ce,nodeMargin:Te=50,edgeMargin:Me=10,rankMargin:dt=50,paddingX:_t=0,paddingY:nn=0,acyclicer:Ht,ranker:hn=X.Ranker.NETWORK_SIMPLEX,labelPosition:Un=X.LabelPosition.RIGHT,labelOffset:Qn=10,edgeRanks:pa=1,edgeWeight:ka=1,renderLabel:tr,defs:Xn,zoom:Ia="enabled",curve:Wa="curveMonotoneX",fit:nr="grow",...br}=t,Vr=(0,ot.A)(),[hr,Yr]=a.useState(100),[Jr,Mo]=a.useState(100),Aa=a.useRef(new(Tt()).graphlib.Graph),[Qr,gr]=a.useState(((r=Aa.current.graph())==null?void 0:r.width)||0),[wr,po]=a.useState(((u=Aa.current.graph())==null?void 0:u.height)||0),[ho,xr]=a.useState([]),[Br,Jo]=a.useState([]),go=Math.max(Qr,hr),Xr=Math.max(wr,Jr),cc=Math.min(wr,Jr),uc=nr==="grow"?Xr:cc,dc=a.useMemo(()=>lt()(Ba=>{if(!Ba)return;const qa=Ct.A(Ba),Ma=Ct.A(Ba.getElementById(z));function fr(){qa.call(Ne.s_().scaleExtent([1,1/0]).on("zoom",Tr=>{Tr.transform.x=Math.min(0,Math.max(Tr.transform.x,go-go*Tr.transform.k)),Tr.transform.y=Math.min(0,Math.max(Tr.transform.y,Xr-Xr*Tr.transform.k)),Ma.attr("transform",Tr.transform)}))}Ia==="enabled"?fr():Ia==="enable-on-click"&&qa.on("click",()=>fr());const{width:Er,height:Lo}=Ba.getBoundingClientRect();hr!==Er&&Yr(Er),Jr!==Lo&&Mo(Lo)},100),[Jr,hr,go,Xr,Ia]),zi=a.useCallback(()=>{const Ba=Aa.current.nodes(),qa=Aa.current.edges();Ba.forEach(Ma=>{b.some(Er=>Er.id===Ma)||Aa.current.removeNode(Ma)}),qa.forEach(Ma=>{E.some(Er=>Er.from===Ma.v&&Er.to===Ma.w)||Aa.current.removeEdge(Ma.v,Ma.w)}),b.forEach(Ma=>{const fr=Aa.current.nodes().find(Er=>Ma.id===Er);if(fr&&Aa.current.node(fr)){const{width:Er,height:Lo,x:Tr,y:hc}=Aa.current.node(fr);Aa.current.setNode(fr,{...Ma,width:Er,height:Lo,x:Tr,y:hc})}else Aa.current.setNode(Ma.id,{...Ma,width:0,height:0})}),E.forEach(Ma=>{Aa.current.setEdge(Ma.from,Ma.to,{...Ma,label:Ma.label,width:0,height:0,labelpos:Un,labeloffset:Qn,weight:ka,minlen:pa})})},[E,b,Un,Qn,ka,pa]),fo=a.useMemo(()=>lt()(()=>{Tt().layout(Aa.current);const{height:Ba,width:qa}=Aa.current.graph(),Ma=Math.max(0,Ba||0),fr=Math.max(0,qa||0);gr(fr),po(Ma),xr(Aa.current.nodes()),Jo(Aa.current.edges())},250,{leading:!0}),[]);a.useEffect(()=>(Aa.current.setGraph({rankdir:V,align:ce,nodesep:Te,edgesep:Me,ranksep:dt,marginx:_t,marginy:nn,acyclicer:Ht,ranker:hn}),zi(),fo(),fo.cancel),[Ht,ce,V,Me,_t,nn,Te,dt,hn,zi,fo]);function mc(Ba,qa){return Aa.current.setNode(Ba,qa),fo(),Aa.current}function pc(Ba,qa){return Aa.current.setEdge(Ba,qa),fo(),Aa.current}return a.createElement("svg",{ref:dc,...br,width:"100%",height:uc,viewBox:`0 0 ${go} ${Xr}`},a.createElement("defs",null,a.createElement("marker",{id:xn,viewBox:"0 0 24 24",markerWidth:"14",markerHeight:"14",refX:"16",refY:"12",orient:"auto",markerUnits:"strokeWidth"},a.createElement("path",{fill:Vr.palette.textSubtle,d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),Xn),a.createElement("g",{id:z},a.createElement("svg",{width:Qr,height:wr,y:Xr/2-wr/2,x:go/2-Qr/2,viewBox:`0 0 ${Qr} ${wr}`},Br.map(Ba=>{const qa=Aa.current.edge(Ba);return qa?a.createElement(y,{key:`${Ba.v}-${Ba.w}`,id:Ba,setEdge:pc,render:tr,edge:qa,curve:Wa}):null}),ho.map(Ba=>{const qa=Aa.current.node(Ba);return qa?a.createElement(xa,{key:Ba,setNode:mc,render:x,node:qa}):null}))))}const st=(0,re.A)(t=>{var r,u;return{root:{padding:t.spacing(0),marginBottom:t.spacing(0),marginTop:t.spacing(0),display:"flex",flexFlow:"row nowrap"},topPosition:{position:"relative",marginBottom:t.spacing(6),marginTop:-t.spacing(3),zIndex:"unset"},icon:{fontSize:t.typography.h6.fontSize},content:{width:"100%",maxWidth:"inherit",flexWrap:"nowrap",color:t.palette.banner.text},message:{display:"flex",alignItems:"center","& a":{color:t.palette.banner.link}},button:{color:(r=t.palette.banner.closeButtonColor)!=null?r:"inherit"},info:{backgroundColor:t.palette.banner.info},error:{backgroundColor:t.palette.banner.error},warning:{backgroundColor:(u=t.palette.banner.warning)!=null?u:t.palette.banner.error}}},{name:"BackstageDismissableBanner"}),Dt=t=>{var r;const{variant:u,message:E,id:b,fixed:x=!1}=t,V=st(),Te=(0,o.u)(o.x).forBucket("notifications"),Me=(r=Te.snapshot("dismissedBanners").value)!=null?r:[],[dt,_t]=(0,a.useState)(new Set(Me)),nn=(0,D.A)(Te.observe$("dismissedBanners"));(0,a.useEffect)(()=>{var hn;if(nn!=null&&nn.value){const Un=(hn=nn==null?void 0:nn.value)!=null?hn:[];_t(new Set(Un))}},[nn==null?void 0:nn.value]);const Ht=()=>{Te.set("dismissedBanners",[...dt,b])};return a.createElement(j.A,{anchorOrigin:x?{vertical:"bottom",horizontal:"center"}:{vertical:"top",horizontal:"center"},open:!dt.has(b),classes:{root:fe()(V.root,!x&&V.topPosition)}},a.createElement(U.A,{classes:{root:fe()(V.content,V[u]),message:V.message},message:E,action:[a.createElement(p.A,{key:"dismiss",title:"Permanently dismiss this message",className:V.button,onClick:Ht},a.createElement(i.A,{className:V.icon}))]}))},Qt=(0,re.A)({generalImg:{width:"95%",zIndex:2,position:"relative",left:"50%",top:"50%",transform:"translate(-50%, 15%)"}},{name:"BackstageEmptyStateImage"}),Rn=({missing:t})=>{const r=Qt();switch(t){case"field":return a.createElement("img",{src:M,className:r.generalImg,alt:"annotation is missing"});case"info":return a.createElement("img",{src:te,alt:"no Information",className:r.generalImg});case"content":return a.createElement("img",{src:ge,alt:"create Component",className:r.generalImg});case"data":return a.createElement("img",{src:ze,alt:"no Build",className:r.generalImg});default:return null}},zn=(0,re.A)(t=>({root:{backgroundColor:t.palette.background.default,padding:t.spacing(2,0,0,0)},action:{marginTop:t.spacing(2)},imageContainer:{position:"relative"}}),{name:"BackstageEmptyState"});function Fn(t){const{title:r,description:u,missing:E,action:b}=t,x=zn();return a.createElement(O.A,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",className:x.root,spacing:2},a.createElement(O.A,{item:!0,xs:12,md:6},a.createElement(O.A,{container:!0,direction:"column"},a.createElement(O.A,{item:!0,xs:!0},a.createElement(B.A,{variant:"h5"},r)),a.createElement(O.A,{item:!0,xs:!0},a.createElement(B.A,{variant:"body1"},u)),a.createElement(O.A,{item:!0,xs:!0,className:x.action},b))),a.createElement(O.A,{item:!0,xs:12,md:6,className:x.imageContainer},typeof E=="string"?a.createElement(Rn,{missing:E}):E.customImage))}const Sa=`apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: example
  description: example.com
  annotations:
    ANNOTATION: value
spec:
  type: website
  lifecycle: production
  owner: user:guest`,Ha=/^.*ANNOTATION.*$/m,ar=Sa.match(Ha)[0],rr=Sa.split(`
`).findIndex(t=>Ha.test(t)),qr=(0,re.A)(t=>({code:{borderRadius:6,margin:t.spacing(2,0),background:t.palette.type==="dark"?"#444":t.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function eo(t){return Array.from(Array(t+1).keys(),r=>r+rr)}function kr(t){const r=t.map(u=>ar.replace("ANNOTATION",u)).join(`
`);return Sa.replace(ar,r)}function to(t){const r=t.length<=1;return React.createElement(React.Fragment,null,"The ",r?"annotation":"annotations"," ",t.map(u=>React.createElement("code",null,u)).reduce((u,E)=>React.createElement(React.Fragment,null,u,", ",E))," ",r?"is":"are"," missing. You need to add the"," ",r?"annotation":"annotations"," to your component if you want to enable this tool.")}function Ur(t){const{annotation:r,readMoreUrl:u}=t,E=Array.isArray(r)?r:[r],b=u||"https://backstage.io/docs/features/software-catalog/well-known-annotations",x=qr();return React.createElement(Fn,{missing:"field",title:"Missing Annotation",description:to(E),action:React.createElement(React.Fragment,null,React.createElement(Typography,{variant:"body1"},"Add the annotation to your component YAML as shown in the highlighted example below:"),React.createElement(Box,{className:x.code},React.createElement(Xa,{text:kr(E),language:"yaml",showLineNumbers:!0,highlightedNumbers:eo(E.length),customStyle:{background:"inherit",fontSize:"115%"}})),React.createElement(Button$1,{color:"primary",component:wa,to:b},"Read more"))})}const Wr=(0,re.A)(t=>({markdown:{"& table":{borderCollapse:"collapse",border:`1px solid ${t.palette.border}`},"& th, & td":{border:`1px solid ${t.palette.border}`,padding:t.spacing(1)},"& td":{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:t.spacing(3,2,3,2.5),borderBottom:0},"& th":{backgroundColor:t.palette.background.paper},"& tr":{backgroundColor:t.palette.background.paper},"& tr:nth-child(odd)":{backgroundColor:t.palette.background.default},"& a":{color:t.palette.link},"& img":{maxWidth:"100%"}}}),{name:"BackstageMarkdownContent"}),Dr=(t,r)=>r?typeof r=="string"?t+r:a.Children.toArray(r.props.children).reduce(Dr,t):t,cr=({level:t,children:r})=>{const b=a.Children.toArray(r).reduce(Dr,"").toLocaleLowerCase("en-US").replace(/\W/g,"-");return a.createElement(`h${t}`,{id:b},r)},Cr={code:({inline:t,className:r,children:u,...E})=>{const b=String(u).replace(/\n+$/,""),x=/language-(\w+)/.exec(r||"");return!t&&x?a.createElement(Xa,{language:x[1],text:b}):a.createElement("code",{className:r,...E},u)},h1:cr,h2:cr,h3:cr,h4:cr,h5:cr,h6:cr};function Ar(t){const{content:r,dialect:u="gfm",linkTarget:E,transformLinkUri:b,transformImageUri:x,className:V}=t,ce=Wr();return a.createElement(Lt.$,{remarkPlugins:u==="gfm"?[Wt.A]:[],className:`${ce.markdown} ${V}`,children:r,components:Cr,linkTarget:E,transformLinkUri:b,transformImageUri:x})}const Pr=(t,r)=>(r.palette.type==="light"?I.e$:I.a)(r.palette[t].light,.6),Nr=(t,r)=>(r.palette.type==="light"?I.a:I.e$)(r.palette[t].light,.9),Fr=(0,re.A)(t=>({root:{marginRight:t.spacing(1),fill:({severity:r})=>Pr(r,t)}})),no=({severity:t})=>{const r=Fr({severity:t});return a.createElement(we.A,{classes:r})},ao=({severity:t})=>{const r=Fr({severity:t});return a.createElement(nt.A,{classes:r})},ro=(0,re.A)(t=>({panel:{backgroundColor:({severity:r})=>Nr(r,t),color:({severity:r})=>Pr(r,t),verticalAlign:"middle"},summary:{display:"flex",flexDirection:"row"},summaryText:{color:({severity:r})=>Pr(r,t),fontWeight:t.typography.fontWeightBold},markdownContent:{"& p":{display:"inline"}},message:{width:"100%",display:"block",color:({severity:r})=>Pr(r,t),backgroundColor:({severity:r})=>Nr(r,t)},details:{width:"100%",display:"block",color:t.palette.textContrast,backgroundColor:t.palette.background.default,border:`1px solid ${t.palette.border}`,padding:t.spacing(2),fontFamily:"sans-serif"}}),{name:"BackstageWarningPanel"}),oo=t=>t.charAt(0).toLocaleUpperCase("en-US")+t.slice(1);function ur(t){const{severity:r="warning",title:u,titleFormat:E,message:b,children:x,defaultExpanded:V}=t,ce=ro({severity:r}),Te=oo(r)+(u?`: ${u}`:"");return a.createElement(rn.A,{defaultExpanded:V!=null?V:!1,className:ce.panel,role:"alert"},a.createElement(Ft.A,{expandIcon:a.createElement(ao,{severity:r}),className:ce.summary},a.createElement(no,{severity:r}),a.createElement(B.A,{className:ce.summaryText,variant:"subtitle1"},E==="markdown"?a.createElement(Ar,{content:Te,className:ce.markdownContent}):Te)),(b||x)&&a.createElement(Et.A,null,a.createElement(O.A,{container:!0},b&&a.createElement(O.A,{item:!0,xs:12},a.createElement(B.A,{className:ce.message,variant:"body1"},b)),x&&a.createElement(O.A,{item:!0,xs:12,className:ce.details},x))))}const io=(0,re.A)(t=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:t.spacing(2)},divider:{margin:t.spacing(2)}}),{name:"BackstageErrorPanel"}),Kr=({error:t,message:r,stack:u,children:E})=>{const b=io();return a.createElement(bt.A,{dense:!0},a.createElement(Qe.A,{alignItems:"flex-start"},a.createElement(Mt.A,{classes:{secondary:b.text},primary:"Error",secondary:t}),a.createElement(Ua,{text:t})),a.createElement(Qe.A,{alignItems:"flex-start"},a.createElement(Mt.A,{classes:{secondary:b.text},primary:"Message",secondary:r}),a.createElement(Ua,{text:r})),u&&a.createElement(Qe.A,{alignItems:"flex-start"},a.createElement(Mt.A,{classes:{secondary:b.text},primary:"Stack Trace",secondary:u}),a.createElement(Ua,{text:u})),E)};function Za(t){const{title:r,error:u,defaultExpanded:E,titleFormat:b,children:x}=t;return a.createElement(ur,{severity:"error",title:r!=null?r:u.message,defaultExpanded:E,titleFormat:b},a.createElement(Kr,{error:u.name,message:u.message,stack:u.stack,children:x}))}const $r=(0,re.A)(t=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:t.spacing(2)},divider:{margin:t.spacing(2)}}),{name:"BackstageResponseErrorPanel"});function Mr(t){var r;const{title:u,error:E,defaultExpanded:b}=t,x=$r();if(E.name!=="ResponseError")return a.createElement(Za,{title:u!=null?u:E.message,defaultExpanded:b,error:E});const{body:V,cause:ce}=E,{request:Te,response:Me}=V,dt=`${Me.statusCode}: ${ce.name}`,_t=Te&&`${Te.method} ${Te.url}`,nn=ce.message.replace(/\\n/g,`
`),Ht=(r=ce.stack)==null?void 0:r.replace(/\\n/g,`
`),hn=JSON.stringify(V,void 0,2);return a.createElement(Za,{title:u!=null?u:E.message,defaultExpanded:b,error:{name:dt,message:nn,stack:Ht}},_t&&a.createElement(Qe.A,{alignItems:"flex-start"},a.createElement(Mt.A,{classes:{secondary:x.text},primary:"Request",secondary:Te?`${_t}`:void 0}),a.createElement(Ua,{text:_t})),a.createElement(a.Fragment,null,a.createElement(le.A,{component:"li",className:x.divider}),a.createElement(Qe.A,{alignItems:"flex-start"},a.createElement(Mt.A,{classes:{secondary:x.text},primary:"Full Error as JSON"})),a.createElement(Xa,{language:"json",text:hn,showCopyCodeButton:!0})))}function _r(t){const r=document.createElement("div");return r.setAttribute("id",t),r}function dr(t){document.body.insertBefore(t,document.body.lastElementChild.nextElementSibling)}function Sr(t){const r=useRef(null);useEffect(function(){const b=document.querySelector(`#${t}`),x=b||_r(t);return b||dr(x),x.appendChild(r.current),function(){r.current.remove(),x.childNodes.length===-1&&x.remove()}},[t]);function u(){return r.current||(r.current=document.createElement("div")),r.current}return u()}const mr="core.calloutSeen";function or(){const[t,r]=useState(()=>{const E=localStorage.getItem(mr);return E?JSON.parse(E):{}}),u=useCallback((E,b)=>{const x=localStorage.getItem(mr),ce={...x?JSON.parse(x):{},[E]:b};r(ce),localStorage.setItem(mr,JSON.stringify(ce))},[]);return{states:t,setState:u}}function so(t){const{states:r,setState:u}=or(),E=useCallback(()=>{u(t,!0)},[u,t]);return{seen:r[t]===!0,markSeen:E}}function lo(t){const{seen:r,markSeen:u}=so(t);return{show:r===!1,hide:u}}const co=(0,re.A)(t=>({"@keyframes pulsateSlightly":{"0%":{transform:"scale(1.0)"},"100%":{transform:"scale(1.1)"}},"@keyframes pulsateAndFade":{"0%":{transform:"scale(1.0)",opacity:.9},"100%":{transform:"scale(1.5)",opacity:0}},featureWrapper:{position:"relative"},backdrop:{zIndex:2e3,position:"fixed",overflow:"hidden",left:0,right:0,top:0,bottom:0},dot:{position:"absolute",backgroundColor:"transparent",borderRadius:"100%",border:"1px solid rgba(103, 146, 180, 0.98)",boxShadow:"0px 0px 0px 20000px rgba(0, 0, 0, 0.5)",zIndex:2001,transformOrigin:"center center",animation:"$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite"},pulseCircle:{width:"100%",height:"100%",backgroundColor:"transparent",borderRadius:"100%",border:`2px solid ${t.palette.common.white}`,zIndex:2001,transformOrigin:"center center",animation:"$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite"},text:{position:"absolute",color:t.palette.common.white,zIndex:2003}}),{name:"BackstageFeatureCalloutCircular"});function uo(t){const{featureId:r,title:u,description:E,children:b}=t,{show:x,hide:V}=lo(r),ce=Sr("core.callout"),Te=useRef(null),[Me,dt]=useState(),_t=co(),nn=useCallback(()=>{if(Te.current){const Ht=Te.current.getBoundingClientRect(),hn=Math.max(Ht.width,Ht.height),Un=800,Qn=Ht.x-(hn-Ht.width)/2-Un,pa=Ht.y-(hn-Ht.height)/2-Un,ka=hn+2*Un,tr=450,Xn=Ht.x+Ht.width/2-tr,Ia=Ht.y-(hn-Ht.height)/2+hn+20;dt({dotLeft:Qn,dotTop:pa,dotSize:ka,borderWidth:Un,textTop:Ia,textLeft:Xn,textWidth:tr})}},[]);return useEffect(()=>(window.addEventListener("resize",nn),window.addEventListener("scroll",nn),()=>{window.removeEventListener("resize",nn),window.removeEventListener("scroll",nn)}),[nn]),useLayoutEffect(nn,[Te.current,nn]),x?React.createElement(React.Fragment,null,React.createElement(Box,{className:_t.featureWrapper,ref:Te},b),createPortal(React.createElement(Box,{className:_t.backdrop},React.createElement(ClickAwayListener,{onClickAway:V},React.createElement(React.Fragment,null,React.createElement(Box,{className:_t.dot,"data-testid":"dot",style:{left:Me==null?void 0:Me.dotLeft,top:Me==null?void 0:Me.dotTop,width:Me==null?void 0:Me.dotSize,height:Me==null?void 0:Me.dotSize,borderWidth:Me==null?void 0:Me.borderWidth},onClick:V,onKeyDown:V,role:"button",tabIndex:0},React.createElement(Box,{className:_t.pulseCircle})),React.createElement(Box,{className:_t.text,"data-testid":"text",style:{left:Me==null?void 0:Me.textLeft,top:Me==null?void 0:Me.textTop,width:Me==null?void 0:Me.textWidth}},React.createElement(Typography,{variant:"h2",paragraph:!0},u),React.createElement(Typography,null,E))))),ce)):React.createElement(React.Fragment,null,b)}const zr=(0,re.A)(t=>({link:{display:"grid",justifyItems:"center",gridGap:4,textAlign:"center"},disabled:{color:t.palette.text.secondary,cursor:"default"},primary:{color:t.palette.primary.main},secondary:{color:t.palette.secondary.main},label:{textTransform:"uppercase",fontWeight:t.typography.fontWeightBold,letterSpacing:1.2}}),{name:"BackstageIconLinkVertical"});function g({color:t="primary",disabled:r=!1,href:u="#",icon:E=a.createElement(xt.A,null),label:b,onClick:x,title:V}){const ce=zr();return r?a.createElement(oe.A,{title:V,className:fe()(ce.link,ce.disabled)},E,a.createElement(B.A,{variant:"caption",component:"span",className:ce.label},b)):a.createElement(wa,{title:V,className:fe()(ce.link,ce[t]),to:u,onClick:x},E,a.createElement(B.A,{variant:"caption",component:"span",className:ce.label},b))}const S=(0,re.A)(t=>({links:{margin:t.spacing(2,0),display:"grid",gridAutoFlow:"column",gridAutoColumns:"min-content",gridGap:t.spacing(3)}}),{name:"BackstageHeaderIconLinkRow"});function L(t){const{links:r}=t,u=S();return a.createElement("nav",{className:u.links},r.map((E,b)=>a.createElement(g,{key:b+1,...E})))}const $=t=>{const r=t==="dark"?"16%":"97%";return`
    hsl(0, 0%, ${r}) 0%,
    hsla(0, 0%, ${r}, 0.987) 8.1%,
    hsla(0, 0%, ${r}, 0.951) 15.5%,
    hsla(0, 0%, ${r}, 0.896) 22.5%,
    hsla(0, 0%, ${r}, 0.825) 29%,
    hsla(0, 0%, ${r}, 0.741) 35.3%,
    hsla(0, 0%, ${r}, 0.648) 41.2%,
    hsla(0, 0%, ${r}, 0.55) 47.1%,
    hsla(0, 0%, ${r}, 0.45) 52.9%,
    hsla(0, 0%, ${r}, 0.352) 58.8%,
    hsla(0, 0%, ${r}, 0.259) 64.7%,
    hsla(0, 0%, ${r}, 0.175) 71%,
    hsla(0, 0%, ${r}, 0.104) 77.5%,
    hsla(0, 0%, ${r}, 0.049) 84.5%,
    hsla(0, 0%, ${r}, 0.013) 91.9%,
    hsla(0, 0%, ${r}, 0) 100%
  `},de=100,xe=10,He=(0,re.A)(t=>({root:{position:"relative",display:"flex",flexFlow:"row nowrap",alignItems:"center"},container:{overflow:"auto",scrollbarWidth:0,"&::-webkit-scrollbar":{display:"none"}},fade:{position:"absolute",width:de,height:`calc(100% + ${xe}px)`,transition:"opacity 300ms",pointerEvents:"none"},fadeLeft:{left:-xe,background:`linear-gradient(90deg, ${$(t.palette.type)})`},fadeRight:{right:-xe,background:`linear-gradient(270deg, ${$(t.palette.type)})`},fadeHidden:{opacity:0},button:{position:"absolute"},buttonLeft:{left:-t.spacing(2)},buttonRight:{right:-t.spacing(2)}}),{name:"BackstageHorizontalScrollGrid"});function Ye(t){const[[r,u],E]=React.useState([0,0]);return React.useLayoutEffect(()=>{const b=t.current;if(!b){E([0,0]);return}const x=()=>{const V=b.scrollLeft,ce=b.scrollWidth-b.offsetWidth-b.scrollLeft;E([V,ce])};return x(),b.addEventListener("scroll",x),window.addEventListener("resize",x),()=>{b.removeEventListener("scroll",x),window.removeEventListener("resize",x)}},[t]),[r,u]}function At(t,r,u){const[E,b]=React.useState(0);return React.useLayoutEffect(()=>{if(E===0)return;const x=window.performance.now(),V=requestAnimationFrame(ce=>{if(!t.current)return;const Te=ce-x,Me=Math.abs(E)*Te/r,_t=Math.max(u,Me)*Math.sign(E);t.current.scrollBy({left:_t});const nn=E-_t;Math.sign(E)!==Math.sign(nn)?b(0):b(nn)});return()=>cancelAnimationFrame(V)},[t,E,r,u]),b}function Gt(t){const{scrollStep:r=100,scrollSpeed:u=50,minScrollDistance:E=5,children:b,...x}=t,V=He(t),ce=React.useRef(),[Te,Me]=Ye(ce),dt=At(ce,u,E),_t=nn=>{ce.current&&dt(nn?r:-r)};return React.createElement(Box,{...x,className:V.root},React.createElement(Grid,{container:!0,direction:"row",wrap:"nowrap",className:V.container,ref:ce},b),React.createElement(Box,{className:classNames(V.fade,V.fadeLeft,{[V.fadeHidden]:Te===0})}),React.createElement(Box,{className:classNames(V.fade,V.fadeRight,{[V.fadeHidden]:Me===0})}),Te>0&&React.createElement(IconButton,{title:"Scroll Left",onClick:()=>_t(!1),className:classNames(V.button,V.buttonLeft,{})},React.createElement(ChevronLeftIcon,null)),Me>0&&React.createElement(IconButton,{title:"Scroll Right",onClick:()=>_t(!0),className:classNames(V.button,V.buttonRight,{})},React.createElement(ChevronRight,null)))}const Nt=(0,re.A)(t=>({alpha:{color:t.palette.common.white,fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"},beta:{color:"#4d65cc",fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"}}),{name:"BackstageLifecycle"});function ln(t){const r=Nt(t),{shorthand:u,alpha:E}=t;return u?a.createElement(B.A,{component:"span",className:r[E?"alpha":"beta"],style:{fontSize:"120%"}},E?a.createElement(a.Fragment,null,"\u03B1"):a.createElement(a.Fragment,null,"\u03B2")):a.createElement(B.A,{component:"span",className:r[E?"alpha":"beta"]},E?"Alpha":"Beta")}const Pn=(0,a.lazy)(()=>e.e(1220).then(e.bind(e,41220)).then(t=>({default:t.RealLogViewer})));function fn(t){const{Progress:r}=(0,m.nm)().getComponents();return a.createElement(a.Suspense,{fallback:a.createElement(r,null)},a.createElement(Pn,{...t}))}const Dn=(0,re.A)(t=>({root:{paddingLeft:t.spacing(3)}}),{name:"BackstageLoginRequestListItem"}),Zn=({request:t,busy:r,setBusy:u})=>{const E=Dn(),[b,x]=(0,a.useState)(),V=async()=>{u(!0);try{await t.trigger()}catch(Te){x((0,pe.bJ)(Te)?Te.message:"An unspecified error occurred")}finally{u(!1)}},ce=t.provider.icon;return a.createElement(Qe.A,{disabled:r,classes:{root:E.root}},a.createElement(ke.A,null,a.createElement(ce,{fontSize:"large"})),a.createElement(Mt.A,{primary:t.provider.title,secondary:b&&a.createElement(B.A,{color:"error"},b)}),a.createElement(Ie.A,{color:"primary",variant:"contained",onClick:V},"Log in"))},bn=(0,re.A)(t=>({dialog:{paddingTop:t.spacing(1)},title:{minWidth:0},titleHeading:{fontSize:t.typography.h6.fontSize},contentList:{padding:0},actionButtons:{padding:t.spacing(2,0)}}),{name:"OAuthRequestDialog"});function ta(t){var r;const u=bn(),[E,b]=(0,a.useState)(!1),x=(0,o.u)(o.v),ce=(r=(0,o.u)(o.p).getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?r:!1,Te=(0,D.A)((0,a.useMemo)(()=>x.authRequest$(),[x]),[]),Me=()=>{Te.forEach(dt=>dt.reject())};return a.createElement(ie.A,{open:Boolean(Te.length),fullWidth:!0,maxWidth:"xs",classes:{paper:u.dialog},"aria-labelledby":"oauth-req-dialog-title"},a.createElement("main",null,a.createElement(he.A,{classes:{root:u.title},id:"oauth-req-dialog-title"},a.createElement(B.A,{className:u.titleHeading,variant:"h1",variantMapping:{h1:"span"}},"Login Required"),ce?a.createElement(B.A,null,"This will trigger a http redirect to OAuth Login."):null),a.createElement(Ve.A,{dividers:!0,classes:{root:u.contentList}},a.createElement(bt.A,null,Te.map(dt=>a.createElement(Zn,{key:dt.provider.title,request:dt,busy:E,setBusy:b}))))),a.createElement(G.A,{classes:{root:u.actionButtons}},a.createElement(Ie.A,{onClick:Me},"Reject All")))}const ua=(0,re.A)({container:{overflow:"visible !important"}},{name:"BackstageOverflowTooltip"});function Hn(t){var r;const[u,E]=(0,a.useState)(!1),b=(0,pt.a)(),x=ua(),V=ce=>{b()&&E(ce)};return a.createElement(me.Ay,{title:(r=t.title)!=null?r:t.text||"",placement:t.placement,disableHoverListener:!u},a.createElement(et(),{text:t.text,line:t.line,onToggled:V,containerClassName:x.container}))}function Bn(t){const r=(0,Re.A)(),[u,E]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{const b=setTimeout(()=>E(!0),r.transitions.duration.short);return()=>clearTimeout(b)},[r.transitions.duration.short]),u?a.createElement(Bt.A,{...t,"data-testid":"progress"}):a.createElement(oe.A,{display:"none"})}const Jn=(0,re.A)(t=>({root:{maxWidth:"fit-content",padding:t.spacing(2,2,2,2.5)},boxTitle:{margin:0,color:t.palette.textSubtle},arrow:{color:t.palette.textSubtle}}),{name:"BackstageBottomLink"});function ga(t){const{link:r,title:u,onClick:E}=t,b=Jn();return a.createElement(oe.A,null,a.createElement(le.A,null),a.createElement(wa,{to:r,onClick:E,underline:"none"},a.createElement(oe.A,{display:"flex",alignItems:"center",className:b.root},a.createElement(oe.A,{className:b.boxTitle,fontWeight:"fontWeightBold",m:1},a.createElement(B.A,null,a.createElement("strong",null,u))),a.createElement(W.A,{className:b.arrow}))))}const Ra=t=>{const{slackChannel:r}=t;if(r){if(typeof r=="string")return a.createElement(B.A,null,"Please contact ",r," for help.");if(!r.href)return a.createElement(B.A,null,"Please contact ",r.name," for help.")}else return null;return a.createElement(Ga,{to:r.href,variant:"contained"},r.name)},fa=class extends a.Component{constructor(r){super(r),this.state={error:void 0,errorInfo:void 0}}componentDidCatch(r,u){console.error(`ErrorBoundary, error: ${r}, info: ${u}`),this.setState({error:r,errorInfo:u})}render(){const{slackChannel:r,children:u}=this.props,{error:E}=this.state;return E?a.createElement(Za,{title:"Something Went Wrong",error:E},a.createElement(Ra,{slackChannel:r})):u}},ya=(0,re.A)(t=>({noPadding:{padding:0,"&:last-child":{paddingBottom:0}},header:{padding:t.spacing(2,2,2,2.5)},headerTitle:{fontWeight:t.typography.fontWeightBold},headerSubheader:{paddingTop:t.spacing(1)},headerAvatar:{},headerAction:{},headerContent:{},subheader:{display:"flex"}}),{name:"BackstageInfoCard"}),Ta=(0,c.A)(t=>({root:{display:"inline-block",padding:t.spacing(8,8,0,0),float:"right"}}),{name:"BackstageInfoCardCardActionsTopRight"})(Ce.A),Rr={card:{flex:{display:"flex",flexDirection:"column"},fullHeight:{display:"flex",flexDirection:"column",height:"100%"},gridItem:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px",breakInside:"avoid-page","@media print":{height:"auto"}}},cardContent:{fullHeight:{flex:1},gridItem:{flex:1}}};function Oa(t){const{title:r,subheader:u,divider:E=!0,deepLink:b,slackChannel:x,errorBoundaryProps:V,variant:ce,children:Te,headerStyle:Me,headerProps:dt,icon:_t,action:nn,actionsClassName:Ht,actions:hn,cardClassName:Un,actionsTopRight:Qn,className:pa,noPadding:ka,titleTypographyProps:tr}=t,Xn=ya();let Ia={},Wa={};ce&&ce.split(/[\s]+/g).forEach(hr=>{Ia={...Ia,...Rr.card[hr]},Wa={...Wa,...Rr.cardContent[hr]}});const nr=()=>!u&&!_t?null:a.createElement("div",{className:Xn.headerSubheader,"data-testid":"info-card-subheader"},u&&a.createElement("div",{className:Xn.subheader},u),_t),br=V||(x?{slackChannel:x}:{});return a.createElement(en.A,{style:Ia,className:pa},a.createElement(fa,{...br},r&&a.createElement(C.A,{classes:{root:Xn.header,title:Xn.headerTitle,subheader:Xn.headerSubheader,avatar:Xn.headerAvatar,action:Xn.headerAction,content:Xn.headerContent},title:r,subheader:nr(),action:nn,style:{...Me},titleTypographyProps:tr,...dt}),Qn&&a.createElement(Ta,null,Qn),E&&a.createElement(le.A,null),a.createElement(Be.A,{className:fe()(Un,{[Xn.noPadding]:ka}),style:Wa},Te),hn&&a.createElement(Ce.A,{className:Ht},hn),b&&a.createElement(ga,{...b})))}const Eo=(0,re.A)(t=>({root:{position:"relative",lineHeight:0},overlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -60%)",fontSize:t.typography.pxToRem(45),fontWeight:t.typography.fontWeightBold,color:t.palette.textContrast},description:{fontSize:"100%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",wordBreak:"break-all",display:"inline-block"},circle:{width:"80%",transform:"translate(10%, 0)"},colorUnknown:{}}),{name:"BackstageGauge"}),vo={fractional:!0,inverse:!1,unit:"%",max:100},yo=({palette:t,value:r,inverse:u,max:E})=>{if(isNaN(r))return"#ddd";const b=E||vo.max,x=u?b-r:r;return x<b/3?t.status.error:x<b*(2/3)?t.status.warning:t.status.ok};function xo(t){const[r,u]=useState(null),{getColor:E=yo}=t,b=Eo(t),{palette:x}=useTheme(),{value:V,fractional:ce,inverse:Te,unit:Me,max:dt,description:_t}={...vo,...t},nn=ce?Math.round(V*dt):V,Ht=dt!==100?Math.round(V):nn,[hn,Un]=useState(!1);return useEffect(()=>{const Qn=r,pa=()=>Un(!0),ka=()=>Un(!1);return Qn&&_t?(Qn.addEventListener("mouseenter",pa),Qn.addEventListener("mouseleave",ka),()=>{Qn.removeEventListener("mouseenter",pa),Qn.removeEventListener("mouseleave",ka)}):()=>{Un(!1)}},[_t,r]),React.createElement(Box,{ref:u,className:b.root},React.createElement(Circle,{strokeLinecap:"butt",percent:nn,strokeWidth:12,trailWidth:12,strokeColor:E({palette:x,value:Ht,inverse:Te,max:dt}),className:b.circle}),_t&&hn?React.createElement(Box,{className:b.description},_t):React.createElement(Box,{className:b.overlay},isNaN(V)?"N/A":`${Ht}${Me}`))}const jr=(0,re.A)({root:{height:"100%",width:250}},{name:"BackstageGaugeCard"});function Zo(t){const r=jr(t),{title:u,subheader:E,progress:b,inverse:x,deepLink:V,description:ce,icon:Te,variant:Me,getColor:dt}=t,_t={inverse:x,description:ce,getColor:dt,value:b};return React.createElement(Box,{className:r.root},React.createElement(Oa,{title:u,subheader:E,deepLink:V,variant:Me,icon:Te},React.createElement(xo,{..._t})))}function qo(t){const{value:r,getColor:u=yo,width:E="thick"}=t,{palette:b}=useTheme();if(isNaN(r))return null;let x=Math.round(r*100*100)/100;x>100&&(x=100);const V=E==="thick"?4:1,ce=u({palette:b,value:x,inverse:!1,max:100});return React.createElement(Tooltip,{title:`${x}%`},React.createElement(Typography,{component:"span"},React.createElement(Line,{percent:x,strokeWidth:V,trailWidth:V,strokeColor:ce})))}const Bo=(0,re.A)(t=>(0,R.A)({icon:{position:"absolute",right:t.spacing(.5),pointerEvents:"none"}}),{name:"BackstageClosedDropdown"}),Uo=()=>{const t=Bo();return a.createElement(Gn.A,{className:t.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z",fill:"#616161"}))},Ao=(0,re.A)(t=>(0,R.A)({icon:{position:"absolute",right:t.spacing(.5),pointerEvents:"none"}}),{name:"BackstageOpenedDropdown"}),_o=()=>{const t=Ao();return a.createElement(Gn.A,{className:t.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z",fill:"#616161"}))},d=(0,c.A)(t=>(0,R.A)({root:{"label + &":{marginTop:t.spacing(3)},"&.Mui-focused > div[role=button]":{borderColor:t.palette.primary.main}},input:{borderRadius:t.shape.borderRadius,position:"relative",backgroundColor:t.palette.background.paper,border:"1px solid #ced4da",fontSize:t.typography.body1.fontSize,padding:t.spacing(1.25,3.25,1.25,1.5),transition:t.transitions.create(["border-color","box-shadow"]),fontFamily:"Helvetica Neue","&:focus":{background:t.palette.background.paper,borderRadius:t.shape.borderRadius}}}),{name:"BackstageSelectInputBase"})(tn.A),n=(0,re.A)(t=>(0,R.A)({formControl:{margin:t.spacing(1,0),maxWidth:300},label:{transform:"initial",fontWeight:"bold",fontSize:t.typography.body2.fontSize,fontFamily:t.typography.fontFamily,color:t.palette.text.primary,"&.Mui-focused":{color:t.palette.text.primary}},formLabel:{transform:"initial",fontWeight:"bold",fontSize:t.typography.body2.fontSize,fontFamily:t.typography.fontFamily,color:t.palette.text.primary,"&.Mui-focused":{color:t.palette.text.primary}},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},checkbox:{},root:{display:"flex",flexDirection:"column"}}),{name:"BackstageSelect"});function s(t){const{multiple:r,items:u,label:E,placeholder:b,selected:x,onChange:V,triggerReset:ce,native:Te=!1,disabled:Me=!1,margin:dt}=t,_t=n(),[nn,Ht]=(0,a.useState)(x||(r?[]:"")),[hn,Un]=(0,a.useState)(!1);(0,a.useEffect)(()=>{Ht(r?[]:"")},[ce,r]),(0,a.useEffect)(()=>{Ht(x||(r?[]:""))},[x,r]);const Qn=Xn=>{Ht(Xn.target.value),V(Xn.target.value)},pa=Xn=>{if(Me){Xn.preventDefault();return}Un(Ia=>r&&!(Xn.target instanceof HTMLElement)?!0:!Ia)},ka=()=>{Un(!1)},tr=Xn=>()=>{const Ia=nn.filter(Wa=>Wa!==Xn);Ht(Ia),V(Ia)};return a.createElement(oe.A,{className:_t.root},a.createElement(ut.A,{className:_t.formControl},a.createElement(mn.A,{className:_t.formLabel},E),a.createElement(An.A,{"aria-label":E,value:nn,native:Te,disabled:Me,"data-testid":"select",displayEmpty:!0,multiple:r,margin:dt,onChange:Qn,open:hn,onOpen:pa,onClose:ka,input:a.createElement(d,null),label:E,renderValue:Xn=>{var Ia;return r&&nn.length!==0?a.createElement(oe.A,{className:_t.chips},Xn.map(Wa=>{const nr=u.find(br=>br.value===Wa);return nr?a.createElement(ct.A,{key:nr==null?void 0:nr.value,label:nr==null?void 0:nr.label,clickable:!0,onDelete:tr(Wa),className:_t.chip}):!1})):a.createElement(B.A,null,nn.length===0?b||"":(Ia=u.find(Wa=>Wa.value===Xn))==null?void 0:Ia.label)},IconComponent:()=>hn?a.createElement(_o,null):a.createElement(Uo,null),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},b&&!r&&a.createElement(Cn.A,{value:[]},b),Te?u&&u.map(Xn=>a.createElement("option",{value:Xn.value,key:Xn.value},Xn.label)):u&&u.map(Xn=>a.createElement(Cn.A,{key:Xn.value,value:Xn.value},r&&a.createElement(rt.A,{color:"primary",checked:nn.includes(Xn.value)||!1,className:_t.checkbox}),Xn.label)))))}const f=()=>{},T=a.createContext({stepperLength:0,stepIndex:0,setStepIndex:f,stepHistory:[],setStepHistory:f,onStepChange:f});function ye(t){const{children:r,elevated:u,onStepChange:E,activeStep:b=0}=t,[x,V]=useState(b),[ce,Te]=useState([0]);useEffect(()=>{V(b)},[b]);const Me=[];let dt;return Children.forEach(r,_t=>{isValidElement(_t)&&(_t.props.end?dt=_t:Me.push(_t))}),React.createElement(React.Fragment,null,React.createElement(T.Provider,{value:{stepIndex:x,setStepIndex:V,stepHistory:ce,setStepHistory:Te,onStepChange:E,stepperLength:Children.count(r)}},React.createElement(MuiStepper,{activeStep:x,orientation:"vertical",elevation:u?2:0},Me)),x>=Children.count(r)-1&&dt)}const Xe=(0,re.A)(t=>({root:{marginTop:t.spacing(3),"& button":{marginRight:t.spacing(1)}}}),{name:"BackstageSimpleStepperFooter"}),qe=({text:t,handleClick:r})=>React.createElement(Button$1,{onClick:r},t||"Reset"),Ut=({text:t,handleClick:r,disabled:u,last:E,stepIndex:b})=>React.createElement(Button$1,{variant:"contained",color:"primary",disabled:u,"data-testid":`nextButton-${b}`,onClick:r},t||(E?"Finish":"Next")),Xt=({text:t,handleClick:r,disabled:u,stepIndex:E})=>React.createElement(Button$1,{variant:"outlined",color:"primary",disabled:u,"data-testid":`skipButton-${E}`,onClick:r},t||"Skip"),Vn=({text:t,handleClick:r,disabled:u,stepIndex:E})=>React.createElement(Button$1,{onClick:r,"data-testid":`backButton-${E}`,disabled:u},t||"Back"),kn=({actions:t={},children:r})=>{const u=Xe(),{stepperLength:E,stepIndex:b,setStepIndex:x,stepHistory:V,setStepHistory:ce,onStepChange:Te}=useContext(T),Me=(Ht,hn)=>{hn&&hn(),Te&&Te(b,Ht),x(Ht)},dt=()=>{const Ht=t.nextStep?t.nextStep(b,E-1):b+1;Me(Ht,t.onNext),ce([...V,Ht])},_t=()=>{V.pop(),Me(V[V.length-1],t.onBack),ce([...V])},nn=()=>{Me(0,t.onRestart),ce([0])};return React.createElement(Box,{className:u.root},[void 0,!0].includes(t.showBack)&&b!==0&&React.createElement(Vn,{text:t.backText,handleClick:_t,disabled:b===0,stepIndex:b}),t.showSkip&&React.createElement(Xt,{text:t.skipText,handleClick:dt,disabled:!!E&&b>=E||!!t.canSkip&&!t.canSkip(),stepIndex:b}),[void 0,!0].includes(t.showNext)&&React.createElement(Ut,{text:t.nextText,handleClick:dt,disabled:!!E&&b>=E||!!t.canNext&&!t.canNext(),stepIndex:b}),t.showRestart&&b!==0&&React.createElement(qe,{text:t.restartText,handleClick:nn,stepIndex:b}),r)},Tn=(0,re.A)(t=>({end:{padding:t.spacing(3)}}),{name:"SimpleStepperStep"});function la(t){const{title:r,children:u,end:E,actions:b,...x}=t,V=Tn();return E?React.createElement(Box,{className:V.end},React.createElement(Typography,{variant:"h6"},r),u,React.createElement(kn,{actions:{...b||{},showNext:!1}})):React.createElement(MuiStep,{...x},React.createElement(StepLabel,null,React.createElement(Typography,{variant:"h6"},r)),React.createElement(StepContent,null,u,React.createElement(kn,{actions:b})))}const jn=(0,re.A)(t=>({status:{fontWeight:t.typography.fontWeightMedium,"&::before":{width:"0.7em",height:"0.7em",display:"inline-block",marginRight:t.spacing(1),borderRadius:"50%",content:'""'}},ok:{"&::before":{backgroundColor:t.palette.status.ok}},warning:{"&::before":{backgroundColor:t.palette.status.warning}},error:{"&::before":{backgroundColor:t.palette.status.error}},pending:{"&::before":{backgroundColor:t.palette.status.pending}},running:{"&::before":{backgroundColor:t.palette.status.running}},aborted:{"&::before":{backgroundColor:t.palette.status.aborted}}}),{name:"BackstageStatus"});function ca(t){const r=jn(t);return a.createElement(B.A,{component:"span",className:fe()(r.status,r.ok),"aria-label":"Status ok","aria-hidden":"true",...t})}function Va(t){const r=jn(t);return a.createElement(B.A,{component:"span",className:fe()(r.status,r.warning),"aria-label":"Status warning","aria-hidden":"true",...t})}function ma(t){const r=jn(t);return a.createElement(B.A,{component:"span",className:fe()(r.status,r.error),"aria-label":"Status error","aria-hidden":"true",...t})}function ir(t){const r=jn(t);return a.createElement(B.A,{component:"span",className:fe()(r.status,r.pending),"aria-label":"Status pending","aria-hidden":"true",...t})}function Lr(t){const r=jn(t);return a.createElement(B.A,{component:"span",className:fe()(r.status,r.running),"aria-label":"Status running","aria-hidden":"true",...t})}function bo(t){const r=jn(t);return a.createElement(B.A,{component:"span",className:fe()(r.status,r.aborted),"aria-label":"Status aborted","aria-hidden":"true",...t})}const Hi=t=>(0,R.A)({root:{fontWeight:t.typography.fontWeightBold,whiteSpace:"nowrap",paddingRight:t.spacing(4),border:"0",verticalAlign:"top"}}),Vi={root:{border:"0",verticalAlign:"top"}},Yi=t=>(0,R.A)({root:{margin:t.spacing(0,0,-1,0)}}),Ji=t=>(0,R.A)({root:{padding:t.spacing(0,0,1,0)},random:{}}),Qi=(0,c.A)(Hi,{name:"BackstageMetadataTableTitleCell"})(be.A),Xi=(0,c.A)(Vi,{name:"BackstageMetadataTableCell"})(be.A),Zi=({dense:t,children:r})=>a.createElement(P.A,{size:t?"small":"medium"},a.createElement(K.A,null,r)),qi=({title:t,children:r,...u})=>a.createElement(vt.A,null,t&&a.createElement(Qi,null,t),a.createElement(Xi,{colSpan:t?1:2,...u},r)),ei=(0,c.A)(Yi,{name:"BackstageMetadataTableList"})(({classes:t,children:r})=>a.createElement(bt.A,{disablePadding:!0,className:t.root},r)),ti=(0,c.A)(Ji,{name:"BackstageMetadataTableListItem"})(({classes:t,children:r})=>a.createElement(Qe.A,{className:t.root},r)),ni=(0,R.A)({root:{margin:"0 0",listStyleType:"none"}}),es=t=>(0,R.A)({root:{...ni.root,paddingLeft:t.spacing(1)}}),ai=(0,c.A)(ni,{name:"BackstageStructuredMetadataTableList"})(({classes:t,children:r})=>a.createElement(ei,{classes:t},r)),ri=(0,c.A)(es,{name:"BackstageStructuredMetadataTableNestedList"})(({classes:t,children:r})=>a.createElement(ei,{classes:t},r));function ts(t,r,u){const E=t.map((b,x)=>a.createElement(ti,{key:x},$o(b,r,u)));return u?a.createElement(ri,null,E):a.createElement(ai,null,E)}function ns(t,r,u){const E=Object.keys(t).map(b=>{const x=$o(t[b],r,!0);return a.createElement(ti,{key:b},a.createElement(B.A,{variant:"body2",component:"span"},`${r.titleFormat(b)}: `),x)});return u?a.createElement(ri,null,E):a.createElement(ai,null,E)}function $o(t,r,u){return a.isValidElement(t)?a.createElement(a.Fragment,null,t):t!==null&&typeof t=="object"&&!Array.isArray(t)?ns(t,r,u):Array.isArray(t)?ts(t,r,u):typeof t=="boolean"?a.createElement(a.Fragment,null,t?"\u2705":"\u274C"):a.createElement(B.A,{variant:"body2",component:"span"},t)}const as=({value:t,options:r})=>a.createElement(a.Fragment,null,$o(t,r,!1)),rs=({title:t,value:r,options:u})=>a.createElement(qi,{title:u.titleFormat(t)},a.createElement(as,{value:r,options:u}));function os(t,r){return Object.keys(t).map(u=>a.createElement(rs,{key:u,title:u,value:t[u],options:r}))}function is(t){const{metadata:r,dense:u=!0,options:E={}}=t,b=os(r,{titleFormat:Wn(),...E});return a.createElement(Zi,{dense:u},b)}function ss(t){return qs.stringify(t,{strictNullHandling:!0})}function oi(t){return qs.parse(t,{ignoreQueryPrefix:!0,strictNullHandling:!0})}function ii(t,r){return oi(t)[r]}function ls(t,r,u){const E={...oi(t),[r]:u};return ss(E)}function gc(t,r=250){const[u,E]=useSearchParams(),b=u.toString(),[x,V]=useState(ii(b,t));return useEffect(()=>{const ce=ii(b,t);V(Te=>isEqual(ce,Te)?Te:ce)},[b,V,t]),useDebouncedEffect(()=>{const ce=ls(b,t,x);b!==ce&&E(ce,{replace:!0})},[E,x,b,t],r),[x,V]}const cs={url:"https://github.com/backstage/backstage/issues",items:[{title:"Support Not Configured",icon:"warning",links:[{title:"Add `app.support` config key",url:"https://github.com/backstage/backstage/blob/master/app-config.yaml"}]}]};function si(){const r=(0,o.b)().get(o.p),u=r==null?void 0:r.getOptionalConfig("app.support");return u?{url:u.getString("url"),items:u.getConfigArray("items").flatMap(E=>{var b;return{title:E.getString("title"),icon:E.getOptionalString("icon"),links:((b=E.getOptionalConfigArray("links"))!=null?b:[]).flatMap(x=>({url:x.getString("url"),title:x.getString("title")}))}})}:cs}function pr(t,r){const E=(0,m.nm)().getSystemIcon(t);return E?a.createElement(E,{...r}):a.createElement(Jt.A,{...r})}function fc(t){return pr("brokenImage",t)}function us(t){return pr("catalog",t)}function Ec(t){return pr("chat",t)}function vc(t){return pr("dashboard",t)}function ds(t){return pr("docs",t)}function yc(t){return pr("email",t)}function ms(t){return pr("github",t)}function Ac(t){return pr("group",t)}function Co(t){return pr("help",t)}function ps(t){return pr("user",t)}function _c(t){return pr("warning",t)}const hs=(0,re.A)({popoverList:{minWidth:260,maxWidth:400},menuItem:{whiteSpace:"normal"}},{name:"BackstageSupportButton"}),gs=({icon:t})=>{var r;const u=(0,m.nm)(),E=t&&(r=u.getSystemIcon(t))!=null?r:Co;return a.createElement(E,null)},fs=({link:t})=>{var r;return a.createElement(wa,{to:t.url},(r=t.title)!=null?r:t.url)},Es=({item:t})=>{var r;return a.createElement(Cn.A,null,a.createElement(Ot.A,null,a.createElement(gs,{icon:t.icon})),a.createElement(Mt.A,{primary:t.title,secondary:(r=t.links)==null?void 0:r.reduce((u,E,b)=>[...u,b>0&&a.createElement("br",{key:b}),a.createElement(fs,{link:E,key:E.url})],[])}))};function vs(t){const{title:r,items:u,children:E}=t,{items:b}=si(),[x,V]=(0,a.useState)(!1),[ce,Te]=(0,a.useState)(null),Me=hs(),dt=(0,mt.A)(Ht=>Ht.breakpoints.down("sm")),_t=Ht=>{Te(Ht.currentTarget),V(!0)},nn=()=>{V(!1)};return a.createElement(a.Fragment,null,a.createElement(oe.A,{display:"flex",ml:1},dt?a.createElement(p.A,{color:"primary",size:"small",onClick:_t,"data-testid":"support-button","aria-label":"Support"},a.createElement(Co,null)):a.createElement(Ie.A,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:_t,startIcon:a.createElement(Co,null)},"Support")),a.createElement(ne.Ay,{"data-testid":"support-button-popover",open:x,anchorEl:ce,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:nn},a.createElement(Vt.A,{className:Me.popoverList,autoFocusItem:Boolean(ce)},r&&a.createElement(Cn.A,{alignItems:"flex-start",className:Me.menuItem},a.createElement(B.A,{variant:"subtitle1"},r)),a.Children.map(E,(Ht,hn)=>a.createElement(Cn.A,{alignItems:"flex-start",key:`child-${hn}`,className:Me.menuItem},Ht)),(u!=null?u:b).map((Ht,hn)=>a.createElement(Es,{item:Ht,key:`item-${hn}`}))),a.createElement(G.A,null,a.createElement(Ie.A,{color:"primary",onClick:nn,"aria-label":"Close"},"Close"))))}const ys=(0,re.A)(t=>({root:{gridArea:"pageContent",minWidth:0,paddingTop:t.spacing(3),paddingBottom:t.spacing(3),paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},stretch:{display:"flex",flexDirection:"column",flexGrow:1},noPadding:{padding:0}}),{name:"BackstageContent"});function Po(t){const{className:r,stretch:u,noPadding:E,children:b,...x}=t,V=ys();return a.createElement("article",{...x,className:fe()(V.root,r,{[V.stretch]:u,[V.noPadding]:E})},b)}const As=(0,re.A)(t=>({tabsWrapper:{gridArea:"pageSubheader",backgroundColor:t.palette.background.paper,paddingLeft:t.spacing(3),minWidth:0},defaultTab:{...t.typography.caption,padding:t.spacing(3,3),textTransform:"uppercase",fontWeight:t.typography.fontWeightBold,color:t.palette.text.secondary},selected:{color:t.palette.text.primary},tabRoot:{"&:hover":{backgroundColor:t.palette.background.default,color:t.palette.text.primary}}}),{name:"BackstageHeaderTabs"});function li(t){const{tabs:r,onChange:u,selectedIndex:E}=t,[b,x]=(0,a.useState)(E!=null?E:0),V=As(),ce=(0,a.useCallback)((Te,Me)=>{E===void 0&&x(Me),u&&u(Me)},[E,u]);return(0,a.useEffect)(()=>{E!==void 0&&x(E)},[E]),a.createElement(oe.A,{className:V.tabsWrapper},a.createElement(on.A,{indicatorColor:"primary",textColor:"inherit",variant:"scrollable",scrollButtons:"auto","aria-label":"tabs",onChange:ce,value:b},r.map((Te,Me)=>a.createElement(cn.A,{...Te.tabProps,"data-testid":`header-tab-${Me}`,label:Te.label,key:Te.id,value:Me,className:V.defaultTab,classes:{selected:V.selected,root:V.tabRoot}}))))}function _s(t){var r,u,E,b,x;const V=(0,J.g)(),Te=t.map(({path:Ht,children:hn})=>({caseSensitive:!1,path:`${Ht}/*`,element:hn})).sort((Ht,hn)=>hn.path.replace(/\/\*$/,"").localeCompare(Ht.path.replace(/\/\*$/,""))),Me=(u=(0,J.Ye)(Te))!=null?u:(r=t[0])==null?void 0:r.children;let dt=(E=V["*"])!=null?E:"";dt.startsWith("/")||(dt=`/${dt}`);const[_t]=(b=(0,ee.ue)(Te,dt))!=null?b:[],nn=_t?t.findIndex(Ht=>`${Ht.path}/*`===_t.route.path):0;return{index:nn===-1?0:nn,element:Me,route:(x=t[nn])!=null?x:t[0]}}function ci(t){const{routes:r}=t,u=(0,J.Zp)(),{index:E,route:b,element:x}=_s(r),V=(0,a.useMemo)(()=>r.map(Te=>({id:Te.path,label:Te.title,tabProps:Te.tabProps})),[r]),ce=Te=>{let{path:Me}=r[Te];Me=Me.replace(/\/\*$/,""),Me=Me.replace(/^\//,""),u(Me)};return a.createElement(a.Fragment,null,a.createElement(li,{tabs:V,selectedIndex:E,onChange:ce}),a.createElement(Po,null,a.createElement(qt.m,{title:b==null?void 0:b.title}),x))}const ko=()=>null;(0,m.h3)(ko,"core.gatherMountPoints",!0);function ui(t){const r=a.createElement(ko,{path:"",title:""},a.createElement("div",null)).type;return a.Children.toArray(t).flatMap(u=>{if(!(0,a.isValidElement)(u))return[];if(u.type===a.Fragment)return ui(u.props.children);if(u.type!==r)throw new Error("Child of TabbedLayout must be an TabbedLayout.Route");const{path:E,title:b,children:x,tabProps:V}=u.props;return[{path:E,title:b,children:x,tabProps:V}]})}function bs(t){const r=ui(t.children);return a.createElement(ci,{routes:r})}bs.Route=ko;const Cs=(0,re.A)(t=>({value:{marginBottom:t.spacing(.75)},subvalue:{color:t.palette.textSubtle,fontWeight:"normal"}}),{name:"BackstageSubvalueCell"});function Ps(t){const{value:r,subvalue:u}=t,E=Cs();return a.createElement(a.Fragment,null,a.createElement(oe.A,{className:E.value},r),a.createElement(oe.A,{className:E.subvalue},u))}const Ss=(0,re.A)(t=>({root:{height:"100%",width:"315px",display:"flex",flexDirection:"column",marginRight:t.spacing(3)},value:{fontWeight:"bold",fontSize:18},header:{display:"flex",alignItems:"center",height:t.spacing(7.5),justifyContent:"space-between",borderBottom:`1px solid ${t.palette.grey[500]}`},filters:{display:"flex",flexDirection:"column","& > *":{marginTop:t.spacing(2)}}}),{name:"BackstageTableFilters"}),Rs=t=>{var r;const u=Ss(),{onChangeFilters:E}=t,[b,x]=(0,a.useState)({...t.selectedFilters}),[V,ce]=(0,a.useState)(!1),Te=()=>{x({}),ce(Me=>!Me)};return(0,a.useEffect)(()=>{E(b)},[b,E]),a.createElement(oe.A,{className:u.root},a.createElement(oe.A,{className:u.header},a.createElement(oe.A,{className:u.value},"Filters"),a.createElement(Ie.A,{color:"primary",onClick:Te},"Clear all")),a.createElement(oe.A,{className:u.filters},((r=t.filters)==null?void 0:r.length)&&t.filters.map(Me=>a.createElement(s,{triggerReset:V,key:Me.element.label,...Me.element,selected:b[Me.element.label],onChange:dt=>x({...b,[Me.element.label]:dt})}))))};function Os(t){return a.createElement("tbody",{"data-testid":"loading-indicator"},a.createElement("tr",null,a.createElement("td",{colSpan:t.colSpan},a.createElement(oe.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",minHeight:"15rem"}},a.createElement(Ue.A,{size:"5rem"})))))}const di={Add:(0,a.forwardRef)((t,r)=>a.createElement(Kn.A,{...t,ref:r})),Check:(0,a.forwardRef)((t,r)=>a.createElement(oa.A,{...t,ref:r})),Clear:(0,a.forwardRef)((t,r)=>a.createElement(vn.A,{...t,ref:r})),Delete:(0,a.forwardRef)((t,r)=>a.createElement(ra.A,{...t,ref:r})),DetailPanel:(0,a.forwardRef)((t,r)=>a.createElement(se.A,{...t,ref:r})),Edit:(0,a.forwardRef)((t,r)=>a.createElement(ia.A,{...t,ref:r})),Export:(0,a.forwardRef)((t,r)=>a.createElement(Ea.A,{...t,ref:r})),Filter:(0,a.forwardRef)((t,r)=>a.createElement(na.A,{...t,ref:r})),FirstPage:(0,a.forwardRef)((t,r)=>a.createElement(da.A,{...t,ref:r})),LastPage:(0,a.forwardRef)((t,r)=>a.createElement(_a.A,{...t,ref:r})),NextPage:(0,a.forwardRef)((t,r)=>a.createElement(se.A,{...t,ref:r})),PreviousPage:(0,a.forwardRef)((t,r)=>a.createElement(Yt.A,{...t,ref:r})),ResetSearch:(0,a.forwardRef)((t,r)=>a.createElement(vn.A,{...t,ref:r})),Search:(0,a.forwardRef)((t,r)=>a.createElement(na.A,{...t,ref:r})),SortArrow:(0,a.forwardRef)((t,r)=>a.createElement(Yn.A,{...t,ref:r})),ThirdStateCheck:(0,a.forwardRef)((t,r)=>a.createElement(qn.A,{...t,ref:r})),ViewColumn:(0,a.forwardRef)((t,r)=>a.createElement(Z.A,{...t,ref:r}))};function mi(t,r){const u=r.split(".");let E=t[u[0]];for(let b=1;b<u.length;++b){if(E===void 0)return E;const x=u[b];E=E[x]}return E}const ws=(0,c.A)(t=>({header:{padding:t.spacing(1,2,1,2.5),borderTop:`1px solid ${t.palette.grey.A100}`,borderBottom:`1px solid ${t.palette.grey.A100}`,fontWeight:t.typography.fontWeightBold,position:"static",wordBreak:"normal"}}),{name:"BackstageTableHeader"})(wn.rV),pi=(0,c.A)(t=>({root:{padding:t.spacing(3,0,2.5,2.5)},title:{"& > h6":{fontWeight:t.typography.fontWeightBold}},searchField:{paddingRight:t.spacing(2)}}),{name:"BackstageTableToolbar"})(wn.Nb),Ts=(0,re.A)(t=>({root:{display:"flex",alignItems:"center",justifyContent:"space-between"},title:{fontWeight:t.typography.fontWeightBold,fontSize:18,whiteSpace:"nowrap"}}),{name:"BackstageTableFiltersContainer"}),Is=(0,re.A)(()=>({root:{display:"flex",alignItems:"start"}}),{name:"BackstageTable"});function Ds(t,r){return t.map(u=>{var E;const b=(E=u.headerStyle)!=null?E:{};let x=u.cellStyle||{};if(u.highlight)if(b.color=r.palette.textContrast,typeof x=="object")x.fontWeight=r.typography.fontWeightBold;else{const V=x;x=(ce,Te,Me)=>({...V(ce,Te,Me),fontWeight:r.typography.fontWeightBold})}return{...u,headerStyle:b,cellStyle:x}})}function Ms(t,r){return(0,ve.transform)(t,(u,E,b)=>{(0,ve.isEqual)(E,r[b])||(u[b]=E)})}const hi={search:"",filtersOpen:!1,filters:{}};function Ls(t){const{toolbarRef:r,setSearch:u,hasFilters:E,selectedFiltersLength:b,toggleFilters:x}=t,V=Ts(),ce=(0,a.useCallback)(Te=>{t.onSearchChanged(Te),u(Te)},[t,u]);return E?a.createElement(oe.A,{className:V.root},a.createElement(oe.A,{className:V.root},a.createElement(p.A,{onClick:x,"aria-label":"filter list"},a.createElement(na.A,null)),a.createElement(B.A,{className:V.title},"Filters (",b,")")),a.createElement(pi,{...t,ref:r,onSearchChanged:ce})):a.createElement(pi,{...t,ref:r,onSearchChanged:ce})}function gi(t){const{data:r,columns:u,emptyContent:E,options:b,title:x,subtitle:V,localization:ce,filters:Te,initialState:Me,onStateChange:dt,components:_t,isLoading:nn,...Ht}=t,hn=Is(),Un=(0,Re.A)(),Qn={...hi,...Me},[pa,ka]=(0,a.useState)(Qn.filtersOpen),tr=(0,a.useCallback)(()=>ka(gr=>!gr),[ka]),[Xn,Ia]=(0,a.useState)(Qn.filters),[Wa,nr]=(0,a.useState)(Qn.search);(0,a.useEffect)(()=>{if(dt){const gr=Ms({search:Wa,filtersOpen:pa,filters:Xn},hi);dt(gr)}},[Wa,pa,Xn,dt]);const br=(0,a.useCallback)(gr=>{var wr;return(wr=u.find(po=>po.title===gr))==null?void 0:wr.field},[u]),Vr=(0,a.useMemo)(()=>{if(typeof r=="function"||!Xn)return r;const gr=Object.values(Xn);return r&&gr.flat().length?r.filter(po=>!!Object.entries(Xn).filter(([,ho])=>!!ho.length).every(([ho,xr])=>{const Br=mi(po,br(ho));return Array.isArray(Br)&&Array.isArray(xr)?Br.some(Jo=>xr.includes(Jo)):Array.isArray(Br)?Br.includes(xr):Array.isArray(xr)?xr.includes(Br):Br===xr})):r},[r,Xn,br]),hr=Object.values(Xn).flat().length,Yr=!!(Te!=null&&Te.length),Jr=(0,a.useCallback)(gr=>a.createElement(Ls,{setSearch:nr,hasFilters:Yr,selectedFiltersLength:hr,toggleFilters:tr,...gr}),[tr,Yr,hr,nr]),Mo=typeof r!="function"&&r.length===0,Aa=u.length,Qr=(0,a.useMemo)(()=>xs({hasNoRows:Mo,emptyContent:E,columnCount:Aa,loading:nn}),[Mo,E,Aa,nn]);return a.createElement(oe.A,{className:hn.root},pa&&r&&typeof r!="function"&&(Te==null?void 0:Te.length)&&a.createElement(Rs,{filters:Bs(Te,r,u),selectedFilters:Xn,onChangeFilters:Ia}),a.createElement(wn.Ay,{components:{Header:ws,Body:Qr,Toolbar:Jr,..._t},options:{headerStyle:{textTransform:"uppercase"},...b},columns:Ds(u,Un),icons:di,title:a.createElement(a.Fragment,null,a.createElement(B.A,{variant:"h5",component:"h2"},x),V&&a.createElement(B.A,{color:"textSecondary",variant:"body1"},V)),data:Vr,style:{width:"100%"},localization:{toolbar:{searchPlaceholder:"Filter",searchTooltip:"Filter"},...ce},...Ht}))}gi.icons=Object.freeze(di);function xs({columnCount:t,emptyContent:r,hasNoRows:u,loading:E}){return b=>E?a.createElement(Os,{colSpan:t}):r&&u?a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{colSpan:t},r))):a.createElement(wn.C6,{...b})}function Bs(t,r,u){const E=x=>{const V=new Set,ce=Te=>{Te!=null&&V.add(Te)};return r&&r.forEach(Te=>{var Me;const dt=mi(Te,(Me=u.find(_t=>_t.title===x))==null?void 0:Me.field);Array.isArray(dt)?dt.forEach(ce):ce(dt)}),V},b=x=>({placeholder:"All results",label:x.column,multiple:x.type==="multiple-select",items:[...E(x.column)].sort().map(V=>({label:V,value:V}))});return t.map(x=>({type:x.type,element:b(x)}))}function Us(t,r){const u=t[t.length-1];if(u)return u>=.9?r.palette.status.ok:u>=.5?r.palette.status.warning:r.palette.status.error}function bc(t){var r;const u=useTheme();return t.data?React.createElement(Sparklines,{width:120,height:30,min:0,max:1,...t},t.title&&React.createElement("title",null,t.title),React.createElement(SparklinesLine,{color:(r=t.color)!=null?r:Us(t.data,u)})):null}const $s=t=>(0,re.A)(r=>({container:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-end",alignItems:"center",marginBottom:r.spacing(2),textAlign:t.textAlign},leftItemsBox:{flex:"1 1 auto",minWidth:0,overflow:"visible"},rightItemsBox:{flex:"0 1 auto",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",marginLeft:r.spacing(1),minWidth:0,overflow:"visible"},description:{},title:{display:"inline-flex",marginBottom:0}}),{name:"BackstageContentHeader"}),ks=({title:t="Unknown page",className:r})=>a.createElement(B.A,{variant:"h4",component:"h2",className:r,"data-testid":"header-title"},t);function fi(t){const{description:r,title:u,titleComponent:E=void 0,children:b,textAlign:x="left"}=t,V=$s({textAlign:x})(),ce=E||a.createElement(ks,{title:u,className:V.title});return a.createElement(a.Fragment,null,a.createElement(qt.m,{title:u}),a.createElement(oe.A,{className:V.container},a.createElement(oe.A,{className:V.leftItemsBox},ce,r&&a.createElement(B.A,{className:V.description,variant:"body2"},r)),a.createElement(oe.A,{className:V.rightItemsBox},b)))}const Ws=(0,re.A)(t=>({micDrop:{maxWidth:"60%",bottom:t.spacing(2),right:t.spacing(2),[t.breakpoints.down("xs")]:{maxWidth:"96%",bottom:"unset",right:"unset",margin:t.spacing(10,"auto",4)}}}),{name:"BackstageErrorPageMicDrop"}),Ns=()=>{const t=Ws();return a.createElement("img",{src:ht,className:t.micDrop,alt:"Girl dropping mic from her hands"})},Fs=(0,re.A)(t=>({container:{padding:t.spacing(8),[t.breakpoints.down("xs")]:{padding:t.spacing(2)}},title:{paddingBottom:t.spacing(5),[t.breakpoints.down("xs")]:{paddingBottom:t.spacing(4),fontSize:t.typography.h3.fontSize}},subtitle:{color:t.palette.textSubtle}}),{name:"BackstageErrorPage"});function Ks(t){const{status:r,statusMessage:u,additionalInfo:E,supportUrl:b}=t,x=Fs(),V=(0,J.Zp)(),ce=si();return a.createElement(O.A,{container:!0,spacing:0,className:x.container},a.createElement(O.A,{item:!0,xs:12,sm:8,md:4},a.createElement(B.A,{"data-testid":"error",variant:"body1",className:x.subtitle},"ERROR ",r,": ",u),a.createElement(B.A,{variant:"body1",className:x.subtitle},E),a.createElement(B.A,{variant:"h2",className:x.title},"Looks like someone dropped the mic!"),a.createElement(B.A,{variant:"h6"},a.createElement(wa,{to:"#","data-testid":"go-back-link",onClick:()=>V(-1)},"Go back"),"... or please"," ",a.createElement(wa,{to:b||ce.url},"contact support")," if you think this is a bug.")),a.createElement(Ns,null))}const zs=(0,c.A)({root:{textDecoration:"underline",cursor:"pointer"}},{name:"BackstageBreadcrumbsClickableText"})(B.A),Wo=(0,c.A)({root:{textDecoration:"underline",color:"inherit"}},{name:"BackstageBreadcrumbsStyledBox"})(oe.A);function Ei(t){const{children:r,...u}=t,[E,b]=a.useState(null),x=a.Children.toArray(r),[V,ce,...Te]=x,Me=Te.length?Te.pop():x[x.length-1],dt=x.length>3,_t=hn=>{b(hn.currentTarget)},nn=()=>{b(null)},Ht=Boolean(E);return a.createElement(a.Fragment,null,a.createElement(Se.A,{"aria-label":"breadcrumb",...u},x.length>1&&a.createElement(Wo,{clone:!0},V),x.length>2&&a.createElement(Wo,{clone:!0},ce),dt&&a.createElement(zs,{onClick:_t},"..."),a.createElement(oe.A,{style:{fontStyle:"italic"}},Me)),a.createElement(ne.Ay,{open:Ht,anchorEl:E,onClose:nn,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},a.createElement(bt.A,null,Te.map((hn,Un)=>a.createElement(Qe.A,{key:Un,button:!0},a.createElement(Wo,{clone:!0},hn))))))}const So=72,vi=24,yi=18,Or={drawerWidthClosed:So,drawerWidthOpen:224,defaultOpenDelayMs:100,defaultCloseDelayMs:0,defaultFadeDuration:200,logoHeight:32,iconContainerWidth:So,iconSize:So-vi*2,iconPadding:vi,selectedIndicatorWidth:3,userBadgePadding:yi,userBadgeDiameter:So-yi*2,mobileSidebarHeight:56},js=t=>({...Or,...t,iconContainerWidth:Or.drawerWidthClosed,iconSize:Or.drawerWidthClosed-Or.iconPadding*2,userBadgeDiameter:Or.drawerWidthClosed-Or.userBadgePadding*2}),Ai={drawerWidthClosed:0,drawerWidthOpen:202,defaultOpenDelayMs:Or.defaultOpenDelayMs+200},Gs=t=>({...Ai,...t}),Hs="@backstage/core/sidebar-intro-dismissed",sr=(0,a.createContext)({sidebarConfig:Or,submenuConfig:Ai}),No=(0,a.createContext)({isHoveredOn:!1,setIsHoveredOn:()=>{}}),_i={isOpen:!1,setOpen:()=>{}},bi=(0,a.createContext)(_i),Ci=(0,at.tK)("sidebar-open-state-context");function Pi(t){const{children:r,value:u}=t;return a.createElement(bi.Provider,{value:u},a.createElement(Ci.Provider,{value:(0,at.Bl)({1:u})},r))}const mo=()=>{const t=(0,a.useContext)(Ci),r=(0,a.useContext)(bi);if(t===void 0)return r||_i;const u=t.atVersion(1);if(u===void 0)throw new Error("No context found for version 1.");return u},Si=(0,a.createContext)({selectedMenuItemIndex:-1,setSelectedMenuItemIndex:()=>{}}),Ri={isPinned:!0,toggleSidebarPinState:()=>{},isMobile:!1},Oi=(0,a.createContext)(Ri),wi=(0,at.tK)("sidebar-pin-state-context");function Vs(t){const{children:r,value:u}=t;return a.createElement(Oi.Provider,{value:u},a.createElement(wi.Provider,{value:(0,at.Bl)({1:u})},r))}const Ro=()=>{const t=(0,a.useContext)(wi),r=(0,a.useContext)(Oi);if(t===void 0)return r||Ri;const u=t.atVersion(1);if(u===void 0)throw new Error("No context found for version 1.");return u},Ys=(0,re.A)(t=>({root:{flexGrow:0,margin:t.spacing(0,2),color:t.palette.navigation.color},selected:r=>({color:`${t.palette.navigation.selectedColor}!important`,borderTop:`solid ${r.sidebarConfig.selectedIndicatorWidth}px ${t.palette.navigation.indicator}`,marginTop:"-1px"}),label:{display:"none"}})),Js=t=>{const{to:r,label:u,icon:E,value:b}=t,{sidebarConfig:x}=(0,a.useContext)(sr),V=Ys({sidebarConfig:x}),ce=(0,J.zy)(),{selectedMenuItemIndex:Te,setSelectedMenuItemIndex:Me}=(0,a.useContext)(Si),dt=(nn,Ht)=>{Me(Ht===Te?-1:Ht)},_t=b===Te&&Te>=0||b!==Te&&!(Te>=0)&&r===ce.pathname;return a.createElement(N.A,{"aria-label":u,label:u,icon:E,component:wa,to:r||ce.pathname,onChange:dt,value:b,selected:_t,classes:V})},Fo=t=>{const{children:r,to:u,label:E,icon:b,value:x}=t,{isMobile:V}=Ro();return V?a.createElement(Js,{to:u,label:E,icon:b,value:x}):a.createElement(a.Fragment,null,r)},Ti=(0,re.A)(t=>({root:{position:"fixed",backgroundColor:t.palette.navigation.background,color:t.palette.navigation.color,bottom:0,left:0,right:0,zIndex:t.zIndex.snackbar,borderTop:"1px solid #383838","@media print":{display:"none"}},overlay:r=>({background:t.palette.navigation.background,width:"100%",bottom:`${r.sidebarConfig.mobileSidebarHeight}px`,height:`calc(100% - ${r.sidebarConfig.mobileSidebarHeight}px)`,flex:"0 1 auto",overflow:"auto"}),overlayHeader:{display:"flex",color:t.palette.navigation.color,alignItems:"center",justifyContent:"space-between",padding:t.spacing(2,3)},overlayHeaderClose:{color:t.palette.navigation.color},marginMobileSidebar:r=>({marginBottom:`${r.sidebarConfig.mobileSidebarHeight}px`})})),Qs=t=>(0,ve.orderBy)(t,({props:{priority:r}})=>Number.isInteger(r)?r:-1,"desc"),Xs=a.createElement(Fo).type,Zs=({children:t,label:r="Menu",open:u,onClose:E})=>{const{sidebarConfig:b}=(0,a.useContext)(sr),x=Ti({sidebarConfig:b});return a.createElement(Ee.Ay,{anchor:"bottom",open:u,onClose:E,ModalProps:{BackdropProps:{classes:{root:x.marginMobileSidebar}}},classes:{root:x.marginMobileSidebar,paperAnchorBottom:x.overlay}},a.createElement(oe.A,{className:x.overlayHeader},a.createElement(B.A,{variant:"h3"},r),a.createElement(p.A,{onClick:E,classes:{root:x.overlayHeaderClose}},a.createElement(i.A,null))),a.createElement(oe.A,{component:"nav"},t))},el=t=>{const{sidebarConfig:r}=(0,a.useContext)(sr),{children:u}=t,E=Ti({sidebarConfig:r}),b=(0,J.zy)(),[x,V]=(0,a.useState)(-1);(0,a.useEffect)(()=>{V(-1)},[b.pathname]);let ce=(0,m.OJ)(u,Me=>Me.getElements().filter(dt=>dt.type===Xs));if(u)ce.length?ce=Qs(ce):ce.push(a.createElement(Fo,{key:"default_menu",icon:a.createElement(ue.A,null)},u));else return null;const Te=x>=0&&!ce[x].props.to;return a.createElement(Pi,{value:{isOpen:!0,setOpen:()=>{}}},a.createElement(Si.Provider,{value:{selectedMenuItemIndex:x,setSelectedMenuItemIndex:V}},a.createElement(Zs,{label:ce[x]&&ce[x].props.label,open:Te,onClose:()=>V(-1)},ce[x]&&ce[x].props.children),a.createElement(Y.A,{className:E.root,"data-testid":"mobile-sidebar-root",component:"nav"},ce)))},Ii={getSidebarPinState(){let t;try{t=JSON.parse(window.localStorage.getItem("sidebarPinState")||"true")}catch{return!0}return!!t},setSidebarPinState(t){return window.localStorage.setItem("sidebarPinState",JSON.stringify(t))}},tl=(0,re.A)(t=>({root:{width:"100%",transition:"padding-left 0.1s ease-out",isolation:"isolate",[t.breakpoints.up("sm")]:{paddingLeft:r=>r.isPinned?r.sidebarConfig.drawerWidthOpen:r.sidebarConfig.drawerWidthClosed},[t.breakpoints.down("xs")]:{paddingBottom:r=>r.sidebarConfig.mobileSidebarHeight},"@media print":{padding:"0px !important"}},content:{zIndex:0,isolation:"isolate","&:focus":{outline:0}}}),{name:"BackstageSidebarPage"}),Di=(0,a.createContext)({content:{contentRef:void 0}});function nl(t){const[r,u]=(0,a.useState)(()=>Ii.getSidebarPinState()),{sidebarConfig:E}=(0,a.useContext)(sr),b=(0,a.useRef)(null),x=(0,a.useMemo)(()=>({content:{contentRef:b}}),[b]);(0,a.useEffect)(()=>{Ii.setSidebarPinState(r)},[r]);const V=(0,mt.A)(Me=>Me.breakpoints.down("xs"),{noSsr:!0}),ce=()=>u(!r),Te=tl({isPinned:r,sidebarConfig:E});return a.createElement(Vs,{value:{isPinned:r,toggleSidebarPinState:ce,isMobile:V}},a.createElement(Di.Provider,{value:x},a.createElement(oe.A,{className:Te.root},t.children)))}function Ko(){const{content:t}=(0,a.useContext)(Di);return{focusContent:(0,a.useCallback)(()=>{var u,E;(E=(u=t==null?void 0:t.contentRef)==null?void 0:u.current)==null||E.focus()},[t]),contentRef:t==null?void 0:t.contentRef}}const Mi=(0,re.A)(t=>({drawer:{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",left:0,top:0,bottom:0,zIndex:t.zIndex.appBar,background:t.palette.navigation.background,overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shortest}),"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"},"@media print":{display:"none"}},drawerWidth:r=>({width:r.sidebarConfig.drawerWidthClosed}),drawerOpen:r=>({width:r.sidebarConfig.drawerWidthOpen,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shorter})}),visuallyHidden:{top:0,position:"absolute",zIndex:1e3,transform:"translateY(-200%)","&:focus":{transform:"translateY(5px)"}}}),{name:"BackstageSidebar"}),al=t=>{const{sidebarConfig:r}=(0,a.useContext)(sr),{openDelayMs:u=r.defaultOpenDelayMs,closeDelayMs:E=r.defaultCloseDelayMs,disableExpandOnHover:b,children:x}=t,V=Mi({sidebarConfig:r}),ce=(0,mt.A)(pa=>pa.breakpoints.down("md"),{noSsr:!0}),[Te,Me]=(0,a.useState)(0),dt=(0,a.useRef)(),{isPinned:_t,toggleSidebarPinState:nn}=Ro(),Ht=()=>{_t||b||(dt.current&&(clearTimeout(dt.current),dt.current=void 0),Te!==2&&!ce&&(dt.current=window.setTimeout(()=>{dt.current=void 0,Me(2)},u),Me(1)))},hn=()=>{_t||b||(dt.current&&(clearTimeout(dt.current),dt.current=void 0),Te===1?Me(0):Te===2&&(dt.current=window.setTimeout(()=>{dt.current=void 0,Me(0)},E)))},Un=Te===2&&!ce||_t,Qn=pa=>{pa?(Me(2),nn()):(Me(0),nn())};return a.createElement("nav",{style:{},"aria-label":"sidebar nav"},a.createElement(ol,null),a.createElement(Pi,{value:{isOpen:Un,setOpen:Qn}},a.createElement(oe.A,{className:V.root,"data-testid":"sidebar-root",onMouseEnter:b?()=>{}:Ht,onFocus:b?()=>{}:Ht,onMouseLeave:b?()=>{}:hn,onBlur:b?()=>{}:hn},a.createElement(oe.A,{className:fe()(V.drawer,V.drawerWidth,{[V.drawerOpen]:Un})},x))))},rl=t=>{var r,u;const E=js((r=t.sidebarOptions)!=null?r:{}),b=Gs((u=t.submenuOptions)!=null?u:{}),{children:x,disableExpandOnHover:V,openDelayMs:ce,closeDelayMs:Te}=t,{isMobile:Me}=Ro();return Me?a.createElement(el,null,x):a.createElement(sr.Provider,{value:{sidebarConfig:E,submenuConfig:b}},a.createElement(al,{openDelayMs:ce,closeDelayMs:Te,disableExpandOnHover:V},x))};function ol(){const{sidebarConfig:t}=(0,a.useContext)(sr),{focusContent:r,contentRef:u}=Ko(),E=Mi({sidebarConfig:t});return u!=null&&u.current?a.createElement(Ie.A,{onClick:r,variant:"contained",className:fe()(E.visuallyHidden)},"Skip to content"):null}function Oo(t,r,u=!1){const E=new URLSearchParams(r.search).toString(),b=je().parse(E),x=new URLSearchParams(t.search).toString(),V=je().parse(x),ce=u?ve.isEqual:ve.isMatch;return(0,ve.isEqual)(r.pathname,t.pathname)&&ce(V,b)}const il=(0,re.A)(t=>{var r,u;return{item:{height:48,width:"100%","&:hover":{background:((r=t.palette.navigation.navItem)==null?void 0:r.hoverBackground)||"#6f6f6f",color:t.palette.navigation.selectedColor},display:"flex",alignItems:"center",color:t.palette.navigation.color,padding:t.spacing(2.5),cursor:"pointer",position:"relative",background:"none",border:"none"},itemContainer:{width:"100%"},selected:{background:"#6f6f6f",color:t.palette.common.white},label:{margin:t.spacing(1.75),marginLeft:t.spacing(1),fontSize:t.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis",lineHeight:1},subtitle:{fontSize:10,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"},dropdownArrow:{position:"absolute",right:21},dropdown:{display:"flex",flexDirection:"column",alignItems:"end"},dropdownItem:{width:"100%",padding:"10px 0 10px 0","&:hover":{background:((u=t.palette.navigation.navItem)==null?void 0:u.hoverBackground)||"#6f6f6f",color:t.palette.navigation.selectedColor}},textContent:{color:t.palette.navigation.color,paddingLeft:t.spacing(4),paddingRight:t.spacing(1),fontSize:t.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}},{name:"BackstageSidebarSubmenuItem"}),sl=t=>{const{title:r,subtitle:u,to:E,icon:b,dropdownItems:x,exact:V}=t,ce=il(),{setIsHoveredOn:Te}=(0,a.useContext)(No),Me=()=>{Te(!1)},dt=(0,J.x$)(E!=null?E:""),_t=(0,J.zy)();let nn=Oo(_t,dt,V);const[Ht,hn]=(0,a.useState)(!1),Un=()=>{hn(!Ht)};return x!==void 0?(x.some(Qn=>{const pa=(0,ee.o1)(Qn.to);return nn=Oo(_t,pa,V),nn}),a.createElement(oe.A,{className:ce.itemContainer},a.createElement(me.Ay,{title:r,enterDelay:500,enterNextDelay:500},a.createElement(Ie.A,{role:"button",onClick:Un,onTouchStart:Qn=>Qn.stopPropagation(),className:fe()(ce.item,nn?ce.selected:void 0)},b&&a.createElement(b,{fontSize:"small"}),a.createElement(B.A,{variant:"subtitle1",component:"span",className:ce.label},r,a.createElement("br",null),u&&a.createElement(B.A,{variant:"caption",component:"span",className:ce.subtitle},u)),Ht?a.createElement(q.A,{className:ce.dropdownArrow}):a.createElement(H.A,{className:ce.dropdownArrow}))),x&&Ht&&a.createElement(oe.A,{className:ce.dropdown},x.map((Qn,pa)=>a.createElement(me.Ay,{key:pa,title:Qn.title,enterDelay:500,enterNextDelay:500},a.createElement(wa,{to:Qn.to,underline:"none",className:ce.dropdownItem,onClick:Me,onTouchStart:ka=>ka.stopPropagation()},a.createElement(B.A,{component:"span",className:ce.textContent},Qn.title))))))):a.createElement(oe.A,{className:ce.itemContainer},a.createElement(me.Ay,{title:r,enterDelay:500,enterNextDelay:500},a.createElement(wa,{to:E,underline:"none",className:fe()(ce.item,nn?ce.selected:void 0),onClick:Me,onTouchStart:Qn=>Qn.stopPropagation()},b&&a.createElement(b,{fontSize:"small"}),a.createElement(B.A,{variant:"subtitle1",component:"span",className:ce.label},r,a.createElement("br",null),u&&a.createElement(B.A,{variant:"caption",component:"span",className:ce.subtitle},u)))))},ll=(0,re.A)(t=>({root:{zIndex:1e3,position:"relative",overflow:"visible",width:t.spacing(7)+1},drawer:r=>{var u,E;return{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",[t.breakpoints.up("sm")]:{marginLeft:r.left,transition:t.transitions.create("margin-left",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shortest})},top:0,bottom:0,padding:0,background:(E=(u=t.palette.navigation.submenu)==null?void 0:u.background)!=null?E:"#404040",overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",cursor:"default",width:r.submenuConfig.drawerWidthClosed,transitionDelay:`${r.submenuConfig.defaultOpenDelayMs}ms`,"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}},drawerOpen:r=>({width:r.submenuConfig.drawerWidthOpen,[t.breakpoints.down("xs")]:{width:"100%",position:"relative",paddingLeft:t.spacing(3),left:0,top:0}}),title:{fontSize:t.typography.h5.fontSize,fontWeight:t.typography.fontWeightMedium,color:t.palette.common.white,padding:t.spacing(2.5),[t.breakpoints.down("xs")]:{display:"none"}}}),{name:"BackstageSidebarSubmenu"}),Li=t=>{const{isOpen:r}=mo(),{sidebarConfig:u,submenuConfig:E}=(0,a.useContext)(sr),b=r?u.drawerWidthOpen:u.drawerWidthClosed,x=ll({left:b,submenuConfig:E}),{isHoveredOn:V}=(0,a.useContext)(No),[ce,Te]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{Te(V)},[V]),a.createElement(oe.A,{className:fe()(x.drawer,{[x.drawerOpen]:ce})},a.createElement(B.A,{variant:"h5",component:"span",className:x.title},t.title),t.children)},cl=(0,re.A)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),ul=()=>{const t=cl();return React.createElement(Box,{className:t.iconContainer},React.createElement(Box,{className:t.arrow1},React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})))},dl=(0,re.A)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),ml=()=>{const t=dl();return React.createElement(Box,{className:t.iconContainer},React.createElement(Box,{className:t.arrow1},React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})))},pl=t=>(0,re.A)(r=>{var u,E,b,x;return{root:{color:r.palette.navigation.color,display:"flex",flexFlow:"row nowrap",alignItems:"center",height:48,cursor:"pointer"},buttonItem:{background:"none",border:"none",width:"100%",margin:0,padding:0,textAlign:"inherit",font:"inherit",textTransform:"none"},closed:{width:t.drawerWidthClosed,justifyContent:"center"},open:{[r.breakpoints.up("sm")]:{width:t.drawerWidthOpen}},highlightable:{"&:hover":{background:(E=(u=r.palette.navigation.navItem)==null?void 0:u.hoverBackground)!=null?E:"#404040"}},highlighted:{background:(x=(b=r.palette.navigation.navItem)==null?void 0:b.hoverBackground)!=null?x:"#404040"},label:{fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"auto",flex:"3 1 auto",width:"110px",overflow:"hidden","text-overflow":"ellipsis"},iconContainer:{boxSizing:"border-box",height:"100%",width:t.iconContainerWidth,marginRight:-r.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"0"},searchRoot:{marginBottom:12},searchField:{color:"#b5b5b5",fontWeight:r.typography.fontWeightBold,fontSize:r.typography.fontSize},searchFieldHTMLInput:{padding:r.spacing(2,0,2)},searchContainer:{width:t.drawerWidthOpen-t.iconContainerWidth},secondaryAction:{width:r.spacing(6),textAlign:"center",marginRight:r.spacing(1)},closedItemIcon:{width:"100%",justifyContent:"center"},submenuArrow:{display:"flex"},expandButton:{background:"none",border:"none",color:r.palette.navigation.color,width:"100%",cursor:"pointer",position:"relative",height:48},arrows:{position:"absolute",right:10},selected:{"&$root":{borderLeft:`solid ${t.selectedIndicatorWidth}px ${r.palette.navigation.indicator}`,color:r.palette.navigation.selectedColor},"&$closed":{width:t.drawerWidthClosed},"& $closedItemIcon":{paddingRight:t.selectedIndicatorWidth},"& $iconContainer":{marginLeft:-t.selectedIndicatorWidth}}}},{name:"BackstageSidebarItem"});function wo(t){return(0,a.useMemo)(()=>pl(t),[t])()}const hl=(t,r)=>(0,m.OJ)(t.props.children,u=>{let E=!1;return u.getElements().forEach(({props:{to:b,dropdownItems:x}})=>{if(!E){if(x!=null&&x.length){x.forEach(({to:V})=>E=E||Oo(r,(0,ee.o1)(V)));return}b&&(E=Oo(r,(0,ee.o1)(b)))}}),E},[r.pathname]);function zo(t){return t.to===void 0}const gl=a.createElement(Li).type,fl=a.forwardRef(function({to:r,end:u,style:E,className:b,activeStyle:x,caseSensitive:V,activeClassName:ce="active","aria-current":Te="page",...Me},dt){let{pathname:_t}=(0,J.zy)(),{pathname:nn}=(0,J.x$)(r);V||(_t=_t.toLocaleLowerCase("en-US"),nn=nn.toLocaleLowerCase("en-US"));let Ht=_t===nn;!Ht&&!u&&(Ht=_t.startsWith(`${nn}/`));const hn=Ht?Te:void 0;return a.createElement(v.N_,{...Me,to:r,ref:dt,"aria-current":hn,style:{...E,...Ht?x:void 0},className:fe()([typeof b!="function"?b:void 0,Ht?ce:void 0])})}),xi=(0,a.forwardRef)((t,r)=>{const{icon:u,text:E,hasNotifications:b=!1,hasSubmenu:x=!1,disableHighlight:V=!1,onClick:ce,noTrack:Te,children:Me,className:dt,..._t}=t,{sidebarConfig:nn}=(0,a.useContext)(sr),Ht=wo(nn),{isOpen:hn}=mo(),Un=!hn&&x?{display:"flex",marginLeft:"20px"}:{lineHeight:"0"},Qn=a.createElement(oe.A,{style:Un},a.createElement(u,{fontSize:"small"}),!hn&&x?a.createElement(Je.A,{fontSize:"small"}):a.createElement(a.Fragment,null)),pa=a.createElement(ae.A,{color:"secondary",variant:"dot",overlap:"circular",invisible:!b,className:fe()({[Ht.closedItemIcon]:!hn})},Qn),ka=a.createElement(a.Fragment,null,a.createElement(oe.A,{"data-testid":"login-button",className:Ht.iconContainer},pa),E&&a.createElement(B.A,{variant:"subtitle2",component:"span",className:Ht.label},E),a.createElement("div",{className:Ht.secondaryAction},Me)),tr=hn?ka:pa,Xn={onClick:ce,className:fe()(dt,Ht.root,hn?Ht.open:Ht.closed,zo(t)&&Ht.buttonItem,{[Ht.highlightable]:!V})},Ia=(0,m.st)(),{pathname:Wa}=(0,J.x$)(!zo(t)&&t.to?t.to:""),nr=(0,a.useCallback)(br=>{if(!Te){const Vr="click",hr=E!=null?E:"Sidebar Item",Yr=Wa?{attributes:{to:Wa}}:void 0;Ia.captureEvent(Vr,hr,Yr)}ce==null||ce(br)},[Ia,E,Wa,Te,ce]);return zo(t)?a.createElement(Ie.A,{role:"button","aria-label":E,...Xn,ref:r,onClick:nr},tr):a.createElement(fl,{...Xn,activeClassName:Ht.selected,to:t.to?t.to:"",ref:r,"aria-label":E||t.to,..._t,onClick:nr},tr)}),El=({children:t,...r})=>{const{sidebarConfig:u}=(0,a.useContext)(sr),E=wo(u),[b,x]=(0,a.useState)(!1),V=(0,J.zy)(),ce=hl(t,V),Te=(0,mt.A)(nn=>nn.breakpoints.down("sm")),Me=()=>{x(!0)},dt=()=>{x(!1)},_t=()=>Te?b?a.createElement(q.A,{fontSize:"small",className:E.submenuArrow}):a.createElement(H.A,{fontSize:"small",className:E.submenuArrow}):!b&&a.createElement(Je.A,{fontSize:"small",className:E.submenuArrow});return a.createElement(No.Provider,{value:{isHoveredOn:b,setIsHoveredOn:x}},a.createElement("div",{"data-testid":"item-with-submenu",onMouseLeave:dt,onTouchStart:b?dt:Me,onMouseEnter:Me,className:fe()(b&&E.highlighted)},a.createElement(xi,{hasSubmenu:!0,className:ce?E.selected:"",...r},_t()),b&&t))},Bi=(0,a.forwardRef)((t,r)=>{const[u]=(0,m.OJ)(t.children,E=>E.getElements().filter(b=>b.type===gl));return u?a.createElement(El,{...t},u):a.createElement(xi,{...t,ref:r})});function Cc(t){const{sidebarConfig:r}=useContext(sr),[u,E]=useState(""),b=wo(r),x=t.icon?t.icon:SearchIcon,V=()=>{t.onSearch(u),E("")},ce=_t=>{_t.key==="Enter"&&(_t.preventDefault(),V())},Te=_t=>{E(_t.target.value)},Me=_t=>{_t.preventDefault(),_t.stopPropagation()},dt=_t=>{V(),_t.preventDefault()};return React.createElement(Box,{className:b.searchRoot},React.createElement(Bi,{icon:x,to:t.to,onClick:dt,disableHighlight:!0},React.createElement(TextField,{placeholder:"Search",value:u,onClick:Me,onChange:Te,onKeyDown:ce,className:b.searchContainer,InputProps:{disableUnderline:!0,className:b.searchField},inputProps:{className:b.searchFieldHTMLInput}})))}const vl=(0,A.A)("div")({flex:1},{name:"BackstageSidebarSpace"}),Pc=(0,A.A)("div")({height:8},{name:"BackstageSidebarSpacer"}),Ui=(0,A.A)("hr")(({theme:t})=>({height:1,width:"100%",background:"#383838",border:"none",margin:t.spacing(1.2,0)}),{name:"BackstageSidebarDivider"}),yl=t=>({overflowY:"auto","&::-webkit-scrollbar":{backgroundColor:t.palette.background.default,width:"5px",borderRadius:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:t.palette.text.secondary,borderRadius:"5px"}}),Al=(0,A.A)("div")(({theme:t})=>{const r=yl(t);return{flex:"0 1 auto",overflowX:"hidden",width:"calc(100% - 5px)",minHeight:"48px",overflowY:"hidden","@media (hover: none)":r,"&:hover":r}}),Sc=()=>{const{sidebarConfig:t}=useContext(sr),r=wo(t),{isOpen:u,setOpen:E}=mo();if(useMediaQuery(V=>V.breakpoints.down("md"),{noSsr:!0}))return null;const x=()=>{E(!u)};return React.createElement(Button$1,{role:"button",onClick:x,className:r.expandButton,"aria-label":"Expand Sidebar","data-testid":"sidebar-expand-button"},React.createElement(Box,{className:r.arrows},u?React.createElement(ul,null):React.createElement(ml,null)))},_l=(0,re.A)(t=>({introCard:r=>({color:"#b5b5b5",fontSize:12,width:r.sidebarConfig.drawerWidthOpen,marginTop:t.spacing(2.25),marginBottom:t.spacing(1.5),paddingLeft:r.sidebarConfig.iconPadding,paddingRight:r.sidebarConfig.iconPadding}),introDismiss:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginTop:t.spacing(1.5)},introDismissLink:{color:"#dddddd",display:"flex",alignItems:"center",marginBottom:t.spacing(.5),"&:hover":{color:t.palette.linkHover,transition:t.transitions.create("color",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shortest})}},introDismissText:{fontSize:"0.7rem",fontWeight:"bold",textTransform:"uppercase",letterSpacing:1},introDismissIcon:{width:18,height:18,marginRight:t.spacing(1.5)}}),{name:"BackstageSidebarIntro"});function bl(t){const{sidebarConfig:r}=useContext(sr),u=_l({sidebarConfig:r}),{text:E,onClose:b}=t,x=()=>b();return React.createElement(Box,{className:u.introCard},React.createElement(Typography,{variant:"subtitle2"},E),React.createElement(Box,{className:u.introDismiss},React.createElement(IconButton,{onClick:x,className:u.introDismissLink},React.createElement(CloseIcon,{className:u.introDismissIcon}),React.createElement(Typography,{component:"span",className:u.introDismissText},"Dismiss"))))}const $i=t=>{const{text:r,onDismiss:u}=t,[E,b]=useState(!1),x=()=>{b(!0)};return React.createElement(Collapse,{in:!E,onExited:u},React.createElement(bl,{text:r,onClose:x}))},Cl=null,Pl="And your recently viewed plugins will pop up here!";function Rc(t){const{isOpen:r}=mo(),u={starredItemsDismissed:!1,recentlyViewedItemsDismissed:!1},{value:E,set:b}=useLocalStorageValue(Hs),{starredItemsDismissed:x,recentlyViewedItemsDismissed:V}=E!=null?E:{},ce=()=>{b(Me=>({...u,...Me,starredItemsDismissed:!0}))},Te=()=>{b(Me=>({...u,...Me,recentlyViewedItemsDismissed:!0}))};return r?React.createElement(React.Fragment,null,!x&&React.createElement(React.Fragment,null,React.createElement($i,{text:Cl,onDismiss:ce}),React.createElement(Ui,null)),!V&&React.createElement($i,{text:Pl,onDismiss:Te})):null}const Sl=(0,re.A)(t=>({header:{gridArea:"pageHeader",padding:t.spacing(3),width:"100%",boxShadow:t.shadows[4],position:"relative",zIndex:100,display:"flex",flexDirection:"row",alignItems:"center",backgroundImage:t.page.backgroundImage,backgroundPosition:"center",backgroundSize:"cover",[t.breakpoints.down("sm")]:{flexWrap:"wrap"}},leftItemsBox:{maxWidth:"100%",flexGrow:1},rightItemsBox:{width:"auto",alignItems:"center"},title:{color:t.page.fontColor,wordBreak:"break-word",fontSize:t.typography.h3.fontSize,marginBottom:0},subtitle:{color:t.page.fontColor,opacity:.8,display:"inline-block",marginTop:t.spacing(1),maxWidth:"75ch"},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:t.spacing(1),color:t.page.fontColor},breadcrumb:{color:t.page.fontColor},breadcrumbType:{fontSize:"inherit",opacity:.7,marginRight:-t.spacing(.3),marginBottom:t.spacing(.3)},breadcrumbTitle:{fontSize:"inherit",marginLeft:-t.spacing(.3),marginBottom:t.spacing(.3)}}),{name:"BackstageHeader"}),Rl=({type:t,typeLink:r,classes:u,pageTitle:E})=>t?r?a.createElement(Ei,{className:u.breadcrumb},a.createElement(wa,{to:r},t),a.createElement(B.A,null,E)):a.createElement(B.A,{className:u.type},t):null,Ol=({pageTitle:t,classes:r,tooltip:u})=>{const{contentRef:E}=Ko(),b=a.createElement(B.A,{ref:E,tabIndex:-1,className:r.title,variant:"h1"},t);return u?a.createElement(me.Ay,{title:u,placement:"top-start"},b):b},wl=({classes:t,subtitle:r})=>r?typeof r!="string"?a.createElement(a.Fragment,null,r):a.createElement(B.A,{className:t.subtitle,variant:"subtitle2",component:"span"},r):null;function To(t){const{children:r,pageTitleOverride:u,style:E,subtitle:b,title:x,tooltip:V,type:ce,typeLink:Te}=t,Me=Sl(),_t=(0,o.u)(o.p).getOptionalString("app.title")||"Backstage",nn=u||x,Ht=x||u,hn=`${nn} | %s | ${_t}`,Un=`${nn} | ${_t}`;return a.createElement(a.Fragment,null,a.createElement(qt.m,{titleTemplate:hn,defaultTitle:Un}),a.createElement("header",{style:E,className:Me.header},a.createElement(oe.A,{className:Me.leftItemsBox},a.createElement(Rl,{classes:Me,type:ce,typeLink:Te,pageTitle:Ht}),a.createElement(Ol,{classes:Me,pageTitle:Ht,tooltip:V}),a.createElement(wl,{classes:Me,subtitle:b})),a.createElement(O.A,{container:!0,className:Me.rightItemsBox,spacing:4},r)))}const Tl=({label:t,secondaryLabel:r,icon:u,disabled:E=!1,onClick:b})=>React.createElement(Fragment,null,React.createElement(ListItem,{"data-testid":"header-action-item",disabled:E,button:!0,onClick:x=>{b&&b(x)}},u&&React.createElement(ListItemIcon,null,u),React.createElement(ListItemText,{primary:t,secondary:r})));function Oc(t){const{palette:{common:{white:r}}}=useTheme(),{actionItems:u}=t,[E,b]=React.useState(!1),x=React.useRef(null);return React.createElement(Fragment,null,React.createElement(IconButton,{onClick:()=>b(!0),"data-testid":"header-action-menu",ref:x,style:{color:r,height:56,width:56,marginRight:-4,padding:0}},React.createElement(MoreVert,null)),React.createElement(Popover,{open:E,anchorEl:x.current,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},onClose:()=>b(!1)},React.createElement(List,null,u.map((V,ce)=>React.createElement(Tl,{key:`header-action-menu-${ce}`,...V})))))}const Il=(0,re.A)(t=>({root:{textAlign:"left"},label:{color:t.page.fontColor,fontWeight:t.typography.fontWeightBold,letterSpacing:0,fontSize:t.typography.fontSize,marginBottom:t.spacing(1)/2,lineHeight:1},value:{color:(0,I.X4)(t.page.fontColor,.8),fontSize:t.typography.fontSize,lineHeight:1}}),{name:"BackstageHeaderLabel"}),Dl=({value:t,className:r,typographyRootComponent:u})=>a.createElement(B.A,{component:u!=null?u:typeof t=="string"?"p":"span",className:r},t);function Ml(t){const{label:r,value:u,url:E,contentTypograpyRootComponent:b}=t,x=Il(),V=a.createElement(Dl,{className:x.value,value:u||"<Unknown>",typographyRootComponent:b});return a.createElement(O.A,{item:!0},a.createElement(B.A,{component:"span",className:x.root},a.createElement(B.A,{className:x.label},r),E?a.createElement(wa,{to:E},V):V))}const Ll=t=>(0,R.A)({root:{color:t.palette.common.white,padding:t.spacing(2,2,3),backgroundImage:t.getPageTheme({themeId:"card"}).backgroundImage,backgroundPosition:0,backgroundSize:"inherit"}}),xl=(0,re.A)(Ll,{name:"BackstageItemCardHeader"});function ki(t){const{title:r,subtitle:u,children:E}=t,b=xl(t);return a.createElement(oe.A,{className:b.root},u&&a.createElement(B.A,{variant:"subtitle2",component:"h3"},u),r&&a.createElement(B.A,{variant:"h6",component:"h4"},r),E)}function wc(t){const{description:r,tags:u,title:E,type:b,subtitle:x,label:V,onClick:ce,href:Te}=t;return React.createElement(Card,null,React.createElement(CardMedia,null,React.createElement(ki,{title:E,subtitle:x||b})),React.createElement(CardContent,null,u!=null&&u.length?React.createElement(Box,null,u.map((Me,dt)=>React.createElement(Chip,{size:"small",label:Me,key:dt}))):null,r),React.createElement(CardActions,null,!Te&&React.createElement(Ga,{to:"#",onClick:ce,color:"primary"},V),Te&&React.createElement(Ga,{to:Te,color:"primary"},V)))}const Bl=t=>(0,R.A)({root:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(22em, 1fr))",gridAutoRows:"1fr",gridGap:t.spacing(2)}}),Ul=(0,re.A)(Bl,{name:"BackstageItemCardGrid"});function $l(t){const{children:r,...u}=t,E=Ul(u);return a.createElement(oe.A,{className:E.root,...u},r)}const kl=(0,re.A)(t=>({root:{display:"grid",gridTemplateAreas:"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'",gridTemplateRows:"max-content auto 1fr",gridTemplateColumns:"auto 1fr auto",overflowY:"auto",height:"100vh",[t.breakpoints.down("xs")]:{height:"100%"},"@media print":{display:"block",height:"auto",overflowY:"inherit"}}}),{name:"BackstagePage"});function Io(t){const{themeId:r,children:u}=t,E=kl();return a.createElement(_.A,{theme:b=>({...b,page:b.getPageTheme({themeId:r})})},a.createElement("main",{className:E.root},u))}function Wl(t){const{themeId:r,children:u,...E}=t;return a.createElement(Io,{themeId:r},a.createElement(To,{...E}),u)}const Nl=Fe.z.object({providerInfo:Fe.z.object({}).catchall(Fe.z.unknown()).optional(),profile:Fe.z.object({email:Fe.z.string().optional(),displayName:Fe.z.string().optional(),picture:Fe.z.string().optional()}),backstageIdentity:Fe.z.object({token:Fe.z.string(),identity:Fe.z.object({type:Fe.z.literal("user"),userEntityRef:Fe.z.string(),ownershipEntityRefs:Fe.z.array(Fe.z.string())})})});var Fl=Object.defineProperty,Kl=(t,r,u)=>r in t?Fl(t,r,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[r]=u,jo=(t,r,u)=>(Kl(t,typeof r!="symbol"?r+"":r,u),u);const Wi={defaultTokenExpiryMillis:5*60*1e3,tokenExpiryMarginMillis:5*60*1e3};function zl(t){const r=new Date(Date.now()+Wi.defaultTokenExpiryMillis);if(!t)return r;const[u,E,b]=t.split("."),x=JSON.parse(window.atob(E));return typeof x.exp!="number"?r:new Date(x.exp*1e3-Wi.tokenExpiryMarginMillis)}class jl{constructor(r){jo(this,"options"),jo(this,"abortController"),jo(this,"state"),this.options=r,this.abortController=new AbortController,this.state={type:"empty"}}async start(){await this.getSessionAsync()}getUserId(){const{backstageIdentity:r}=this.getSessionSync(),u=r.identity.userEntityRef,E=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(u);if(!E)throw new TypeError(`Invalid user entity reference "${u}"`);return E[3]}async getIdToken(){return(await this.getSessionAsync()).backstageIdentity.token}getProfile(){return this.getSessionSync().profile}async getProfileInfo(){return(await this.getSessionAsync()).profile}async getBackstageIdentity(){return(await this.getSessionAsync()).backstageIdentity.identity}async getCredentials(){return{token:(await this.getSessionAsync()).backstageIdentity.token}}async signOut(){this.abortController.abort()}getSessionSync(){if(this.state.type==="active")return this.state.session;if(this.state.type==="fetching"&&this.state.previous)return this.state.previous;throw new Error("No session available. Try reloading your browser page.")}async getSessionAsync(){if(this.state.type==="fetching")return this.state.promise;if(this.state.type==="active"&&new Date<this.state.expiresAt)return this.state.session;const r=this.state.type==="active"?this.state.session:void 0,u=this.fetchSession().then(E=>(this.state={type:"active",session:E,expiresAt:zl(E.backstageIdentity.token)},E),E=>{throw this.state={type:"failed",error:E},E});return this.state={type:"fetching",promise:u,previous:r},u}async fetchSession(){const r=await this.options.discoveryApi.getBaseUrl("auth"),u=typeof this.options.headers=="function"?await this.options.headers():this.options.headers,E=new Headers(u);E.set("X-Requested-With","XMLHttpRequest");const b=await fetch(`${r}/${this.options.provider}/refresh`,{signal:this.abortController.signal,headers:E,credentials:"include"});if(!b.ok)throw await ResponseError.fromResponse(b);return Nl.parse(await b.json())}}const Tc=t=>{const r=useApi(discoveryApiRef),[{status:u,error:E},{execute:b}]=useAsync(async()=>{const x=new jl({provider:t.provider,discoveryApi:r,headers:t.headers});await x.start(),t.onSignInSuccess(x)});return useMountEffect(b),u==="loading"?React.createElement(Bn,null):E?React.createElement(Za,{title:"You do not appear to be signed in. Please try reloading the browser page.",error:E}):null};class Go{getUserId(){return"guest"}async getIdToken(){}getProfile(){return{email:"guest@example.com",displayName:"Guest"}}async getProfileInfo(){return{email:"guest@example.com",displayName:"Guest"}}async getBackstageIdentity(){const r="user:default/guest";return{type:"user",userEntityRef:r,ownershipEntityRefs:[r]}}async getCredentials(){return{}}async signOut(){}}function Gl(t){const[r,u,E]=t.split(".");return JSON.parse(window.atob(u))}class Ho{constructor(r){this.result=r}getUserId(){return this.result.userId}static fromResult(r){return new Ho(r)}async getIdToken(){var r,u;return(u=(r=this.result).getIdToken)==null?void 0:u.call(r)}getProfile(){return this.result.profile}async getProfileInfo(){return this.result.profile}async getBackstageIdentity(){const r=await this.getIdToken();if(!r){const b=`user:default/${this.getUserId()}`;return{type:"user",userEntityRef:b,ownershipEntityRefs:[b]}}const{sub:u,ent:E}=Gl(r);return{type:"user",userEntityRef:u,ownershipEntityRefs:E!=null?E:[]}}async getCredentials(){var r,u;return{token:await((u=(r=this.result).getIdToken)==null?void 0:u.call(r))}}async signOut(){var r,u;return(u=(r=this.result).signOut)==null?void 0:u.call(r)}}var Hl=Object.defineProperty,Vl=(t,r,u)=>r in t?Hl(t,r,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[r]=u,Yl=(t,r,u)=>(Vl(t,typeof r!="symbol"?r+"":r,u),u);class Gr{constructor(r,u,E){this.identity=r,this.authApi=u,this.profile=E,Yl(this,"profilePromise")}static createGuest(){return new Go}static fromLegacy(r){return Ho.fromResult(r)}static create(r){return new Gr(r.identity,r.authApi,r.profile)}getUserId(){const r=this.identity.userEntityRef,u=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(r);if(!u)throw new TypeError(`Invalid user entity reference "${r}"`);return u[3]}async getIdToken(){return(await this.authApi.getBackstageIdentity()).token}getProfile(){if(!this.profile)throw new Error("The identity API does not implement synchronous profile fetching, use getProfileInfo() instead");return this.profile}async getProfileInfo(){if(this.profilePromise)return await this.profilePromise;try{return this.profilePromise=this.authApi.getProfile(),await this.profilePromise}catch(r){throw this.profilePromise=void 0,r}}async getBackstageIdentity(){return this.identity}async getCredentials(){return{token:(await this.authApi.getBackstageIdentity()).token}}async signOut(){return this.authApi.signOut()}}const Vo=(0,re.A)({container:{padding:0,listStyle:"none"},item:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"400px",margin:0,padding:0}},{name:"BackstageSignInPage"}),Do=({children:t})=>{const r=Vo();return a.createElement(O.A,{component:"li",item:!0,classes:r},t)},Jl={Component:({config:t,onSignInStarted:r,onSignInSuccess:u,onSignInFailure:E})=>{const{apiRef:b,title:x,message:V}=t,ce=(0,o.u)(b),Te=(0,o.u)(o.r),Me=async()=>{try{r();const dt=await ce.getBackstageIdentity({instantPopup:!0});if(!dt)throw E(),new Error(`The ${x} provider is not configured to support sign-in`);const _t=await ce.getProfile();u(Gr.create({identity:dt.identity,profile:_t,authApi:ce}))}catch(dt){E(),Te.post(new pe.HK("Login failed",dt))}};return a.createElement(Do,null,a.createElement(Oa,{variant:"fullHeight",title:x,actions:a.createElement(Ie.A,{color:"primary",variant:"outlined",onClick:Me},"Sign In")},a.createElement(B.A,{variant:"body1"},V)))},loader:async(t,r)=>{const u=t.get(r),E=await u.getBackstageIdentity({optional:!0});if(!E)return;const b=await u.getProfile();return Gr.create({identity:E.identity,profile:b,authApi:u})}},Ql={Component:({onSignInStarted:t,onSignInSuccess:r})=>a.createElement(Do,null,a.createElement(Oa,{title:"Guest",variant:"fullHeight",actions:a.createElement(Ie.A,{color:"primary",variant:"outlined",onClick:()=>{t(),r(new Go)}},"Enter")},a.createElement(B.A,{variant:"body1"},"Enter as a Guest User.",a.createElement("br",null),"You will not have a verified identity,",a.createElement("br",null),"meaning some features might be unavailable."))),loader:async()=>new Go},Xl=/^[a-z0-9_\-]+\.[a-z0-9_\-]+\.[a-z0-9_\-]+$/i,Zl=(0,re.A)(t=>({form:{display:"flex",flexFlow:"column nowrap"},button:{alignSelf:"center",marginTop:t.spacing(2)}}),{name:"BackstageCustomProvider"}),Ni=t=>{const{ref:r,...u}=t;return{inputRef:r,...u}},ql={Component:({onSignInStarted:t,onSignInSuccess:r})=>{const u=Zl(),{register:E,handleSubmit:b,formState:x}=(0,gt.mN)({mode:"onChange"}),{errors:V}=x,ce=({userId:Te,idToken:Me})=>{t(),r(Gr.fromLegacy({userId:Te,getIdToken:Me!==void 0?async()=>Me:void 0,profile:{email:`${Te}@example.com`}}))};return a.createElement(Do,null,a.createElement(Oa,{title:"Custom User",variant:"fullHeight"},a.createElement(B.A,{variant:"body1"},"Enter your own User ID and credentials.",a.createElement("br",null),"This selection will not be stored."),a.createElement("form",{className:u.form,onSubmit:b(ce)},a.createElement(ut.A,null,a.createElement(We.A,{...Ni(E("userId",{required:!0})),label:"User ID",margin:"normal",error:Boolean(V.userId)}),V.userId&&a.createElement(Pt.A,{error:!0},V.userId.message)),a.createElement(ut.A,null,a.createElement(We.A,{...Ni(E("idToken",{required:!1,validate:Te=>!Te||Xl.test(Te)||"Token is not a valid OpenID Connect JWT Token"})),label:"ID Token (optional)",margin:"normal",autoComplete:"off",error:Boolean(V.idToken)}),V.idToken&&a.createElement(Pt.A,{error:!0},V.idToken.message)),a.createElement(Ie.A,{type:"submit",color:"primary",variant:"outlined",className:u.button,disabled:!(x!=null&&x.isDirty)||!wt()(V)},"Continue"))))},loader:async()=>{}};class Yo{constructor(r){this.config=r}static from(r){return new Yo(r)}getUserId(){if(!this.config.identityApi.getUserId)throw new Error("SignOutProxy IdentityApi.getUserId is not implemented");return this.config.identityApi.getUserId()}getIdToken(){if(!this.config.identityApi.getIdToken)throw new Error("SignOutProxy IdentityApi.getIdToken is not implemented");return this.config.identityApi.getIdToken()}getProfile(){if(!this.config.identityApi.getProfile)throw new Error("SignOutProxy IdentityApi.getProfile is not implemented");return this.config.identityApi.getProfile()}getProfileInfo(){return this.config.identityApi.getProfileInfo()}getBackstageIdentity(){return this.config.identityApi.getBackstageIdentity()}getCredentials(){return this.config.identityApi.getCredentials()}signOut(){return this.config.signOut()}}const Hr="@backstage/core:SignInPage:provider",Fi={guest:Ql,custom:ql,common:Jl};function Ki(t,r){if(t in r)throw new Error(`"${t}" ID is duplicated. IDs of identity providers have to be unique.`)}function ec(t){return t.reduce((u,E)=>{if(typeof E=="string")return Ki(E,u),u[E]={components:Fi[E],id:E},u;const{id:b}=E;return Ki(b,u),u[b]={components:Fi.common,id:b,config:E},u},{})}const tc=(t,r)=>{const u=useApi(errorApiRef),E=useApiHolder(),[b,x]=useState(!0),V=useCallback(Te=>{r(Yo.from({identityApi:Te,signOut:async()=>{var Me;localStorage.removeItem(Hr),await((Me=Te.signOut)==null?void 0:Me.call(Te))}}))},[r]);useLayoutEffect(()=>{var Te;if(!b)return;const Me=localStorage.getItem(Hr);if(Me===null){x(!1);return}const dt=t[Me];if(!dt){x(!1);return}let _t=!1;return dt.components.loader(E,(Te=dt.config)==null?void 0:Te.apiRef).then(nn=>{if(_t){localStorage.removeItem(Hr);return}nn?V(nn):x(!1)}).catch(nn=>{localStorage.removeItem(Hr),!_t&&(u.post(nn),x(!1))}),()=>{_t=!0}},[b,u,r,E,t,V]);const ce=useMemo(()=>Object.keys(t).map(Te=>{const Me=t[Te],{Component:dt}=Me.components,_t=hn=>{V(hn)},nn=()=>{var hn;localStorage.setItem(Hr,((hn=Me==null?void 0:Me.config)==null?void 0:hn.id)||Me.id)},Ht=()=>{localStorage.removeItem(Hr)};return React.createElement(dt,{key:Me.id,config:Me.config,onSignInStarted:nn,onSignInSuccess:_t,onSignInFailure:Ht})}),[t,V]);return[b,ce]},nc=({onSignInSuccess:t,providers:r=[],title:u,align:E="left"})=>{const b=useApi(configApiRef),x=Vo(),V=ec(r),[ce,Te]=tc(V,t);return ce?React.createElement(Bn,null):React.createElement(Io,{themeId:"home"},React.createElement(To,{title:b.getString("app.title")}),React.createElement(Po,null,u&&React.createElement(fi,{title:u,textAlign:E}),React.createElement(Grid,{container:!0,justifyContent:E==="center"?E:"flex-start",spacing:2,component:"ul",classes:x},Te)))},ac=({provider:t,auto:r,onSignInSuccess:u})=>{const E=Vo(),b=useApi(t.apiRef),x=useApi(configApiRef),[V,ce]=useState(),[Te,Me]=useState(!1),dt=async({checkExisting:_t,showPopup:nn})=>{try{let Ht;if(_t&&(Ht=await b.getBackstageIdentity({optional:!0})),!Ht&&(nn||r)&&(Me(!0),Ht=await b.getBackstageIdentity({instantPopup:!0}),!Ht))throw new Error(`The ${t.title} provider is not configured to support sign-in`);if(!Ht){Me(!0);return}const hn=await b.getProfile();u(Gr.create({identity:Ht.identity,authApi:b,profile:hn}))}catch(Ht){ce(Ht),Me(!0)}};return useMountEffect(()=>dt({checkExisting:!0})),Te?React.createElement(Io,{themeId:"home"},React.createElement(To,{title:x.getString("app.title")}),React.createElement(Po,null,React.createElement(Grid,{container:!0,justifyContent:"center",spacing:2,component:"ul",classes:E},React.createElement(Do,null,React.createElement(Oa,{variant:"fullHeight",title:t.title,actions:React.createElement(Button$1,{color:"primary",variant:"outlined",onClick:()=>{dt({showPopup:!0})}},"Sign In")},React.createElement(Typography,{variant:"body1"},t.message),V&&V.name!=="PopupRejectedError"&&React.createElement(Typography,{variant:"body1",color:"error"},V.message)))))):React.createElement(Bn,null)};function Uc(t){return"provider"in t?React.createElement(ac,{...t}):React.createElement(nc,{...t})}const rc=(0,re.A)(t=>({root:{padding:t.spacing(0,2,0,2.5),minHeight:t.spacing(3)},indicator:{backgroundColor:t.palette.info.main,height:t.spacing(.3)}}),{name:"BackstageTabbedCard"}),oc=(0,c.A)(t=>({root:{padding:t.spacing(2,2,2,2.5),display:"inline-block"},title:{fontWeight:700},subheader:{paddingTop:t.spacing(1)}}),{name:"BackstageTabbedCardBoldHeader"})(C.A);function ic(t){const{slackChannel:r,errorBoundaryProps:u,children:E,title:b,deepLink:x,value:V,onChange:ce}=t,Te=rc(),[Me,dt]=(0,a.useState)(0),_t=ce||((hn,Un)=>dt(Un));let nn;V?a.Children.map(E,hn=>{a.isValidElement(hn)&&(hn==null?void 0:hn.props.value)===V&&(nn=hn==null?void 0:hn.props.children)}):a.Children.map(E,(hn,Un)=>{a.isValidElement(hn)&&Un===Me&&(nn=hn==null?void 0:hn.props.children)});const Ht=u||(r?{slackChannel:r}:{});return a.createElement(en.A,null,a.createElement(fa,{...Ht},b&&a.createElement(oc,{title:b}),a.createElement(on.A,{classes:Te,value:V||Me,onChange:_t},E),a.createElement(le.A,null),a.createElement(Be.A,null,nn),x&&a.createElement(ga,{...x})))}const sc=(0,re.A)(t=>({root:{minWidth:t.spacing(6),minHeight:t.spacing(3),margin:t.spacing(0,2,0,0),padding:t.spacing(.5,0,.5,0),textTransform:"none","&:hover":{opacity:1,backgroundColor:"transparent",color:t.palette.text.primary}},selected:{fontWeight:t.typography.fontWeightBold}}),{name:"BackstageCardTab"});function lc(t){const{children:r,...u}=t,E=sc();return a.createElement(cn.A,{disableRipple:!0,classes:E,...u})}},59294:($n,Zt,e)=>{"use strict";e.d(Zt,{Jm:()=>re,h2:()=>_e,ie:()=>c,pl:()=>Re});var o=e(14041),m=e(7877);function p(R){return{$$type:"@backstage/TranslationMessages",id:R.ref.id,full:Boolean(R.full),messages:R.messages}}function j(R){return{$$type:"@backstage/TranslationResource",version:"v1",id:R.ref.id,resources:Object.entries(R.translations).map(([A,_])=>({language:A,loader:()=>_().then(F=>{const Ae=F.default;return{messages:(Ae==null?void 0:Ae.$$type)==="@backstage/TranslationMessages"?Ae.messages:Ae}})}))}}var B=Object.defineProperty,i=(R,A,_)=>A in R?B(R,A,{enumerable:!0,configurable:!0,writable:!0,value:_}):R[A]=_,k=(R,A,_)=>(i(R,typeof A!="symbol"?A+"":A,_),_),Ze=(R,A,_)=>{if(!A.has(R))throw TypeError("Cannot "+_)},Ke=(R,A,_)=>(Ze(R,A,"read from private field"),_?_.call(R):A.get(R)),a=(R,A,_)=>{if(A.has(R))throw TypeError("Cannot add the same private member more than once");A instanceof WeakSet?A.add(R):A.set(R,_)},De=(R,A,_,F)=>(Ze(R,A,"write to private field"),F?F.call(R,_):A.set(R,_),_),Ie,ie,G;function Ve(R){const A=new Array;function _(F,Ae){for(const[fe,ve]of Object.entries(F))typeof ve=="string"?A.push([Ae+fe,ve]):_(ve,`${Ae}${fe}.`)}return _(R,""),Object.fromEntries(A)}class he{constructor(A){a(this,Ie,void 0),a(this,ie,void 0),a(this,G,void 0),k(this,"$$type","@backstage/TranslationRef"),k(this,"version","v1"),De(this,Ie,A.id),De(this,ie,Ve(A.messages))}get id(){return Ke(this,Ie)}get T(){throw new Error("Not implemented")}getDefaultMessages(){return Ke(this,ie)}setDefaultResource(A){De(this,G,A)}getDefaultResource(){return Ke(this,G)}toString(){return`TranslationRef{id=${this.id}}`}}Ie=new WeakMap,ie=new WeakMap,G=new WeakMap;function _e(R){const A=new he(R);return R.translations&&A.setDefaultResource(j({ref:A,translations:R.translations})),A}const re=(0,m.c)({id:"core.translation"}),Re=(0,m.c)({id:"core.applanguage"}),I=new WeakSet,c=R=>{const A=(0,m.u)(m.r),_=(0,m.u)(re),[F,Ae]=(0,o.useState)(()=>_.getTranslation(R)),fe=(0,o.useMemo)(()=>_.translation$(R),[_,R]),ve=(0,o.useCallback)(v=>{if(!I.has(R)){const ee=`Failed to load translation resource '${R.id}'; caused by ${v}`;console.error(ee),A.post(new Error(ee)),I.add(R)}},[A,R]);(0,o.useEffect)(()=>{const v=fe.subscribe({next(ee){ee.ready&&Ae(ee)},error(ee){ve(ee)}});return()=>{v.unsubscribe()}},[fe,ve]);const J=(0,o.useRef)(!0);if((0,o.useEffect)(()=>{J.current?J.current=!1:Ae(_.getTranslation(R))},[_,R]),!F.ready)throw new Promise(v=>{const ee=fe.subscribe({next(oe){oe.ready&&(ee.unsubscribe(),v())},error(oe){ee.unsubscribe(),ve(oe),v()}})});return{t:F.t}}},7877:($n,Zt,e)=>{"use strict";e.d(Zt,{F:()=>_,S:()=>Ze,a:()=>Re,b:()=>p,c:()=>k,d:()=>a,e:()=>Ie,f:()=>F,g:()=>Ke,h:()=>G,i:()=>Ve,j:()=>he,k:()=>_e,l:()=>re,m:()=>ie,n:()=>I,o:()=>De,p:()=>c,q:()=>R,r:()=>A,s:()=>Ae,t:()=>fe,u:()=>j,v:()=>ve,x:()=>J});var o=e(14041),m=e(97388);function p(){const v=(0,m.qO)("api-context");if(!v)throw new Error("API context is not available");const ee=v.atVersion(1);if(!ee)throw new Error("ApiContext v1 not available");return ee}function j(v){const oe=p().get(v);if(!oe)throw new Error(`No implementation available for ${v}`);return oe}function B(v){return function(oe){const Rt=sn=>{const me=p(),kt={};for(const yt in v)if(v.hasOwnProperty(yt)){const mt=v[yt],It=me.get(mt);if(!It)throw new Error(`No implementation available for ${mt}`);kt[yt]=It}return React.createElement(oe,{...sn,...kt})},w=oe.displayName||oe.name||"Component";return Rt.displayName=`withApis(${w})`,Rt}}class i{constructor(ee){if(this.config=ee,!ee.id.split(".").flatMap(Rt=>Rt.split("-")).every(Rt=>Rt.match(/^[a-z][a-z0-9]*$/)))throw new Error(`API id must only contain period separated lowercase alphanum tokens with dashes, got '${ee.id}'`)}get id(){return this.config.id}get T(){throw new Error(`tried to read ApiRef.T of ${this}`)}toString(){return`apiRef{${this.config.id}}`}}function k(v){return new i(v)}var Ze=(v=>(v.SignedIn="SignedIn",v.SignedOut="SignedOut",v))(Ze||{});const Ke=k({id:"core.auth.google"}),a=k({id:"core.auth.github"}),De=k({id:"core.auth.okta"}),Ie=k({id:"core.auth.gitlab"}),ie=k({id:"core.auth.microsoft"}),G=k({id:"core.auth.onelogin"}),Ve=k({id:"core.auth.bitbucket"}),he=k({id:"core.auth.bitbucket-server"}),_e=k({id:"core.auth.atlassian"}),re=k({id:"core.alert"}),Re=k({id:"core.analytics"}),I=k({id:"core.apptheme"}),c=k({id:"core.config"}),R=k({id:"core.discovery"}),A=k({id:"core.error"});var _=(v=>(v[v.None=0]="None",v[v.Active=1]="Active",v))(_||{});const F=k({id:"core.featureflags"}),Ae=k({id:"core.fetch"}),fe=k({id:"core.identity"}),ve=k({id:"core.oauthrequest"}),J=k({id:"core.storage"})},11638:($n,Zt,e)=>{"use strict";e.d(Zt,{E0:()=>re,HM:()=>F,Ig:()=>k,Il:()=>yt,KS:()=>It,NC:()=>Kt,OJ:()=>an,QJ:()=>Tt,Sf:()=>mt,Vb:()=>oe,bW:()=>Ze,h3:()=>_e,i1:()=>jt,nm:()=>G,st:()=>ie,zZ:()=>lt});var o=e(97388),m=e(14041),p=e(7877),j=e(18690);const B=(0,o.tK)("analytics-context"),i=()=>{const D=(0,m.useContext)(B);if(D===void 0)return{routeRef:"unknown",pluginId:"root",extension:"App"};const U=D.atVersion(1);if(U===void 0)throw new Error("No context found for version 1.");return U},k=D=>{const{attributes:U,children:O}=D,te={...i(),...U},ge=(0,o.Bl)({1:te});return m.createElement(B.Provider,{value:ge},O)};function Ze(D,U){return"id"in D?{api:D,deps:{},factory:()=>U}:D}const Ke=(0,o.Q6)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1})),a="_ROUTABLE-EXTENSION-RENDERED";class De{constructor(U,O={routeRef:"unknown",pluginId:"root",extension:"App"}){this.analyticsApi=U,this.context=O,Ke.beforeUnloadRegistered||(addEventListener("beforeunload",()=>{Ke.mostRecentGatheredNavigation&&(this.analyticsApi.captureEvent({...Ke.mostRecentGatheredNavigation,...Ke.mostRecentRoutableExtensionRender}),Ke.mostRecentGatheredNavigation=void 0,Ke.mostRecentRoutableExtensionRender=void 0)},{once:!0,passive:!0}),Ke.beforeUnloadRegistered=!0)}setContext(U){this.context=U}captureEvent(U,O,{value:M,attributes:te}={}){const{_routeNodeType:ge,...ze}=this.context;if(U===a){Ke.mostRecentGatheredNavigation&&(Ke.mostRecentRoutableExtensionRender={context:{...ze,extension:"App"}});return}if(Ke.mostRecentGatheredNavigation){try{this.analyticsApi.captureEvent({...Ke.mostRecentGatheredNavigation,...Ke.mostRecentRoutableExtensionRender})}catch(bt){console.warn("Error during analytics event capture. %o",bt)}Ke.mostRecentGatheredNavigation=void 0,Ke.mostRecentRoutableExtensionRender=void 0}if(U==="navigate"&&ge==="gathered"&&ze.pluginId==="root"){Ke.mostRecentGatheredNavigation={action:U,subject:O,value:M,attributes:te,context:ze};return}try{this.analyticsApi.captureEvent({action:U,subject:O,value:M,attributes:te,context:ze})}catch(bt){console.warn("Error during analytics event capture. %o",bt)}}}function Ie(){try{return(0,p.u)(p.a)}catch{return{captureEvent:()=>{}}}}function ie(){const D=(0,m.useRef)(null),U=i(),O=Ie();function M(){return D.current===null&&(D.current=new De(O)),D.current}const te=M();return te.setContext(U),te}const G=()=>{const D=(0,o.qO)("app-context");if(!D)throw new Error("App context is not available");const U=D.atVersion(1);if(!U)throw new Error("AppContext v1 not available");return U},Ve=(0,o.Q6)("component-data-store",()=>new WeakMap),he="__backstage_data";function _e(D,U,O){var M;const te=D;let ge=(M=te[he])!=null?M:Ve.get(D);if(ge||(ge={map:new Map},Object.defineProperty(te,he,{enumerable:!1,configurable:!0,writable:!1,value:ge}),Ve.set(D,ge)),ge.map.has(U)){const ze=D.displayName||D.name;throw new Error(`Attempted to attach duplicate data "${U}" to component "${ze}"`)}ge.map.set(U,O)}function re(D,U){var O;if(!D)return;const M=D.type;if(!M)return;const te=(O=M[he])!=null?O:Ve.get(M);if(te)return te.map.get(U)}const Re=(0,o.Q6)("route-ref-type",()=>Symbol("route-ref-type"));var I=Object.defineProperty,c=(D,U,O)=>U in D?I(D,U,{enumerable:!0,configurable:!0,writable:!0,value:O}):D[U]=O,R=(D,U,O)=>(c(D,typeof U!="symbol"?U+"":U,O),O),A;class _{constructor(U,O){this.id=U,this.params=O,R(this,A,"absolute")}get title(){return this.id}toString(){return`routeRef{type=absolute,id=${this.id}}`}}A=Re;function F(D){var U;return new _(D.id,(U=D.params)!=null?U:[])}var Ae=Object.defineProperty,fe=(D,U,O)=>U in D?Ae(D,U,{enumerable:!0,configurable:!0,writable:!0,value:O}):D[U]=O,ve=(D,U,O)=>(fe(D,typeof U!="symbol"?U+"":U,O),O),J;const v=/^\w+$/;class ee{constructor(U,O,M,te){this.id=U,this.path=O,this.parent=M,this.params=te,ve(this,J,"sub")}toString(){return`routeRef{type=sub,id=${this.id}}`}}J=Re;function oe(D){const{id:U,path:O,parent:M}=D,te=O.split("/").filter(bt=>bt.startsWith(":")).map(bt=>bt.substring(1)),ge=[...M.params,...te];if(M.params.some(bt=>te.includes(bt)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!O.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${O}'`);if(O.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${O}'`);for(const bt of te)if(!v.test(bt))throw new Error(`SubRouteRef path has invalid param, got '${bt}'`);return new ee(U,O,M,ge)}var Rt=Object.defineProperty,w=(D,U,O)=>U in D?Rt(D,U,{enumerable:!0,configurable:!0,writable:!0,value:O}):D[U]=O,sn=(D,U,O)=>(w(D,typeof U!="symbol"?U+"":U,O),O),me;class kt{constructor(U,O,M){this.id=U,this.params=O,this.optional=M,sn(this,me,"external")}toString(){return`routeRef{type=external,id=${this.id}}`}}me=Re;function yt(D){var U;return new kt(D.id,(U=D.params)!=null?U:[],Boolean(D.optional))}function mt(D){const{pathname:U}=(0,j.zy)(),O=(0,o.qO)("routing-context");if(!O)throw new Error("Routing context is not available");const M=O.atVersion(1),te=(0,m.useMemo)(()=>M&&M.resolve(D,{pathname:U}),[M,D,U]);if(!O)throw new Error("useRouteRef used outside of routing context");if(!M)throw new Error("RoutingContext v1 not available");const ge="optional"in D&&D.optional;if(!te&&!ge)throw new Error(`No path for ${D}`);return te}function It(D){return(0,j.g)()}var Ne=Object.defineProperty,Ct=(D,U,O)=>U in D?Ne(D,U,{enumerable:!0,configurable:!0,writable:!0,value:O}):D[U]=O,ot=(D,U,O)=>(Ct(D,typeof U!="symbol"?U+"":U,O),O);class zt extends m.Component{constructor(){super(...arguments),ot(this,"state",{error:void 0}),ot(this,"handleErrorReset",()=>{this.setState({error:void 0})})}static getDerivedStateFromError(U){return{error:U}}render(){const{error:U}=this.state,{app:O,plugin:M}=this.props,{ErrorBoundaryFallback:te}=O.getComponents();return U?m.createElement(te,{error:U,resetError:this.handleErrorReset,plugin:M}):this.props.children}}function Tt(D){const{component:U,mountPoint:O,name:M}=D;return lt({component:{lazy:()=>U().then(te=>{const ge=bt=>{const Qe=ie();try{mt(O)}catch(Mt){if(typeof Mt=="object"&&Mt!==null){const{message:rn}=Mt;if(typeof rn=="string"&&rn.startsWith("No path for "))throw new Error(`Routable extension component with mount point ${O} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`)}throw Mt}return(0,m.useEffect)(()=>{Qe.captureEvent(a,"")},[Qe]),m.createElement(te,{...bt})},ze=M||te.displayName||te.name||"LazyComponent";return ge.displayName=`RoutableExtension(${ze})`,ge},te=>ze=>{const bt=G(),{BootErrorPage:Qe}=bt.getComponents();return m.createElement(Qe,{step:"load-chunk",error:te})})},data:{"core.mountPoint":O},name:M})}function Kt(D){const{component:U,name:O}=D;return lt({component:U,name:O})}function lt(D){const{data:U={},name:O}=D;O||console.warn("Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.");let M;if("lazy"in D.component){const ge=D.component.lazy;M=(0,m.lazy)(()=>ge().then(ze=>({default:ze})))}else M=D.component.sync;const te=O||M.displayName||M.name||"Component";return{expose(ge){const ze=bt=>{const Qe=G(),{Progress:Mt}=Qe.getComponents(),rn=U==null?void 0:U["core.mountPoint"];return m.createElement(m.Suspense,{fallback:m.createElement(Mt,null)},m.createElement(zt,{app:Qe,plugin:ge},m.createElement(k,{attributes:{pluginId:ge.getId(),...O&&{extension:O},...rn&&{routeRef:rn.id}}},m.createElement(M,{...bt}))))};_e(ze,"core.plugin",ge),_e(ze,"core.extensionName",O);for(const[bt,Qe]of Object.entries(U))_e(ze,bt,Qe);return ze.displayName=`Extension(${te})`,ze}}}function ft(D,U,O,M){return m.Children.toArray(D).flatMap(te=>{if(!(0,m.isValidElement)(te))return[];if(te.type===m.Fragment)return ft(te.props.children,U,O,M);if(re(te,"core.featureFlagged")){const ge=te.props;return("with"in ge?U.isActive(ge.with):!U.isActive(ge.without))?ft(te.props.children,U,O,M):[]}if(O===void 0||O(te))return[te];if(M)throw new Error(M);return ft(te.props.children,U,O,M)})}class $t{constructor(U,O){this.node=U,this.featureFlagsApi=O}selectByComponentData(U){const O=ft(this.node,this.featureFlagsApi,M=>re(M,U.key)!==void 0,U.withStrictError);return new $t(O,this.featureFlagsApi)}findComponentData(U){return ft(this.node,this.featureFlagsApi,M=>re(M,U.key)!==void 0).map(M=>re(M,U.key)).filter(M=>M!==void 0)}getElements(){return ft(this.node,this.featureFlagsApi)}}function an(D,U,O=[]){const M=(0,p.u)(p.f),te=new $t(D,M);return(0,m.useMemo)(()=>U(te),[D,...O])}class St{constructor(U){this.config=U}getId(){return this.config.id}getApis(){var U;return(U=this.config.apis)!=null?U:[]}getFeatureFlags(){var U,O;return(O=(U=this.config.featureFlags)==null?void 0:U.slice())!=null?O:[]}get routes(){var U;return(U=this.config.routes)!=null?U:{}}get externalRoutes(){var U;return(U=this.config.externalRoutes)!=null?U:{}}provide(U){return U.expose(this)}toString(){return`plugin{${this.config.id}}`}}function jt(D){return new St(D)}},3399:($n,Zt,e)=>{"use strict";e.d(Zt,{HK:()=>A,bJ:()=>p,m_:()=>re,o3:()=>ve,tX:()=>j});var o=e(69655),m=e.n(o);function p(J){if(typeof J!="object"||J===null||Array.isArray(J))return!1;const v=J;return!(typeof v.name!="string"||v.name===""||typeof v.message!="string")}function j(J){if(typeof J!="object"||J===null||Array.isArray(J))throw new Error(`Encountered invalid error, not an object, got '${J}'`);const v=J;if(typeof v.name!="string"||v.name==="")throw new Error(`Encountered error object without a name, got '${J}'`);if(typeof v.message!="string")throw new Error(`Encountered error object without a message, got '${J}'`)}function B(J,v){const oe={name:"Unknown",message:"<no reason given>",...serializeError$1(J)};return v!=null&&v.includeStack||delete oe.stack,oe}function i(J){const v=(0,o.deserializeError)(J);return J.stack||(v.stack=void 0),v}function k(J){if(p(J)){const v=String(J);return v!=="[object Object]"?v:`${J.name}: ${J.message}`}return`unknown error '${J}'`}var Ze=Object.defineProperty,Ke=(J,v,ee)=>v in J?Ze(J,v,{enumerable:!0,configurable:!0,writable:!0,value:ee}):J[v]=ee,a=(J,v,ee)=>(Ke(J,typeof v!="symbol"?v+"":v,ee),ee);class De extends Error{constructor(v,ee){var oe;let Rt=v;if(ee!==void 0){const w=k(ee);Rt?Rt+=`; caused by ${w}`:Rt=`caused by ${w}`}super(Rt),a(this,"cause"),(oe=Error.captureStackTrace)==null||oe.call(Error,this,this.constructor),(!this.name||this.name==="Error")&&this.constructor.name!=="Error"&&(this.name=this.constructor.name),this.cause=p(ee)?ee:void 0}}var Ie=Object.defineProperty,ie=(J,v,ee)=>v in J?Ie(J,v,{enumerable:!0,configurable:!0,writable:!0,value:ee}):J[v]=ee,G=(J,v,ee)=>(ie(J,typeof v!="symbol"?v+"":v,ee),ee);class Ve extends De{constructor(){super(...arguments),G(this,"name","InputError")}}class he extends De{constructor(){super(...arguments),G(this,"name","AuthenticationError")}}class _e extends De{constructor(){super(...arguments),G(this,"name","NotAllowedError")}}class re extends De{constructor(){super(...arguments),G(this,"name","NotFoundError")}}class Re extends De{constructor(){super(...arguments),G(this,"name","ConflictError")}}class I extends De{constructor(){super(...arguments),G(this,"name","NotModifiedError")}}class c extends De{constructor(){super(...arguments),G(this,"name","NotImplementedError")}}class R extends null{}class A extends De{constructor(v,ee){super(v,ee),this.name=p(ee)?ee.name:"Error"}}async function _(J){var v;try{const ee=await J.text();if(ee){if((v=J.headers.get("content-type"))!=null&&v.startsWith("application/json"))try{const oe=JSON.parse(ee);if(oe.error&&oe.response)return oe}catch{}return{error:{name:"Error",message:`Request failed with status ${J.status} ${J.statusText}, ${ee}`},response:{statusCode:J.status}}}}catch{}return{error:{name:"Error",message:`Request failed with status ${J.status} ${J.statusText}`},response:{statusCode:J.status}}}var F=Object.defineProperty,Ae=(J,v,ee)=>v in J?F(J,v,{enumerable:!0,configurable:!0,writable:!0,value:ee}):J[v]=ee,fe=(J,v,ee)=>(Ae(J,typeof v!="symbol"?v+"":v,ee),ee);class ve extends Error{constructor(v){super(v.message),fe(this,"response"),fe(this,"body"),fe(this,"cause"),this.name="ResponseError",this.response=v.response,this.body=v.data,this.cause=v.cause}static async fromResponse(v){const ee=await _(v),oe=ee.response.statusCode||v.status,Rt=ee.error.name||v.statusText,w=`Request failed with ${oe} ${Rt}`,sn=i(ee.error);return new ve({message:w,response:v,data:ee,cause:sn})}}},33478:($n,Zt,e)=>{"use strict";e.d(Zt,{$J:()=>i,L7:()=>c,LS:()=>Re,YT:()=>I,gh:()=>re});var o=e(7877),m=e(11638),p=e(63188),j=e(13660),B=e(14041);const i=(0,o.c)({id:"core.scmauth"});var k=(R,A,_)=>{if(!A.has(R))throw TypeError("Cannot "+_)},Ze=(R,A,_)=>(k(R,A,"read from private field"),_?_.call(R):A.get(R)),Ke=(R,A,_)=>{if(A.has(R))throw TypeError("Cannot add the same private member more than once");A instanceof WeakSet?A.add(R):A.set(R,_)},a=(R,A,_,F)=>(k(R,A,"write to private field"),F?F.call(R,_):A.set(R,_),_),De,Ie,ie,G,Ve;class he{constructor(A){Ke(this,De,void 0),a(this,De,A)}async getCredentials(A){const _=new URL(A.url),F=Ze(this,De).find(Ae=>Ae.isUrlSupported(_));if(!F)throw new Error(`No auth provider available for '${A.url}', see https://backstage.io/link?scm-auth`);return F.getCredentials(A)}}De=new WeakMap;const _e=class vr{constructor(A,_,F,Ae){Ke(this,Ie,void 0),Ke(this,ie,void 0),Ke(this,G,void 0),Ke(this,Ve,void 0),a(this,Ie,_),a(this,ie,F),a(this,G,Ae),a(this,Ve,A)}static createDefaultApiFactory(){return(0,m.bW)({api:i,deps:{github:o.d,gitlab:o.e,azure:o.m,bitbucket:o.i},factory:({github:A,gitlab:_,azure:F,bitbucket:Ae})=>vr.merge(vr.forGithub(A),vr.forGitlab(_),vr.forAzure(F),vr.forBitbucket(Ae))})}static forAuthApi(A,_){return new vr("generic",A,_.host,_.scopeMapping)}static forGithub(A,_){var F;const Ae=(F=_==null?void 0:_.host)!=null?F:"github.com";return new vr("github",A,Ae,{default:["repo","read:org","read:user"],repoWrite:["gist"]})}static forGitlab(A,_){var F;const Ae=(F=_==null?void 0:_.host)!=null?F:"gitlab.com";return new vr("gitlab",A,Ae,{default:["read_user","read_api","read_repository"],repoWrite:["write_repository","api"]})}static forAzure(A,_){var F;const Ae=(F=_==null?void 0:_.host)!=null?F:"dev.azure.com";return new vr("azure",A,Ae,{default:["vso.build","vso.code","vso.graph","vso.project","vso.profile"],repoWrite:["vso.code_manage"]})}static forBitbucket(A,_){var F;const Ae=(F=_==null?void 0:_.host)!=null?F:"bitbucket.org";return new vr("bitbucket",A,Ae,{default:["account","team","pullrequest","snippet","issue"],repoWrite:["pullrequest:write","snippet:write","issue:write"]})}static merge(...A){return new he(A)}isUrlSupported(A){return A.host===Ze(this,ie)}getAdditionalScopesForProvider(A){var _,F;return!(A!=null&&A.customScopes)||Ze(this,Ve)==="generic"?[]:(F=(_=A.customScopes)==null?void 0:_[Ze(this,Ve)])!=null?F:[]}async getCredentials(A){const{url:_,additionalScope:F,...Ae}=A,fe=Ze(this,G).default.slice();F!=null&&F.repoWrite&&fe.push(...Ze(this,G).repoWrite);const ve=this.getAdditionalScopesForProvider(F);ve.length&&fe.push(...ve);const J=[...new Set(fe)],v=await Ze(this,Ie).getAccessToken(J,Ae);return{token:v,headers:{Authorization:`Bearer ${v}`}}}};Ie=new WeakMap,ie=new WeakMap,G=new WeakMap,Ve=new WeakMap;let re=_e;class Re{static fromConfig(A){return p.b5.fromConfig(A)}}const I=(0,o.c)({id:"integration.scmintegrations"}),c=R=>{var A;const{type:_}=R,F=(0,m.nm)(),Ae=j.A,fe=_&&(A=F.getSystemIcon(_))!=null?A:Ae;return B.createElement(fe,null)}},63188:($n,Zt,e)=>{"use strict";e.d(Zt,{B:()=>X,Fw:()=>In,b5:()=>er,bm:()=>at});var o=e(52536),m=e.n(o),p=e(45250),j=e.n(p),B=e(10288),i=e.n(B),k=e(36142),Ze=e(49863),Ke=e(52950),a=e(1048).Buffer;function De(h){const l=new URL("http://example.com");return l.host=h,l.host===h}function Ie(h){try{return new URL(h),!0}catch{return!1}}function ie(h,l){return{list(){return h},byUrl(y){try{const z=typeof y=="string"?new URL(y):y;return h.find(Oe=>l(Oe)===z.host)}catch{return}},byHost(y){return h.find(z=>l(z)===y)}}}function G(h){const{url:l,base:y,lineNumber:z}=h;try{return new URL(l),l}catch{}let Oe;if(l.startsWith("/")){const{filepath:st}=m()(y);Oe=new URL(y);const Dt=(0,p.trimEnd)(Oe.pathname.substring(0,Oe.pathname.length-st.length),"/");Oe.pathname=`${Dt}${l}`}else Oe=new URL(l,y);return Oe.search=new URL(y).search,z&&(Oe.hash=`L${z}`),Oe.toString()}const Ve="amazonaws.com";function he(h){var l;const y=h.getOptionalString("endpoint"),z=(l=h.getOptionalBoolean("s3ForcePathStyle"))!=null?l:!1;let Oe,st;if(y){try{const Fn=new URL(y);Oe=Fn.host,st=Fn.pathname}catch{throw new Error(`invalid awsS3 integration config, endpoint '${y}' is not a valid URL`)}if(st!=="/")throw new Error(`invalid awsS3 integration config, endpoints cannot contain path, got '${y}'`)}else Oe=Ve;const Dt=h.getOptionalString("accessKeyId"),Qt=h.getOptionalString("secretAccessKey"),Rn=h.getOptionalString("roleArn"),zn=h.getOptionalString("externalId");return{host:Oe,endpoint:y,s3ForcePathStyle:z,accessKeyId:Dt,secretAccessKey:Qt,roleArn:Rn,externalId:zn}}function _e(h){const l=h.map(he);return l.some(y=>y.host===Ve)||l.push({host:Ve}),l}var re=Object.defineProperty,Re=(h,l,y)=>l in h?re(h,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):h[l]=y,I=(h,l,y)=>(Re(h,typeof l!="symbol"?l+"":l,y),y);const c=class{constructor(l){this.integrationConfig=l}get type(){return"awsS3"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){return G(l)}resolveEditUrl(l){return l}};I(c,"factory",({config:h})=>{var l;const y=_e((l=h.getOptionalConfigArray("integrations.awsS3"))!=null?l:[]);return ie(y.map(z=>new c(z)),z=>z.config.host)});let R=c;var A=(h,l,y)=>{if(!l.has(h))throw TypeError("Cannot "+y)},_=(h,l,y)=>(A(h,l,"read from private field"),y?y.call(h):l.get(h)),F=(h,l,y)=>{if(l.has(h))throw TypeError("Cannot add the same private member more than once");l instanceof WeakSet?l.add(h):l.set(h,y)},Ae=(h,l,y,z)=>(A(h,l,"write to private field"),z?z.call(h,y):l.set(h,y),y),fe,ve,J,v,ee,oe,Rt;const w="GB",sn=class Gi{constructor(l,y,z,Oe,st,Dt){F(this,fe,void 0),F(this,ve,void 0),F(this,J,void 0),F(this,v,void 0),F(this,ee,void 0),F(this,oe,void 0),F(this,Rt,(...Qt)=>{const Rn=new URL(_(this,fe));return Rn.pathname=Qt.map(zn=>encodeURIComponent(zn)).join("/"),Rn}),Ae(this,fe,l),Ae(this,ve,y),Ae(this,J,z),Ae(this,v,Oe),Ae(this,ee,st),Ae(this,oe,Dt)}static fromRepoUrl(l){var y;const z=new URL(l);let Oe,st,Dt;const Qt=z.pathname.split("/").map(Sa=>decodeURIComponent(Sa));if(Qt[2]==="_git"?(Oe=Qt[1],st=Dt=Qt[3]):Qt[3]==="_git"?(Oe=Qt[1],st=Qt[2],Dt=Qt[4]):Qt[4]==="_git"&&(Oe=`${Qt[1]}/${Qt[2]}`,st=Qt[3],Dt=Qt[5]),!Oe||!st||!Dt)throw new Error("Azure URL must point to a git repository");const Rn=(y=z.searchParams.get("path"))!=null?y:void 0;let zn;const Fn=z.searchParams.get("version");if(Fn){if(Fn.slice(0,2)!=="GB")throw new Error("Azure URL version must point to a git branch");zn=Fn.slice(2)}return new Gi(z.origin,Oe,st,Dt,Rn,zn)}toRepoUrl(){let l;return _(this,J)===_(this,v)?l=_(this,Rt).call(this,_(this,ve),"_git",_(this,v)):l=_(this,Rt).call(this,_(this,ve),_(this,J),"_git",_(this,v)),_(this,ee)&&l.searchParams.set("path",_(this,ee)),_(this,oe)&&l.searchParams.set("version",w+_(this,oe)),l.toString()}toFileUrl(){if(!_(this,ee))throw new Error("Azure URL must point to a specific path to be able to download a file");const l=_(this,Rt).call(this,_(this,ve),_(this,J),"_apis","git","repositories",_(this,v),"items");return l.searchParams.set("api-version","6.0"),l.searchParams.set("path",_(this,ee)),_(this,oe)&&l.searchParams.set("version",_(this,oe)),l.toString()}toArchiveUrl(){const l=_(this,Rt).call(this,_(this,ve),_(this,J),"_apis","git","repositories",_(this,v),"items");return l.searchParams.set("recursionLevel","full"),l.searchParams.set("download","true"),l.searchParams.set("api-version","6.0"),_(this,ee)&&l.searchParams.set("scopePath",_(this,ee)),_(this,oe)&&l.searchParams.set("version",_(this,oe)),l.toString()}toCommitsUrl(){const l=_(this,Rt).call(this,_(this,ve),_(this,J),"_apis","git","repositories",_(this,v),"commits");return l.searchParams.set("api-version","6.0"),_(this,oe)&&l.searchParams.set("searchCriteria.itemVersion.version",_(this,oe)),l.toString()}getOwner(){return _(this,ve)}getProject(){return _(this,J)}getRepo(){return _(this,v)}getPath(){return _(this,ee)}getRef(){return _(this,oe)}};fe=new WeakMap,ve=new WeakMap,J=new WeakMap,v=new WeakMap,ee=new WeakMap,oe=new WeakMap,Rt=new WeakMap;let me=sn;const kt="dev.azure.com",yt=["clientId","clientSecret","tenantId","personalAccessToken"],mt=new Map([["ClientSecret",["clientId","clientSecret","tenantId"]],["ManagedIdentity",["clientId"]],["PersonalAccessToken",["personalAccessToken"]]]);function It(h){for(const l of mt.entries()){const[y,z]=l,Oe=yt.filter(st=>!z.includes(st));if(z.every(st=>h[st]!==void 0)&&Oe.every(st=>h[st]===void 0))return{kind:y,organizations:h.organizations,...z.reduce((st,Dt)=>(st[Dt]=h[Dt],st),{})}}throw new Error("is not a valid credential")}function Ne(h){var l,y,z,Oe;const st=(l=h.getOptionalString("host"))!=null?l:kt;let Dt=(y=h.getOptionalConfigArray("credentials"))==null?void 0:y.map(zn=>({organizations:zn.getOptionalStringArray("organizations"),personalAccessToken:zn.getOptionalString("personalAccessToken"),tenantId:zn.getOptionalString("tenantId"),clientId:zn.getOptionalString("clientId"),clientSecret:zn.getOptionalString("clientSecret")}));const Qt=h.getOptionalString("token");if(h.getOptional("credential")!==void 0&&h.getOptional("credentials")!==void 0)throw new Error("Invalid Azure integration config, 'credential' and 'credentials' cannot be used together. Use 'credentials' instead.");if(h.getOptional("token")!==void 0&&h.getOptional("credentials")!==void 0)throw new Error("Invalid Azure integration config, 'token' and 'credentials' cannot be used together. Use 'credentials' instead.");if(Qt!==void 0){const zn=[{personalAccessToken:Qt}];Dt=(z=Dt==null?void 0:Dt.concat(zn))!=null?z:zn}if(h.getOptional("credential")!==void 0){const zn=[{organizations:h.getOptionalStringArray("credential.organizations"),token:h.getOptionalString("credential.token"),tenantId:h.getOptionalString("credential.tenantId"),clientId:h.getOptionalString("credential.clientId"),clientSecret:h.getOptionalString("credential.clientSecret")}];Dt=(Oe=Dt==null?void 0:Dt.concat(zn))!=null?Oe:zn}if(!De(st))throw new Error(`Invalid Azure integration config, '${st}' is not a valid host`);let Rn;if(Dt!==void 0){const zn=Dt==null?void 0:Dt.reduce((Fn,Sa,Ha)=>{let ar;try{It(Sa)}catch(rr){ar=rr.message}return ar!==void 0&&Fn.push(`credential at position ${Ha+1} ${ar}`),Fn},Array.of()).concat(Object.entries(Dt.filter(Fn=>Fn.organizations!==void 0&&Fn.organizations.length>0).reduce((Fn,Sa,Ha)=>{var ar;return(ar=Sa.organizations)==null||ar.forEach(rr=>{Fn[rr]||(Fn[rr]=[]),Fn[rr].push(Ha+1)}),Fn},{})).filter(([Fn,Sa])=>Sa.length>1).reduce((Fn,[Sa,Ha])=>(Fn.push(`organization ${Sa} is specified multiple times in credentials at positions ${Ha.slice(0,Ha.length-1).join(", ")} and ${Ha[Ha.length-1]}`),Fn),Array.of()));if((zn==null?void 0:zn.length)>0)throw new Error(`Invalid Azure integration config for ${st}: ${zn.join("; ")}`);if(Rn=Dt.map(Fn=>It(Fn)),Rn.some(Fn=>Fn.kind!=="PersonalAccessToken")&&st!==kt)throw new Error(`Invalid Azure integration config for ${st}, only personal access tokens can be used with hosts other than ${kt}`);if(Rn.filter(Fn=>Fn.organizations===void 0||Fn.organizations.length===0).length>1)throw new Error(`Invalid Azure integration config for ${st}, you cannot specify multiple credentials without organizations`)}return{host:st,credentials:Rn}}function Ct(h){const l=h.map(Ne);return l.some(y=>y.host===kt)||l.push({host:kt}),l}var ot=Object.defineProperty,zt=(h,l,y)=>l in h?ot(h,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):h[l]=y,Tt=(h,l,y)=>(zt(h,typeof l!="symbol"?l+"":l,y),y);const Kt=class{constructor(l){this.integrationConfig=l}get type(){return"azure"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){var y;const{url:z,base:Oe}=l;if(Ie(z))return z;try{const st=me.fromRepoUrl(Oe),Dt=new URL(Oe),Qt=new URL(`https://a.com${(y=st.getPath())!=null?y:""}`),Rn=new URL(z,Qt).pathname;return Dt.searchParams.set("path",Rn),l.lineNumber&&(Dt.searchParams.set("line",String(l.lineNumber)),Dt.searchParams.set("lineEnd",String(l.lineNumber+1)),Dt.searchParams.set("lineStartColumn","1"),Dt.searchParams.set("lineEndColumn","1")),Dt.toString()}catch{return new URL(z,Oe).toString()}}resolveEditUrl(l){return l}};Tt(Kt,"factory",({config:h})=>{var l;const y=Ct((l=h.getOptionalConfigArray("integrations.azure"))!=null?l:[]);return ie(y.map(z=>new Kt(z)),z=>z.config.host)});let lt=Kt;function ft(h){return me.fromRepoUrl(h).toFileUrl()}function $t(h){return me.fromRepoUrl(h).toArchiveUrl()}function an(h){return me.fromRepoUrl(h).toCommitsUrl()}var St=Object.defineProperty,jt=(h,l,y)=>l in h?St(h,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):h[l]=y,D=(h,l,y)=>(jt(h,typeof l!="symbol"?l+"":l,y),y);const U=null;class O{constructor(l){this.credential=l,D(this,"azureDevOpsScope","499b84ac-1321-427f-aa17-267ca6975798/.default"),D(this,"cached")}static fromAzureDevOpsCredential(l){switch(l.kind){case"PersonalAccessToken":return O.fromPersonalAccessTokenCredential(l);case"ClientSecret":return O.fromTokenCredential(new ClientSecretCredential(l.tenantId,l.clientId,l.clientSecret));case"ManagedIdentity":return O.fromTokenCredential(new ManagedIdentityCredential(l.clientId));default:throw new Error(`Credential kind '${l.kind}' not supported`)}}static fromTokenCredential(l){return new O(l)}static fromPersonalAccessTokenCredential(l){return new O(l.personalAccessToken)}async getCredentials(){if(this.cached===void 0||this.cached.expiresAt!==void 0&&Date.now()>this.cached.expiresAt)if(typeof this.credential=="string")this.cached={headers:{Authorization:`Basic ${btoa(`:${this.credential}`)}`},type:"pat",token:this.credential};else{const l=await this.credential.getToken(this.azureDevOpsScope);if(!l)throw new Error("Failed to retrieve access token");this.cached={expiresAt:l.expiresOnTimestamp-U,headers:{Authorization:`Bearer ${l.token}`},type:"bearer",token:l.token}}return this.cached}}class M{constructor(l){this.providers=l}static fromIntegrations(l){const y=l.azure.list().reduce((z,Oe)=>{var st;return(st=Oe.config.credentials)==null||st.forEach(Dt=>{var Qt;if(Dt.organizations===void 0||Dt.organizations.length===0)z.get(Oe.config.host)===void 0&&z.set(Oe.config.host,O.fromAzureDevOpsCredential(Dt));else{const Rn=O.fromAzureDevOpsCredential(Dt);(Qt=Dt.organizations)==null||Qt.forEach(zn=>{z.set(`${Oe.config.host}/${zn}`,Rn)})}}),Oe.config.host==="dev.azure.com"&&z.get(Oe.config.host)===void 0&&z.set(Oe.config.host,O.fromTokenCredential(new DefaultAzureCredential)),z},new Map);return new M(y)}forAzureDevOpsServerOrganization(l){const y=l.pathname.split("/").filter(z=>z!=="");if(l.host!=="dev.azure.com"&&y.length>0){if(y[0]!=="tfs")return this.providers.get(`${l.host}/${y[0]}`);if(y[0]==="tfs"&&y.length>1)return this.providers.get(`${l.host}/${y[1]}`)}}forAzureDevOpsOrganization(l){const y=l.pathname.split("/").filter(z=>z!=="");if(l.host==="dev.azure.com"&&y.length>0)return this.providers.get(`${l.host}/${y[0]}`)}forHost(l){return this.providers.get(l.host)}async getCredentials(l){var y,z;const Oe=new URL(l.url),st=(z=(y=this.forAzureDevOpsOrganization(Oe))!=null?y:this.forAzureDevOpsServerOrganization(Oe))!=null?z:this.forHost(Oe);if(st!==void 0)return st.getCredentials(l)}}async function te(h,l){var y;const z=l?{...l}:{},Oe=(y=h.credentials)==null?void 0:y.filter(st=>st.organizations===void 0||st.organizations.length===0)[0];if(Oe){const Dt=await O.fromAzureDevOpsCredential(Oe).getCredentials();return{headers:{...Dt==null?void 0:Dt.headers,...z}}}return{headers:z}}const ge="bitbucket.org",ze="https://api.bitbucket.org/2.0";function bt(h){var l;const y=(l=h.getOptionalString("host"))!=null?l:ge;let z=h.getOptionalString("apiBaseUrl");const Oe=h.getOptionalString("token"),st=h.getOptionalString("username"),Dt=h.getOptionalString("appPassword");if(!De(y))throw new Error(`Invalid Bitbucket integration config, '${y}' is not a valid host`);return z?z=(0,p.trimEnd)(z,"/"):y===ge?z=ze:z=`https://${y}/rest/api/1.0`,{host:y,apiBaseUrl:z,token:Oe,username:st,appPassword:Dt}}function Qe(h){const l=h.map(bt);return l.some(y=>y.host===ge)||l.push({host:ge,apiBaseUrl:ze}),l}var Mt=Object.defineProperty,rn=(h,l,y)=>l in h?Mt(h,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):h[l]=y,Ft=(h,l,y)=>(rn(h,typeof l!="symbol"?l+"":l,y),y);const Et=class{constructor(l){this.integrationConfig=l}get type(){return"bitbucket"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){const y=G(l);if(!l.lineNumber)return y;const z=new URL(y);return this.integrationConfig.host==="bitbucket.org"?z.hash=`lines-${l.lineNumber}`:z.hash=`${l.lineNumber}`,z.toString()}resolveEditUrl(l){const y=m()(l),z=new URL(l);return z.searchParams.set("mode","edit"),z.searchParams.set("spa","0"),z.searchParams.set("at",y.ref),z.toString()}};Ft(Et,"factory",({config:h})=>{var l,y,z;const Oe=Qe((z=h.getOptionalConfigArray("integrations.bitbucket"))!=null?z:[...(l=h.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?l:[],...(y=h.getOptionalConfigArray("integrations.bitbucketServer"))!=null?y:[]]);return ie(Oe.map(st=>new Et(st)),st=>st.config.host)});let we=Et;async function nt(h,l){const{name:y,owner:z,resource:Oe}=parseGitUrl(h),st=Oe==="bitbucket.org";let Dt=st?`${l.apiBaseUrl}/repositories/${z}/${y}`:`${l.apiBaseUrl}/projects/${z}/repos/${y}/default-branch`,Qt=await fetch(Dt,le(l));if(Qt.status===404&&!st&&(Dt=`${l.apiBaseUrl}/projects/${z}/repos/${y}/branches/default`,Qt=await fetch(Dt,le(l))),!Qt.ok){const zn=`Failed to retrieve default branch from ${Dt}, ${Qt.status} ${Qt.statusText}`;throw new Error(zn)}let Rn;if(st)Rn=(await Qt.json()).mainbranch.name;else{const{displayId:zn}=await Qt.json();Rn=zn}if(!Rn)throw new Error(`Failed to read default branch from ${Dt}. Response ${Qt.status} ${Qt.json()}`);return Rn}async function Lt(h,l){const{name:y,owner:z,ref:Oe,protocol:st,resource:Dt,filepath:Qt}=parseGitUrl(h),Rn=Dt==="bitbucket.org";let zn=Oe;zn||(zn=await nt(h,l));const Fn=Qt?`&path=${encodeURIComponent(decodeURIComponent(Qt))}`:"";return Rn?`${st}://${Dt}/${z}/${y}/get/${zn}.tar.gz`:`${l.apiBaseUrl}/projects/${z}/repos/${y}/archive?format=tgz&at=${zn}&prefix=${z}-${y}${Fn}`}function Wt(h,l){try{const{owner:y,name:z,ref:Oe,filepathtype:st,filepath:Dt}=parseGitUrl(h);if(!y||!z||st!=="browse"&&st!=="raw"&&st!=="src")throw new Error("Invalid Bitbucket URL or file path");const Qt=Dt.replace(/^\//,"");if(l.host==="bitbucket.org"){if(!Oe)throw new Error("Invalid Bitbucket URL or file path");return`${l.apiBaseUrl}/repositories/${y}/${z}/src/${Oe}/${Qt}`}return`${l.apiBaseUrl}/projects/${y}/repos/${z}/raw/${Qt}?at=${Oe}`}catch(y){throw new Error(`Incorrect URL: ${h}, ${y}`)}}function le(h){const l={};if(h.token)l.Authorization=`Bearer ${h.token}`;else if(h.username&&h.appPassword){const y=a.from(`${h.username}:${h.appPassword}`,"utf8");l.Authorization=`Basic ${y.toString("base64")}`}return{headers:l}}const $e="bitbucket.org",xt="https://api.bitbucket.org/2.0";function Yt(h){const l=$e,y=xt,z=h.getString("username"),Oe=h.getString("appPassword");return{host:l,apiBaseUrl:y,username:z,appPassword:Oe}}function se(h){const l=h.map(Yt);return l.length===0&&l.push({host:$e,apiBaseUrl:xt}),l}var ke=Object.defineProperty,pe=(h,l,y)=>l in h?ke(h,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):h[l]=y,Le=(h,l,y)=>(pe(h,typeof l!="symbol"?l+"":l,y),y);const et=class{constructor(l){this.integrationConfig=l}get type(){return"bitbucketCloud"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){const y=G(l);if(l.lineNumber){const z=new URL(y);return z.hash=`lines-${l.lineNumber}`,z.toString()}return y}resolveEditUrl(l){const y=m()(l),z=new URL(l);return z.searchParams.set("mode","edit"),z.searchParams.set("at",y.ref),z.toString()}};Le(et,"factory",({config:h})=>{var l;const y=se((l=h.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?l:[]);return ie(y.map(z=>new et(z)),z=>z.config.host)});let pt=et;async function Bt(h,l){const{name:y,owner:z}=parseGitUrl(h),Oe=`${l.apiBaseUrl}/repositories/${z}/${y}`,st=await fetch(Oe,Be(l));if(!st.ok){const Rn=`Failed to retrieve default branch from ${Oe}, ${st.status} ${st.statusText}`;throw new Error(Rn)}const Qt=(await st.json()).mainbranch.name;if(!Qt)throw new Error(`Failed to read default branch from ${Oe}. Response ${st.status} ${st.json()}`);return Qt}async function en(h,l){const{name:y,owner:z,ref:Oe,protocol:st,resource:Dt}=parseGitUrl(h);let Qt=Oe;return Qt||(Qt=await Bt(h,l)),`${st}://${Dt}/${z}/${y}/get/${Qt}.tar.gz`}function Ce(h,l){try{const{owner:y,name:z,ref:Oe,filepathtype:st,filepath:Dt}=parseGitUrl(h);if(!y||!z||st!=="src"&&st!=="raw")throw new Error("Invalid Bitbucket Cloud URL or file path");const Qt=Dt.replace(/^\//,"");if(!Oe)throw new Error("Invalid Bitbucket Cloud URL or file path");return`${l.apiBaseUrl}/repositories/${y}/${z}/src/${Oe}/${Qt}`}catch(y){throw new Error(`Incorrect URL: ${h}, ${y}`)}}function Be(h){const l={};if(h.username&&h.appPassword){const y=a.from(`${h.username}:${h.appPassword}`,"utf8");l.Authorization=`Basic ${y.toString("base64")}`}return{headers:l}}function C(h){const l=h.getString("host");let y=h.getOptionalString("apiBaseUrl");const z=h.getOptionalString("token"),Oe=h.getOptionalString("username"),st=h.getOptionalString("password");if(!De(l))throw new Error(`Invalid Bitbucket Server integration config, '${l}' is not a valid host`);return y?y=(0,p.trimEnd)(y,"/"):y=`https://${l}/rest/api/1.0`,{host:l,apiBaseUrl:y,token:z,username:Oe,password:st}}function W(h){return h.map(C)}var Q=Object.defineProperty,rt=(h,l,y)=>l in h?Q(h,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):h[l]=y,ct=(h,l,y)=>(rt(h,typeof l!="symbol"?l+"":l,y),y);const ut=class{constructor(l){this.integrationConfig=l}get type(){return"bitbucketServer"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){const y=G(l);if(l.lineNumber){const z=new URL(y);return z.hash=l.lineNumber.toString(),z.toString()}return y}resolveEditUrl(l){return l.includes("?")?l.substring(0,l.indexOf("?")):l}};ct(ut,"factory",({config:h})=>{var l;const y=W((l=h.getOptionalConfigArray("integrations.bitbucketServer"))!=null?l:[]);return ie(y.map(z=>new ut(z)),z=>z.config.host)});let tn=ut;async function mn(h,l){const{name:y,owner:z}=parseGitUrl(h);let Oe=`${l.apiBaseUrl}/projects/${z}/repos/${y}/default-branch`,st=await fetch(Oe,Gn(l));if(st.status===404&&(Oe=`${l.apiBaseUrl}/projects/${z}/repos/${y}/branches/default`,st=await fetch(Oe,Gn(l))),!st.ok){const Rn=`Failed to retrieve default branch from ${Oe}, ${st.status} ${st.statusText}`;throw new Error(Rn)}const{displayId:Dt}=await st.json(),Qt=Dt;if(!Qt)throw new Error(`Failed to read default branch from ${Oe}. Response ${st.status} ${st.json()}`);return Qt}async function Cn(h,l){const{name:y,owner:z,ref:Oe,filepath:st}=parseGitUrl(h);let Dt=Oe;Dt||(Dt=await mn(h,l));const Qt=st?`&path=${encodeURIComponent(decodeURIComponent(st))}`:"";return`${l.apiBaseUrl}/projects/${z}/repos/${y}/archive?format=tgz&at=${Dt}&prefix=${z}-${y}${Qt}`}function An(h,l){try{const{owner:y,name:z,ref:Oe,filepathtype:st,filepath:Dt}=parseGitUrl(h);if(!y||!z||st!=="browse"&&st!=="raw"&&st!=="src")throw new Error("Invalid Bitbucket Server URL or file path");const Qt=Dt.replace(/^\//,"");return`${l.apiBaseUrl}/projects/${y}/repos/${z}/raw/${Qt}?at=${Oe}`}catch(y){throw new Error(`Incorrect URL: ${h}, ${y}`)}}function Gn(h){const l={};if(h.token)l.Authorization=`Bearer ${h.token}`;else if(h.username&&h.password){const y=a.from(`${h.username}:${h.password}`,"utf8");l.Authorization=`Basic ${y.toString("base64")}`}return{headers:l}}function Mn(h){const l=h.getString("host");let y=h.getOptionalString("baseUrl"),z=h.getOptionalString("cloneUrl"),Oe=h.getOptionalString("gitilesBaseUrl");const st=h.getOptionalString("username"),Dt=h.getOptionalString("password");if(De(l)){if(y&&!Ie(y))throw new Error(`Invalid Gerrit integration config, '${y}' is not a valid baseUrl`);if(z&&!Ie(z))throw new Error(`Invalid Gerrit integration config, '${z}' is not a valid cloneUrl`);if(Oe&&!Ie(Oe))throw new Error(`Invalid Gerrit integration config, '${Oe}' is not a valid gitilesBaseUrl`)}else throw new Error(`Invalid Gerrit integration config, '${l}' is not a valid host`);return y?y=(0,p.trimEnd)(y,"/"):y=`https://${l}`,Oe?Oe=(0,p.trimEnd)(Oe,"/"):Oe=`https://${l}`,z?z=(0,p.trimEnd)(z,"/"):z=y,{host:l,baseUrl:y,cloneUrl:z,gitilesBaseUrl:Oe,username:st,password:Dt}}function Wn(h){return h.map(Mn)}const P=")]}'";function K(h,l){const y=new URL(h.gitilesBaseUrl),z=new URL(l),st=z.pathname.substring(z.pathname.startsWith("/a/")?2:0).replace(y.pathname,"").split("/").filter(Sa=>!!Sa),Dt=st.indexOf("+");if(Dt<=0)throw new Error(`Unable to parse project from url: ${l}`);const Qt=(0,p.trimStart)(st.slice(0,Dt).join("/"),"/"),Rn=st.indexOf("heads");if(Rn<=0)throw new Error(`Unable to parse branch from url: ${l}`);const zn=st[Rn+1],Fn=st.slice(Rn+2).join("/");return{branch:zn,filePath:Fn===""?"/":Fn,project:Qt}}function be(h,l,y,z){return`${h.gitilesBaseUrl}/${l}/+/refs/heads/${y}/${(0,p.trimStart)(z,"/")}`}function vt(h,l,y,z){const Oe=z==="/"||z===""?".tar.gz":`/${z}.tar.gz`;return`${Vt(h)}/${l}/+archive/refs/heads/${y}${Oe}`}function Ot(h){return h.password?"/a/":"/"}function Vt(h){if(!h.baseUrl||!h.gitilesBaseUrl)throw new Error("Unexpected Gerrit config values. baseUrl or gitilesBaseUrl not set.");if(h.gitilesBaseUrl.startsWith(h.baseUrl))return h.gitilesBaseUrl.replace(h.baseUrl.concat("/"),h.baseUrl.concat(Ot(h)));if(h.password)throw new Error("Since the baseUrl (Gerrit) is not part of the gitilesBaseUrl, an authentication URL could not be constructed.");return h.gitilesBaseUrl}function ne(h,l){const{branch:y,project:z}=K(h,l);return`${h.baseUrl}${Ot(h)}projects/${encodeURIComponent(z)}/branches/${y}`}function Pe(h,l){const{project:y}=K(h,l);return`${h.cloneUrl}${Ot(h)}${y}`}function je(h,l){const{branch:y,filePath:z,project:Oe}=K(h,l);return`${h.baseUrl}${Ot(h)}projects/${encodeURIComponent(Oe)}/branches/${y}/files/${encodeURIComponent(z)}/content`}function Jt(h){return`${h.baseUrl}${Ot(h)}projects/`}function qt(h){const l={};if(!h.password)return l;const y=a.from(`${h.username}:${h.password}`,"utf8");return l.Authorization=`Basic ${y.toString("base64")}`,{headers:l}}async function cn(h){const l=await h.text();if(l.startsWith(P))try{return JSON.parse(l.slice(P.length))}catch(y){throw new Error(`Invalid response from Gerrit: ${l.slice(0,10)} - ${y}`)}throw new Error(`Gerrit JSON body prefix missing. Found: ${l.slice(0,10)}`)}var on=Object.defineProperty,wn=(h,l,y)=>l in h?on(h,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):h[l]=y,Kn=(h,l,y)=>(wn(h,typeof l!="symbol"?l+"":l,y),y);const Yn=class{constructor(l){this.integrationConfig=l}get type(){return"gerrit"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){const{url:y,base:z,lineNumber:Oe}=l;let st;if(y.startsWith("/")){const{branch:Dt,project:Qt}=K(this.config,z);return be(this.config,Qt,Dt,y)}return y?st=new URL(y,z):st=new URL(z),Oe&&(st.hash=Oe.toString()),st.toString()}resolveEditUrl(l){return l}};Kn(Yn,"factory",({config:h})=>{var l;const y=Wn((l=h.getOptionalConfigArray("integrations.gerrit"))!=null?l:[]);return ie(y.map(z=>new Yn(z)),z=>z.config.host)});let oa=Yn;function vn(h){const l=h.getString("host");let y=h.getOptionalString("baseUrl");const z=h.getOptionalString("username"),Oe=h.getOptionalString("password");if(!De(l))throw new Error(`Invalid Gitea integration config, '${l}' is not a valid host`);return y?y=(0,p.trimEnd)(y,"/"):y=`https://${l}`,{host:l,baseUrl:y,username:z,password:Oe}}function ra(h,l){const y=qn(h,l);return`${y.url}/${y.owner}/${y.name}/_edit/${y.ref}/${y.path}`}function ia(h,l){const y=qn(h,l);return`${y.url}/api/v1/repos/${y.owner}/${y.name}/contents/${y.path}?ref=${y.ref}`}function na(h,l){const y=qn(h,l);return`${y.url}/api/v1/repos/${y.owner}/${y.name}/archive/${y.ref}.tar.gz`}function da(h,l){const y=qn(h,l);return`${y.url}/api/v1/repos/${y.owner}/${y.name}/git/commits/${y.ref}`}function _a(h){const l={},{username:y,password:z}=h;return z?(y?l.Authorization=`basic ${a.from(`${y}:${z}`).toString("base64")}`:l.Authorization=`token ${z}`,{headers:l}):l}function qn(h,l){var y;const z=(y=h.baseUrl)!=null?y:`https://${h.host}`;try{const[Oe,st,Dt,Qt,Rn,zn,...Fn]=l.replace(z,"").split("/"),Sa=Fn.join("/").replace(/^\//,"");return{url:z,owner:st,name:Dt,ref:zn,path:Sa}}catch(Oe){throw new Error(`Incorrect URL: ${l}, ${Oe}`)}}var Ea=Object.defineProperty,Z=(h,l,y)=>l in h?Ea(h,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):h[l]=y,Ue=(h,l,y)=>(Z(h,typeof l!="symbol"?l+"":l,y),y);const tt=class{constructor(l){this.config=l}get type(){return"gitea"}get title(){return this.config.host}resolveUrl(l){return G(l)}resolveEditUrl(l){return ra(this.config,l)}};Ue(tt,"factory",({config:h})=>{var l;const z=((l=h.getOptionalConfigArray("integrations.gitea"))!=null?l:[]).map(Oe=>vn(Oe));return ie(z.map(Oe=>new tt(Oe)),Oe=>Oe.config.host)});let ht=tt;const Se="github.com",Y="https://api.github.com",Ee="https://raw.githubusercontent.com";function ue(h){var l,y;const z=(l=h.getOptionalString("host"))!=null?l:Se;let Oe=h.getOptionalString("apiBaseUrl"),st=h.getOptionalString("rawBaseUrl");const Dt=h.getOptionalString("token"),Qt=(y=h.getOptionalConfigArray("apps"))==null?void 0:y.map(Rn=>({appId:Rn.getNumber("appId"),clientId:Rn.getString("clientId"),clientSecret:Rn.getString("clientSecret"),webhookSecret:Rn.getString("webhookSecret"),privateKey:Rn.getString("privateKey"),allowedInstallationOwners:Rn.getOptionalStringArray("allowedInstallationOwners")}));if(!De(z))throw new Error(`Invalid GitHub integration config, '${z}' is not a valid host`);return Oe?Oe=(0,p.trimEnd)(Oe,"/"):z===Se&&(Oe=Y),st?st=(0,p.trimEnd)(st,"/"):z===Se&&(st=Ee),{host:z,apiBaseUrl:Oe,rawBaseUrl:st,token:Dt,apps:Qt}}function at(h){const l=h.map(ue);return l.some(y=>y.host===Se)||l.push({host:Se,apiBaseUrl:Y,rawBaseUrl:Ee}),l}function N(h,l,y){try{const{owner:z,name:Oe,ref:st,filepathtype:Dt,filepath:Qt}=parseGitUrl(h);if(!z||!Oe||!st||Dt!=="blob"&&Dt!=="raw"&&Dt!=="tree")throw new Error("Invalid GitHub URL or file path");const Rn=Qt.replace(/^\//,"");return q(l,y)==="api"?`${l.apiBaseUrl}/repos/${z}/${Oe}/contents/${Rn}?ref=${st}`:`${l.rawBaseUrl}/${z}/${Oe}/${st}/${Rn}`}catch(z){throw new Error(`Incorrect URL: ${h}, ${z}`)}}function H(h,l){const y={};return q(h,l)==="api"&&(y.Accept="application/vnd.github.v3.raw"),l.token&&(y.Authorization=`token ${l.token}`),{headers:y}}function q(h,l){return h.apiBaseUrl&&(l.token||!h.rawBaseUrl)?"api":"raw"}var ae=Object.defineProperty,We=(h,l,y)=>l in h?ae(h,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):h[l]=y,Je=(h,l,y)=>(We(h,typeof l!="symbol"?l+"":l,y),y);class Fe{constructor(){Je(this,"tokenCache",new Map),Je(this,"isExpired",l=>Ke.c9.local()>l)}async getOrCreateToken(l,y,z){let Oe=this.tokenCache.get(l);if((!Oe||this.isExpired(Oe.expiresAt))&&(Oe=await z(),Oe.expiresAt=Oe.expiresAt.minus({minutes:10}),this.tokenCache.set(l,Oe)),!this.appliesToRepo(Oe,y))throw new Error(`The Backstage GitHub application used in the ${l} organization does not have access to a repository with the name ${y}`);return{accessToken:Oe.token}}appliesToRepo(l,y){return y===void 0?!0:l.repositories!==void 0?l.repositories.includes(y):!0}}const gt={Accept:"application/vnd.github.machine-man-preview+json"};class Pt{constructor(l,y){Je(this,"appClient"),Je(this,"baseUrl"),Je(this,"baseAuthConfig"),Je(this,"cache",new Fe),Je(this,"allowedInstallationOwners"),this.allowedInstallationOwners=l.allowedInstallationOwners,this.baseUrl=y,this.baseAuthConfig={appId:l.appId,privateKey:l.privateKey.replace(/\\n/gm,`
`)},this.appClient=new Ze.E({baseUrl:y,headers:gt,authStrategy:k.K,auth:this.baseAuthConfig})}async getInstallationCredentials(l,y){var z;return this.allowedInstallationOwners&&!((z=this.allowedInstallationOwners)!=null&&z.includes(l))?{accessToken:void 0}:this.cache.getOrCreateToken(l,y,async()=>{var Oe;const{installationId:st,suspended:Dt}=await this.getInstallationData(l);if(Dt)throw new Error(`The GitHub application for ${l} is suspended`);const Qt=await this.appClient.apps.createInstallationAccessToken({installation_id:st,headers:gt});let Rn;if(Qt.data.repository_selection==="selected"){const zn=new Ze.E({baseUrl:this.baseUrl,auth:Qt.data.token}),Fn=await zn.paginate(zn.apps.listReposAccessibleToInstallation);Rn=((Oe=Fn.repositories)!=null?Oe:Fn).map(Ha=>Ha.name)}return{token:Qt.data.token,expiresAt:Ke.c9.fromISO(Qt.data.expires_at),repositories:Rn}})}getInstallations(){return this.appClient.paginate(this.appClient.apps.listInstallations)}async getInstallationData(l){const z=(await this.getInstallations()).find(st=>{var Dt;return st.account&&"login"in st.account&&((Dt=st.account.login)==null?void 0:Dt.toLocaleLowerCase("en-US"))===l.toLocaleLowerCase("en-US")});if(z)return{installationId:z.id,suspended:Boolean(z.suspended_by)};const Oe=new Error(`No app installation found for ${l} in ${this.baseAuthConfig.appId}`);throw Oe.name="NotFoundError",Oe}}class dn{constructor(l){Je(this,"apps");var y,z;this.apps=(z=(y=l.apps)==null?void 0:y.map(Oe=>new Pt(Oe,l.apiBaseUrl)))!=null?z:[]}async getAllInstallations(){return this.apps.length?(await Promise.all(this.apps.map(y=>y.getInstallations()))).flat():[]}async getAppToken(l,y){if(this.apps.length===0)return;const z=await Promise.all(this.apps.map(Qt=>Qt.getInstallationCredentials(l,y).then(Rn=>({credentials:Rn,error:void 0}),Rn=>({credentials:void 0,error:Rn})))),Oe=z.find(Qt=>{var Rn;return(Rn=Qt.credentials)==null?void 0:Rn.accessToken});if(Oe)return Oe.credentials.accessToken;const Dt=z.map(Qt=>Qt.error).find(Qt=>(Qt==null?void 0:Qt.name)!=="NotFoundError");if(Dt)throw Dt}}const wt=class{constructor(l,y){this.githubAppCredentialsMux=l,this.token=y}async getCredentials(l){const y=m()(l.url),z=y.owner||y.name,Oe=y.owner?y.name:void 0;let st="app",Dt=await this.githubAppCredentialsMux.getAppToken(z,Oe);return Dt||(st="token",Dt=this.token),{headers:Dt?{Authorization:`Bearer ${Dt}`}:void 0,token:Dt,type:st}}};Je(wt,"create",h=>new wt(new dn(h),h.token));let un=null;class gn{constructor(l){this.providers=l}static fromIntegrations(l){const y=new Map;return l.github.list().forEach(z=>{const Oe=un.create(z.config);y.set(z.config.host,Oe)}),new gn(y)}async getCredentials(l){const y=new URL(l.url),z=this.providers.get(y.host);if(!z)throw new Error(`There is no GitHub integration that matches ${l.url}. Please add a configuration for an integration.`);return z.getCredentials(l)}}var En=Object.defineProperty,Nn=(h,l,y)=>l in h?En(h,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):h[l]=y,On=(h,l,y)=>(Nn(h,typeof l!="symbol"?l+"":l,y),y);const Ln=class{constructor(l){this.integrationConfig=l}get type(){return"github"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){return In(G(l),"tree")}resolveEditUrl(l){return In(l,"edit")}};On(Ln,"factory",({config:h})=>{var l;const y=at((l=h.getOptionalConfigArray("integrations.github"))!=null?l:[]);return ie(y.map(z=>new Ln(z)),z=>z.config.host)});let Sn=Ln;function In(h,l){return h.replace(/\/\/([^/]+)\/([^/]+)\/([^/]+)\/(blob|tree|edit)\//,(y,z,Oe,st)=>`//${z}/${Oe}/${st}/${l}/`)}var pn=Object.defineProperty,yn=(h,l,y)=>l in h?pn(h,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):h[l]=y,aa=(h,l,y)=>(yn(h,typeof l!="symbol"?l+"":l,y),y);const sa=null;class ba extends Sn{constructor(l){super(l)}get config(){return super.config}}aa(ba,"factory",Sn.factory);const Ca=null,Na=null,Fa=null,La="gitlab.com",Pa="https://gitlab.com/api/v4";function za(h){const l=h.getString("host");let y=h.getOptionalString("apiBaseUrl");const z=h.getOptionalString("token");let Oe=h.getOptionalString("baseUrl");if(y?y=(0,p.trimEnd)(y,"/"):l===La&&(y=Pa),Oe?Oe=(0,p.trimEnd)(Oe,"/"):Oe=`https://${l}`,De(l)){if(!y||!Ie(y))throw new Error(`Invalid GitLab integration config, '${y}' is not a valid apiBaseUrl`);if(!Ie(Oe))throw new Error(`Invalid GitLab integration config, '${Oe}' is not a valid baseUrl`)}else throw new Error(`Invalid GitLab integration config, '${l}' is not a valid host`);return{host:l,token:z,apiBaseUrl:y,baseUrl:Oe}}function Ya(h){const l=h.map(za);return l.some(y=>y.host===La)||l.push({host:La,apiBaseUrl:Pa,baseUrl:`https://${La}`}),l}function Ja(h){let l="";return h.host!==La&&(l=new URL(h.baseUrl).pathname),trimEnd(l,"/")}async function lr(h,l){const y=await ja(h,l);return wa(h,y,l).toString()}function Qa(h){const{token:l=""}=h;return{headers:{"PRIVATE-TOKEN":l}}}function wa(h,l,y){try{const z=new URL(h),Oe=z.pathname.split("/blob/").slice(1).join("/blob/"),[st,...Dt]=Oe.split("/"),Qt=Ja(y);return z.pathname=[...Qt?[Qt]:[],"api/v4/projects",l,"repository/files",encodeURIComponent(decodeURIComponent(Dt.join("/"))),"raw"].join("/"),z.search=`?ref=${st}`,z}catch(z){throw new Error(`Incorrect url: ${h}, ${z}`)}}async function ja(h,l){const y=new URL(h);if(!y.pathname.includes("/blob/"))throw new Error("Please provide full path to yaml file from GitLab");try{let z=y.pathname.split("/-/blob/")[0].split("/blob/")[0];const Oe=Ja(l);Oe&&(z=z.replace(Oe,""));const st=new URL(`${y.origin}${Oe}/api/v4/projects/${encodeURIComponent(z.replace(/^\//,""))}`),Dt=await fetch(st.toString(),Qa(l)),Qt=await Dt.json();if(!Dt.ok)throw new Error(`GitLab Error '${Qt.error}', ${Qt.error_description}`);return Number(Qt.id)}catch(z){throw new Error(`Could not get GitLab project ID for: ${h}, ${z}`)}}var Ga=Object.defineProperty,yr=(h,l,y)=>l in h?Ga(h,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):h[l]=y,Ua=(h,l,y)=>(yr(h,typeof l!="symbol"?l+"":l,y),y);const Xa=class{constructor(l){this.integrationConfig=l}get type(){return"gitlab"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){return G(l)}resolveEditUrl(l){return X(l,"edit")}};Ua(Xa,"factory",({config:h})=>{var l;const y=Ya((l=h.getOptionalConfigArray("integrations.gitlab"))!=null?l:[]);return ie(y.map(z=>new Xa(z)),z=>z.config.host)});let Ge=Xa;function X(h,l){return h.replace(/\/\-\/(blob|tree|edit)\//,`/-/${l}/`)}var it=Object.defineProperty,_n=(h,l,y)=>l in h?it(h,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):h[l]=y,xn=(h,l,y)=>(_n(h,typeof l!="symbol"?l+"":l,y),y);const ea=class{constructor(l){this.token=l}async getCredentials(l){return this.token?{headers:{Authorization:`Bearer ${this.token}`},token:this.token}:{}}};xn(ea,"create",h=>new ea(h.token));let ha=null;class $a{constructor(l){this.providers=l}static fromIntegrations(l){const y=new Map;return l.gitlab.list().forEach(z=>{const Oe=ha.create(z.config);y.set(z.config.host,Oe)}),new $a(y)}async getCredentials(l){const y=new URL(l.url),z=this.providers.get(y.host);if(!z)throw new Error(`There is no GitLab integration that matches ${l.url}. Please add a configuration for an integration.`);return z.getCredentials(l)}}function Ka(h){if(!h)return{};if(!h.has("clientEmail")&&!h.has("privateKey"))return{};const l=h.getString("privateKey").split("\\n").join(`
`);return{clientEmail:h.getString("clientEmail"),privateKey:l}}var va=Object.defineProperty,xa=(h,l,y)=>l in h?va(h,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):h[l]=y,Da=(h,l,y)=>(xa(h,typeof l!="symbol"?l+"":l,y),y);class er{constructor(l){Da(this,"byType"),this.byType=l}static fromConfig(l){return new er({awsS3:R.factory({config:l}),azure:lt.factory({config:l}),bitbucket:we.factory({config:l}),bitbucketCloud:pt.factory({config:l}),bitbucketServer:tn.factory({config:l}),gerrit:oa.factory({config:l}),github:Sn.factory({config:l}),gitlab:Ge.factory({config:l}),gitea:ht.factory({config:l})})}get awsS3(){return this.byType.awsS3}get azure(){return this.byType.azure}get bitbucket(){return this.byType.bitbucket}get bitbucketCloud(){return this.byType.bitbucketCloud}get bitbucketServer(){return this.byType.bitbucketServer}get gerrit(){return this.byType.gerrit}get github(){return this.byType.github}get gitlab(){return this.byType.gitlab}get gitea(){return this.byType.gitea}list(){return Object.values(this.byType).flatMap(l=>l.list())}byUrl(l){let y=Object.values(this.byType).map(z=>z.byUrl(l)).filter(Boolean);if(y.length>1){const z=y.filter(Oe=>!(Oe instanceof we));z.length!==0&&(y=z)}return y[0]}byHost(l){return Object.values(this.byType).map(y=>y.byHost(l)).find(Boolean)}resolveUrl(l){const y=this.byUrl(l.base);return y?y.resolveUrl(l):G(l)}resolveEditUrl(l){const y=this.byUrl(l);return y?y.resolveEditUrl(l):l}}},20440:($n,Zt,e)=>{"use strict";e.d(Zt,{Br:()=>Qe,Cq:()=>Ct,In:()=>Rt,Io:()=>Ft,Iq:()=>J,Nm:()=>O,OM:()=>M,Rf:()=>ze,Vw:()=>bt,aR:()=>rn,hR:()=>ge,l:()=>Et,nS:()=>te,ni:()=>v,o9:()=>U,pW:()=>Mt,t7:()=>ot,yy:()=>jt});var o=e(14041),m=e(18690),p=e(23180),j=e(11638),B=e(7877),i=e(76025),k=e(92651),Ze=e(58054),Ke=e(17899),a=e(99993),De=e(74219),Ie=e(15485),ie=e(54917),G=e(72501),Ve=e(58837),he=e(77125),_e=e(76891),re=e(61477),Re=e(46805),I=e(31653),c=e(38605),R=e(93453),A=e(64947),_=e(29835),F=e(17400);const Ae=(0,j.HM)({id:"api-docs"}),fe=(0,j.Il)({id:"register-component",optional:!0}),ve=[i.C.columns.createTitleColumn({hidden:!0}),i.C.columns.createNameColumn({defaultKind:"API"}),i.C.columns.createSystemColumn(),i.C.columns.createOwnerColumn(),i.C.columns.createSpecTypeColumn(),i.C.columns.createSpecLifecycleColumn(),i.C.columns.createMetadataDescriptionColumn(),i.C.columns.createTagsColumn()],J=we=>{var nt;const{initiallySelectedFilter:Lt="all",columns:Wt,actions:le}=we,xt=`${(nt=(0,B.u)(B.p).getOptionalString("organization.name"))!=null?nt:"Backstage"} API Explorer`,Yt=(0,j.Sf)(fe),{allowed:se}=(0,Ke.JT)({permission:a.C4});return o.createElement(p.dT,{themeId:"apis",title:"APIs",subtitle:xt,pageTitleOverride:"APIs"},o.createElement(p.UC,null,o.createElement(p.dv,{title:""},se&&o.createElement(p.ly,{title:"Register Existing API",to:Yt==null?void 0:Yt()}),o.createElement(p.Yl,null,"All your APIs")),o.createElement(k.B9,null,o.createElement(k.GI,null,o.createElement(k.GI.Filters,null,o.createElement(k.mb,{initialFilter:"api",hidden:!0}),o.createElement(k.QD,null),o.createElement(k.y2,{initialFilter:Lt}),o.createElement(k.t3,null),o.createElement(k.WI,null),o.createElement(k.mo,null)),o.createElement(k.GI.Content,null,o.createElement(i.C,{columns:Wt||ve,actions:le}))))))},v=we=>(0,m.P1)()||o.createElement(J,{...we}),ee=(0,B.c)({id:"plugin.api-docs.config"}),oe=we=>o.createElement(p.z7,{text:we.definition,language:we.language,showCopyCodeButton:!0}),Rt=()=>{var we;const{entity:nt}=(0,Ze.u)(),Lt=(0,B.u)(ee),{getApiDefinitionWidget:Wt}=Lt;if(!nt)return o.createElement(De.A,{severity:"error"},"Could not fetch the API");const le=Wt(nt),$e=(we=nt.metadata.title)!=null?we:nt.metadata.name;return le?o.createElement(p.xO,{title:$e},o.createElement(p.cy,{label:le.title,key:"widget"},le.component(nt.spec.definition)),o.createElement(p.cy,{label:"Raw",key:"raw"},o.createElement(oe,{definition:nt.spec.definition,language:le.rawLanguage||nt.spec.type}))):o.createElement(p.xO,{title:$e,children:[o.createElement(p.cy,{label:nt.spec.type,key:"raw"},o.createElement(oe,{definition:nt.spec.definition,language:nt.spec.type}))]})},w=o.lazy(()=>Promise.all([e.e(1072),e.e(2216),e.e(2589),e.e(9661)]).then(e.bind(e,99661)).then(we=>({default:we.AsyncApiDefinition}))),sn=we=>o.createElement(o.Suspense,{fallback:o.createElement(p.ke,null)},o.createElement(w,{...we})),me=o.lazy(()=>e.e(7808).then(e.bind(e,17808)).then(we=>({default:we.GraphQlDefinition}))),kt=we=>o.createElement(o.Suspense,{fallback:o.createElement(p.ke,null)},o.createElement(me,{...we})),yt=o.lazy(()=>Promise.all([e.e(1072),e.e(2216),e.e(3992)]).then(e.bind(e,3992)).then(we=>({default:we.OpenApiDefinition}))),mt=we=>o.createElement(o.Suspense,{fallback:o.createElement(p.ke,null)},o.createElement(yt,{...we})),It=we=>{const nt=(0,ie.A)();return o.createElement(p.z7,{customStyle:{backgroundColor:nt.palette.background.default},text:we.definition,language:"protobuf",showCopyCodeButton:!0})},Ne=we=>{const{definition:nt}=we,Lt=(0,ie.A)();return o.createElement(p.z7,{customStyle:{backgroundColor:Lt.palette.background.default},text:nt,language:"typescript",showCopyCodeButton:!0})};function Ct(){return[{type:"openapi",title:"OpenAPI",rawLanguage:"yaml",component:we=>o.createElement(mt,{definition:we})},{type:"asyncapi",title:"AsyncAPI",rawLanguage:"yaml",component:we=>o.createElement(sn,{definition:we})},{type:"graphql",title:"GraphQL",rawLanguage:"graphql",component:we=>o.createElement(kt,{definition:we})},{type:"grpc",title:"gRPC",component:we=>o.createElement(It,{definition:we})},{type:"trpc",title:"tRPC",component:we=>o.createElement(Ne,{definition:we})}]}const ot=we=>{const{apiEntity:nt}=we,Wt=(0,B.u)(ee).getApiDefinitionWidget(nt),le=Wt?Wt.title:nt.spec.type;return o.createElement(G.A,{component:"span"},le)},zt=(0,Ve.A)(we=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",height:"100%"},tabs:{borderRight:`1px solid ${we.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"},title:{color:we.palette.text.primary,wordBreak:"break-word",fontSize:we.typography.h3.fontSize,marginBottom:0},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:we.spacing(1),color:we.palette.text.primary}}));function Tt(we){const{children:nt,value:Lt,index:Wt,...le}=we,$e=zt();return o.createElement("div",{role:"tabpanel",hidden:Lt!==Wt,id:`vertical-tabpanel-${Wt}`,"aria-labelledby":`vertical-tab-${Wt}`,className:$e.tabContents,...le},Lt===Wt&&o.createElement(he.A,{pl:3,pr:3},nt))}function Kt(we){return{id:`vertical-tab-${we}`,"aria-controls":`vertical-tabpanel-${we}`}}function lt(we){var nt,Lt,Wt;const{open:le,entity:$e,onClose:xt}=we,[Yt,se]=o.useState(0),ke=zt();(0,o.useEffect)(()=>{se(0)},[le]);const Le=(0,B.u)(ee).getApiDefinitionWidget($e);let et=0,pt=0;return o.createElement(_e.A,{fullWidth:!0,maxWidth:"xl",open:le,onClose:xt,"aria-labelledby":"api-definition-dialog-title",PaperProps:{className:ke.fullHeightDialog}},o.createElement(re.A,{id:"api-definition-dialog-title",disableTypography:!0},o.createElement(G.A,{className:ke.type},"API - ",(nt=Le==null?void 0:Le.title)!=null?nt:"Raw"),o.createElement(G.A,{className:ke.title,variant:"h1"},(Lt=$e.metadata.title)!=null?Lt:$e.metadata.name)),o.createElement(Re.A,{dividers:!0,className:ke.root},o.createElement(I.A,{orientation:"vertical",variant:"scrollable",value:Yt,onChange:(Bt,en)=>se(en),"aria-label":"API definition options",className:ke.tabs},Le?o.createElement(c.A,{label:Le.title,...Kt(et++)}):null,o.createElement(c.A,{label:"Raw",...Kt(et++)})),Le?o.createElement(Tt,{value:Yt,index:pt++},Le.component($e.spec.definition)):null,o.createElement(Tt,{value:Yt,index:pt++},o.createElement(oe,{definition:$e.spec.definition,language:(Wt=Le==null?void 0:Le.rawLanguage)!=null?Wt:$e.spec.type}))),o.createElement(R.A,null,o.createElement(A.A,{onClick:xt,color:"primary"},"Close")))}function ft(){return{title:"Type",field:"spec.type",render:we=>o.createElement(ot,{apiEntity:we})}}const $t=({apiEntity:we})=>{const[nt,Lt]=(0,o.useState)(!1);return o.createElement(o.Fragment,null,o.createElement(Ie.A,{"aria-label":"Toggle API Definition Dialog",onClick:()=>Lt(!nt)},o.createElement(F.A,null)),o.createElement(lt,{entity:we,open:nt,onClose:()=>Lt(!1)}))};function an(){return{title:"API Definition",render:we=>o.createElement($t,{apiEntity:we})}}const St=[k.s8.columns.createEntityRefColumn({defaultKind:"API"}),k.s8.columns.createSystemColumn(),k.s8.columns.createOwnerColumn(),ft(),k.s8.columns.createSpecLifecycleColumn(),k.s8.columns.createMetadataDescriptionColumn(),an()],jt=we=>{const{variant:nt="gridItem",columns:Lt=St}=we,{entity:Wt}=(0,Ze.u)(),{entities:le,loading:$e,error:xt}=(0,k.EH)(Wt,{type:_.Ey});return $e?o.createElement(p.nO,{variant:nt,title:"Consumed APIs"},o.createElement(p.ke,null)):xt||!le?o.createElement(p.nO,{variant:nt,title:"Consumed APIs"},o.createElement(p.Bp,{severity:"error",title:"Could not load APIs",message:o.createElement(p.z7,{text:`${xt}`,language:"text"})})):o.createElement(k.s8,{title:"Consumed APIs",variant:nt,emptyContent:o.createElement("div",{style:{textAlign:"center"}},o.createElement(G.A,{variant:"body1"},"This ",Wt.kind.toLocaleLowerCase("en-US")," does not consume any APIs."),o.createElement(G.A,{variant:"body2"},o.createElement(p.N_,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:Lt,entities:le})},D=[k.s8.columns.createEntityRefColumn({defaultKind:"API"}),k.s8.columns.createOwnerColumn(),ft(),k.s8.columns.createSpecLifecycleColumn(),k.s8.columns.createMetadataDescriptionColumn()],U=we=>{const{variant:nt="gridItem",columns:Lt=D}=we,{entity:Wt}=(0,Ze.u)(),{entities:le,loading:$e,error:xt}=(0,k.EH)(Wt,{type:_.sA,kind:"API"});return $e?o.createElement(p.nO,{variant:nt,title:"APIs"},o.createElement(p.ke,null)):xt||!le?o.createElement(p.nO,{variant:nt,title:"APIs"},o.createElement(p.Bp,{severity:"error",title:"Could not load APIs",message:o.createElement(p.z7,{text:`${xt}`,language:"text"})})):o.createElement(k.s8,{title:"APIs",variant:nt,emptyContent:o.createElement("div",{style:{textAlign:"center"}},o.createElement(G.A,{variant:"body1"},"This ",Wt.kind.toLocaleLowerCase("en-US")," does not contain any APIs."),o.createElement(G.A,{variant:"body2"},o.createElement(p.N_,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#kind-api"},"Learn how to change this."))),columns:Lt,entities:le})},O=we=>{const{variant:nt="gridItem",columns:Lt=St}=we,{entity:Wt}=(0,Ze.u)(),{entities:le,loading:$e,error:xt}=(0,k.EH)(Wt,{type:_.ZD});return $e?o.createElement(p.nO,{variant:nt,title:"Provided APIs"},o.createElement(p.ke,null)):xt||!le?o.createElement(p.nO,{variant:nt,title:"Provided APIs"},o.createElement(p.Bp,{severity:"error",title:"Could not load APIs",message:o.createElement(p.z7,{text:`${xt}`,language:"text"})})):o.createElement(k.s8,{title:"Provided APIs",variant:nt,emptyContent:o.createElement("div",{style:{textAlign:"center"}},o.createElement(G.A,{variant:"body1"},"This ",Wt.kind.toLocaleLowerCase("en-US")," does not provide any APIs."),o.createElement(G.A,{variant:"body2"},o.createElement(p.N_,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:Lt,entities:le})},M=we=>{const{variant:nt="gridItem"}=we,{entity:Lt}=(0,Ze.u)(),{entities:Wt,loading:le,error:$e}=(0,k.EH)(Lt,{type:_.fO});return le?o.createElement(p.nO,{variant:nt,title:"Consumers"},o.createElement(p.ke,null)):$e||!Wt?o.createElement(p.nO,{variant:nt,title:"Consumers"},o.createElement(p.Bp,{severity:"error",title:"Could not load components",message:o.createElement(p.z7,{text:`${$e}`,language:"text"})})):o.createElement(k.s8,{title:"Consumers",variant:nt,emptyContent:o.createElement("div",{style:{textAlign:"center"}},o.createElement(G.A,{variant:"body1"},"No component consumes this API."),o.createElement(G.A,{variant:"body2"},o.createElement(p.N_,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:k.s8.componentEntityColumns,entities:Wt})},te=we=>{const{variant:nt="gridItem"}=we,{entity:Lt}=(0,Ze.u)(),{entities:Wt,loading:le,error:$e}=(0,k.EH)(Lt,{type:_.IB});return le?o.createElement(p.nO,{variant:nt,title:"Providers"},o.createElement(p.ke,null)):$e||!Wt?o.createElement(p.nO,{variant:nt,title:"Providers"},o.createElement(p.Bp,{severity:"error",title:"Could not load components",message:o.createElement(p.z7,{text:`${$e}`,language:"text"})})):o.createElement(k.s8,{title:"Providers",variant:nt,emptyContent:o.createElement("div",{style:{textAlign:"center"}},o.createElement(G.A,{variant:"body1"},"No component provides this API."),o.createElement(G.A,{variant:"body2"},o.createElement(p.N_,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:k.s8.componentEntityColumns,entities:Wt})},ge=(0,j.i1)({id:"api-docs",routes:{root:Ae},apis:[(0,j.bW)({api:ee,deps:{},factory:()=>{const we=Ct();return{getApiDefinitionWidget:nt=>we.find(Lt=>Lt.type===nt.spec.type)}}})],externalRoutes:{registerApi:fe}}),ze=ge.provide((0,j.QJ)({name:"ApiExplorerPage",component:()=>e.e(6416).then(e.bind(e,96416)).then(we=>we.ApiExplorerIndexPage),mountPoint:Ae})),bt=ge.provide((0,j.NC)({name:"EntityApiDefinitionCard",component:{lazy:()=>e.e(4290).then(e.bind(e,24290)).then(we=>we.ApiDefinitionCard)}})),Qe=ge.provide((0,j.NC)({name:"EntityConsumedApisCard",component:{lazy:()=>e.e(7066).then(e.bind(e,67066)).then(we=>we.ConsumedApisCard)}})),Mt=ge.provide((0,j.NC)({name:"EntityConsumingComponentsCard",component:{lazy:()=>e.e(1388).then(e.bind(e,1388)).then(we=>we.ConsumingComponentsCard)}})),rn=ge.provide((0,j.NC)({name:"EntityProvidedApisCard",component:{lazy:()=>e.e(7066).then(e.bind(e,67066)).then(we=>we.ProvidedApisCard)}})),Ft=ge.provide((0,j.NC)({name:"EntityProvidingComponentsCard",component:{lazy:()=>e.e(1388).then(e.bind(e,1388)).then(we=>we.ProvidingComponentsCard)}})),Et=ge.provide((0,j.NC)({name:"EntityHasApisCard",component:{lazy:()=>e.e(7066).then(e.bind(e,67066)).then(we=>we.HasApisCard)}}))},99993:($n,Zt,e)=>{"use strict";e.d(Zt,{C4:()=>j,Nf:()=>B,tS:()=>i});var o=e(50585);const m="catalog-entity",p=(0,o.iP)({name:"catalog.entity.read",attributes:{action:"read"},resourceType:m}),j=(0,o.iP)({name:"catalog.entity.create",attributes:{action:"create"}}),B=(0,o.iP)({name:"catalog.entity.delete",attributes:{action:"delete"},resourceType:m}),i=(0,o.iP)({name:"catalog.entity.refresh",attributes:{action:"update"},resourceType:m}),k=(0,o.iP)({name:"catalog.location.read",attributes:{action:"read"}}),Ze=(0,o.iP)({name:"catalog.location.create",attributes:{action:"create"}}),Ke=(0,o.iP)({name:"catalog.location.delete",attributes:{action:"delete"}}),a=[p,j,B,i,k,Ze,Ke]},18638:($n,Zt,e)=>{"use strict";e.d(Zt,{Lz:()=>v,N9:()=>sn,NW:()=>w,OP:()=>_,bg:()=>A,c:()=>ee});var o=e(29835),m=e(23180),p=e(11638),j=e(7877),B=e(58837),i=e(54917),k=e(78467),Ze=e(53373),Ke=e.n(Ze),a=e(14041),De=e(22249),Ie=e(92651),ie=e(48972),G=e(16983),Ve=e(50308),he=e.n(Ve),_e=e(5030);const re=(0,De.A)(me=>({text:{fill:me.palette.textContrast},secondary:{fill:me.palette.textSubtle}}),{name:"PluginCatalogGraphCustomLabel"});function Re({edge:{relations:me}}){const kt=re();return a.createElement("text",{className:kt.text,textAnchor:"middle"},me.map((yt,mt)=>a.createElement("tspan",{key:yt,className:Ke()(mt>0&&kt.secondary)},mt>0&&a.createElement("tspan",null," / "),yt)))}function I({kind:me,...kt}){var yt;const It=(yt=(0,p.nm)().getSystemIcon(`kind:${me.toLocaleLowerCase("en-US")}`))!=null?yt:ie.A;return a.createElement(It,{...kt})}const c=(0,B.A)(me=>({node:{fill:me.palette.grey[300],stroke:me.palette.grey[300],"&.primary":{fill:me.palette.primary.light,stroke:me.palette.primary.light},"&.secondary":{fill:me.palette.secondary.light,stroke:me.palette.secondary.light}},text:{fill:me.palette.getContrastText(me.palette.grey[300]),"&.primary":{fill:me.palette.primary.contrastText},"&.secondary":{fill:me.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}),{name:"PluginCatalogGraphCustomNode"});function R({node:{id:me,entity:kt,color:yt="default",focused:mt,onClick:It}}){const Ne=c(),[Ct,ot]=(0,a.useState)(0),[zt,Tt]=(0,a.useState)(0),Kt=(0,a.useRef)(null);(0,a.useLayoutEffect)(()=>{if(Kt.current){let{height:te,width:ge}=Kt.current.getBBox();te=Math.round(te),ge=Math.round(ge),(te!==zt||ge!==Ct)&&(ot(ge),Tt(te))}},[Ct,zt]);const{kind:lt,metadata:{name:ft,namespace:$t=o.oQ,title:an}}=kt,St=10,jt=zt,D=lt?jt+St:0,U=D+Ct+St*2,O=zt+St*2,M=an!=null?an:lt&&ft&&$t?(0,Ie.SE)({kind:lt,name:ft,namespace:$t}):me;return a.createElement("g",{onClick:It,className:Ke()(It&&Ne.clickable)},a.createElement("rect",{className:Ke()(Ne.node,yt==="primary"&&"primary",yt==="secondary"&&"secondary"),width:U,height:O,rx:10}),lt&&a.createElement(I,{kind:lt,y:St,x:St,width:jt,height:jt,className:Ke()(Ne.text,mt&&"focused",yt==="primary"&&"primary",yt==="secondary"&&"secondary")}),a.createElement("text",{ref:Kt,className:Ke()(Ne.text,mt&&"focused",yt==="primary"&&"primary",yt==="secondary"&&"secondary"),y:O/2,x:D+(Ct+St*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},M))}const A=[[o.L8,o.vv],[o.Ey,o.fO],[o.IB,o.ZD],[o.sA,o.jn],[o.Kx,o.Qz],[o.zj,o.u0],[o.nC,o.fT]];var _=(me=>(me.TOP_BOTTOM="TB",me.BOTTOM_TOP="BT",me.LEFT_RIGHT="LR",me.RIGHT_LEFT="RL",me))(_||{});const F=he()(10);function Ae(){const me=(0,j.u)(Ie.vp),kt=(0,a.useRef)({requestedEntities:new Set,outstandingEntities:new Map,cachedEntities:new Map}),[yt,mt]=(0,a.useState)({}),It=(0,a.useCallback)(()=>{const{cachedEntities:Kt,requestedEntities:lt}=kt.current,ft={};lt.forEach($t=>{const an=Kt.get($t);an&&(ft[$t]=an)}),mt(ft)},[kt,mt]),[Ne,Ct]=(0,_e.default)(async()=>{const{requestedEntities:Kt,outstandingEntities:lt,cachedEntities:ft}=kt.current;await Promise.all(Array.from(Kt).map($t=>F(async()=>{if(ft.has($t))return;if(lt.has($t)){await lt.get($t);return}const an=me.getEntityByRef($t);lt.set($t,an);try{const St=await an;St&&(ft.set($t,St),It())}finally{lt.delete($t)}})))},[kt,It]),{loading:ot,error:zt}=Ne,Tt=(0,a.useCallback)(Kt=>{const lt=new Set(Kt),{requestedEntities:ft}=kt.current;(lt.size!==ft.size||Array.from(lt).some($t=>!ft.has($t)))&&(kt.current.requestedEntities=lt,Ct(),It())},[kt,Ct,It]);return{entities:yt,loading:ot,error:zt,requestEntities:Tt}}function fe({rootEntityRefs:me,filter:{maxDepth:kt=Number.POSITIVE_INFINITY,relations:yt,kinds:mt}={}}){const{entities:It,loading:Ne,error:Ct,requestEntities:ot}=Ae();return(0,a.useEffect)(()=>{const zt=new Set([...me]),Tt=new Set;let Kt=[...me],lt=0;for(;Kt.length>0&&(!isFinite(kt)||lt<kt);){const ft=Kt;for(Kt=[];ft.length>0;){const $t=ft.shift(),an=It[$t];if(Tt.add($t),an&&an.relations)for(const St of an.relations)(!yt||yt.includes(St.type))&&(!mt||mt.some(jt=>St.targetRef.startsWith(`${jt.toLocaleLowerCase("en-US")}:`)))&&(Tt.has(St.targetRef)||(Kt.push(St.targetRef),zt.add(St.targetRef)))}++lt}ot([...zt])},[It,me,kt,yt,mt,ot]),{entities:It,loading:Ne,error:Ct}}function ve({rootEntityRefs:me,maxDepth:kt=Number.POSITIVE_INFINITY,unidirectional:yt=!0,mergeRelations:mt=!0,kinds:It,relations:Ne,onNodeClick:Ct,relationPairs:ot=A}){const[zt,Tt]=(0,a.useState)({}),{entities:Kt,loading:lt,error:ft}=fe({rootEntityRefs:me,filter:{maxDepth:kt,kinds:It,relations:Ne}});return(0,G.A)(()=>{var $t;if(!Kt||Object.keys(Kt).length===0){Tt({});return}const an=Object.entries(Kt).map(([U,O])=>{const M=me.includes(U),te={id:U,entity:O,focused:M,color:M?"secondary":"primary",kind:O.kind,name:O.metadata.name,namespace:O.metadata.namespace||o.oQ,title:O.metadata.title,spec:O.spec};return Ct&&(te.onClick=ge=>Ct(te,ge)),te}),St=[],jt=new Set,D=[...me];for(;D.length>0;){const U=D.pop(),O=Kt[U];jt.add(U),O&&(($t=O==null?void 0:O.relations)==null||$t.forEach(M=>{var te;if(Kt[M.targetRef]&&!(Ne&&!Ne.includes(M.type))&&!(It&&!It.some(ge=>M.targetRef.startsWith(`${ge.toLocaleLowerCase("en-US")}:`)))){if(!yt||!jt.has(M.targetRef))if(mt){const ge=(te=ot.find(([bt,Qe])=>bt===M.type||Qe===M.type))!=null?te:[M.type],[ze]=ge;St.push({from:ze===M.type?U:M.targetRef,to:ze===M.type?M.targetRef:U,relations:ge,label:"visible"})}else St.push({from:U,to:M.targetRef,relations:[M.type],label:"visible"});jt.has(M.targetRef)||(D.push(M.targetRef),jt.add(M.targetRef))}}))}Tt({nodes:an,edges:St})},100,[Kt,me,It,Ne,yt,mt,Ct,ot]),{loading:lt,error:ft,...zt}}const J=(0,B.A)(me=>({progress:{position:"absolute",left:"50%",top:"50%",marginLeft:"-20px",marginTop:"-20px"},container:{position:"relative",width:"100%",display:"flex",flexDirection:"column"},graph:{width:"100%",flex:1,"& path[marker-end]":{transition:"filter 0.1s ease-in-out"},"& path[marker-end]:hover":{filter:`drop-shadow(2px 2px 4px ${me.palette.primary.dark});`},"& g[data-testid=label]":{transition:"transform 0s"}}}),{name:"PluginCatalogGraphEntityRelationsGraph"}),v=me=>{const{rootEntityNames:kt,maxDepth:yt=2,unidirectional:mt=!0,mergeRelations:It=!0,kinds:Ne,relations:Ct,direction:ot=_.LEFT_RIGHT,onNodeClick:zt,relationPairs:Tt=A,className:Kt,zoom:lt="enabled",renderNode:ft,renderLabel:$t,curve:an}=me,St=(0,i.A)(),jt=J(),D=(0,a.useMemo)(()=>(Array.isArray(kt)?kt:[kt]).map(ze=>(0,o.U2)(ze)),[kt]),U=(0,j.u)(j.r),{loading:O,error:M,nodes:te,edges:ge}=ve({rootEntityRefs:D,maxDepth:yt,unidirectional:mt,mergeRelations:It,kinds:Ne,relations:Ct,onNodeClick:zt,relationPairs:Tt});return(0,a.useEffect)(()=>{M&&U.post(M)},[U,M]),a.createElement("div",{className:Ke()(jt.container,Kt)},O&&a.createElement(k.A,{className:jt.progress}),te&&ge&&a.createElement(m.wB,{nodes:te,edges:ge,renderNode:ft||R,renderLabel:$t||Re,direction:ot,className:jt.graph,paddingX:St.spacing(4),paddingY:St.spacing(4),labelPosition:m.DT.LabelPosition.RIGHT,labelOffset:St.spacing(1),zoom:lt,curve:an}))},ee=(0,p.HM)({id:"catalog-graph"}),oe=(0,p.Il)({id:"catalog-entity",params:["namespace","kind","name"],optional:!0}),Rt=(0,p.i1)({id:"catalog-graph",routes:{catalogGraph:ee},externalRoutes:{catalogEntity:oe}}),w=Rt.provide((0,p.NC)({name:"EntityCatalogGraphCard",component:{lazy:()=>e.e(2291).then(e.bind(e,82291)).then(me=>me.CatalogGraphCard)}})),sn=Rt.provide((0,p.QJ)({name:"CatalogGraphPage",component:()=>e.e(606).then(e.bind(e,606)).then(me=>me.CatalogGraphPage),mountPoint:ee}))},62258:($n,Zt,e)=>{"use strict";e.d(Zt,{C:()=>c,a:()=>Ke,c:()=>I,d:()=>De,g:()=>Ie});var o=e(7877),m=e(11638),p=e(33478),j=e(92651),B=e(49863),i=e(93584),k=e(52536),Ze=e.n(k);const Ke=(0,o.c)({id:"plugin.catalog-import.service"}),a=(R,A)=>{const _=R.github.byUrl(A);if(!_)return;const{name:F,owner:Ae}=Ze()(A);return{repo:F,owner:Ae,githubIntegrationConfig:_.config}};function De(R){const{ref:A,..._}=R;return{inputRef:A,..._}}function Ie(R){var A;return(A=R.getOptionalString("catalog.import.entityFilename"))!=null?A:"catalog-info.yaml"}function ie(R){var A;return(A=R.getOptionalString("catalog.import.pullRequestBranchName"))!=null?A:"backstage-integration"}var G=Object.defineProperty,Ve=(R,A,_)=>A in R?G(R,A,{enumerable:!0,configurable:!0,writable:!0,value:_}):R[A]=_,he=(R,A,_)=>(Ve(R,typeof A!="symbol"?A+"":A,_),_);class _e{constructor(A){he(this,"discoveryApi"),he(this,"identityApi"),he(this,"scmAuthApi"),he(this,"scmIntegrationsApi"),he(this,"catalogApi"),he(this,"configApi"),this.discoveryApi=A.discoveryApi,this.scmAuthApi=A.scmAuthApi,this.identityApi=A.identityApi,this.scmIntegrationsApi=A.scmIntegrationsApi,this.catalogApi=A.catalogApi,this.configApi=A.configApi}async analyzeUrl(A){var _;if(new URL(A).pathname.match(/\.ya?ml$/)||(_=new URL(A).searchParams.get("path"))!=null&&_.match(/.ya?ml$/)){const fe=await this.catalogApi.addLocation({type:"url",target:A,dryRun:!0});return{type:"locations",locations:[{exists:fe.exists,target:fe.location.target,entities:fe.entities.map(ve=>{var J;return{kind:ve.kind,namespace:(J=ve.metadata.namespace)!=null?J:"default",name:ve.metadata.name}})}]}}if(!a(this.scmIntegrationsApi,A)){const fe=this.scmIntegrationsApi.byUrl(A),ve=Ie(this.configApi);throw fe?new Error(`The ${fe.title} integration only supports full URLs to ${ve} files. Did you try to pass in the URL of a directory instead?`):new Error(`This URL was not recognized as a valid GitHub URL because there was no configured integration that matched the given host name. You could try to paste the full URL to a ${ve} file instead.`)}const Ae=await this.analyzeLocation({repo:A});if(Ae.existingEntityFiles.length>0){const fe=Ae.existingEntityFiles.reduce((ve,J)=>{var v;return ve[J.location.target]={target:J.location.target,exists:J.isRegistered,entities:[...J.location.target in ve?ve[J.location.target].entities:[],{name:J.entity.metadata.name,namespace:(v=J.entity.metadata.namespace)!=null?v:"default",kind:J.entity.kind}]},ve},{});return{type:"locations",locations:Object.values(fe)}}return{type:"repository",integrationType:"github",url:A,generatedEntities:Ae.generateEntities.map(fe=>fe.entity)}}async preparePullRequest(){var A;const _=(A=this.configApi.getOptionalString("app.title"))!=null?A:"Backstage",F=this.configApi.getString("app.baseUrl");return{title:`Add ${Ie(this.configApi)} config file`,body:`This pull request adds a **Backstage entity metadata file** to this repository so that the component can be added to the [${_} software catalog](${F}).

After this pull request is merged, the component will become available.

For more information, read an [overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/).`}}async submitPullRequest(A){const{repositoryUrl:_,fileContent:F,title:Ae,body:fe}=A,ve=a(this.scmIntegrationsApi,_);if(ve)return await this.submitGitHubPrToRepo({...ve,repositoryUrl:_,fileContent:F,title:Ae,body:fe});throw new Error("unimplemented!")}async analyzeLocation(A){const{token:_}=await this.identityApi.getCredentials(),F=await fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/analyze-location`,{headers:{"Content-Type":"application/json",..._&&{Authorization:`Bearer ${_}`}},method:"POST",body:JSON.stringify({location:{type:"url",target:A.repo},...this.configApi.getOptionalString("catalog.import.entityFilename")&&{catalogFilename:this.configApi.getOptionalString("catalog.import.entityFilename")}})}).catch(fe=>{throw new Error(`Failed to generate entity definitions, ${fe.message}`)});if(!F.ok)throw new Error(`Failed to generate entity definitions. Received http response ${F.status}: ${F.statusText}`);return await F.json()}async submitGitHubPrToRepo(A){const{owner:_,repo:F,title:Ae,body:fe,fileContent:ve,repositoryUrl:J,githubIntegrationConfig:v}=A,{token:ee}=await this.scmAuthApi.getCredentials({url:J,additionalScope:{repoWrite:!0}}),oe=new B.E({auth:ee,baseUrl:v.apiBaseUrl}),Rt=ie(this.configApi),w=Ie(this.configApi),sn=await oe.repos.get({owner:_,repo:F}).catch(yt=>{throw new Error(re("Couldn't fetch repo data",yt))}),me=await oe.git.getRef({owner:_,repo:F,ref:`heads/${sn.data.default_branch}`}).catch(yt=>{throw new Error(re("Couldn't fetch default branch data",yt))});return await oe.git.createRef({owner:_,repo:F,ref:`refs/heads/${Rt}`,sha:me.data.object.sha}).catch(yt=>{throw new Error(re(`Couldn't create a new branch with name '${Rt}'`,yt))}),await oe.repos.createOrUpdateFileContents({owner:_,repo:F,path:w,message:Ae,content:i.o4.encode(ve),branch:Rt}).catch(yt=>{throw new Error(re(`Couldn't create a commit with ${w} file added`,yt))}),{link:(await oe.pulls.create({owner:_,repo:F,title:Ae,head:Rt,body:fe,base:sn.data.default_branch}).catch(yt=>{throw new Error(re(`Couldn't create a pull request for ${Rt} branch`,yt))})).data.html_url,location:`https://${v.host}/${_}/${F}/blob/${sn.data.default_branch}/${w}`}}}function re(R,A){return`${R}, received http response status code ${A.status}: ${A.message}`}const Re=(0,m.HM)({id:"catalog-import"}),I=(0,m.i1)({id:"catalog-import",apis:[(0,m.bW)({api:Ke,deps:{discoveryApi:o.q,scmAuthApi:p.$J,identityApi:o.t,scmIntegrationsApi:p.YT,catalogApi:j.vp,configApi:o.p},factory:({discoveryApi:R,scmAuthApi:A,identityApi:_,scmIntegrationsApi:F,catalogApi:Ae,configApi:fe})=>new _e({discoveryApi:R,scmAuthApi:A,scmIntegrationsApi:F,identityApi:_,catalogApi:Ae,configApi:fe})})],routes:{importPage:Re}}),c=I.provide((0,m.QJ)({name:"CatalogImportPage",component:()=>e.e(5381).then(e.bind(e,45381)).then(R=>R.ImportPage),mountPoint:Re}))},90749:($n,Zt,e)=>{"use strict";e.d(Zt,{Az:()=>Cn});var o=e(97388),m=e(14041),p=e(7877),j=e(11638),B=e(46195),i=e(63177);const k=(0,o.tK)("analytics-context"),Ze=()=>{const P=useContext(k);if(P===void 0)return{pluginId:"root",extensionId:"App"};const K=P.atVersion(1);if(K===void 0)throw new Error("No context found for version 1.");return K},Ke=P=>{const{attributes:K,children:be}=P,Ot={...Ze(),...K},Vt=createVersionedValueMap({1:Ot});return React.createElement(k.Provider,{value:Vt},be)},a=(0,p.c)({id:"core.app-tree"}),De=(0,p.c)({id:"core.components"});function Ie(P){return(0,p.u)(De).getComponent(P)}const ie=(0,p.c)({id:"core.analytics"}),G=(0,o.Q6)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1})),Ve="_ROUTABLE-EXTENSION-RENDERED";class he{constructor(K,be={pluginId:"root",extensionId:"App"}){this.analyticsApi=K,this.context=be,G.beforeUnloadRegistered||(addEventListener("beforeunload",()=>{G.mostRecentGatheredNavigation&&(this.analyticsApi.captureEvent({...G.mostRecentGatheredNavigation,...G.mostRecentRoutableExtensionRender}),G.mostRecentGatheredNavigation=void 0,G.mostRecentRoutableExtensionRender=void 0)},{once:!0,passive:!0}),G.beforeUnloadRegistered=!0)}setContext(K){this.context=K}captureEvent(K,be,{value:vt,attributes:Ot}={}){const Vt=this.context;if(K===Ve){G.mostRecentGatheredNavigation&&(G.mostRecentRoutableExtensionRender={context:{...Vt,extensionId:"App"}});return}if(G.mostRecentGatheredNavigation){try{this.analyticsApi.captureEvent({...G.mostRecentGatheredNavigation,...G.mostRecentRoutableExtensionRender})}catch(ne){console.warn("Error during analytics event capture. %o",ne)}G.mostRecentGatheredNavigation=void 0,G.mostRecentRoutableExtensionRender=void 0}if(K==="navigate"&&Vt.pluginId==="root"){G.mostRecentGatheredNavigation={action:K,subject:be,value:vt,attributes:Ot,context:Vt};return}try{this.analyticsApi.captureEvent({action:K,subject:be,value:vt,attributes:Ot,context:Vt})}catch(ne){console.warn("Error during analytics event capture. %o",ne)}}}function _e(){try{return useApi(ie)}catch{return{captureEvent:()=>{}}}}function re(){const P=useRef(null),K=Ze(),be=_e();function vt(){return P.current===null&&(P.current=new he(be)),P.current}const Ot=vt();return Ot.setContext(K),Ot}var Re=Object.defineProperty,I=(P,K,be)=>K in P?Re(P,K,{enumerable:!0,configurable:!0,writable:!0,value:be}):P[K]=be,c=(P,K,be)=>(I(P,typeof K!="symbol"?K+"":K,be),be);class R extends m.Component{constructor(){super(...arguments),c(this,"state",{error:void 0}),c(this,"handleErrorReset",()=>{this.setState({error:void 0})})}static getDerivedStateFromError(K){return{error:K}}render(){const{error:K}=this.state,{plugin:be,children:vt,Fallback:Ot}=this.props;return K?m.createElement(Ot,{plugin:be,error:K,resetError:this.handleErrorReset}):vt}}(0,o.Q6)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1}));const A="_ROUTABLE-EXTENSION-RENDERED";function _(P){const{id:K}=P;return{id:K,toString(){return`ComponentRef{id=${K}}`}}}const F=_({id:"core.components.progress"}),Ae=_({id:"core.components.notFoundErrorPage"}),fe=_({id:"core.components.errorBoundaryFallback"}),ve={progress:F,notFoundErrorPage:Ae,errorBoundaryFallback:fe},J=P=>{const{disableTracking:K,children:be}=P,vt=(0,j.st)();return(0,m.useEffect)(()=>{K||vt.captureEvent(A,"")},[vt,K]),m.createElement(m.Fragment,null,be)};function v(P){var K;const{node:be,routable:vt,children:Ot}=P,Vt=be.spec.source,ne=Ie(ve.progress),Pe=Ie(ve.errorBoundaryFallback),je={extensionId:be.spec.id,pluginId:(K=be.spec.source)==null?void 0:K.id};return m.createElement(m.Suspense,{fallback:m.createElement(ne,null)},m.createElement(R,{plugin:Vt,Fallback:Pe},m.createElement(j.Ig,{attributes:je},m.createElement(J,{disableTracking:!vt},Ot))))}function ee(P){return{id:P,$$type:"@backstage/ExtensionDataRef",config:{},optional(){return{...this,config:{...this.config,optional:!0}}},toString(){const K=Boolean(this.config.optional);return`ExtensionDataRef{id=${P},optional=${K}}`}}}const oe={reactElement:ee("core.reactElement"),routePath:ee("core.routing.path"),routeRef:ee("core.routing.ref")};function Rt(P){const K=P;if(K.$$type!=="@backstage/ExtensionDefinition")throw new Error(`Invalid extension definition instance, bad type '${K.$$type}'`);if(K.version!=="v1")throw new Error(`Invalid extension definition instance, bad version '${K.version}'`);return K}function w(P){var K,be;return{$$type:"@backstage/ExtensionDefinition",version:"v1",kind:P.kind,namespace:P.namespace,name:P.name,attachTo:P.attachTo,disabled:(K=P.disabled)!=null?K:!1,inputs:(be=P.inputs)!=null?be:{},output:P.output,configSchema:P.configSchema,factory({inputs:vt,...Ot}){return P.factory({inputs:vt,...Ot})},toString(){const vt=[];return P.kind&&vt.push(`kind=${P.kind}`),P.namespace&&vt.push(`namespace=${P.namespace}`),P.name&&vt.push(`name=${P.name}`),vt.push(`attachTo=${P.attachTo.id}@${P.attachTo.input}`),`ExtensionDefinition{${vt.join(",")}}`}}}function sn(P,K){return{$$type:"@backstage/ExtensionInput",extensionData:P,config:{singleton:Boolean(K==null?void 0:K.singleton),optional:Boolean(K==null?void 0:K.optional)}}}function me(P,K){var be;const vt=Rt(P),{name:Ot,kind:Vt,namespace:ne,...Pe}=vt,je=(be=vt.namespace)!=null?be:K==null?void 0:K.namespace,Jt=Ot&&je?`${je}/${Ot}`:je||Ot;if(!Jt)throw new Error(`Extension must declare an explicit namespace or name as it could not be resolved from context, kind=${Vt} namespace=${je} name=${Ot}`);const qt=Vt?`${Vt}:${Jt}`:Jt;return{...Pe,$$type:"@backstage/Extension",version:"v1",id:qt,toString(){return`Extension{id=${qt}}`}}}function kt(P){var K,be,vt,Ot;const Vt=((K=P.extensions)!=null?K:[]).map(Pe=>me(Pe,{namespace:P.id})),ne=Vt.map(Pe=>Pe.id);if(ne.length!==new Set(ne).size){const Pe=Array.from(new Set(ne.filter((je,Jt)=>ne.indexOf(je)!==Jt)));throw new Error(`Plugin '${P.id}' provided duplicate extensions: ${Pe.join(", ")}`)}return{$$type:"@backstage/BackstagePlugin",version:"v1",id:P.id,routes:(be=P.routes)!=null?be:{},externalRoutes:(vt=P.externalRoutes)!=null?vt:{},featureFlags:(Ot=P.featureFlags)!=null?Ot:[],extensions:Vt,toString(){return`Plugin{id=${P.id}}`}}}function yt(P){var K;const be=P.extensions.map(Ot=>me(Ot)),vt=(K=P.featureFlags)!=null?K:[];return{$$type:"@backstage/ExtensionOverrides",version:"v1",extensions:be,featureFlags:vt,toString(){const Ot=be.map(String).join(","),Vt=vt.map(ne=>ne.name).join(",");return`ExtensionOverrides{extensions=[${Ot}],featureFlags=[${Vt}]}`}}}function mt(P){const{factory:K,configSchema:be,inputs:vt}=P,Ot="api"in P?P.api:K.api;return w({kind:"api",namespace:Ot.id,attachTo:{id:"app",input:"apis"},inputs:vt,configSchema:be,output:{api:mt.factoryDataRef},factory({config:Vt,inputs:ne}){return typeof K=="function"?{api:K({config:Vt,inputs:ne})}:{api:K}}})}(P=>{P.factoryDataRef=ee("core.api.factory")})(mt||(mt={}));function It(P){var K;return w({kind:"app-root-element",namespace:P.namespace,name:P.name,attachTo:(K=P.attachTo)!=null?K:{id:"app/root",input:"elements"},configSchema:P.configSchema,disabled:P.disabled,inputs:P.inputs,output:{element:oe.reactElement},factory({inputs:be,config:vt}){return{element:typeof P.element=="function"?P.element({inputs:be,config:vt}):P.element}}})}function Ne(P){var K;return w({kind:"app-root-wrapper",namespace:P.namespace,name:P.name,attachTo:(K=P.attachTo)!=null?K:{id:"app/root",input:"wrappers"},configSchema:P.configSchema,disabled:P.disabled,inputs:P.inputs,output:{component:Ne.componentDataRef},factory({inputs:be,config:vt}){return{component:Vt=>m.createElement(P.Component,{inputs:be,config:vt},Vt.children)}}})}(P=>{P.componentDataRef=ee("app.root.wrapper")})(Ne||(Ne={}));function Ct(P){var K;return w({kind:"app-router-component",namespace:P.namespace,name:P.name,attachTo:(K=P.attachTo)!=null?K:{id:"app/root",input:"router"},configSchema:P.configSchema,disabled:P.disabled,inputs:P.inputs,output:{component:Ct.componentDataRef},factory({inputs:be,config:vt}){return{component:Vt=>m.createElement(P.Component,{inputs:be,config:vt},Vt.children)}}})}(P=>{P.componentDataRef=ee("app.router.wrapper")})(Ct||(Ct={}));function ot(P){const K=P(B.z);return{parse:be=>{const vt=K.safeParse(be);if(vt.success)return vt.data;throw new Error(vt.error.issues.map(zt).join("; "))},schema:(0,i.Ay)(K)}}function zt(P){if(P.code==="invalid_union")return zt(P.unionErrors[0].issues[0]);let K=P.message;return K==="Required"&&(K="Missing required value"),P.path.length&&(K+=` at '${P.path.join(".")}'`),K}function Tt(P){var K;const be="configSchema"in P?P.configSchema:ot(vt=>vt.object({path:vt.string().default(P.defaultPath)}));return w({kind:"page",namespace:P.namespace,name:P.name,attachTo:(K=P.attachTo)!=null?K:{id:"app/routes",input:"routes"},configSchema:be,inputs:P.inputs,disabled:P.disabled,output:{element:oe.reactElement,path:oe.routePath,routeRef:oe.routeRef.optional()},factory({config:vt,inputs:Ot,node:Vt}){const ne=lazy(()=>P.loader({config:vt,inputs:Ot}).then(Pe=>({default:()=>Pe})));return{path:vt.path,routeRef:P.routeRef,element:React.createElement(v,{node:Vt,routable:!0},React.createElement(ne,null))}}})}function Kt(P){const{routeRef:K,title:be,icon:vt,namespace:Ot,name:Vt}=P;return w({namespace:Ot,name:Vt,kind:"nav-item",attachTo:{id:"app/nav",input:"items"},configSchema:ot(ne=>ne.object({title:ne.string().default(be)})),output:{navTarget:Kt.targetDataRef},factory:({config:ne})=>({navTarget:{title:ne.title,icon:vt,routeRef:K}})})}(P=>{P.targetDataRef=ee("core.nav-item.target")})(Kt||(Kt={}));function lt(P){const{logoIcon:K,logoFull:be}=P;return w({kind:"nav-logo",name:P==null?void 0:P.name,namespace:P==null?void 0:P.namespace,attachTo:{id:"app/nav",input:"logos"},output:{logos:lt.logoElementsDataRef},factory:()=>({logos:{logoIcon:K,logoFull:be}})})}(P=>{P.logoElementsDataRef=ee("core.nav-logo.logo-elements")})(lt||(lt={}));function ft(P){var K;return w({kind:"sign-in-page",namespace:P==null?void 0:P.namespace,name:P==null?void 0:P.name,attachTo:(K=P.attachTo)!=null?K:{id:"app/root",input:"signInPage"},configSchema:P.configSchema,inputs:P.inputs,disabled:P.disabled,output:{component:ft.componentDataRef},factory({config:be,inputs:vt,node:Ot}){const Vt=(0,m.lazy)(()=>P.loader({config:be,inputs:vt}).then(ne=>({default:ne})));return{component:ne=>m.createElement(v,{node:Ot,routable:!0},m.createElement(Vt,{...ne}))}}})}(P=>{P.componentDataRef=ee("core.sign-in-page.component")})(ft||(ft={}));function $t(P){return w({kind:"theme",namespace:"app",name:P.id,attachTo:{id:"app",input:"themes"},output:{theme:$t.themeDataRef},factory:()=>({theme:P})})}(P=>{P.themeDataRef=ee("core.theme.theme")})($t||($t={}));function an(P){return w({kind:"component",namespace:P.ref.id,name:P.name,attachTo:{id:"app",input:"components"},inputs:P.inputs,disabled:P.disabled,configSchema:P.configSchema,output:{component:an.componentDataRef},factory({config:K,inputs:be,node:vt}){let Ot;if("sync"in P.loader)Ot=P.loader.sync({config:K,inputs:be});else{const Vt=P.loader.lazy;Ot=(0,m.lazy)(()=>Vt({config:K,inputs:be}).then(ne=>({default:ne})))}return{component:{ref:P.ref,impl:Vt=>m.createElement(v,{node:vt},m.createElement(Ot,{...Vt}))}}}})}(P=>{P.componentDataRef=ee("core.component.component")})(an||(an={}));function St(P){return w({kind:"translation",namespace:P.resource.id,name:P.name,attachTo:{id:"app",input:"translations"},output:{resource:St.translationDataRef},factory:()=>({resource:P.resource})})}(P=>{P.translationDataRef=ee("core.translation.translation")})(St||(St={}));const jt="eHgtF5hmbrXyiEvo";function D(P=Error){const{stack:K}=new P(jt);if(!K)return"<unknown>";const be=K.includes(jt)?K.indexOf(`
`)+1:0,vt=K.indexOf(`
`,K.indexOf(`
`,be)+1)+1,Ot=K.indexOf(`
`,vt),Vt=K.substring(vt,Ot).trim();return Vt?Vt.includes("(")?Vt.substring(Vt.indexOf("(")+1,Vt.indexOf(")")):Vt.includes("@")?Vt.substring(Vt.indexOf("@")+1):Vt:"unknown"}var U=Object.defineProperty,O=(P,K,be)=>K in P?U(P,K,{enumerable:!0,configurable:!0,writable:!0,value:be}):P[K]=be,M=(P,K,be)=>(O(P,typeof K!="symbol"?K+"":K,be),be),te=(P,K,be)=>{if(!K.has(P))throw TypeError("Cannot "+be)},ge=(P,K,be)=>(te(P,K,"read from private field"),be?be.call(P):K.get(P)),ze=(P,K,be)=>{if(K.has(P))throw TypeError("Cannot add the same private member more than once");K instanceof WeakSet?K.add(P):K.set(P,be)},bt=(P,K,be,vt)=>(te(P,K,"write to private field"),vt?vt.call(P,be):K.set(P,be),be),Qe,Mt,rn,Ft,Et;function we(P){const K=P;if(K.$$type!=="@backstage/RouteRef")throw new Error(`Invalid RouteRef, bad type '${K.$$type}'`);return K}class nt{constructor(K=[],be){this.params=K,ze(this,Ft),M(this,"$$type","@backstage/RouteRef"),M(this,"version","v1"),ze(this,Qe,void 0),ze(this,Mt,void 0),ze(this,rn,void 0),bt(this,Mt,K),bt(this,rn,be)}getParams(){return ge(this,Mt)}getDescription(){return ge(this,Qe)?ge(this,Qe):`created at '${ge(this,rn)}'`}setId(K){if(!K)throw new Error(`${ge(this,Ft,Et)} id must be a non-empty string`);if(ge(this,Qe))throw new Error(`${ge(this,Ft,Et)} was referenced twice as both '${ge(this,Qe)}' and '${K}'`);bt(this,Qe,K)}toString(){return`${ge(this,Ft,Et)}{${this.getDescription()}}`}}Qe=new WeakMap,Mt=new WeakMap,rn=new WeakMap,Ft=new WeakSet,Et=function(){return this.$$type.slice(11)};function Lt(P){return new nt(P==null?void 0:P.params,D())}var Wt=Object.defineProperty,le=(P,K,be)=>K in P?Wt(P,K,{enumerable:!0,configurable:!0,writable:!0,value:be}):P[K]=be,$e=(P,K,be)=>(le(P,typeof K!="symbol"?K+"":K,be),be),xt=(P,K,be)=>{if(!K.has(P))throw TypeError("Cannot "+be)},Yt=(P,K,be)=>(xt(P,K,"read from private field"),be?be.call(P):K.get(P)),se=(P,K,be)=>{if(K.has(P))throw TypeError("Cannot add the same private member more than once");K instanceof WeakSet?K.add(P):K.set(P,be)},ke=(P,K,be,vt)=>(xt(P,K,"write to private field"),vt?vt.call(P,be):K.set(P,be),be),pe,Le;const et=/^\w+$/;class pt{constructor(K,be,vt){this.path=K,$e(this,"$$type","@backstage/SubRouteRef"),$e(this,"version","v1"),se(this,pe,void 0),se(this,Le,void 0),ke(this,pe,be),ke(this,Le,vt)}getParams(){return Yt(this,pe)}getParent(){return Yt(this,Le)}getDescription(){const K=we(Yt(this,Le));return`at ${this.path} with parent ${K.getDescription()}`}toString(){return`SubRouteRef{${this.getDescription()}}`}}pe=new WeakMap,Le=new WeakMap;function Bt(P){const{path:K,parent:be}=P,Ot=we(be).getParams(),Vt=K.split("/").filter(je=>je.startsWith(":")).map(je=>je.substring(1)),ne=[...Ot,...Vt];if(Ot.some(je=>Vt.includes(je)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!K.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${K}'`);if(K.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${K}'`);for(const je of Vt)if(!et.test(je))throw new Error(`SubRouteRef path has invalid param, got '${je}'`);return new pt(K,ne,be)}var en=Object.defineProperty,Ce=(P,K,be)=>K in P?en(P,K,{enumerable:!0,configurable:!0,writable:!0,value:be}):P[K]=be,Be=(P,K,be)=>(Ce(P,typeof K!="symbol"?K+"":K,be),be);class C extends nt{constructor(K,be=[],vt){super(be,vt),this.optional=K,this.params=be,Be(this,"$$type","@backstage/ExternalRouteRef")}}function W(P){return new C(Boolean(P==null?void 0:P.optional),P==null?void 0:P.params,D())}function Q(P){const{pathname:K}=useLocation(),be=useVersionedContext("routing-context");if(!be)throw new Error("Routing context is not available");const vt=be.atVersion(1),Ot=useMemo(()=>vt&&vt.resolve(P,{pathname:K}),[vt,P,K]);if(!be)throw new Error("useRouteRef used outside of routing context");if(!vt)throw new Error("RoutingContext v1 not available");const Vt="optional"in P&&P.optional;if(!Ot&&!Vt)throw new Error(`No path for ${P}`);return Ot}function rt(P){return useParams()}var ct=e(29835),ut=e(17899),tn=e(58054);function mn(P,K){const be=new Set([...getEntityRelations(P,RELATION_MEMBER_OF,{kind:"group"}),...P?[getCompoundEntityRef(P)]:[]].map(stringifyEntityRef)),vt=getEntityRelations(K,RELATION_OWNED_BY).map(stringifyEntityRef);for(const Ot of vt)if(be.has(Ot))return!0;return!1}function Cn(P){const{entity:K,loading:be,error:vt}=(0,tn.a)(),{allowed:Ot,loading:Vt,error:ne}=(0,ut.JT)({permission:P,resourceRef:K?(0,ct.U2)(K):void 0});return be||Vt?{loading:!0,allowed:!1}:vt?{loading:!1,allowed:!1,error:vt}:{loading:!1,allowed:Ot,error:ne}}const An={entityContentTitle:ee("catalog.entity-content-title"),entityFilterFunction:ee("catalog.entity-filter-function"),entityFilterExpression:ee("catalog.entity-filter-expression")};function Gn(P){var K,be;return createExtension({kind:"entity-card",namespace:P.namespace,name:P.name,attachTo:(K=P.attachTo)!=null?K:{id:"entity-content:catalog/overview",input:"cards"},disabled:(be=P.disabled)!=null?be:!0,output:{element:coreExtensionData.reactElement,filterFunction:An.entityFilterFunction.optional(),filterExpression:An.entityFilterExpression.optional()},inputs:P.inputs,configSchema:createSchemaFromZod(vt=>vt.object({filter:vt.string().optional()})),factory({config:vt,inputs:Ot,node:Vt}){const ne=lazy(()=>P.loader({inputs:Ot}).then(Pe=>({default:()=>Pe})));return{element:React.createElement(ExtensionBoundary,{node:Vt},React.createElement(ne,null)),...Wn({config:vt,options:P})}}})}function Mn(P){var K,be;return createExtension({kind:"entity-content",namespace:P.namespace,name:P.name,attachTo:(K=P.attachTo)!=null?K:{id:"page:catalog/entity",input:"contents"},disabled:(be=P.disabled)!=null?be:!0,output:{element:coreExtensionData.reactElement,path:coreExtensionData.routePath,routeRef:coreExtensionData.routeRef.optional(),title:An.entityContentTitle,filterFunction:An.entityFilterFunction.optional(),filterExpression:An.entityFilterExpression.optional()},inputs:P.inputs,configSchema:createSchemaFromZod(vt=>vt.object({path:vt.string().default(P.defaultPath),title:vt.string().default(P.defaultTitle),filter:vt.string().optional()})),factory({config:vt,inputs:Ot,node:Vt}){const ne=lazy(()=>P.loader({inputs:Ot}).then(Pe=>({default:()=>Pe})));return{path:vt.path,title:vt.title,routeRef:P.routeRef,element:React.createElement(ExtensionBoundary,{node:Vt,routable:!0},React.createElement(ne,null)),...Wn({config:vt,options:P})}}})}function Wn(P){const{options:K,config:be}=P;return be.filter?{filterExpression:be.filter}:typeof K.filter=="string"?{filterExpression:K.filter}:typeof K.filter=="function"?{filterFunction:K.filter}:{}}},58054:($n,Zt,e)=>{"use strict";e.d(Zt,{A:()=>k,a:()=>a,g:()=>B,u:()=>Ke});var o=e(29835),m=e(11638),p=e(97388),j=e(14041);function B(De,Ie,ie){var G;let Ve=((G=De==null?void 0:De.relations)==null?void 0:G.filter(he=>he.type===Ie).map(he=>(0,o.KU)(he.targetRef)))||[];return ie!=null&&ie.kind&&(Ve=Ve.filter(he=>he.kind.toLocaleLowerCase("en-US")===ie.kind.toLocaleLowerCase("en-US"))),Ve}const i=(0,p.tK)("entity-context"),k=De=>{const{children:Ie,entity:ie,loading:G,error:Ve,refresh:he}=De,_e={entity:ie,loading:G,error:Ve,refresh:he};return j.createElement(i.Provider,{value:(0,p.Bl)({1:_e})},j.createElement(m.Ig,{attributes:{...ie?{entityRef:(0,o.U2)(ie)}:void 0}},Ie))},Ze=De=>React.createElement(k,{entity:De.entity,loading:!Boolean(De.entity),error:void 0,refresh:void 0,children:De.children});function Ke(){const De=(0,p.qO)("entity-context");if(!De)throw new Error("Entity context is not available");const Ie=De.atVersion(1);if(!Ie)throw new Error("EntityContext v1 not available");if(!Ie.entity)throw new Error("useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.");return{entity:Ie.entity}}function a(){const De=(0,p.qO)("entity-context");if(!De)throw new Error("Entity context is not available");const Ie=De.atVersion(1);if(!Ie)throw new Error("EntityContext v1 not available");const{entity:ie,loading:G,error:Ve,refresh:he}=Ie;return{entity:ie,loading:G,error:Ve,refresh:he}}},92651:($n,Zt,e)=>{"use strict";e.d(Zt,{B9:()=>_a,Cr:()=>ne,EH:()=>Z,GI:()=>be,IT:()=>tt,Id:()=>ao,QD:()=>$a,SE:()=>wt,Tj:()=>rt,VF:()=>or,WI:()=>dn,ah:()=>Cn,d5:()=>Na,iI:()=>Ya,jF:()=>Ea,lD:()=>Xa,mM:()=>Y,mb:()=>N,mo:()=>ha,n5:()=>Sr,nK:()=>qn,nQ:()=>Q,o9:()=>uo,qq:()=>Pr,s8:()=>xn,sF:()=>Fa,t3:()=>ba,uR:()=>va,vp:()=>W,y2:()=>$r,zI:()=>Pa});var o=e(7877),m=e(11638),p=e(29835),j=e(46123),B=e.n(j),i=e(14041),k=e(96403),Ze=e.n(k),Ke=e(5893),a=e(54917),De=e(64947),Ie=e(73845),ie=e(77125),G=e(72501),Ve=e(42899),he=e(69076),_e=e(86901),re=e(58837),Re=e(16249),I=e(71677),c=e(75173),R=e(95061),A=e(63301),_=e(34839),F=e(29365),Ae=e(7031),fe=e(59461),ve=e(5951),J=e(62261),v=e(40703),ee=e(48653),oe=e(8109),Rt=e(46423),w=e(58007),sn=e(65569),me=e(76891),kt=e(61477),yt=e(46805),mt=e(31653),It=e(38605),Ne=e(93453),Ct=e(37197),ot=e(26343),zt=e(65859),Tt=e(23180),Kt=e(58054),lt=e(45250),ft=e.n(lt),$t=e(45810),an=e.n($t),St=e(18690),jt=e(5030),D=e(16983),U=e(10009),O=e(91638),M=e(46343),te=e.n(M),ge=e(40074),ze=e.n(ge),bt=e(45145),Qe=e(6924),Mt=e(20577),rn=e(74219),Ft=e(44148),Et=e(41260),we=e(53373),nt=e.n(we),Lt=e(7758),Wt=e(62695),le=e(48108),$e=e(47966),xt=e(97388),Yt=e(64704),se=e(45917),ke=e(80109),pe=e(15303),Le=e(48972),et=e(97262),pt=e(87809),Bt=e.n(pt),en=e(51419),Ce=e(3399),Be=e(9684),C=e(71910);const W=(0,o.c)({id:"plugin.catalog.service"}),Q=(0,o.c)({id:"plugin.catalog.entity-presentation"});function rt(g,S){const{kind:L,namespace:$,name:de,title:xe,description:He,displayName:Ye,type:At}=ct(g),Gt=(0,p.U2)({kind:L||"unknown",namespace:$||p.oQ,name:de||"unknown"}),Nt=ut({kind:L,namespace:$,name:de,context:S}),ln=[Ye,xe,Nt].find(fn=>fn&&typeof fn=="string"),Pn=[ln!==Gt?Gt:void 0,At,He].filter(fn=>fn&&typeof fn=="string").join(" | ");return{entityRef:Gt,primaryTitle:ln,secondaryTitle:Pn||void 0,Icon:void 0}}function ct(g){if(typeof g=="string"){let S=g.indexOf(":");const L=g.indexOf("/");L!==-1&&L<S&&(S=-1);const $=S===-1?void 0:g.slice(0,S),de=L===-1?void 0:g.slice(S+1,L),xe=g.slice(Math.max(S+1,L+1));return{kind:$,namespace:de,name:xe}}if(typeof g=="object"&&g!==null){const S=[B()(g,"kind")].find(At=>At&&typeof At=="string"),L=[B()(g,"metadata.namespace"),B()(g,"namespace")].find(At=>At&&typeof At=="string"),$=[B()(g,"metadata.name"),B()(g,"name")].find(At=>At&&typeof At=="string"),de=[B()(g,"metadata.title")].find(At=>At&&typeof At=="string"),xe=[B()(g,"metadata.description")].find(At=>At&&typeof At=="string"),He=[B()(g,"spec.profile.displayName")].find(At=>At&&typeof At=="string"),Ye=[B()(g,"spec.type")].find(At=>At&&typeof At=="string");return{kind:S,namespace:L,name:$,title:de,description:xe,displayName:He,type:Ye}}return{}}function ut(g){var S,L,$,de,xe;const He=((S=g.kind)==null?void 0:S.toLocaleLowerCase("en-US"))||"unknown",Ye=g.namespace||p.oQ,At=g.name||"unknown",Gt=($=(L=g.context)==null?void 0:L.defaultKind)==null?void 0:$.toLocaleLowerCase("en-US"),Nt=(xe=(de=g.context)==null?void 0:de.defaultNamespace)==null?void 0:xe.toLocaleLowerCase("en-US");let ln=At;return(Nt&&Ye.toLocaleLowerCase("en-US")!==Nt||Ye!==p.oQ)&&(ln=`${Ye}/${ln}`),Gt&&He.toLocaleLowerCase("en-US")!==Gt&&(ln=`${He}:${ln}`),ln}function tn(g,S,L){const[$,de]=(0,i.useState)(g);return(0,i.useEffect)(()=>{de(g);const xe=S==null?void 0:S.subscribe({next:He=>{de(He)},complete:()=>{xe==null||xe.unsubscribe()}});return()=>{xe==null||xe.unsubscribe()}},L),$}function mn(g,S){const $=(0,o.b)().get(Q),de=[$,JSON.stringify(g),JSON.stringify(S||null)],xe=(0,i.useMemo)(()=>$?$.forEntity(typeof g=="string"||"metadata"in g?g:(0,p.U2)(g),S):{snapshot:rt(g,S)},de);return tn(xe.snapshot,xe.update$,[xe])}const Cn=(0,o.c)({id:"catalog-react.starred-entities"});var An=Object.defineProperty,Gn=(g,S,L)=>S in g?An(g,S,{enumerable:!0,configurable:!0,writable:!0,value:L}):g[S]=L,Mn=(g,S,L)=>(Gn(g,typeof S!="symbol"?S+"":S,L),L);class Wn{constructor(){Mn(this,"starredEntities",new Set),Mn(this,"subscribers",new Set),Mn(this,"observable",new ObservableImpl(S=>(S.next(new Set(this.starredEntities)),this.subscribers.add(S),()=>{this.subscribers.delete(S)})))}async toggleStarred(S){this.starredEntities.delete(S)||this.starredEntities.add(S);for(const L of this.subscribers)L.next(new Set(this.starredEntities))}starredEntitie$(){return this.observable}}const P=g=>{var S,L;const $=(0,Ke.A)(Ye=>{var At,Gt;return Ye.breakpoints.down((Gt=(At=g.options)==null?void 0:At.drawerBreakpoint)!=null?Gt:"md")}),de=(0,a.A)(),[xe,He]=(0,i.useState)(!1);return $?i.createElement(i.Fragment,null,i.createElement(De.A,{style:{marginTop:de.spacing(1),marginLeft:de.spacing(1)},onClick:()=>He(!0),startIcon:i.createElement(zt.A,null)},"Filters"),i.createElement(Ie.Ay,{open:xe,onClose:()=>He(!1),anchor:(L=(S=g.options)==null?void 0:S.drawerAnchor)!=null?L:"left",disableAutoFocus:!0,keepMounted:!0,variant:"temporary"},i.createElement(ie.A,{m:2},i.createElement(G.A,{variant:"h6",component:"h2",style:{marginBottom:de.spacing(1)}},"Filters"),g.children))):i.createElement(Ve.A,{item:!0,lg:2},g.children)},K=g=>i.createElement(Ve.A,{item:!0,xs:12,lg:10},g.children),be=g=>i.createElement(Ve.A,{container:!0,style:{position:"relative"}},g.children);be.Filters=P,be.Content=K;function vt(g){return g.reduce((S,L)=>({...S,...L.getCatalogFilters?L.getCatalogFilters():{}}),{})}function Ot(g){const S={};return g.forEach(L=>{var $;L instanceof on||L instanceof Kn||L instanceof Yn||L instanceof oa||L instanceof vn||L instanceof ia||L instanceof wn||L instanceof ra||Object.assign(S,(($=L.getCatalogFilters)==null?void 0:$.call(L))||{})}),S}function Vt(g){return S=>g.every(L=>!L.filterEntity||L.filterEntity(S))}function ne(g,S){var L;const $=(L=g.metadata.annotations)==null?void 0:L[p.I4];if($)try{const de=(0,p.aY)($),xe=S.byUrl(de.target);return{locationTargetUrl:de.target,integrationType:xe==null?void 0:xe.type}}catch{return}}var Pe=Object.defineProperty,je=(g,S,L)=>S in g?Pe(g,S,{enumerable:!0,configurable:!0,writable:!0,value:L}):g[S]=L,Jt=(g,S,L)=>(je(g,typeof S!="symbol"?S+"":S,L),L);class qt{constructor(S){this.value=S}getCatalogFilters(){return{kind:this.value}}toQueryValue(){return this.value}}class cn{constructor(S){this.value=S}getTypes(){return Array.isArray(this.value)?this.value:[this.value]}getCatalogFilters(){return{"spec.type":this.getTypes()}}toQueryValue(){return this.getTypes()}}class on{constructor(S){this.values=S}filterEntity(S){return this.values.every(L=>{var $;return(($=S.metadata.tags)!=null?$:[]).includes(L)})}getCatalogFilters(){return{"metadata.tags":this.values}}toQueryValue(){return this.values}}class wn{constructor(S){this.value=S}filterEntity(S){const L=this.toUpperArray(this.value.split(/\s/)),$=this.toUpperArray([S.metadata.tags]),de=this.toUpperArray([S.metadata.name,S.metadata.title]);for(const xe of L)if($.every(He=>He!==xe)&&de.every(He=>!He.includes(xe)))return!1;return!0}toUpperArray(S){return S.flat().filter(L=>Boolean(L)).map(L=>L.toLocaleUpperCase("en-US"))}}class Kn{constructor(S){Jt(this,"values"),this.values=S.reduce((L,$)=>{try{return L.push((0,p.U2)((0,p.KU)($,{defaultKind:"Group"}))),L}catch{return L}},[])}getCatalogFilters(){return{"relations.ownedBy":this.values}}filterEntity(S){return this.values.some(L=>(0,Kt.g)(S,p.vv).some($=>(0,p.U2)($)===L))}toQueryValue(){return this.values}}class Yn{constructor(S){this.values=S}getCatalogFilters(){return{"spec.lifecycle":this.values}}filterEntity(S){return this.values.some(L=>{var $;return(($=S.spec)==null?void 0:$.lifecycle)===L})}toQueryValue(){return this.values}}class oa{constructor(S){this.values=S}getCatalogFilters(){return{"metadata.namespace":this.values}}filterEntity(S){return this.values.some(L=>S.metadata.namespace===L)}toQueryValue(){return this.values}}class vn{constructor(S,L){this.value=S,this.refs=L}static owned(S){return new vn("owned",S)}static all(){return new vn("all")}static starred(S){return new vn("starred",S)}getCatalogFilters(){var S,L,$;return this.value==="owned"?{"relations.ownedBy":(S=this.refs)!=null?S:[]}:this.value==="starred"?{"metadata.name":($=(L=this.refs)==null?void 0:L.map(de=>(0,p.KU)(de).name))!=null?$:[]}:{}}filterEntity(S){var L,$,de,xe;if(this.value==="starred")return($=(L=this.refs)==null?void 0:L.includes((0,p.U2)(S)))!=null?$:!0;if(this.value==="owned"){const He=(0,Kt.g)(S,p.vv);return(xe=(de=this.refs)==null?void 0:de.some(Ye=>He.some(At=>(0,p.U2)(At)===Ye)))!=null?xe:!1}return!0}toQueryValue(){return this.value}}class ra{constructor(S,L,$){this.value=S,this.isOwnedEntity=L,this.isStarredEntity=$}filterEntity(S){switch(this.value){case"owned":return this.isOwnedEntity(S);case"starred":return this.isStarredEntity(S);default:return!0}}toQueryValue(){return this.value}}class ia{constructor(S){this.value=S}getCatalogFilters(){return this.value?{"metadata.annotations.backstage.io/orphan":String(this.value)}:{}}filterEntity(S){var L;const $=(L=S.metadata.annotations)==null?void 0:L["backstage.io/orphan"];return $!==void 0&&this.value.toString()===$}}class na{constructor(S){this.value=S}filterEntity(S){var L,$;const de=(($=(L=S==null?void 0:S.status)==null?void 0:L.items)==null?void 0:$.length)>0;return de!==void 0&&this.value===de}}const da=(0,i.createContext)(void 0),_a=g=>{const S=(0,U.default)(),L=(0,o.u)(W),[$,de]=(0,i.useState)({}),xe=(0,St.zy)(),He=g.pagination===!0||typeof g.pagination=="object",Ye=g.pagination&&typeof g.pagination=="object"&&typeof g.pagination.limit=="number"?g.pagination.limit:20,{queryParameters:At,cursor:Gt}=(0,i.useMemo)(()=>{var Bn;const Jn=an().parse(xe.search,{ignoreQueryPrefix:!0});return{queryParameters:(Bn=Jn.filters)!=null?Bn:{},cursor:typeof Jn.cursor=="string"?Jn.cursor:void 0}},[xe]),[Nt,ln]=(0,i.useState)(Gt),[Pn,fn]=(0,i.useState)(()=>({appliedFilters:{},entities:[],backendEntities:[],pageInfo:He?{}:void 0})),[{loading:Dn,error:Zn},bn]=(0,jt.default)(async()=>{var Bn;const Jn=(0,lt.compact)(Object.values($)),ga=Object.keys($).reduce((Ra,fa)=>{const ya=$[fa];return ya!=null&&ya.toQueryValue&&(Ra[fa]=ya.toQueryValue()),Ra},{});if(He)if(Nt){if(Nt!==Pn.appliedCursor){const Ra=Vt(Jn),fa=await L.queryEntities({cursor:Nt,limit:Ye});fn({appliedFilters:$,appliedCursor:Nt,backendEntities:fa.items,entities:fa.items.filter(Ra),pageInfo:fa.pageInfo})}}else{const Ra=Vt(Jn),fa=vt(Jn),ya=vt((0,lt.compact)(Object.values(Pn.appliedFilters)));if(!(0,lt.isEqual)(ya,fa)){const Ta=await L.queryEntities({filter:fa,limit:Ye,orderFields:[{field:"metadata.name",order:"asc"}]});fn({appliedFilters:$,backendEntities:Ta.items,entities:Ta.items.filter(Ra),pageInfo:Ta.pageInfo})}}else{const Ra=Vt(Jn),fa=Ot(Jn),ya=Ot((0,lt.compact)(Object.values(Pn.appliedFilters)));if((0,lt.isEqual)(ya,fa))fn({appliedFilters:$,backendEntities:Pn.backendEntities,entities:Pn.backendEntities.filter(Ra)});else{const Ta=await L.getEntities({filter:fa});fn({appliedFilters:$,backendEntities:Ta.items,entities:Ta.items.filter(Ra)})}}if(S()){const Ra=an().parse(xe.search,{ignoreQueryPrefix:!0}),fa=an().stringify({...Ra,filters:ga,cursor:Nt},{addQueryPrefix:!0,arrayFormat:"repeat"}),ya=`${window.location.pathname}${fa}`;(Bn=window.history)==null||Bn.replaceState(null,document.title,ya)}},[L,At,$,Pn,Nt,He],{loading:!0});(0,D.A)(bn,10,[$,Nt]);const ta=(0,i.useCallback)(Bn=>{ln(void 0),de(Jn=>{const ga=typeof Bn=="function"?Bn(Jn):Bn;return{...Jn,...ga}})},[]),ua=(0,i.useMemo)(()=>{var Bn,Jn;if(!He)return;const ga=(Bn=Pn.pageInfo)==null?void 0:Bn.prevCursor,Ra=(Jn=Pn.pageInfo)==null?void 0:Jn.nextCursor;return{prev:ga?()=>ln(ga):void 0,next:Ra?()=>ln(Ra):void 0}},[He,Pn.pageInfo]),Hn=(0,i.useMemo)(()=>({filters:Pn.appliedFilters,entities:Pn.entities,backendEntities:Pn.backendEntities,updateFilters:ta,queryParameters:At,loading:Dn,error:Zn,pageInfo:ua}),[Pn,ta,At,Dn,Zn,ua]);return i.createElement(da.Provider,{value:Hn},g.children)};function qn(){const g=(0,i.useContext)(da);if(!g)throw new Error("useEntityList must be used within EntityListProvider");return g}function Ea(){var g;const S=(0,o.u)(W),{filters:{kind:L,type:$},queryParameters:{type:de},updateFilters:xe}=qn(),He=(0,i.useMemo)(()=>[de].flat().filter(Boolean),[de]),[Ye,At]=(0,i.useState)(He.length?He:(g=$==null?void 0:$.getTypes())!=null?g:[]);(0,i.useEffect)(()=>{He.length&&At(He)},[He]);const[Gt,Nt]=(0,i.useState)([]),ln=(0,i.useMemo)(()=>L==null?void 0:L.value,[L]),{error:Pn,loading:fn,value:Dn}=(0,O.default)(async()=>ln?await S.getEntityFacets({filter:{kind:ln},facets:["spec.type"]}).then(ta=>ta.facets["spec.type"]||[]):[],[ln,S]),Zn=(0,i.useRef)(Dn);return(0,i.useEffect)(()=>{const bn=Zn.current;if(Zn.current=Dn,fn||!ln||bn===Dn||!Dn)return;const ta=[...new Set(ze()(Dn,Hn=>-Hn.count).map(Hn=>Hn.value.toLocaleLowerCase("en-US")))];Nt(ta);const ua=Ye.filter(Hn=>ta.includes(Hn));te()(Ye,ua)||At(ua)},[fn,ln,Ye,At,Dn]),(0,i.useEffect)(()=>{xe({type:Ye.length?new cn(Ye):void 0})},[Ye,xe]),{loading:fn,error:Pn,availableTypes:Gt,selectedTypes:Ye,setSelectedTypes:At}}function Z(g,S){var L,$;const de=(L=S==null?void 0:S.type)==null?void 0:L.toLocaleLowerCase("en-US"),xe=($=S==null?void 0:S.kind)==null?void 0:$.toLocaleLowerCase("en-US"),He=(0,o.u)(W),{loading:Ye,value:At,error:Gt}=(0,O.default)(async()=>{var Nt;const ln=(Nt=g.relations)==null?void 0:Nt.filter(fn=>(!de||fn.type.toLocaleLowerCase("en-US")===de)&&(!xe||(0,p.KU)(fn.targetRef).kind===xe));if(!(ln!=null&&ln.length))return[];const{items:Pn}=await He.getEntitiesByRefs({entityRefs:ln.map(fn=>fn.targetRef)});return Pn.filter(fn=>Boolean(fn))},[g,de,xe]);return{entities:At,loading:Ye,error:Gt}}function Ue(g){return typeof g=="string"?g:(0,p.U2)(g)}function tt(){const g=(0,o.u)(Cn),S=(0,bt.A)((0,i.useMemo)(()=>g.starredEntitie$(),[g]),new Set),L=(0,i.useCallback)(de=>S.has(Ue(de)),[S]),$=(0,i.useCallback)(de=>g.toggleStarred(Ue(de)).then(),[g]);return{starredEntities:S,toggleStarredEntity:$,isStarredEntity:L}}function ht(g){return typeof g=="string"?g:(0,p.U2)(g)}function Se(g){const S=(0,o.u)(Cn),[L,$]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{const xe=S.starredEntitie$().subscribe({next(He){$(He.has(ht(g)))}});return()=>{xe.unsubscribe()}},[g,S]),{toggleStarredEntity:(0,i.useCallback)(()=>S.toggleStarred(ht(g)).then(),[g,S]),isStarredEntity:L}}function Y(){const g=(0,o.u)(o.t),{loading:S,value:L}=(0,O.default)(async()=>{const{ownershipEntityRefs:de}=await g.getBackstageIdentity();return de},[]),$=(0,i.useMemo)(()=>{const de=new Set(L!=null?L:[]);return xe=>{const He=(0,Kt.g)(xe,p.vv).map(p.U2);for(const Ye of He)if(de.has(Ye))return!0;return!1}},[L]);return{loading:S,isOwnedEntity:$}}function Ee(){const g=(0,o.u)(W),{error:S,loading:L,value:$}=(0,O.default)(async()=>await g.getEntityFacets({facets:["kind"]}).then(xe=>{var He;return((He=xe.facets.kind)==null?void 0:He.map(Ye=>Ye.value).sort())||[]}),[g]);return{loading:L,error:S,allKinds:$!=null?$:[]}}function ue(g,S,L){let $=g;return S&&($=$.filter(xe=>S.some(He=>He.toLocaleLowerCase("en-US")===xe.toLocaleLowerCase("en-US")))),L&&!g.some(xe=>xe.toLocaleLowerCase("en-US")===L.toLocaleLowerCase("en-US"))&&($=$.concat([L])),$.sort().reduce((xe,He)=>(xe[He.toLocaleLowerCase("en-US")]=He,xe),{})}function at(g){var S,L;const{filters:$,queryParameters:{kind:de},updateFilters:xe}=qn(),He=(0,i.useMemo)(()=>[de].flat()[0],[de]),[Ye,At]=(0,i.useState)((L=He!=null?He:(S=$.kind)==null?void 0:S.value)!=null?L:g.initialFilter);(0,i.useEffect)(()=>{He&&At(He)},[He]),(0,i.useEffect)(()=>{var Pn,fn;(Pn=$.kind)!=null&&Pn.value&&At((fn=$.kind)==null?void 0:fn.value)},[$.kind]),(0,i.useEffect)(()=>{xe({kind:Ye?new qt(Ye):void 0})},[Ye,xe]);const{allKinds:Gt,loading:Nt,error:ln}=Ee();return{loading:Nt,error:ln,allKinds:Gt!=null?Gt:[],selectedKind:Ye,setSelectedKind:At}}const N=g=>{const{allowedKinds:S,hidden:L,initialFilter:$="component"}=g,de=(0,o.u)(o.l),{error:xe,allKinds:He,selectedKind:Ye,setSelectedKind:At}=at({initialFilter:$});if((0,i.useEffect)(()=>{xe&&de.post({message:"Failed to load entity kinds",severity:"error"})},[xe,de]),xe)return null;const Gt=ue(He,S,Ye),Nt=Object.keys(Gt).map(ln=>({value:ln,label:Gt[ln]}));return L?null:i.createElement(ie.A,{pb:1,pt:1},i.createElement(Tt.l6,{label:"Kind",items:Nt,selected:Ye.toLocaleLowerCase("en-US"),onChange:ln=>At(String(ln))}))},H=i.createElement(Et.A,{fontSize:"small"}),q=i.createElement(Ft.A,{fontSize:"small"});function ae({selected:g}){return i.createElement(he.A,{icon:H,checkedIcon:q,checked:g})}const We=(0,i.memo)(g=>{const{selected:S,value:L,availableOptions:$,showCounts:de}=g,xe=de?`${L} (${$==null?void 0:$[L]})`:L;return i.createElement(_e.A,{control:i.createElement(ae,{selected:S}),label:xe,onClick:He=>He.preventDefault()})}),Je=(0,re.A)({input:{}},{name:"CatalogReactEntityAutocompletePickerInput"});function Fe(g){const S=Je();return i.createElement(Re.A,{variant:"outlined",...g,className:nt()(S.input,g.className)})}function gt(g){var S,L;const{label:$,name:de,path:xe,showCounts:He,Filter:Ye,InputProps:At,initialSelectedOptions:Gt=[]}=g,{updateFilters:Nt,filters:ln,queryParameters:{[de]:Pn}}=qn(),fn=(0,o.u)(W),{value:Dn}=(0,O.default)(async()=>{var Jn;const ga=xe,{facets:Ra}=await fn.getEntityFacets({facets:[ga],filter:(Jn=ln.kind)==null?void 0:Jn.getCatalogFilters()});return Object.fromEntries(Ra[ga].map(({value:fa,count:ya})=>[fa,ya]))},[ln.kind]),Zn=(0,i.useMemo)(()=>[Pn].flat().filter(Boolean),[Pn]),[bn,ta]=(0,i.useState)(Zn.length?Zn:(L=(S=ln[de])==null?void 0:S.values)!=null?L:Gt);(0,i.useEffect)(()=>{Zn.length&&ta(Zn)},[Zn]);const ua=Object.keys(Dn!=null?Dn:{}),Hn=bn.length&&ua.length;(0,i.useEffect)(()=>{Nt({[de]:Hn?new Ye(bn):void 0})},[de,Hn,bn,Ye,Nt]);const Bn=ln[de];return Bn&&typeof Bn=="object"&&!("values"in Bn)||!ua.length||ua.length<=1?null:i.createElement(ie.A,{pb:1,pt:1},i.createElement(G.A,{variant:"button",component:"label"},$,i.createElement(Mt.Ay,{multiple:!0,disableCloseOnSelect:!0,options:ua,value:bn,onChange:(Jn,ga)=>ta(ga),renderOption:(Jn,{selected:ga})=>i.createElement(We,{selected:ga,value:Jn,availableOptions:Dn,showCounts:!!He}),size:"small",popupIcon:i.createElement(Qe.A,{"data-testid":`${String(de)}-picker-expand`}),renderInput:Jn=>i.createElement(Fe,{...Jn,...At})})))}const Pt=(0,re.A)({input:{}},{name:"CatalogReactEntityLifecyclePicker"}),dn=g=>{const{initialFilter:S=[]}=g,L=Pt();return i.createElement(gt,{label:"Lifecycle",name:"lifecycles",path:"spec.lifecycle",Filter:Yn,InputProps:{className:L.input},initialSelectedOptions:S})};function wt(g,S){const L=S==null?void 0:S.defaultKind;let $,de,xe;return"metadata"in g?($=g.kind,de=g.metadata.namespace,xe=g.metadata.name):($=g.kind,de=g.namespace,xe=g.name),(de===void 0||de==="")&&(de=p.oQ),(S==null?void 0:S.defaultNamespace)!==void 0?(S==null?void 0:S.defaultNamespace)===de&&(de=void 0):de===p.oQ&&(de=void 0),$=$.toLocaleLowerCase("en-US"),$=L&&L.toLocaleLowerCase("en-US")===$?void 0:$,`${$?`${$}:`:""}${de?`${de}/`:""}${xe}`}function un(g,S){for(const L of["spec.profile.displayName","metadata.title"]){const $=B()(g,L);if($&&typeof $=="string")return $}return S}function gn({enabled:g}){const S=(0,o.u)(W),[L]=(0,i.useState)(async()=>{if(!g)return[];const $="relations.ownedBy";return S.getEntityFacets({facets:[$]}).then(de=>de.facets[$].map(xe=>xe.value).map(xe=>{const{kind:He,name:Ye,namespace:At}=(0,p.KU)(xe);return{apiVersion:"backstage.io/v1beta1",kind:He,metadata:{name:Ye,namespace:At}}}).sort((xe,He)=>(xe.metadata.namespace||"").localeCompare(He.metadata.namespace||"","en-US")||xe.metadata.name.localeCompare(He.metadata.name,"en-US")||xe.kind.localeCompare(He.kind,"en-US"))).catch(()=>[])});return(0,jt.default)(async($,de)=>{var xe;const He=await L;if(!He)return{items:[]};const Ye=(xe=de==null?void 0:de.limit)!=null?xe:20,{text:At,start:Gt}=En($),Nt=He.filter(Pn=>Ln(At,Pn)),ln=Gt+Ye;return{items:Nt.slice(0,ln),...On({entities:Nt,limit:ln,payload:{text:At,start:ln}})}},[L],{loading:!0,value:{items:[]}})}function En(g){return Nn(g)&&g.cursor?JSON.parse(atob(g.cursor)):{text:g.text||"",start:0}}function Nn(g){return!!g.cursor}function On({entities:g,limit:S,payload:L}){return g.length>S?{cursor:btoa(JSON.stringify(L))}:{}}function Ln(g,S){var L;const $=g.trim();return S.kind.includes($)||((L=S.metadata.namespace)==null?void 0:L.includes($))||S.metadata.name.includes($)}function Sn(){const g=(0,o.u)(W);return(0,jt.default)(async(S,L)=>{var $;const de=S,xe=S,He=($=L==null?void 0:L.limit)!=null?$:20;if(xe.cursor){const At=await g.queryEntities({cursor:xe.cursor,limit:He});return{cursor:At.pageInfo.nextCursor,items:[...xe.items,...At.items]}}const Ye=await g.queryEntities({fullTextFilter:{term:de.text||"",fields:["metadata.name","kind","spec.profile.displayname","metadata.title"]},filter:{kind:["User","Group"]},orderFields:[{field:"metadata.name",order:"asc"}],limit:He});return{cursor:Ye.pageInfo.nextCursor,items:Ye.items}},[],{loading:!0})}function In({mode:g,initialSelectedOwnersRefs:S}){const L=g==="owners-only",$=Sn(),de=gn({enabled:L}),[xe,He]=L?de:$;return[xe,He,pn({enabled:!L,initialSelectedOwnersRefs:S})]}function pn({enabled:g,initialSelectedOwnersRefs:S}){const L=(0,i.useRef)({}),$=(0,o.u)(W),[,de]=(0,jt.default)(async()=>{(await $.getEntitiesByRefs({entityRefs:S})).items.forEach(He=>{He&&(L.current[(0,p.U2)(He)]=He)})},[]);return(0,Lt.u)(()=>{g&&S.length>0&&de()}),{getEntity:xe=>L.current[xe],setEntity:xe=>{L.current[(0,p.U2)(xe)]=xe}}}const yn=(0,re.A)({input:{}},{name:"CatalogReactEntityOwnerPicker"}),aa=i.createElement(Et.A,{fontSize:"small"}),sa=i.createElement(Ft.A,{fontSize:"small"}),ba=g=>{var S,L,$;const de=yn(),{mode:xe="owners-only"}=g||{},{updateFilters:He,filters:Ye,queryParameters:{owners:At}}=qn(),[Gt,Nt]=(0,i.useState)(""),ln=(0,i.useMemo)(()=>[At].flat().filter(Boolean),[At]),[Pn,fn]=(0,i.useState)(ln.length?ln:(L=(S=Ye.owners)==null?void 0:S.values)!=null?L:[]),[{value:Dn,loading:Zn},bn,ta]=In({mode:xe,initialSelectedOwnersRefs:Pn});(0,Wt.s)(()=>bn({text:Gt}),[Gt,bn],250);const ua=(Dn==null?void 0:Dn.items)||[];return(0,i.useEffect)(()=>{if(ln.length){const Hn=new Kn(ln);fn(Hn.values)}},[ln]),(0,i.useEffect)(()=>{He({owners:Pn.length?new Kn(Pn):void 0})},[Pn,He]),["user","group"].includes((($=Ye.kind)==null?void 0:$.value.toLocaleLowerCase("en-US"))||"")?null:i.createElement(ie.A,{pb:1,pt:1},i.createElement(G.A,{variant:"button",component:"label"},"Owner",i.createElement(Mt.Ay,{multiple:!0,disableCloseOnSelect:!0,loading:Zn,options:ua,value:Pn,getOptionSelected:(Hn,Bn)=>typeof Bn=="string"?(0,p.U2)(Hn)===Bn:Hn===Bn,getOptionLabel:Hn=>{const Bn=typeof Hn=="string"?ta.getEntity(Hn)||(0,p.KU)(Hn,{defaultKind:"group",defaultNamespace:"default"}):Hn;return un(Bn,wt(Bn))},onChange:(Hn,Bn)=>{Nt(""),fn(Bn.map(Jn=>{const ga=typeof Jn=="string"?Jn:(0,p.U2)(Jn);return typeof Jn!="string"&&ta.setEntity(Jn),ga}))},filterOptions:Hn=>Hn,renderOption:(Hn,{selected:Bn})=>{const Jn=Hn.kind.toLocaleLowerCase("en-US")==="group";return i.createElement(_e.A,{control:i.createElement(he.A,{icon:aa,checkedIcon:sa,checked:Bn}),onClick:ga=>ga.preventDefault(),label:i.createElement(ie.A,{display:"flex",flexWrap:"wrap",alignItems:"center"},Jn?i.createElement($e.A,{fontSize:"small"}):i.createElement(le.A,{fontSize:"small"}),"\xA0",un(Hn,wt(Hn,{defaultKind:Hn.kind})))})},size:"small",popupIcon:i.createElement(Qe.A,{"data-testid":"owner-picker-expand"}),renderInput:Hn=>i.createElement(Re.A,{...Hn,className:de.input,onChange:Bn=>{Nt(Bn.currentTarget.value)},variant:"outlined"}),ListboxProps:{onScroll:Hn=>{const Bn=Hn.currentTarget;Math.abs(Bn.scrollHeight-Bn.clientHeight-Bn.scrollTop)<1&&(Dn!=null&&Dn.cursor)&&bn({items:Dn.items,cursor:Dn.cursor})},"data-testid":"owner-picker-listbox"}})))},Ca=(0,re.A)(g=>({root:{display:"inline-flex",alignItems:"center"},icon:{marginRight:g.spacing(.5),color:g.palette.text.secondary,lineHeight:0}}),{name:"CatalogReactEntityDisplayName"}),Na=g=>{const{entityRef:S,hideIcon:L,disableTooltip:$,defaultKind:de,defaultNamespace:xe}=g,He=Ca(),{primaryTitle:Ye,secondaryTitle:At,Icon:Gt}=mn(S,{defaultKind:de,defaultNamespace:xe});let Nt=i.createElement(i.Fragment,null,Ye);return Nt=i.createElement(ie.A,{component:"span",className:He.root},Gt&&!L?i.createElement(ie.A,{component:"span",className:He.icon},i.createElement(Gt,{fontSize:"inherit"})):null,Nt),At&&!$&&(Nt=i.createElement(I.Ay,{enterDelay:1500,title:At},Nt)),Nt},Fa=(0,xt.Q6)("catalog:entity-route-ref",()=>(0,m.HM)({id:"catalog:entity",params:["namespace","kind","name"]}));function La(g){var S,L;return{kind:g.kind.toLocaleLowerCase("en-US"),namespace:(L=(S=g.metadata.namespace)==null?void 0:S.toLocaleLowerCase("en-US"))!=null?L:DEFAULT_NAMESPACE,name:g.metadata.name}}const Pa=(0,i.forwardRef)((g,S)=>{var L;const{entityRef:$,defaultKind:de,defaultNamespace:xe,title:He,children:Ye,hideIcon:At,...Gt}=g,Nt=za(g.entityRef),ln=(L=Ye!=null?Ye:He)!=null?L:i.createElement(Na,{entityRef:$,defaultKind:de,defaultNamespace:xe,hideIcon:At});return i.createElement(Tt.N_,{...Gt,ref:S,to:Nt},ln)});function za(g){var S;const L=(0,m.Sf)(Fa);let $,de,xe;if(typeof g=="string"){const Ye=(0,p.KU)(g);$=Ye.kind,de=Ye.namespace,xe=Ye.name}else"metadata"in g?($=g.kind,de=g.metadata.namespace,xe=g.metadata.name):($=g.kind,de=g.namespace,xe=g.name);$=$.toLocaleLowerCase("en-US"),de=(S=de==null?void 0:de.toLocaleLowerCase("en-US"))!=null?S:p.oQ;const He={kind:encodeURIComponent($),namespace:encodeURIComponent(de),name:encodeURIComponent(xe)};return L(He)}function Ya(g){const{entityRefs:S,hideIcons:L,...$}=g;return i.createElement(i.Fragment,null,S.map((de,xe)=>{const He=typeof de=="string"?de:(0,p.U2)(de);return i.createElement(i.Fragment,{key:`${xe}.${He}`},xe>0&&", ",i.createElement(Pa,{...$,entityRef:de,hideIcon:L}))}))}const Ja=g=>{const S=useRouteRef(Fa);return React.createElement(IconButton,{component:Link,"aria-label":"Show",title:"Show details",to:S(getCompoundEntityRef(g.entity))},React.createElement(InfoIcon,null))},lr=g=>React.createElement(IconButton,{component:Link,"aria-label":"Email",title:`Email ${g.email}`,to:`mailto:${g.email}`},React.createElement(EmailIcon,null)),Qa=g=>{var S;const L=(S=g.entity.spec.profile)==null?void 0:S.email;return L?React.createElement(lr,{email:L}):null},wa=g=>{var S;const L=(S=g.entity.spec.profile)==null?void 0:S.email;return L?React.createElement(lr,{email:L}):null},ja=(0,re.A)(()=>({popoverPaper:{width:"30em"},descriptionTypography:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"}})),Ga=4,yr=g=>{var S,L,$,de;const{entityRef:xe,children:He,delayTime:Ye=500}=g,At=ja(),Gt=useApiHolder(),Nt=usePopupState({variant:"popover",popupId:"entity-peek-ahead"}),[ln,Pn]=useState(!1),fn=useMemo(()=>debounce(()=>Pn(!0),Ye),[Ye]),[{loading:Dn,error:Zn,value:bn},ta]=useAsyncFn(async()=>{const Hn=Gt.get(W);if(Hn){const Bn=await Hn.getEntityByRef(xe);if(!Bn)throw new Error(`${xe} not found`);return Bn}},[Gt,xe]),ua=()=>{Pn(!1),fn.cancel()};return useEffect(()=>{Nt.isOpen&&!bn&&!Zn&&!Dn&&ta()},[Nt.isOpen,ta,bn,Zn,Dn]),React.createElement(React.Fragment,null,React.createElement(Typography,{component:"span",onMouseEnter:fn},React.createElement(Typography,{component:"span","data-testid":"trigger",...bindHover(Nt)},He)),ln&&React.createElement(HoverPopover,{PaperProps:{className:At.popoverPaper},...bindPopover(Nt),anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onMouseLeave:ua},React.createElement(Card,null,React.createElement(CardContent,null,Zn&&React.createElement(ResponseErrorPanel,{error:Zn}),Dn&&React.createElement(Progress,null),bn&&React.createElement(React.Fragment,null,React.createElement(Typography,{color:"textSecondary"},bn.metadata.namespace),React.createElement(Typography,{variant:"h5",component:"div"},bn.metadata.name),React.createElement(Typography,{color:"textSecondary",gutterBottom:!0},bn.kind),bn.metadata.description&&React.createElement(Typography,{className:At.descriptionTypography,paragraph:!0},bn.metadata.description),React.createElement(Typography,null,(L=(S=bn.spec)==null?void 0:S.type)==null?void 0:L.toString()),React.createElement(Box,{marginTop:"0.5em"},(bn.metadata.tags||[]).slice(0,Ga).map(Hn=>React.createElement(Chip,{key:Hn,size:"small",label:Hn})),(($=bn.metadata.tags)==null?void 0:$.length)&&((de=bn.metadata.tags)==null?void 0:de.length)>Ga&&React.createElement(Tooltip,{title:"Drill into the entity to see all of the tags."},React.createElement(Chip,{key:"other-tags",size:"small",label:"..."}))))),!Zn&&bn&&React.createElement(CardActions,null,React.createElement(React.Fragment,null,isUserEntity(bn)&&React.createElement(wa,{entity:bn}),isGroupEntity(bn)&&React.createElement(Qa,{entity:bn}),React.createElement(Ja,{entity:bn}))))))},Ua=(0,re.A)(g=>({searchToolbar:{paddingLeft:0,paddingRight:0},input:{}}),{name:"CatalogReactEntitySearchBar"}),Xa=()=>{var g,S;const L=Ua(),{filters:$,updateFilters:de}=qn(),[xe,He]=(0,i.useState)((S=(g=$.text)==null?void 0:g.value)!=null?S:"");return(0,D.A)(()=>{de({text:xe.length?new wn(xe):void 0})},250,[xe,de]),i.createElement(c.A,{className:L.searchToolbar},i.createElement(R.A,null,i.createElement(A.A,{"aria-label":"search",id:"input-with-icon-adornment",className:L.input,placeholder:"Search",autoComplete:"off",onChange:Ye=>He(Ye.target.value),value:xe,startAdornment:i.createElement(_.A,{position:"start"},i.createElement(se.A,null)),endAdornment:i.createElement(_.A,{position:"end"},i.createElement(F.A,{"aria-label":"clear search",onClick:()=>He(""),edge:"end",disabled:xe.length===0},i.createElement(Yt.A,null)))})))},Ge=Object.freeze({createEntityRefColumn(g){const{defaultKind:S}=g;function L($){var de;return((de=$.metadata)==null?void 0:de.title)||wt($,{defaultKind:S})}return{title:"Name",highlight:!0,customFilterAndSearch($,de){return L(de).includes($)},customSort($,de){return L($).localeCompare(L(de))},render:$=>{var de;return i.createElement(Pa,{entityRef:$,defaultKind:S,title:(de=$.metadata)==null?void 0:de.title})}}},createEntityRelationColumn(g){const{title:S,relation:L,defaultKind:$,filter:de}=g;function xe(Ye){return(0,Kt.g)(Ye,L,de)}function He(Ye){return xe(Ye).map(At=>wt(At,{defaultKind:$})).join(", ")}return{title:S,customFilterAndSearch(Ye,At){return He(At).includes(Ye)},customSort(Ye,At){return He(Ye).localeCompare(He(At))},render:Ye=>i.createElement(Ya,{entityRefs:xe(Ye),defaultKind:$})}},createOwnerColumn(){return this.createEntityRelationColumn({title:"Owner",relation:p.vv,defaultKind:"group"})},createDomainColumn(){return this.createEntityRelationColumn({title:"Domain",relation:p.jn,defaultKind:"domain",filter:{kind:"domain"}})},createSystemColumn(){return this.createEntityRelationColumn({title:"System",relation:p.jn,defaultKind:"system",filter:{kind:"system"}})},createMetadataDescriptionColumn(){return{title:"Description",field:"metadata.description",render:g=>i.createElement(Tt.Mm,{text:g.metadata.description,placement:"bottom-start",line:2})}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"spec.lifecycle"}},createSpecTypeColumn(){return{title:"Type",field:"spec.type"}}}),X=[Ge.createEntityRefColumn({defaultKind:"system"}),Ge.createDomainColumn(),Ge.createOwnerColumn(),Ge.createMetadataDescriptionColumn()],it=[Ge.createEntityRefColumn({defaultKind:"component"}),Ge.createSystemColumn(),Ge.createOwnerColumn(),Ge.createSpecTypeColumn(),Ge.createSpecLifecycleColumn(),Ge.createMetadataDescriptionColumn()],_n=(0,re.A)(g=>({empty:{padding:g.spacing(2),display:"flex",justifyContent:"center"}})),xn=g=>{const{entities:S,title:L,emptyContent:$,variant:de="gridItem",columns:xe,tableOptions:He={}}=g,Ye=_n(),At={minWidth:"0",width:"100%"};return de==="gridItem"&&(At.height="calc(100% - 10px)"),i.createElement(Tt.XI,{columns:xe,title:L,style:At,emptyContent:$&&i.createElement("div",{className:Ye.empty},$),options:{search:!1,paging:!1,actionsColumnIndex:-1,padding:"dense",draggable:!1,...He},data:S})};xn.columns=Ge,xn.systemEntityColumns=X,xn.componentEntityColumns=it;const ea=(0,re.A)({input:{}},{name:"CatalogReactEntityTagPicker"}),ha=g=>{const S=ea();return i.createElement(gt,{label:"Tags",name:"tags",path:"metadata.tags",Filter:on,showCounts:g.showCounts,InputProps:{className:S.input}})},$a=g=>{var S;const{hidden:L,initialFilter:$}=g,de=(0,o.u)(o.l),{error:xe,availableTypes:He,selectedTypes:Ye,setSelectedTypes:At}=Ea();if((0,i.useEffect)(()=>{xe&&de.post({message:"Failed to load entity types",severity:"error"}),$&&At([$])},[xe,de,$,At]),He.length===0||xe)return null;const Gt=[{value:"all",label:"all"},...He.map(Nt=>({value:Nt,label:Nt}))];return L?null:i.createElement(ie.A,{pb:1,pt:1},i.createElement(Tt.l6,{label:"Type",items:Gt,selected:(S=Gt.length>1?Ye[0]:void 0)!=null?S:"all",onChange:Nt=>At(Nt==="all"?[]:[String(Nt)])}))},Ka=(0,Ae.A)({root:{color:"#f3ba37"}})(ke.A),va=g=>{const{toggleStarredEntity:S,isStarredEntity:L}=Se(g.entity);return i.createElement(F.A,{"aria-label":"favorite",color:"inherit",...g,onClick:()=>S()},i.createElement(I.Ay,{title:L?"Remove from favorites":"Add to favorites"},L?i.createElement(Ka,null):i.createElement(pe.A,null)))},xa=Le.A;function Da(g,S){if(g)return g.toLocaleLowerCase("en-US");if(S)try{return(0,p.KU)(S).kind.toLocaleLowerCase("en-US")}catch{return}}function er(g,S){const L=(0,m.nm)(),$=Da(g,S);return $&&L.getSystemIcon(`kind:${$}`)||xa}function h(g){const{kind:S,entityRef:L,...$}=g,de=er(S,L);return i.createElement(de,{...$})}const l=(0,re.A)(g=>({node:{fill:g.palette.grey[300],stroke:g.palette.grey[300],"&.primary":{fill:g.palette.primary.light,stroke:g.palette.primary.light},"&.secondary":{fill:g.palette.secondary.light,stroke:g.palette.secondary.light}},text:{fill:g.palette.getContrastText(g.palette.grey[300]),"&.primary":{fill:g.palette.primary.contrastText},"&.secondary":{fill:g.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}));function y(g){const S=(0,o.u)(W),L=(0,p.U2)(g),{loading:$,error:de,value:xe}=(0,O.default)(async()=>{const He=await S.getEntityAncestors({entityRef:L}),Ye=new Array,At=new Array;for(const Gt of He.items){const Nt=(0,p.U2)(Gt.entity),ln=Nt===He.rootEntityRef;Ye.push({id:Nt,root:ln,...Gt.entity});for(const Pn of Gt.parentEntityRefs)At.push({from:Nt,to:Pn})}return{nodes:Ye,edges:At}},[L]);return{loading:$,error:de,nodes:(xe==null?void 0:xe.nodes)||[],edges:(xe==null?void 0:xe.edges)||[]}}function z({node:g}){const S=l(),L=(0,St.Zp)(),$=(0,m.Sf)(Fa),[de,xe]=(0,i.useState)(0),[He,Ye]=(0,i.useState)(0),At=(0,i.useRef)(null);(0,i.useLayoutEffect)(()=>{if(At.current){let{height:bn,width:ta}=At.current.getBBox();bn=Math.round(bn),ta=Math.round(ta),(bn!==He||ta!==de)&&(xe(ta),Ye(bn))}},[de,He]);const Gt=10,Nt=He,ln=Nt+Gt,Pn=ln+de+Gt*2,fn=He+Gt*2,Dn=g.metadata.title||(g.kind&&g.metadata.name&&g.metadata.namespace?wt({kind:g.kind,name:g.metadata.name,namespace:g.metadata.namespace||""}):g.id),Zn=()=>{L($({kind:g.kind,namespace:g.metadata.namespace||p.oQ,name:g.metadata.name}))};return i.createElement("g",{onClick:Zn,className:S.clickable},i.createElement("rect",{className:nt()(S.node,g.root?"secondary":"primary"),width:Pn,height:fn,rx:10}),i.createElement(h,{kind:g.kind,y:Gt,x:Gt,width:Nt,height:Nt,className:nt()(S.text,g.root?"secondary":"primary")}),i.createElement("text",{ref:At,className:nt()(S.text,g.root?"secondary":"primary"),y:fn/2,x:ln+(de+Gt*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},Dn))}function Oe(g){const{loading:S,error:L,nodes:$,edges:de}=y(g.entity);return S?i.createElement(Tt.ke,null):L?i.createElement(Tt._1,{error:L}):i.createElement(i.Fragment,null,i.createElement(fe.A,{variant:"h2"},"Ancestry"),i.createElement(fe.A,{gutterBottom:!0},"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where"," ",i.createElement(Tt.N_,{to:"https://backstage.io/docs/features/software-catalog/life-of-an-entity"},"processors emitted")," ","child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations."),i.createElement(ie.A,{mt:4},i.createElement(Tt.wB,{nodes:$,edges:de,renderNode:z,direction:Tt.DT.Direction.BOTTOM_TOP,zoom:"enable-on-click"})))}const st=(0,re.A)(g=>({root:{display:"flex",flexDirection:"column"},marginTop:{marginTop:g.spacing(2)},helpIcon:{marginLeft:g.spacing(1),color:g.palette.text.disabled},monospace:{fontFamily:"monospace"}}));function Dt(g){const S=st();return i.createElement(ve.A,{...g,primaryTypographyProps:{className:S.monospace},secondaryTypographyProps:{className:S.monospace}})}function Qt(g){const S=st();return i.createElement(J.A,{className:S.monospace},g.children)}function Rn(g){return i.createElement(ie.A,{mt:2},i.createElement(v.A,{variant:"outlined"},i.createElement(ee.A,null,i.createElement(G.A,{variant:"h6",gutterBottom:!0},g.title,g.helpLink&&i.createElement(Sa,{to:g.helpLink})),g.children)))}function zn(g){if(g.match(/^url:https?:\/\//))return g.slice(4);if(g.match(/^https?:\/\//))return g}function Fn(g){const[S,L]=g.entry,$=zn(L);return i.createElement(oe.A,null,g.indent&&i.createElement(Rt.A,null),i.createElement(Dt,{primary:S,secondary:$?i.createElement(Tt.N_,{to:$},L):L}))}function Sa(g){const S=st();return i.createElement(Tt.N_,{to:g.to,className:S.helpIcon},i.createElement(et.A,{fontSize:"inherit"}))}const Ha=(0,re.A)({root:{display:"flex",flexDirection:"column"}});function ar(g){var S,L;const $=(0,o.u)(W),de=(0,p.U2)(g),xe=(S=g.metadata.annotations)==null?void 0:S[p.Eo],He=(L=g.metadata.annotations)==null?void 0:L[p.r2],{loading:Ye,error:At,value:Gt}=(0,O.default)(async()=>!xe&&!He?[]:(await $.getEntities({filter:[...xe?[{[`metadata.annotations.${p.Eo}`]:xe}]:[],...He?[{[`metadata.annotations.${p.r2}`]:He}]:[]]})).items,[xe,He]);return{loading:Ye,error:At,location:xe,originLocation:He,colocatedEntities:Gt==null?void 0:Gt.filter(Nt=>(0,p.U2)(Nt)!==de)}}function rr(g){return i.createElement(w.A,{dense:!0},g.header&&i.createElement(Fn,{key:"header",entry:g.header}),g.entities.map(S=>i.createElement(oe.A,{key:(0,p.U2)(S)},i.createElement(Rt.A,null,i.createElement(h,{kind:S.kind})),i.createElement(Dt,{primary:i.createElement(Pa,{entityRef:S})}))))}function qr(g){const{entity:S}=g,{loading:L,error:$,location:de,originLocation:xe,colocatedEntities:He}=ar(S);if(L)return i.createElement(Tt.ke,null);if($)return i.createElement(Tt._1,{error:$});if(!de&&!xe)return i.createElement(rn.A,{severity:"warning"},"Entity had no location information.");if(!(He!=null&&He.length))return i.createElement(rn.A,{severity:"info"},"There were no other entities on this location.");if(de===xe)return i.createElement(rr,{entities:He});const Ye=He.filter(Gt=>{var Nt;return((Nt=Gt.metadata.annotations)==null?void 0:Nt[p.Eo])===de}),At=He.filter(Gt=>{var Nt;return((Nt=Gt.metadata.annotations)==null?void 0:Nt[p.r2])===xe});return i.createElement(i.Fragment,null,Ye.length>0&&i.createElement(rr,{entities:Ye,header:["At the same location",de]}),At.length>0&&i.createElement(rr,{entities:At,header:["At the same origin",xe]}))}function eo(g){const S=Ha();return i.createElement(i.Fragment,null,i.createElement(fe.A,{variant:"h2"},"Colocated"),i.createElement(fe.A,null,"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL)."),i.createElement("div",{className:S.root},i.createElement(qr,{entity:g.entity})))}function kr(g){return Object.fromEntries([...Object.entries(g)].sort((S,L)=>S[0]<L[0]?-1:1))}function to(g){return i.createElement(i.Fragment,null,i.createElement(fe.A,{variant:"h2"},"Entity as JSON"),i.createElement(fe.A,null,"This is the raw entity data as received from the catalog, on JSON form."),i.createElement(fe.A,null,i.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},i.createElement(Tt.z7,{text:JSON.stringify(kr(g.entity),void 0,2),language:"json",showCopyCodeButton:!0}))))}const Ur=(0,re.A)({root:{display:"flex",flexDirection:"column"}});function Wr(g){var S,L,$;const de=Ur(),{apiVersion:xe,kind:He,metadata:Ye,spec:At,relations:Gt=[],status:Nt={}}=g.entity,ln=Bt()(ze()(Gt,fn=>fn.targetRef),"type"),Pn=(0,p.U2)(g.entity);return i.createElement(i.Fragment,null,i.createElement(fe.A,{variant:"h2"},"Overview"),i.createElement("div",{className:de.root},i.createElement(Rn,{title:"Identity"},i.createElement(w.A,{dense:!0},i.createElement(oe.A,null,i.createElement(Dt,{primary:"apiVersion",secondary:xe})),i.createElement(oe.A,null,i.createElement(Dt,{primary:"kind",secondary:He})),(At==null?void 0:At.type)&&i.createElement(oe.A,null,i.createElement(Dt,{primary:"spec.type",secondary:(S=At.type)==null?void 0:S.toString()})),Ye.uid&&i.createElement(oe.A,null,i.createElement(Dt,{primary:"uid",secondary:Ye.uid}),i.createElement(sn.A,null,i.createElement(Tt.lz,{text:Ye.uid}))),Ye.etag&&i.createElement(oe.A,null,i.createElement(Dt,{primary:"etag",secondary:Ye.etag}),i.createElement(sn.A,null,i.createElement(Tt.lz,{text:Ye.etag}))),i.createElement(oe.A,null,i.createElement(Dt,{primary:"entityRef",secondary:Pn}),i.createElement(sn.A,null,i.createElement(Tt.lz,{text:Pn}))))),i.createElement(Rn,{title:"Metadata"},!!Object.keys(Ye.annotations||{}).length&&i.createElement(w.A,{dense:!0,subheader:i.createElement(Qt,null,"Annotations",i.createElement(Sa,{to:"https://backstage.io/docs/features/software-catalog/well-known-annotations"}))},Object.entries(Ye.annotations).map(fn=>i.createElement(Fn,{key:fn[0],indent:!0,entry:fn}))),!!Object.keys(Ye.labels||{}).length&&i.createElement(w.A,{dense:!0,subheader:i.createElement(Qt,null,"Labels")},Object.entries(Ye.labels).map(fn=>i.createElement(Fn,{key:fn[0],indent:!0,entry:fn}))),!!((L=Ye.tags)!=null&&L.length)&&i.createElement(w.A,{dense:!0,subheader:i.createElement(Qt,null,"Tags")},Ye.tags.map((fn,Dn)=>i.createElement(oe.A,{key:`${fn}-${Dn}`},i.createElement(Rt.A,null),i.createElement(Dt,{primary:fn}))))),!!Gt.length&&i.createElement(Rn,{title:"Relations",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-relations"},Object.entries(ln).map(([fn,Dn],Zn)=>i.createElement("div",{key:Zn},i.createElement(w.A,{dense:!0,subheader:i.createElement(Qt,null,fn)},Dn.map(bn=>i.createElement(oe.A,{key:bn.targetRef},i.createElement(Rt.A,null,i.createElement(h,{entityRef:bn.targetRef})),i.createElement(Dt,{primary:i.createElement(Pa,{entityRef:bn.targetRef})}))))))),!!(($=Nt.items)!=null&&$.length)&&i.createElement(Rn,{title:"Status",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-statuses"},Nt.items.map((fn,Dn)=>i.createElement("div",{key:Dn},i.createElement(G.A,null,fn.level,": ",fn.type),i.createElement(ie.A,{ml:2},fn.message))))))}function Dr(g){return i.createElement(i.Fragment,null,i.createElement(fe.A,{variant:"h2"},"Entity as YAML"),i.createElement(fe.A,null,"This is the raw entity data as received from the catalog, on YAML form."),i.createElement(fe.A,null,i.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},i.createElement(Tt.z7,{text:en.Ay.stringify(kr(g.entity)),language:"yaml",showCopyCodeButton:!0}))))}const cr=(0,re.A)(g=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",backgroundColor:g.palette.background.paper},tabs:{borderRight:`1px solid ${g.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"}}));function Cr(g){const{children:S,value:L,index:$,...de}=g,xe=cr();return i.createElement("div",{role:"tabpanel",hidden:L!==$,id:`vertical-tabpanel-${$}`,"aria-labelledby":`vertical-tab-${$}`,className:xe.tabContents,...de},L===$&&i.createElement(ie.A,{pl:3,pr:3},S))}function Ar(g){return{id:`vertical-tab-${g}`,"aria-controls":`vertical-tabpanel-${g}`}}function Pr(g){const S=cr(),[L,$]=i.useState(0);return(0,i.useEffect)(()=>{$(0)},[g.open]),g.entity?i.createElement(me.A,{fullWidth:!0,maxWidth:"xl",open:g.open,onClose:g.onClose,"aria-labelledby":"entity-inspector-dialog-title",PaperProps:{className:S.fullHeightDialog}},i.createElement(kt.A,{id:"entity-inspector-dialog-title"},"Entity Inspector"),i.createElement(yt.A,{dividers:!0},i.createElement("div",{className:S.root},i.createElement(mt.A,{orientation:"vertical",variant:"scrollable",value:L,onChange:(de,xe)=>$(xe),"aria-label":"Inspector options",className:S.tabs},i.createElement(It.A,{label:"Overview",...Ar(0)}),i.createElement(It.A,{label:"Ancestry",...Ar(1)}),i.createElement(It.A,{label:"Colocated",...Ar(2)}),i.createElement(It.A,{label:"Raw JSON",...Ar(3)}),i.createElement(It.A,{label:"Raw YAML",...Ar(4)})),i.createElement(Cr,{value:L,index:0},i.createElement(Wr,{entity:g.entity})),i.createElement(Cr,{value:L,index:1},i.createElement(Oe,{entity:g.entity})),i.createElement(Cr,{value:L,index:2},i.createElement(eo,{entity:g.entity})),i.createElement(Cr,{value:L,index:3},i.createElement(to,{entity:g.entity})),i.createElement(Cr,{value:L,index:4},i.createElement(Dr,{entity:g.entity})))),i.createElement(Ne.A,null,i.createElement(De.A,{onClick:g.onClose,color:"primary"},"Close"))):null}function Nr(g){var S;const L=(0,o.u)(W),$=(S=g.metadata.annotations)==null?void 0:S[p.r2],de=g.metadata.uid,xe=$==="bootstrap:bootstrap",He=(0,O.default)(async()=>{const Dn=L.getLocationByRef($);let Zn;if(!$)Zn=Promise.resolve([]);else{const bn=`metadata.annotations.${p.r2}`;Zn=L.getEntities({filter:{[bn]:$},fields:["kind","metadata.uid","metadata.name","metadata.namespace"]}).then(ta=>ta.items)}return Promise.all([Dn,Zn]).then(([bn,ta])=>({location:bn,colocatedEntities:ta}))},[L,g]),Ye=(0,i.useCallback)(async function(){const{location:Zn}=He.value;await L.removeLocationById(Zn.id)},[L,He]),At=(0,i.useCallback)(async function(){await L.removeEntityByUid(de)},[L,de]);if(xe)return{type:"bootstrap",location:$,deleteEntity:At};const{loading:Gt,error:Nt,value:ln}=He;if(Gt)return{type:"loading"};if(Nt)return{type:"error",error:Nt};const{location:Pn,colocatedEntities:fn}=ln;return Pn?{type:"unregister",location:$,colocatedEntities:fn.map(p.sM),unregisterLocation:Ye,deleteEntity:At}:{type:"only-delete",deleteEntity:At}}const Fr=(0,re.A)({advancedButton:{fontSize:"0.7em"},dialogActions:{display:"inline-block"}}),no=({entity:g,onConfirm:S,onClose:L})=>{var $;const de=(0,o.u)(o.l),xe=(0,o.u)(o.p),He=Fr(),Ye=Nr(g),[At,Gt]=(0,i.useState)(!1),[Nt,ln]=(0,i.useState)(!1),Pn=($=xe.getOptionalString("app.title"))!=null?$:"Backstage",fn=(0,i.useCallback)(async function(){if("unregisterLocation"in Ye){ln(!0);try{await Ye.unregisterLocation(),S()}catch(ta){(0,Ce.tX)(ta),de.post({message:ta.message})}finally{ln(!1)}}},[de,S,Ye]),Dn=(0,i.useCallback)(async function(){var ta;if("deleteEntity"in Ye){ln(!0);try{await Ye.deleteEntity();const ua=(ta=g.metadata.title)!=null?ta:g.metadata.name;S(),de.post({message:`Removed entity ${ua}`,severity:"success",display:"transient"})}catch(ua){(0,Ce.tX)(ua),de.post({message:ua.message})}finally{ln(!1)}}},[de,S,Ye,g]),Zn=()=>i.createElement(Ne.A,{className:He.dialogActions},i.createElement(De.A,{onClick:L,color:"primary"},"Cancel"));return Ye.type==="loading"?i.createElement(Tt.ke,null):Ye.type==="error"?i.createElement(Tt._1,{error:Ye.error}):Ye.type==="bootstrap"?i.createElement(i.Fragment,null,i.createElement(rn.A,{severity:"info"},'You cannot unregister this entity, since it originates from a protected Backstage configuration (location "',Ye.location,'"). If you believe this is in error, please contact the ',Pn," ","integrator."),i.createElement(ie.A,{marginTop:2},!At&&i.createElement(i.Fragment,null,i.createElement(De.A,{variant:"text",size:"small",color:"primary",className:He.advancedButton,onClick:()=>Gt(!0)},"Advanced Options"),i.createElement(Zn,null)),At&&i.createElement(i.Fragment,null,i.createElement(fe.A,null,"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),i.createElement(De.A,{variant:"contained",color:"secondary",disabled:Nt,onClick:Dn},"Delete Entity"),i.createElement(Zn,null)))):Ye.type==="only-delete"?i.createElement(i.Fragment,null,i.createElement(fe.A,null,"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog."),i.createElement(De.A,{variant:"contained",color:"secondary",disabled:Nt,onClick:Dn},"Delete Entity"),i.createElement(Zn,null)):Ye.type==="unregister"?i.createElement(i.Fragment,null,i.createElement(fe.A,null,"This action will unregister the following entities:"),i.createElement(fe.A,{component:"ul"},Ye.colocatedEntities.map(bn=>i.createElement("li",{key:`${bn.kind}:${bn.namespace}/${bn.name}`},i.createElement(Pa,{entityRef:bn})))),i.createElement(fe.A,null,"Located at the following location:"),i.createElement(fe.A,{component:"ul"},i.createElement("li",null,Ye.location)),i.createElement(fe.A,null,"To undo, just re-register the entity in ",Pn,"."),i.createElement(ie.A,{marginTop:2},i.createElement(De.A,{variant:"contained",color:"secondary",disabled:Nt,onClick:fn},"Unregister Location"),!At&&i.createElement(ie.A,{component:"span",marginLeft:2},i.createElement(De.A,{variant:"text",size:"small",color:"primary",className:He.advancedButton,onClick:()=>Gt(!0)},"Advanced Options"))),At&&i.createElement(i.Fragment,null,i.createElement(ie.A,{paddingTop:4,paddingBottom:4},i.createElement(Ct.A,null)),i.createElement(fe.A,null,"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),i.createElement(De.A,{variant:"contained",color:"secondary",disabled:Nt,onClick:Dn},"Delete Entity"))):i.createElement(rn.A,{severity:"error"},"Internal error: Unknown state")},ao=g=>{const{open:S,onConfirm:L,onClose:$,entity:de}=g;return i.createElement(me.A,{open:S,onClose:$},i.createElement(kt.A,{id:"responsive-dialog-title"},"Are you sure you want to unregister this entity?"),i.createElement(yt.A,null,i.createElement(no,{entity:de,onConfirm:L,onClose:$})))};function ro(){const g=(0,o.u)(o.t),S=(0,o.u)(W),{filters:L}=qn(),{value:$,loading:de}=(0,O.default)(async()=>(await g.getBackstageIdentity()).ownershipEntityRefs,[]),{user:xe,owners:He,...Ye}=L,{["metadata.name"]:At,...Gt}=vt((0,lt.compact)(Object.values(Ye))),[{value:Nt,loading:ln},Pn]=(0,jt.default)(async Dn=>{const Zn=oo(Dn.owners,Dn.ownershipEntityRefs);if(Zn===void 0)return 0;const{totalItems:bn}=await S.queryEntities({filter:{...Dn.filter,"relations.ownedBy":Zn},limit:0});return bn},[],{loading:!0});return(0,C.A)(()=>{Object.keys(Gt).length!==0&&$!==void 0&&Pn({ownershipEntityRefs:$,owners:He,filter:Gt})},[$,He,Gt]),{count:Nt,loading:de||ln,filter:(0,i.useMemo)(()=>vn.owned($!=null?$:[]),[$]),ownershipEntityRefs:$}}function oo(g,S){var L;if(S===void 0)return;const $=(L=g==null?void 0:g.values)!=null?L:[];if($.length){const de=(0,lt.intersection)($,S);return de.length===0?void 0:de}return S}function ur(){const g=(0,o.u)(W),{filters:S}=qn(),L=(0,i.useRef)(),$=(0,i.useMemo)(()=>{const{user:He,...Ye}=S,At=(0,lt.compact)(Object.values(Ye)),Gt=vt(At),Nt={filter:Gt,limit:0};return Object.keys(Gt).length===0?(L.current=void 0,L.current):(0,lt.isEqual)(Nt,L.current)?L.current:(L.current=Nt,Nt)},[S]),{value:de,loading:xe}=(0,O.default)(async()=>{if($===void 0)return 0;const{totalItems:He}=await g.queryEntities($);return He},[$]);return{count:de,loading:xe}}function io(){const g=(0,o.u)(W),{filters:S}=qn(),{starredEntities:L}=tt(),$=(0,i.useRef)(),de=(0,i.useMemo)(()=>{const{user:At,...Gt}=S,Nt=(0,lt.compact)(Object.values(Gt)),fn={filter:{...vt(Nt),["metadata.name"]:Array.from(L).map(Dn=>(0,p.KU)(Dn).name)},limit:1e3};return(0,lt.isEqual)(fn,$.current)?$.current:($.current=fn,fn)},[S,L]),{value:xe,loading:He}=(0,O.default)(async()=>L.size?(await g.queryEntities(de)).items.map(Gt=>(0,p.U2)({kind:Gt.kind,namespace:Gt.metadata.namespace,name:Gt.metadata.name})).filter(Gt=>L.has(Gt)).length:0,[de,L]),Ye=(0,i.useMemo)(()=>vn.starred(Array.from(L)),[L]);return{count:xe,loading:He,filter:Ye}}const Kr=(0,re.A)(g=>({root:{backgroundColor:"rgba(0, 0, 0, .11)",boxShadow:"none",margin:g.spacing(1,0,1,0)},title:{margin:g.spacing(1,0,0,1),textTransform:"uppercase",fontSize:12,fontWeight:"bold"},listIcon:{minWidth:30,color:g.palette.text.primary},menuItem:{minHeight:g.spacing(6)},groupWrapper:{margin:g.spacing(1,1,2,1)}}),{name:"CatalogReactUserListPicker"});function Za(g){return[{name:"Personal",items:[{id:"owned",label:"Owned",icon:Be.A},{id:"starred",label:"Starred",icon:ke.A}]},{name:g!=null?g:"Company",items:[{id:"all",label:"All"}]}]}const $r=g=>{var S;const{initialFilter:L,availableFilters:$}=g,de=Kr(),He=(S=(0,o.u)(o.p).getOptionalString("organization.name"))!=null?S:"Company",{filters:Ye,updateFilters:At,queryParameters:{kind:Gt,user:Nt}}=qn(),ln=["starred","all"],Pn=Za(He).map(ya=>({...ya,items:ya.items.filter(({id:Ta})=>["group","user"].some(Rr=>Rr===Gt)?ln.includes(Ta):!$||$.includes(Ta))})).filter(({items:ya})=>!!ya.length),{count:fn,loading:Dn,filter:Zn}=ro(),{count:bn}=ur(),{count:ta,filter:ua,loading:Hn}=io(),Bn=(0,i.useMemo)(()=>[Nt].flat()[0],[Nt]),[Jn,ga]=(0,i.useState)(Bn!=null?Bn:L),Ra=(0,i.useMemo)(()=>({all:bn,starred:ta,owned:fn}),[ta,fn,bn]);(0,i.useEffect)(()=>{Bn&&ga(Bn)},[Bn]);const fa=Dn||Hn;return(0,i.useEffect)(()=>{!fa&&Jn&&Jn!=="all"&&Ra[Jn]===0&&ga("all")},[fa,Ra,Jn,ga]),(0,i.useEffect)(()=>{if(!Jn||fa)return;At({user:(()=>Jn==="owned"?Zn:Jn==="starred"?ua:vn.all())()})},[Jn,ua,Zn,At,fa]),i.createElement(v.A,{className:de.root},Pn.map(ya=>i.createElement(i.Fragment,{key:ya.name},i.createElement(G.A,{variant:"subtitle2",component:"span",className:de.title},ya.name),i.createElement(v.A,{className:de.groupWrapper},i.createElement(w.A,{disablePadding:!0,dense:!0,role:"menu","aria-label":ya.name},ya.items.map(Ta=>{var Rr,Oa;return i.createElement(ot.A,{role:"none presentation",key:Ta.id,divider:!0,onClick:()=>ga(Ta.id),selected:Ta.id===((Rr=Ye.user)==null?void 0:Rr.value),className:de.menuItem,disabled:Ra[Ta.id]===0,"data-testid":`user-picker-${Ta.id}`,tabIndex:0,ContainerProps:{role:"menuitem"}},Ta.icon&&i.createElement(Rt.A,{className:de.listIcon},i.createElement(Ta.icon,{fontSize:"small"})),i.createElement(ve.A,null,i.createElement(G.A,{variant:"body1"},Ta.label," ")),i.createElement(sn.A,null,(Oa=Ra[Ta.id])!=null?Oa:"-"))}))))))},Mr=(0,re.A)({input:{}},{name:"CatalogReactEntityProcessingStatusPickerPicker"}),_r=i.createElement(Et.A,{fontSize:"small"}),dr=i.createElement(Ft.A,{fontSize:"small"}),Sr=()=>{const g=Mr(),{updateFilters:S}=qn(),[L,$]=(0,i.useState)([]);function de(Ye){S({orphan:Ye?new ia(Ye):void 0})}function xe(Ye){S({error:Ye?new na(Ye):void 0})}const He=["Is Orphan","Has Error"];return i.createElement(ie.A,{pb:1,pt:1},i.createElement(G.A,{variant:"button",component:"label"},"Processing Status",i.createElement(Mt.Ay,{multiple:!0,disableCloseOnSelect:!0,options:He,value:L,onChange:(Ye,At)=>{$(At),de(At.includes("Is Orphan")),xe(At.includes("Has Error"))},renderOption:(Ye,{selected:At})=>i.createElement(_e.A,{control:i.createElement(he.A,{icon:_r,checkedIcon:dr,checked:At}),onClick:Gt=>Gt.preventDefault(),label:Ye}),size:"small",popupIcon:i.createElement(Qe.A,{"data-testid":"processing-status-picker-expand"}),renderInput:Ye=>i.createElement(Re.A,{...Ye,className:g.input,variant:"outlined"})})))},mr=(0,re.A)({input:{}},{name:"CatalogReactEntityNamespacePicker"}),or=()=>{const g=mr();return i.createElement(gt,{label:"Namespace",name:"namespace",path:"metadata.namespace",Filter:oa,InputProps:{className:g.input}})},so=(0,re.A)(g=>({code:{borderRadius:6,margin:g.spacing(2,0),background:g.palette.type==="dark"?"#444":g.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function lo(g,S){var L,$;const de=(S==null?void 0:S.kind)||"Component",xe=(S==null?void 0:S.metadata.name)||"example",He=((L=S==null?void 0:S.spec)==null?void 0:L.type)||"website",Ye=(($=S==null?void 0:S.spec)==null?void 0:$.owner)||"user:default/guest",At=`apiVersion: backstage.io/v1alpha1
kind: ${de}
metadata:
  name: ${xe}
  annotations:${g.map(ln=>`
    ${ln}: value`).join("")}
spec:
  type: ${He}
  owner: ${Ye}`;let Gt=6;const Nt=[];return g.forEach(()=>{Nt.push(Gt),Gt++}),{yamlText:At,lineNumbers:Nt}}function co(g,S="Component"){const L=g.length<=1;return i.createElement(i.Fragment,null,"The ",L?"annotation":"annotations"," ",g.map($=>i.createElement("code",null,$)).reduce(($,de)=>i.createElement(i.Fragment,null,$,", ",de))," ",L?"is":"are"," missing. You need to add the"," ",L?"annotation":"annotations"," to your ",S," if you want to enable this tool.")}function uo(g){let S;try{S=(0,Kt.u)().entity}catch{}const{annotation:L,readMoreUrl:$}=g,de=Array.isArray(L)?L:[L],xe=$||"https://backstage.io/docs/features/software-catalog/well-known-annotations",He=so(),Ye=(S==null?void 0:S.kind)||"Component",{yamlText:At,lineNumbers:Gt}=lo(de,S);return i.createElement(Tt.pp,{missing:"field",title:"Missing Annotation",description:co(de,Ye),action:i.createElement(i.Fragment,null,i.createElement(G.A,{variant:"body1"},"Add the annotation to your ",Ye," YAML as shown in the highlighted example below:"),i.createElement(ie.A,{className:He.code},i.createElement(Tt.z7,{text:At,language:"yaml",showLineNumbers:!0,highlightedNumbers:Gt,customStyle:{background:"inherit",fontSize:"115%"}})),i.createElement(De.A,{color:"primary",component:Tt.N_,to:xe},"Read more"))})}function zr(g){var S;const{children:L,value:$}=g,[de,xe]=useState((S=$==null?void 0:$.filters)!=null?S:{}),He=useCallback(Gt=>{xe(Nt=>{const ln=typeof Gt=="function"?Gt(Nt):Gt;return{...Nt,...ln}})},[]),Ye=useMemo(()=>({entities:[],backendEntities:[],queryParameters:{}}),[]),At=useMemo(()=>{var Gt,Nt,ln,Pn,fn;return{entities:(Gt=$==null?void 0:$.entities)!=null?Gt:Ye.entities,backendEntities:(Nt=$==null?void 0:$.backendEntities)!=null?Nt:Ye.backendEntities,updateFilters:(ln=$==null?void 0:$.updateFilters)!=null?ln:He,filters:de,loading:(Pn=$==null?void 0:$.loading)!=null?Pn:!1,queryParameters:(fn=$==null?void 0:$.queryParameters)!=null?fn:Ye.queryParameters,error:$==null?void 0:$.error}},[$,Ye,de,He]);return React.createElement(da.Provider,{value:At},L)}},76025:($n,Zt,e)=>{"use strict";e.d(Zt,{C:()=>A});var o=e(29835),m=e(23180),p=e(92651),j=e(58054),B=e(72501),i=e(7031),k=e(9402),Ze=e(75625),Ke=e(39330),a=e(80109),De=e(15303),Ie=e(45250),ie=e.n(Ie),G=e(65398),Ve=e.n(G),he=e(14041),_e=e(67720);const re=Object.freeze({createNameColumn(F){function Ae(fe){var ve;return((ve=fe.metadata)==null?void 0:ve.title)||(0,p.SE)(fe,{defaultKind:F==null?void 0:F.defaultKind})}return{title:"Name",field:"resolved.entityRef",highlight:!0,customSort({entity:fe},{entity:ve}){return Ae(fe).localeCompare(Ae(ve))},render:({entity:fe})=>he.createElement(p.zI,{entityRef:fe,defaultKind:(F==null?void 0:F.defaultKind)||"Component"})}},createSystemColumn(){return{title:"System",field:"resolved.partOfSystemRelationTitle",render:({resolved:F})=>he.createElement(p.iI,{entityRefs:F.partOfSystemRelations,defaultKind:"system"})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:F})=>he.createElement(p.iI,{entityRefs:F.ownedByRelations,defaultKind:"group"})}},createSpecTargetsColumn(){return{title:"Targets",field:"entity.spec.targets",render:({entity:F})=>{var Ae,fe;return he.createElement(he.Fragment,null,(((Ae=F==null?void 0:F.spec)==null?void 0:Ae.targets)||((fe=F==null?void 0:F.spec)==null?void 0:fe.target))&&he.createElement(m.Mm,{text:(F.spec.targets||[F.spec.target]).join(", "),placement:"bottom-start"}))}}},createSpecTypeColumn(F={hidden:!1}){return{title:"Type",field:"entity.spec.type",hidden:F.hidden,width:"auto"}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"entity.spec.lifecycle"}},createMetadataDescriptionColumn(){return{title:"Description",field:"entity.metadata.description",render:({entity:F})=>he.createElement(m.Mm,{text:F.metadata.description,placement:"bottom-start"}),width:"auto"}},createTagsColumn(){return{title:"Tags",field:"entity.metadata.tags",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:F})=>he.createElement(he.Fragment,null,F.metadata.tags&&F.metadata.tags.map(Ae=>he.createElement(_e.A,{key:Ae,label:Ae,size:"small",variant:"outlined",style:{marginBottom:"0px"}}))),width:"auto"}},createTitleColumn(F){return{title:"Title",field:"entity.metadata.title",hidden:F==null?void 0:F.hidden,searchable:!0}},createLabelColumn(F,Ae){return{title:(Ae==null?void 0:Ae.title)||"Label",field:"entity.metadata.labels",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:fe})=>{var ve;const J=(ve=fe.metadata)==null?void 0:ve.labels,v=J&&J[F]||(Ae==null?void 0:Ae.defaultValue);return he.createElement(he.Fragment,null,v&&he.createElement(_e.A,{key:v,label:v,size:"small",variant:"outlined"}))},width:"auto"}},createNamespaceColumn(){return{title:"Namespace",field:"entity.metadata.namespace",width:"auto"}}});function Re(F){const{columns:Ae,data:fe,next:ve,prev:J}=F;return he.createElement(m.XI,{columns:Ae,data:fe,options:{paginationPosition:"both",pageSizeOptions:[],showFirstLastPageButtons:!1,pageSize:Number.MAX_SAFE_INTEGER,emptyRowsWhenPaging:!1},onPageChange:v=>{v>0?ve==null||ve():J==null||J()},page:J?1:0,totalCount:ve?Number.MAX_VALUE:Number.MAX_SAFE_INTEGER,localization:{pagination:{labelDisplayedRows:""}}})}const I=(0,i.A)({root:{color:"#f3ba37"}})(a.A),c=(F,Ae)=>{const fe=ve=>ve.metadata.title||(0,p.SE)(ve,{defaultKind:"Component"});return fe(F).localeCompare(fe(Ae))},R=({filters:F,entities:Ae})=>{var fe;const ve=F.type===void 0;return[re.createTitleColumn({hidden:!0}),re.createNameColumn({defaultKind:(fe=F.kind)==null?void 0:fe.value}),...J(),re.createMetadataDescriptionColumn(),re.createTagsColumn()];function J(){var v;const ee=[re.createSystemColumn(),re.createOwnerColumn(),re.createSpecTypeColumn({hidden:!ve}),re.createSpecLifecycleColumn()];switch((v=F.kind)==null?void 0:v.value){case"user":return[];case"domain":case"system":return[re.createOwnerColumn()];case"group":case"template":return[re.createSpecTypeColumn({hidden:!ve})];case"location":return[re.createSpecTypeColumn({hidden:!ve}),re.createSpecTargetsColumn()];default:return Ae.every(oe=>oe.metadata.namespace==="default")?ee:[...ee,re.createNamespaceColumn()]}}},A=F=>{var Ae,fe,ve,J;const{columns:v=R,tableOptions:ee,subtitle:oe,emptyContent:Rt}=F,{isStarredEntity:w,toggleStarredEntity:sn}=(0,p.IT)(),me=(0,p.nK)(),{loading:kt,error:yt,entities:mt,filters:It,pageInfo:Ne}=me,Ct=!!Ne,ot=(0,he.useMemo)(()=>typeof v=="function"?v(me):v,[v,me]);if(yt)return he.createElement("div",null,he.createElement(m.Bp,{severity:"error",title:"Could not fetch catalog entities."},he.createElement(m.z7,{language:"text",text:yt.toString()})));const zt=[({entity:O})=>{var M;const te=(M=O.metadata.annotations)==null?void 0:M[o._P],ge="View";return{icon:()=>he.createElement(he.Fragment,null,he.createElement(B.A,{style:k.A},ge),he.createElement(Ke.A,{fontSize:"small"})),tooltip:ge,disabled:!te,onClick:()=>{te&&window.open(te,"_blank")}}},({entity:O})=>{var M;const te=(M=O.metadata.annotations)==null?void 0:M[o.P],ge="Edit";return{icon:()=>he.createElement(he.Fragment,null,he.createElement(B.A,{style:k.A},ge),he.createElement(Ze.A,{fontSize:"small"})),tooltip:ge,disabled:!te,onClick:()=>{te&&window.open(te,"_blank")}}},({entity:O})=>{const M=w(O),te=M?"Remove from favorites":"Add to favorites";return{cellStyle:{paddingLeft:"1em"},icon:()=>he.createElement(he.Fragment,null,he.createElement(B.A,{style:k.A},te),M?he.createElement(I,null):he.createElement(De.A,null)),tooltip:te,onClick:()=>sn(O)}}],Tt=((Ae=It.kind)==null?void 0:Ae.value)||"",Kt=((fe=It.type)==null?void 0:fe.value)||"",ft=[(0,Ie.capitalize)((J=(ve=It.user)==null?void 0:ve.value)!=null?J:"all"),Kt,Ve()(Tt)].filter(O=>O).join(" "),$t=`${ft} (${mt.length})`,an=F.actions||zt,St={actionsColumnIndex:-1,loadingType:"linear",showEmptyDataSourceMessage:!kt,padding:"dense",...ee};if(Ct)return he.createElement(Re,{columns:ot,emptyContent:Rt,isLoading:kt,title:$t,actions:an,subtitle:oe,options:St,data:mt.map(_),next:Ne.next,prev:Ne.prev});const jt=mt.sort(c).map(_),D=20,U=jt.length>D;return he.createElement(m.XI,{isLoading:kt,columns:ot,options:{paging:U,pageSize:D,pageSizeOptions:[20,50,100],...St},title:`${ft} (${mt.length})`,data:jt,actions:an,subtitle:oe,emptyContent:Rt})};A.columns=re;function _(F){const Ae=(0,j.g)(F,o.jn,{kind:"system"}),fe=(0,j.g)(F,o.vv);return{entity:F,resolved:{name:(0,p.SE)(F,{defaultKind:"Component"}),entityRef:(0,o.U2)(F),ownedByRelationsTitle:fe.map(ve=>(0,p.SE)(ve,{defaultKind:"group"})).join(", "),ownedByRelations:fe,partOfSystemRelationTitle:Ae.map(ve=>(0,p.SE)(ve,{defaultKind:"system"})).join(", "),partOfSystemRelations:Ae}}}},93905:($n,Zt,e)=>{"use strict";e.d(Zt,{E:()=>me});var o=e(29835),m=e(23180),p=e(7877),j=e(11638),B=e(92651),i=e(58054),k=e(26343),Ze=e(46423),Ke=e(5951),a=e(37197),De=e(71677),Ie=e(29365),ie=e(55197),G=e(28233),Ve=e(77125),he=e(74219),_e=e(14041),re=e(18690),Re=e(58837),I=e(85005),c=e(71407),R=e(26314),A=e(90749),_=e(99993),F=e(92399),Ae=e(51100),fe=e(19659);function ve(kt){var yt;const{unregisterEntityOptions:mt,isUnregisterAllowed:It,onUnregisterEntity:Ne,onClose:Ct}=kt,ot=typeof(mt==null?void 0:mt.disableUnregister)=="boolean",zt=(yt=!It||(ot?!!(mt!=null&&mt.disableUnregister):(mt==null?void 0:mt.disableUnregister)==="disable"))!=null?yt:!1;let Tt=_e.createElement(_e.Fragment,null);return(mt==null?void 0:mt.disableUnregister)!=="hidden"&&(Tt=_e.createElement(k.A,{onClick:()=>{Ct(),Ne()},disabled:zt},_e.createElement(Ze.A,null,_e.createElement(F.A,{fontSize:"small"})),_e.createElement(Ke.A,{primary:"Unregister entity"}))),_e.createElement(_e.Fragment,null,Tt)}const J=(0,Re.A)(kt=>({button:{color:kt.page.fontColor}}),{name:"PluginCatalogEntityContextMenu"});function v(kt){const{UNSTABLE_extraContextMenuItems:yt,UNSTABLE_contextMenuOptions:mt,onUnregisterEntity:It,onInspectEntity:Ne}=kt,[Ct,ot]=(0,_e.useState)(),zt=J(),Kt=(0,A.Az)(_.Nf).allowed,lt=D=>{ot(D.currentTarget)},ft=()=>{ot(void 0)},$t=(0,p.u)(p.l),[an,St]=(0,Ae.A)();(0,_e.useEffect)(()=>{!an.error&&an.value&&$t.post({message:"Copied!",severity:"info",display:"transient"})},[an,$t]);const jt=yt&&[...yt.map(D=>_e.createElement(k.A,{key:D.title,onClick:()=>{ft(),D.onClick()}},_e.createElement(Ze.A,null,_e.createElement(D.Icon,{fontSize:"small"})),_e.createElement(Ke.A,{primary:D.title}))),_e.createElement(a.A,{key:"the divider is here!"})];return _e.createElement(_e.Fragment,null,_e.createElement(De.Ay,{title:"More",arrow:!0},_e.createElement(Ie.A,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true","aria-expanded":!!Ct,role:"button",onClick:lt,"data-testid":"menu-button",className:zt.button,id:"long-menu"},_e.createElement(c.A,null))),_e.createElement(ie.Ay,{open:Boolean(Ct),onClose:ft,anchorEl:Ct,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},"aria-labelledby":"long-menu"},_e.createElement(G.A,{autoFocusItem:Boolean(Ct)},jt,_e.createElement(ve,{unregisterEntityOptions:mt,isUnregisterAllowed:Kt,onUnregisterEntity:It,onClose:ft}),_e.createElement(k.A,{onClick:()=>{ft(),Ne()}},_e.createElement(Ze.A,null,_e.createElement(I.A,{fontSize:"small"})),_e.createElement(Ke.A,{primary:"Inspect entity"})),_e.createElement(k.A,{onClick:()=>{ft(),St(window.location.toString())}},_e.createElement(Ze.A,null,_e.createElement(R.A,{fontSize:"small"})),_e.createElement(Ke.A,{primary:"Copy entity URL"})))))}const ee="plugin.catalog.entityLayoutRoute",oe=()=>null;(0,j.h3)(oe,ee,!0),(0,j.h3)(oe,"core.gatherMountPoints",!0);function Rt(kt){const{entity:yt,title:mt}=kt;return _e.createElement(Ve.A,{display:"inline-flex",alignItems:"center",height:"1em",maxWidth:"100%"},_e.createElement(Ve.A,{component:"span",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},yt?_e.createElement(B.d5,{entityRef:yt,hideIcon:!0}):mt),yt&&_e.createElement(B.uR,{entity:yt}))}function w(kt,yt,mt,It){var Ne,Ct,ot,zt,Tt;const Kt=(Ne=kt!=null?kt:It==null?void 0:It.kind)!=null?Ne:"",lt=(Ct=yt!=null?yt:It==null?void 0:It.metadata.namespace)!=null?Ct:"";return{headerTitle:`${(Tt=(zt=(ot=It==null?void 0:It.metadata.title)!=null?ot:mt)!=null?zt:It==null?void 0:It.metadata.name)!=null?Tt:""}${lt&&lt!==o.oQ?` in ${lt}`:""}`,headerType:(()=>{let $t=Kt.toLocaleLowerCase("en-US");return It&&It.spec&&"type"in It.spec&&($t+=" \u2014 ",$t+=It.spec.type.toLocaleLowerCase("en-US")),$t})()}}function sn(kt){var yt,mt;const{entity:It}=kt,Ne=(0,i.g)(It,o.vv);return _e.createElement(_e.Fragment,null,Ne.length>0&&_e.createElement(m.ST,{label:"Owner",contentTypograpyRootComponent:"p",value:_e.createElement(B.iI,{entityRefs:Ne,defaultKind:"Group",color:"inherit"})}),((yt=It.spec)==null?void 0:yt.lifecycle)&&_e.createElement(m.ST,{label:"Lifecycle",value:(mt=It.spec.lifecycle)==null?void 0:mt.toString()}))}const me=kt=>{var yt,mt,It;const{UNSTABLE_extraContextMenuItems:Ne,UNSTABLE_contextMenuOptions:Ct,children:ot,NotFoundComponent:zt}=kt,{kind:Tt,namespace:Kt,name:lt}=(0,j.KS)(B.sF),{entity:ft,loading:$t,error:an}=(0,i.a)(),St=(0,re.zy)(),jt=(0,j.OJ)(ot,rn=>rn.selectByComponentData({key:ee,withStrictError:"Child of EntityLayout must be an EntityLayout.Route"}).getElements().flatMap(({props:Ft})=>{if(ft){if(Ft.if&&!Ft.if(ft))return[]}else return[];return[{path:Ft.path,title:Ft.title,children:Ft.children,tabProps:Ft.tabProps}]}),[ft]),{headerTitle:D,headerType:U}=w(Tt,Kt,lt,ft),[O,M]=(0,_e.useState)(!1),[te,ge]=(0,_e.useState)(!1),ze=(0,re.Zp)(),bt=(0,j.Sf)(fe.r),Qe=(0,j.Sf)(fe.u),Mt=async()=>{M(!1),ge(!1),ze(Qe?Qe():bt())};return(0,_e.useEffect)(()=>{M(!1),ge(!1)},[St.pathname]),_e.createElement(m.YW,{themeId:(It=(mt=(yt=ft==null?void 0:ft.spec)==null?void 0:yt.type)==null?void 0:mt.toString())!=null?It:"home"},_e.createElement(m.Y9,{title:_e.createElement(Rt,{title:D,entity:ft}),pageTitleOverride:D,type:U},ft&&_e.createElement(_e.Fragment,null,_e.createElement(sn,{entity:ft}),_e.createElement(v,{UNSTABLE_extraContextMenuItems:Ne,UNSTABLE_contextMenuOptions:Ct,onUnregisterEntity:()=>M(!0),onInspectEntity:()=>ge(!0)}))),$t&&_e.createElement(m.ke,null),ft&&_e.createElement(m.kE,{routes:jt}),an&&_e.createElement(m.UC,null,_e.createElement(he.A,{severity:"error"},an.toString())),!$t&&!an&&!ft&&_e.createElement(m.UC,null,zt||_e.createElement(m.Bp,{title:"Entity not found"},"There is no ",Tt," with the requested"," ",_e.createElement(m.N_,{to:"https://backstage.io/docs/features/software-catalog/references"},"kind, namespace, and name"),".")),_e.createElement(B.Id,{open:O,entity:ft,onConfirm:Mt,onClose:()=>M(!1)}),_e.createElement(B.qq,{open:te,entity:ft,onClose:()=>ge(!1)}))};me.Route=oe},19659:($n,Zt,e)=>{"use strict";e.d(Zt,{D:()=>$t,a:()=>zt,b:()=>jt,c:()=>an,r:()=>U,u:()=>D,v:()=>St});var o=e(29835);function m(O){const{years:M=0,months:te=0,weeks:ge=0,days:ze=0,hours:bt=0,minutes:Qe=0,seconds:Mt=0,milliseconds:rn=0}=O;return((((M*365+te*30+ge*7+ze)*24+bt)*60+Qe)*60+Mt)*1e3+rn}var p=e(25033),j=e.n(p),B=e(25295),i=e.n(B),k=e(96403),Ze=e.n(k),Ke=e(92651),a=e(14451),De=e(63287),Ie=e(17400),ie=e(69550),G=e(69595),Ve=e(52755),he=e(89350),_e=e(33602),re=e(48108),Re=e(48972),I=e(45250),c=e(11638);const R={seconds:10},A={milliseconds:50},_=ie.A,F={api:Ie.A,component:he.A,system:De.A,resource:Re.A,domain:a.A,location:Ve.A,user:re.A,group:_e.A,template:G.A};function Ae(O){return{async:O.async,render:({entityRef:M,entity:te,context:ge})=>({snapshot:(0,Ke.Tj)(te||M,ge),loadEntity:O.async})}}var fe=(O,M,te)=>{if(!M.has(O))throw TypeError("Cannot "+te)},ve=(O,M,te)=>(fe(O,M,"read from private field"),te?te.call(O):M.get(O)),J=(O,M,te)=>{if(M.has(O))throw TypeError("Cannot add the same private member more than once");M instanceof WeakSet?M.add(O):M.set(O,te)},v=(O,M,te,ge)=>(fe(O,M,"write to private field"),ge?ge.call(O,te):M.set(O,te),te),ee=(O,M,te)=>(fe(O,M,"access private method"),te),oe,Rt,w,sn,me,kt,yt,mt,It,Ne,Ct;const ot=class Xo{constructor(M){J(this,kt),J(this,mt),J(this,Ne),J(this,oe,void 0),J(this,Rt,void 0),J(this,w,void 0),J(this,sn,void 0),J(this,me,void 0);var te,ge,ze,bt;const Qe=(te=M.cacheTtl)!=null?te:R,Mt=(ge=M.batchDelay)!=null?ge:A,rn=(ze=M.renderer)!=null?ze:Ae({async:!0}),Ft={};if(Object.entries(F).forEach(([Et,we])=>{Ft[Et.toLocaleLowerCase("en-US")]=we}),Object.entries((bt=M.kindIcons)!=null?bt:{}).forEach(([Et,we])=>{Ft[Et.toLocaleLowerCase("en-US")]=we}),rn.async){if(!M.catalogApi)throw new TypeError("Asynchronous rendering requires a catalog API");v(this,w,ee(this,mt,It).call(this,{cacheTtl:Qe,batchDelay:Mt,renderer:rn,catalogApi:M.catalogApi}))}v(this,Rt,m(Qe)),v(this,oe,new Map),v(this,sn,Ft),v(this,me,rn)}static createLocal(){return new Xo({renderer:Ae({async:!1})})}static create(M){return new Xo(M)}forEntity(M,te){const{entityRef:ge,kind:ze,entity:bt,needsLoad:Qe}=ee(this,kt,yt).call(this,M),Mt=Et=>{const{snapshot:we}=ve(this,me).render({entityRef:ge,loading:Et.loading,entity:Et.entity,context:te||{}});return{...we,entityRef:ge,Icon:ee(this,Ne,Ct).call(this,we.Icon,ze)}};let rn;try{rn=Mt({loading:Qe,entity:bt})}catch{rn={primaryTitle:ge,entityRef:ge}}const Ft=Qe?new(Ze())(Et=>{let we=!1;return Promise.resolve().then(()=>{var nt;return(nt=ve(this,w))==null?void 0:nt.load(ge)}).then(nt=>{if(!we&&nt&&nt.metadata.etag!==(bt==null?void 0:bt.metadata.etag)){const Lt=Mt({loading:!1,entity:nt});Et.next(Lt)}}).catch(()=>{}).finally(()=>{we||Et.complete()}),()=>{we=!0}}):void 0;return{snapshot:rn,update$:Ft}}};oe=new WeakMap,Rt=new WeakMap,w=new WeakMap,sn=new WeakMap,me=new WeakMap,kt=new WeakSet,yt=function(O){if(typeof O!="string")return{entity:O,kind:O.kind,entityRef:(0,o.U2)(O),needsLoad:!1};const M=ve(this,oe).get(O),te=M==null?void 0:M.entity,ze=(!M||Date.now()-M.updatedAt>ve(this,Rt))&&ve(this,me).async!==!1&&ve(this,w)!==void 0;return{entity:te,kind:(0,o.KU)(O).kind,entityRef:O,needsLoad:ze}},mt=new WeakSet,It=function(O){const M=m(O.cacheTtl),te=m(O.batchDelay);return new(j())(async ge=>{const{items:ze}=await O.catalogApi.getEntitiesByRefs({entityRefs:ge}),bt=Date.now();return ge.forEach((Qe,Mt)=>{ve(this,oe).set(Qe,{updatedAt:bt,entity:ze[Mt]})}),ze},{name:"DefaultEntityPresentationApi",cacheMap:new(i())(M),maxBatchSize:100,batchScheduleFn:te?ge=>setTimeout(ge,te):void 0})},Ne=new WeakSet,Ct=function(O,M){var te;return O||(O===!1?!1:(te=ve(this,sn)[M.toLocaleLowerCase("en-US")])!=null?te:_)};let zt=ot;async function Tt({storageApi:O}){var M;const te=O.forBucket("settings"),ge=O.forBucket("starredEntities"),ze=te.snapshot("starredEntities").value;if(!(0,I.isArray)(ze))return;const bt=new Set((M=ge.snapshot("entityRefs").value)!=null?M:[]);ze.filter(I.isString).map(Qe=>Qe.split(":")).filter(Qe=>Qe.length===4&&Qe[0]==="entity").map(([Qe,Mt,rn,Ft])=>(0,o.U2)({kind:Mt,namespace:rn,name:Ft})).forEach(Qe=>bt.add(Qe)),await ge.set("entityRefs",Array.from(bt)),await te.remove("starredEntities")}var Kt=Object.defineProperty,lt=(O,M,te)=>M in O?Kt(O,M,{enumerable:!0,configurable:!0,writable:!0,value:te}):O[M]=te,ft=(O,M,te)=>(lt(O,typeof M!="symbol"?M+"":M,te),te);class $t{constructor(M){ft(this,"settingsStore"),ft(this,"starredEntities"),ft(this,"subscribers",new Set),ft(this,"observable",new(Ze())(ge=>(ge.next(new Set(this.starredEntities)),this.subscribers.add(ge),()=>{this.subscribers.delete(ge)})));var te;Tt(M).then(),this.settingsStore=M.storageApi.forBucket("starredEntities"),this.starredEntities=new Set((te=this.settingsStore.snapshot("entityRefs").value)!=null?te:[]),this.settingsStore.observe$("entityRefs").subscribe({next:ge=>{var ze;this.starredEntities=new Set((ze=ge.value)!=null?ze:[]),this.notifyChanges()}})}async toggleStarred(M){this.starredEntities.has(M)?this.starredEntities.delete(M):this.starredEntities.add(M),await this.settingsStore.set("entityRefs",Array.from(this.starredEntities))}starredEntitie$(){return this.observable}notifyChanges(){for(const M of this.subscribers)M.next(new Set(this.starredEntities))}}const an=(0,c.Il)({id:"create-component",optional:!0}),St=(0,c.Il)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),jt=(0,c.Il)({id:"create-from-template",optional:!0,params:["namespace","templateName"]}),D=(0,c.Il)({id:"catalog:unregister-redirect",optional:!0}),U=(0,c.HM)({id:"catalog"})},22073:($n,Zt,e)=>{"use strict";e.d(Zt,{BH:()=>sn,E:()=>Wt,Gd:()=>mt,JF:()=>$e,N8:()=>rn,Sz:()=>Et,TZ:()=>Mt,VF:()=>St,Wm:()=>jt,XQ:()=>bt,Z9:()=>ze,bb:()=>Lt,ex:()=>yt,kX:()=>ot,kn:()=>me,mF:()=>Kt,sU:()=>Yt,sW:()=>Ct,yE:()=>we,yP:()=>nt,yW:()=>Qe});var o=e(19659),m=e(14041),p=e(58837),j=e(99703),B=e(76891),i=e(61477),k=e(93453),Ze=e(64947),Ke=e(77125),a=e(92651),De=e(58054),Ie=e(65398),ie=e.n(Ie),G=e(7877),Ve=e(11638),he=e(91638),_e=e(74219),re=e(18690),Re=e(3399),I=e(23180),c=e(29835),R=e(75757),A=e(92805),_=e(25033),F=e.n(_),Ae=e(96403),fe=e.n(Ae),ve=e(45250),J=e.n(ve);function v(){const se=useApi(catalogApiRef),{error:ke,loading:pe,value:Le}=useAsync(async()=>await se.getEntityFacets({facets:["kind"]}).then(pt=>{var Bt;return((Bt=pt.facets.kind)==null?void 0:Bt.map(en=>en.value).sort())||[]}),[se]);return{loading:pe,error:ke,allKinds:Le!=null?Le:[]}}function ee(se,ke,pe){let Le=se;return ke&&(Le=Le.filter(pt=>ke.some(Bt=>Bt.toLocaleLowerCase("en-US")===pt.toLocaleLowerCase("en-US")))),pe&&!se.some(pt=>pt.toLocaleLowerCase("en-US")===pe.toLocaleLowerCase("en-US"))&&(Le=Le.concat([pe])),Le.sort().reduce((pt,Bt)=>(pt[Bt.toLocaleLowerCase("en-US")]=Bt,pt),{})}const oe=(0,p.A)(se=>(0,j.A)({root:{...se.typography.h4}}));function Rt(se){var ke,pe;const{initialFilter:Le="component",allowedKinds:et}=se,pt=oe(),{allKinds:Bt}=v(),{filters:en,updateFilters:Ce,queryParameters:{kind:Be}}=useEntityList(),C=useMemo(()=>[Be].flat()[0],[Be]),[W,Q]=useState((pe=C!=null?C:(ke=en.kind)==null?void 0:ke.value)!=null?pe:Le);useEffect(()=>{C&&Q(C)},[C]),useEffect(()=>{var ct,ut;(ct=en.kind)!=null&&ct.value&&Q((ut=en.kind)==null?void 0:ut.value)},[en.kind]),useEffect(()=>{Ce({kind:W?new EntityKindFilter(W):void 0})},[W,Ce]);const rt=ee(Bt,et,W);return React.createElement(Select,{input:React.createElement(InputBase,null),value:W.toLocaleLowerCase("en-US"),onChange:ct=>Q(ct.target.value),classes:pt},Object.keys(rt).map(ct=>React.createElement(MenuItem,{value:ct,key:ct},`${pluralize(rt[ct])}`)))}function w(se){const{open:ke,onClose:pe,onConfirm:Le,entity:et}=se,[pt,Bt]=(0,m.useState)(!1),en=(0,G.u)(a.vp),Ce=(0,G.u)(G.l),Be=async()=>{Bt(!0);try{const C=et.metadata.uid;await en.removeEntityByUid(C),Le()}catch(C){(0,Re.tX)(C),Ce.post({message:C.message})}finally{Bt(!1)}};return m.createElement(B.A,{open:ke,onClose:pe},m.createElement(i.A,{id:"responsive-dialog-title"},"Are you sure you want to delete this entity?"),m.createElement(k.A,null,m.createElement(Ze.A,{variant:"contained",color:"secondary",disabled:pt,onClick:Be},"Delete"),m.createElement(Ze.A,{onClick:pe,color:"primary"},"Cancel")))}function sn(se){var ke,pe;return((pe=(ke=se==null?void 0:se.metadata)==null?void 0:ke.annotations)==null?void 0:pe["backstage.io/orphan"])==="true"}function me(){const se=(0,re.Zp)(),ke=(0,Ve.Sf)(o.r),[pe,Le]=(0,m.useState)(!1),{entity:et}=(0,De.u)(),pt=async()=>{Le(!1),se(ke())};return m.createElement(m.Fragment,null,m.createElement(_e.A,{severity:"warning",onClick:()=>Le(!0)},"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete."),m.createElement(w,{open:pe,entity:et,onConfirm:pt,onClose:()=>Le(!1)}))}async function kt(se,ke){var pe;const Le=(pe=se.relations)==null?void 0:pe.map(pt=>pt.targetRef);if(!Le||(Le==null?void 0:Le.length)<1||Le.length>1e3)return[];const et=await ke.getEntitiesByRefs({entityRefs:Le,fields:["kind","metadata.name","metadata.namespace"]});return Le.filter((pt,Bt)=>et.items[Bt]===void 0)}async function yt(se,ke){const pe=ke.apis.get(a.vp);if(!pe)throw new Error(`No implementation available for ${a.vp}`);return(await kt(se,pe)).length>0}function mt(){const{entity:se}=(0,De.u)(),ke=(0,G.u)(a.vp),{loading:pe,error:Le,value:et}=(0,he.default)(async()=>kt(se,ke),[se,ke]);return Le?m.createElement(Ke.A,{mb:1},m.createElement(I._1,{error:Le})):pe||!et||et.length===0?null:m.createElement(m.Fragment,null,m.createElement(_e.A,{severity:"warning"},"This entity has relations to other entities, which can't be found in the catalog. ",m.createElement("br",null),"Entities not found are: ",et.join(", ")))}const It=se=>se.error&&se.level==="error"&&se.type===R.K3;async function Ne(se,ke){return{items:(await ke.getEntityAncestors({entityRef:se})).items.map(et=>{var pt,Bt;return{errors:((Bt=(pt=et.entity.status)==null?void 0:pt.items)!=null?Bt:[]).filter(It).map(Be=>Be.error).filter(Be=>Boolean(Be)),entity:et.entity}}).filter(et=>et.errors.length>0)}}async function Ct(se,ke){const pe=ke.apis.get(a.vp);if(!pe)throw new Error(`No implementation available for ${a.vp}`);return(await Ne((0,c.U2)(se),pe)).items.length>0}function ot(){const{entity:se}=(0,De.u)(),ke=(0,c.U2)(se),pe=(0,G.u)(a.vp),{loading:Le,error:et,value:pt}=(0,he.default)(async()=>Ne(ke,pe),[ke,pe]);return et?m.createElement(Ke.A,{mb:1},m.createElement(I._1,{error:et})):Le||!pt?null:m.createElement(m.Fragment,null,pt.items.map((Bt,en)=>m.createElement(Ke.A,{key:en,mb:1},(0,c.U2)(se)!==(0,c.U2)(Bt.entity)&&m.createElement(Ke.A,{p:1},"The error below originates from"," ",m.createElement(a.zI,{entityRef:Bt.entity})),Bt.errors.map((Ce,Be)=>m.createElement(I._1,{key:Be,error:Ce})))))}const zt="core.backstage.entitySwitch",Tt=se=>null;(0,Ve.h3)(Tt,zt,!0);const Kt=se=>{var ke,pe;const{entity:Le,loading:et}=(0,De.a)(),pt=(0,G.b)(),Bt=(0,Ve.OJ)(se.children,Ce=>Ce.selectByComponentData({key:zt,withStrictError:"Child of EntitySwitch is not an EntitySwitch.Case"}).getElements().flatMap(Be=>{if(et&&!Le)return[];const{if:C,children:W}=Be.props;return Le?[{if:C==null?void 0:C(Le,{apis:pt}),children:W}]:[{if:C===void 0,children:W}]}),[pt,Le,et]);if(Bt.some(Ce=>typeof Ce.if=="object"&&"then"in Ce.if))return m.createElement(lt,{results:Bt,renderMultipleMatches:se.renderMultipleMatches});if(se.renderMultipleMatches==="all"){const Ce=Bt.filter(Be=>Be.if).map(Be=>Be.children);return Ce.length===0?ft(Bt):m.createElement(m.Fragment,null,Ce)}return(pe=(ke=Bt.find(Ce=>Ce.if))==null?void 0:ke.children)!=null?pe:ft(Bt)};function lt({results:se,renderMultipleMatches:ke}){const{loading:pe,value:Le}=(0,he.default)(async()=>{var et;const pt=se.map(async({if:Bt,children:en})=>{try{if(await Bt)return en}catch{}return null});if(ke==="all"){const Bt=(await Promise.all(pt)).filter(Boolean);return Bt.length===0?ft(se):m.createElement(m.Fragment,null,Bt)}return(et=(await Promise.all(pt)).find(Boolean))!=null?et:ft(se)},[se]);return pe||!Le?null:Le}function ft(se){var ke,pe;return(pe=(ke=se.filter(Le=>Le.if===void 0)[0])==null?void 0:ke.children)!=null?pe:null}Kt.Case=Tt;function $t(se,ke){return Boolean(se&&typeof se=="string"&&(se==null?void 0:se.toLocaleLowerCase("en-US"))===(ke==null?void 0:ke.toLocaleLowerCase("en-US")))}function an(se,ke){return typeof ke=="string"?$t(se,ke):ke.length===0||ke.some(pe=>$t(se,pe))}function St(se){return U({kind:se})}function jt(se){return U({kind:"component",type:se})}function D(se){return U({kind:"resource",type:se})}function U(se){return ke=>{var pe;return!(se.kind&&!an(ke.kind,se.kind)||se.type&&!an((pe=ke.spec)==null?void 0:pe.type,se.type))}}function O(se){return ke=>{var pe;return an((pe=ke.metadata)==null?void 0:pe.namespace,se)}}const M=null,te=a.GI.Filters,ge=a.GI.Content,ze=(0,Ve.i1)({id:"catalog",apis:[(0,Ve.bW)({api:a.vp,deps:{discoveryApi:G.q,fetchApi:G.s},factory:({discoveryApi:se,fetchApi:ke})=>new R.dJ({discoveryApi:se,fetchApi:ke})}),(0,Ve.bW)({api:a.ah,deps:{storageApi:G.x},factory:({storageApi:se})=>new o.D({storageApi:se})}),(0,Ve.bW)({api:a.nQ,deps:{catalogApi:a.vp},factory:({catalogApi:se})=>o.a.create({catalogApi:se})})],routes:{catalogIndex:o.r,catalogEntity:a.sF},externalRoutes:{createComponent:o.c,viewTechDoc:o.v,createFromTemplate:o.b,unregisterRedirect:o.u}}),bt=ze.provide((0,Ve.QJ)({name:"CatalogIndexPage",component:()=>e.e(1317).then(e.bind(e,21317)).then(se=>se.CatalogPage),mountPoint:o.r})),Qe=ze.provide((0,Ve.QJ)({name:"CatalogEntityPage",component:()=>e.e(7455).then(e.bind(e,7455)).then(se=>se.CatalogEntityPage),mountPoint:a.sF})),Mt=ze.provide((0,Ve.NC)({name:"EntityAboutCard",component:{lazy:()=>e.e(8719).then(e.bind(e,28719)).then(se=>se.AboutCard)}})),rn=ze.provide((0,Ve.NC)({name:"EntityLinksCard",component:{lazy:()=>e.e(5160).then(e.bind(e,85160)).then(se=>se.EntityLinksCard)}})),Ft=ze.provide((0,Ve.NC)({name:"EntityLabelsCard",component:{lazy:()=>e.e(2977).then(e.bind(e,12977)).then(se=>se.EntityLabelsCard)}})),Et=ze.provide((0,Ve.NC)({name:"EntityHasSystemsCard",component:{lazy:()=>e.e(841).then(e.bind(e,841)).then(se=>se.HasSystemsCard)}})),we=ze.provide((0,Ve.NC)({name:"EntityHasComponentsCard",component:{lazy:()=>e.e(8881).then(e.bind(e,48881)).then(se=>se.HasComponentsCard)}})),nt=ze.provide((0,Ve.NC)({name:"EntityHasSubcomponentsCard",component:{lazy:()=>e.e(6558).then(e.bind(e,46558)).then(se=>se.HasSubcomponentsCard)}})),Lt=ze.provide((0,Ve.NC)({name:"EntityHasResourcesCard",component:{lazy:()=>e.e(3662).then(e.bind(e,43662)).then(se=>se.HasResourcesCard)}})),Wt=ze.provide((0,Ve.NC)({name:"EntityDependsOnComponentsCard",component:{lazy:()=>e.e(6912).then(e.bind(e,26912)).then(se=>se.DependsOnComponentsCard)}})),le=ze.provide((0,Ve.NC)({name:"EntityDependencyOfComponentsCard",component:{lazy:()=>e.e(5339).then(e.bind(e,65339)).then(se=>se.DependencyOfComponentsCard)}})),$e=ze.provide((0,Ve.NC)({name:"EntityDependsOnResourcesCard",component:{lazy:()=>e.e(3223).then(e.bind(e,93223)).then(se=>se.DependsOnResourcesCard)}})),xt=ze.provide((0,Ve.NC)({name:"RelatedEntitiesCard",component:{lazy:()=>e.e(9260).then(e.bind(e,79260)).then(se=>se.RelatedEntitiesCard)}})),Yt=ze.provide((0,A.c)({name:"CatalogSearchResultListItem",component:()=>e.e(6661).then(e.bind(e,56661)).then(se=>se.CatalogSearchResultListItem),predicate:se=>se.type==="software-catalog"}))},79367:($n,Zt,e)=>{"use strict";e.d(Zt,{MM:()=>be,P4:()=>Vt,XT:()=>rn,Zg:()=>vt,ee:()=>Gn});var o=e(7877),m=e(11638),p=e(63188),j=e(49863),B=e(33478),i=e(14041),k=e(58054),Ze=e(92651),Ke=e(73657),a=e(18690),De=e(58837),Ie=e(8973),ie=e(29655),G=e(72501),Ve=e(78467),he=e(71677),_e=e(43669),re=e(4313),Re=e(18171),I=e(9719),c=e(54801),R=e(5951),A=e(91567),_=e(10985),F=e(61009),Ae=e(77125),fe=e(88951),ve=e(4321),J=e(13677),v=e(99703),ee=e(42899),oe=e(67720),Rt=e(91413),w=e(29365),sn=e(60083),me=e(16249),kt=e(64947),yt=e(81215),mt=e(26343),It=e(6924),Ne=e(21718),Ct=e(52950),ot=e(23180),zt=e(91638),Tt=e(4832),Kt=e(29835),lt=e(52536),ft=e.n(lt),$t=e(42226),an=e(64118),St=e(77714),jt=e(38282),D=e(74219);const U=(0,o.c)({id:"plugin.githubactions.service"});var O=Object.defineProperty,M=(ne,Pe,je)=>Pe in ne?O(ne,Pe,{enumerable:!0,configurable:!0,writable:!0,value:je}):ne[Pe]=je,te=(ne,Pe,je)=>(M(ne,typeof Pe!="symbol"?Pe+"":Pe,je),je);class ge{constructor(Pe){te(this,"configApi"),te(this,"scmAuthApi"),this.configApi=Pe.configApi,this.scmAuthApi=Pe.scmAuthApi}async getOctokit(Pe="github.com"){var je;const{token:Jt}=await this.scmAuthApi.getCredentials({url:`https://${Pe}/`,additionalScope:{customScopes:{github:["repo"]}}}),cn=(0,p.bm)((je=this.configApi.getOptionalConfigArray("integrations.github"))!=null?je:[]).find(wn=>wn.host===Pe),on=cn==null?void 0:cn.apiBaseUrl;return new j.E({auth:Jt,baseUrl:on})}async reRunWorkflow(Pe){const{hostname:je,owner:Jt,repo:qt,runId:cn}=Pe;return(await this.getOctokit(je)).actions.reRunWorkflow({owner:Jt,repo:qt,run_id:cn})}async listWorkflowRuns(Pe){const{hostname:je,owner:Jt,repo:qt,pageSize:cn=100,page:on=0,branch:wn}=Pe;return(await(await this.getOctokit(je)).actions.listWorkflowRunsForRepo({owner:Jt,repo:qt,per_page:cn,page:on,...wn?{branch:wn}:{}})).data}async getWorkflow(Pe){const{hostname:je,owner:Jt,repo:qt,id:cn}=Pe;return(await(await this.getOctokit(je)).actions.getWorkflow({owner:Jt,repo:qt,workflow_id:cn})).data}async getWorkflowRun(Pe){const{hostname:je,owner:Jt,repo:qt,id:cn}=Pe;return(await(await this.getOctokit(je)).actions.getWorkflowRun({owner:Jt,repo:qt,run_id:cn})).data}async listJobsForWorkflowRun(Pe){const{hostname:je,owner:Jt,repo:qt,id:cn,pageSize:on=100,page:wn=0}=Pe;return(await(await this.getOctokit(je)).actions.listJobsForWorkflowRun({owner:Jt,repo:qt,run_id:cn,per_page:on,page:wn})).data}async downloadJobLogsForWorkflowRun(Pe){const{hostname:je,owner:Jt,repo:qt,runId:cn}=Pe;return(await(await this.getOctokit(je)).actions.downloadJobLogsForWorkflowRun({owner:Jt,repo:qt,job_id:cn})).data}async listBranches(Pe){const{hostname:je,owner:Jt,repo:qt,page:cn=0}=Pe;return(await(await this.getOctokit(je)).rest.repos.listBranches({owner:Jt,repo:qt,per_page:100,page:cn})).data}async getDefaultBranch(Pe){const{hostname:je,owner:Jt,repo:qt}=Pe;return(await(await this.getOctokit(je)).rest.repos.get({owner:Jt,repo:qt})).data.default_branch}}var ze=(ne=>(ne[ne.success=0]="success",ne[ne.failure=1]="failure",ne[ne.pending=2]="pending",ne[ne.running=3]="running",ne))(ze||{});const bt=(0,m.HM)({id:"github-actions"}),Qe=(0,m.Vb)({id:"github-actions/build",path:"/:id",parent:bt}),Mt=(0,m.i1)({id:"github-actions",apis:[(0,m.bW)({api:U,deps:{configApi:o.p,scmAuthApi:B.$J},factory:({configApi:ne,scmAuthApi:Pe})=>new ge({configApi:ne,scmAuthApi:Pe})})],routes:{entityContent:bt}}),rn=Mt.provide((0,m.QJ)({name:"EntityGithubActionsContent",component:()=>Promise.resolve().then(function(){return Wn}).then(ne=>ne.Router),mountPoint:bt})),Ft=Mt.provide((0,m.NC)({name:"EntityLatestGithubActionRunCard",component:{lazy:()=>e.e(1729).then(e.bind(e,91729)).then(ne=>ne.LatestWorkflowRunCard)}})),Et=Mt.provide((0,m.NC)({name:"EntityLatestGithubActionsForBranchCard",component:{lazy:()=>e.e(1729).then(e.bind(e,91729)).then(ne=>ne.LatestWorkflowsForBranchCard)}})),we=Mt.provide((0,m.NC)({name:"EntityRecentGithubActionsRunsCard",component:{lazy:()=>e.e(1729).then(e.bind(e,91729)).then(ne=>ne.RecentWorkflowRunsCard)}})),nt="github.com/project-slug",Lt=ne=>{var Pe,je;return(je=(Pe=ne==null?void 0:ne.metadata.annotations)==null?void 0:Pe[nt])!=null?je:""},Wt=ne=>i.createElement(i.Fragment,null,i.createElement(le,{...ne}),$e(ne));function le({status:ne,conclusion:Pe}){if(ne===void 0)return null;switch(ne.toLocaleLowerCase("en-US")){case"queued":return i.createElement(ot.Ek,null);case"in_progress":return i.createElement(ot.W$,null);case"completed":switch(Pe==null?void 0:Pe.toLocaleLowerCase("en-US")){case"skipped":return i.createElement(ot.c_,null);case"timed_out":return i.createElement(ot.EV,null);case"failure":return i.createElement(ot.Xs,null);default:return i.createElement(ot.So,null)}default:return i.createElement(ot.Ek,null)}}function $e({status:ne,conclusion:Pe}){if(ne===void 0)return"";switch(ne.toLocaleLowerCase("en-US")){case"queued":return"Queued";case"in_progress":return"In progress";case"completed":switch(Pe==null?void 0:Pe.toLocaleLowerCase("en-US")){case"skipped":return"Aborted";case"timed_out":return"Timed out";case"failure":return"Error";default:return"Completed"}default:return"Pending"}}const xt=({hostname:ne,owner:Pe,repo:je})=>{const Jt=(0,o.u)(U),{id:qt}=(0,m.KS)(Qe);return(0,zt.default)(async()=>{if(!je||!Pe)throw new Error("No repo/owner provided");const cn=await Jt.listJobsForWorkflowRun({hostname:ne,owner:Pe,repo:je,id:parseInt(qt,10)});return{total_count:cn.total_count,jobs:cn.jobs.map(on=>{var wn,Kn,Yn,oa;return{html_url:(wn=on.html_url)!=null?wn:void 0,status:on.status,conclusion:(Kn=on.conclusion)!=null?Kn:void 0,started_at:on.started_at,completed_at:(Yn=on.completed_at)!=null?Yn:void 0,id:on.id,name:on.name,steps:(oa=on.steps)==null?void 0:oa.map(vn=>{var ra,ia,na;return{name:vn.name,status:vn.status,conclusion:(ra=vn.conclusion)!=null?ra:void 0,number:vn.number,started_at:(ia=vn.started_at)!=null?ia:void 0,completed_at:(na=vn.completed_at)!=null?na:void 0}})}})}},[je,Pe,qt])},Yt=({hostname:ne,owner:Pe,repo:je})=>{const Jt=(0,o.u)(U),{id:qt}=(0,m.KS)(Qe);return(0,zt.default)(async()=>je&&Pe?Jt.getWorkflowRun({hostname:ne,owner:Pe,repo:je,id:parseInt(qt,10)}):Promise.reject(new Error("No repo/owner provided")),[je,Pe,qt])},se=({hostname:ne,owner:Pe,repo:je,id:Jt})=>{const qt=(0,o.u)(U);return(0,zt.default)(async()=>je&&Pe?qt.downloadJobLogsForWorkflowRun({hostname:ne,owner:Pe,repo:je,runId:Jt}):Promise.reject("No repo/owner provided"),[je,Pe,Jt])},ke=ne=>{var Pe,je,Jt;const qt=(Jt=(Pe=ne==null?void 0:ne.metadata.annotations)==null?void 0:Pe[Kt.I4])!=null?Jt:(je=ne==null?void 0:ne.metadata.annotations)==null?void 0:je[Kt.Eo];return qt!=null&&qt.startsWith("url:")?ft()(qt.slice(4)).resource:void 0},pe=(0,De.A)(ne=>({button:{order:-1,marginRight:0,marginLeft:"-20px"},modal:{display:"flex",alignItems:"center",width:"85%",height:"85%",justifyContent:"center",margin:"auto"},normalLogContainer:{height:"75vh",width:"100%"},modalLogContainer:{height:"100%",width:"100%"},log:{background:ne.palette.background.default}})),Le=({entity:ne,runId:Pe,inProgress:je})=>{const Jt=pe(),qt=Lt(ne),cn=ke(ne),[on,wn]=qt&&qt.split("/")||[],Kn=se({hostname:cn,owner:on,repo:wn,id:Pe}),Yn=Kn.value?String(Kn.value):void 0,[oa,vn]=i.useState(!1),ra=()=>{vn(!0)},ia=()=>{vn(!1)};return i.createElement(Ie.A,{TransitionProps:{unmountOnExit:!0},disabled:je},i.createElement(ie.A,{expandIcon:i.createElement(It.A,null),IconButtonProps:{className:Jt.button}},i.createElement(G.A,{variant:"button"},Kn.loading?i.createElement(Ve.A,null):"Job Log"),i.createElement(he.Ay,{title:"Open Log",TransitionComponent:_e.A,arrow:!0},i.createElement(Tt.A,{onClick:na=>{na.stopPropagation(),ra()},style:{marginLeft:"auto"}})),i.createElement(re.A,{className:Jt.modal,onClick:na=>na.stopPropagation(),open:oa,onClose:ia},i.createElement(Re.A,{in:oa},i.createElement("div",{className:Jt.modalLogContainer},i.createElement(ot.rW,{text:Yn!=null?Yn:"No Values Found",classes:{root:Jt.log}}))))),Yn&&i.createElement("div",{className:Jt.normalLogContainer},i.createElement(ot.rW,{text:Yn,classes:{root:Jt.log}})))},et=(0,De.A)(ne=>({root:{maxWidth:720,margin:ne.spacing(2)},title:{padding:ne.spacing(1,0,2,0)},table:{padding:ne.spacing(1)},accordionDetails:{padding:0},button:{order:-1,marginRight:0,marginLeft:"-20px"},externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}})),pt=(ne,Pe)=>{if(!ne||!Pe)return"";const je=Ct.c9.fromISO(ne);return(Pe?Ct.c9.fromISO(Pe):Ct.c9.now()).diff(je).toFormat("m 'minutes' s 'seconds'")},Bt=({step:ne})=>{var Pe;return i.createElement(I.A,null,i.createElement(c.A,null,i.createElement(R.A,{primary:ne.name,secondary:pt(ne.started_at,ne.completed_at)})),i.createElement(c.A,null,i.createElement(Wt,{status:ne.status.toLocaleUpperCase("en-US"),conclusion:(Pe=ne.conclusion)==null?void 0:Pe.toLocaleUpperCase("en-US")})))},en=({job:ne,className:Pe,entity:je})=>{var Jt;const qt=et();return i.createElement(Ie.A,{TransitionProps:{unmountOnExit:!0},className:Pe},i.createElement(ie.A,{expandIcon:i.createElement(It.A,null),IconButtonProps:{className:qt.button}},i.createElement(G.A,{variant:"button"},ne.name," (",pt(ne.started_at,ne.completed_at),")")),i.createElement(A.A,{className:qt.accordionDetails},i.createElement(_.A,null,i.createElement(F.A,null,(Jt=ne.steps)==null?void 0:Jt.map(cn=>i.createElement(Bt,{key:cn.number,step:cn}))))),ne.status==="queued"||ne.status==="in_progress"?i.createElement(Le,{runId:ne.id,inProgress:!0,entity:je}):i.createElement(Le,{runId:ne.id,inProgress:!1,entity:je}))},Ce=({jobs:ne,entity:Pe})=>{const je=et();return i.createElement(Ae.A,null,ne&&ne.total_count>0&&ne.jobs.map(Jt=>i.createElement(en,{key:Jt.id,job:Jt,className:Jt.status!=="success"?je.failed:je.success,entity:Pe})))},Be=({entity:ne})=>{var Pe,je,Jt,qt,cn,on,wn,Kn,Yn,oa,vn,ra,ia,na,da;const _a=Lt(ne),qn=ke(ne),[Ea,Z]=_a&&_a.split("/")||[],Ue=Yt({hostname:qn,owner:Ea,repo:Z}),tt=xt({hostname:qn,owner:Ea,repo:Z}),ht=et();return Ue.error&&Ue.error.message?i.createElement(G.A,{variant:"h6",color:"error"},"Failed to load build, ",Ue.error.message):Ue.loading?i.createElement(fe.A,null):i.createElement("div",{className:ht.root},i.createElement(Ae.A,{mb:3},i.createElement(ot.BI,{"aria-label":"breadcrumb"},i.createElement(ot.N_,{to:".."},"Workflow runs"),i.createElement(G.A,null,"Workflow run details"))),i.createElement(_.A,{component:ve.A,className:ht.table},i.createElement(F.A,null,i.createElement(J.A,null,i.createElement(I.A,null,i.createElement(c.A,null,i.createElement(G.A,{noWrap:!0},"Branch")),i.createElement(c.A,null,(Pe=Ue.value)==null?void 0:Pe.head_branch)),i.createElement(I.A,null,i.createElement(c.A,null,i.createElement(G.A,{noWrap:!0},"Message")),i.createElement(c.A,null,(Jt=(je=Ue.value)==null?void 0:je.head_commit)==null?void 0:Jt.message)),i.createElement(I.A,null,i.createElement(c.A,null,i.createElement(G.A,{noWrap:!0},"Commit ID")),i.createElement(c.A,null,(cn=(qt=Ue.value)==null?void 0:qt.head_commit)==null?void 0:cn.id)),i.createElement(I.A,null,i.createElement(c.A,null,i.createElement(G.A,{noWrap:!0},"Workflow")),i.createElement(c.A,null,(on=Ue.value)==null?void 0:on.name)),i.createElement(I.A,null,i.createElement(c.A,null,i.createElement(G.A,{noWrap:!0},"Status")),i.createElement(c.A,null,i.createElement(Wt,{status:((wn=Ue.value)==null?void 0:wn.status)||void 0,conclusion:((Kn=Ue.value)==null?void 0:Kn.conclusion)||void 0}))),i.createElement(I.A,null,i.createElement(c.A,null,i.createElement(G.A,{noWrap:!0},"Author")),i.createElement(c.A,null,`${(vn=(oa=(Yn=Ue.value)==null?void 0:Yn.head_commit)==null?void 0:oa.author)==null?void 0:vn.name} (${(na=(ia=(ra=Ue.value)==null?void 0:ra.head_commit)==null?void 0:ia.author)==null?void 0:na.email})`)),i.createElement(I.A,null,i.createElement(c.A,null,i.createElement(G.A,{noWrap:!0},"Links")),i.createElement(c.A,null,((da=Ue.value)==null?void 0:da.html_url)&&i.createElement(ot.N_,{to:Ue.value.html_url},"Workflow runs on GitHub"," ",i.createElement(Ne.A,{className:ht.externalLinkIcon})))),i.createElement(I.A,null,i.createElement(c.A,{colSpan:2},i.createElement(G.A,{noWrap:!0},"Jobs"),tt.loading?i.createElement(Ve.A,null):i.createElement(Ce,{jobs:tt.value,entity:ne})))))))};function C({hostname:ne,owner:Pe,repo:je,branch:Jt,initialPageSize:qt=6}){const cn=(0,o.u)(U),on=(0,o.u)(o.r),[wn,Kn]=(0,i.useState)(0),[Yn,oa]=(0,i.useState)(0),[vn,ra]=(0,i.useState)(qt),[ia,na]=(0,i.useState)([]),[da,_a]=(0,i.useState)(""),{loading:qn,value:Ea,retry:Z,error:Ue}=(0,jt.A)(async()=>{const tt=await cn.getDefaultBranch({hostname:ne,owner:Pe,repo:je});_a(tt);let ht=Jt;Jt==="default"&&(ht=tt);const Y=await(async()=>{let ue=!0,at=0;const N=[];for(;ue;){const H=await cn.listBranches({hostname:ne,owner:Pe,repo:je,page:at});H.length===0&&(ue=!1),at++,N.push(...H)}return N})();na(Y);const Ee=await cn.listWorkflowRuns({hostname:ne,owner:Pe,repo:je,pageSize:vn,page:Yn+1,branch:ht});return Kn(Ee.total_count),Ee.workflow_runs.map(ue=>{var at,N,H,q,ae,We,Je,Fe,gt;return{workflowName:(at=ue.name)!=null?at:void 0,message:(N=ue.head_commit)==null?void 0:N.message,id:`${ue.id}`,onReRunClick:async()=>{try{await cn.reRunWorkflow({hostname:ne,owner:Pe,repo:je,runId:ue.id})}catch(Pt){on.post(new Error(`Failed to rerun the workflow: ${Pt.message}`))}},source:{branchName:(H=ue.head_branch)!=null?H:void 0,commit:{hash:(q=ue.head_commit)==null?void 0:q.id,url:(Je=(ae=ue.head_repository)==null?void 0:ae.branches_url)==null?void 0:Je.replace("{/branch}",(We=ue.head_branch)!=null?We:"")}},status:(Fe=ue.status)!=null?Fe:void 0,conclusion:(gt=ue.conclusion)!=null?gt:void 0,url:ue.url,githubUrl:ue.html_url}})},[Yn,vn,je,Pe]);return[{page:Yn,pageSize:vn,loading:qn,runs:Ea,branches:ia,defaultBranch:da,projectName:`${Pe}/${je}`,total:wn,error:Ue},{runs:Ea,setPage:oa,setPageSize:ra,retry:Z}]}const W=(0,De.A)(ne=>(0,v.A)({card:{border:`1px solid ${ne.palette.divider}`,boxShadow:ne.shadows[2],borderRadius:"4px",overflow:"visible",position:"relative",margin:ne.spacing(4,1,1),flex:"1",minWidth:"0px"},externalLinkIcon:{fontSize:"inherit",verticalAlign:"middle"},bottomline:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"-5px"},pagination:{width:"100%"}})),Q={skipped:"warning",canceled:"info",timed_out:"error",failure:"error",success:"success"},rt=(ne,Pe)=>{var je,Jt,qt,cn;const on=Pe.toLocaleLowerCase();return((je=ne.workflowName)==null?void 0:je.toLocaleLowerCase().includes(on))||((Jt=ne.source.branchName)==null?void 0:Jt.toLocaleLowerCase().includes(on))||((qt=ne.status)==null?void 0:qt.toLocaleLowerCase().includes(on))||((cn=ne.id)==null?void 0:cn.toLocaleLowerCase().includes(on))},ct=({runs:ne,searchTerm:Pe,loading:je,onChangePageSize:Jt,onChangePage:qt,page:cn,total:on,pageSize:wn})=>{const Kn=W(),Yn=(0,m.Sf)(Qe),oa=ne==null?void 0:ne.filter(vn=>rt(vn,Pe));return i.createElement(ee.A,{container:!0,spacing:3},oa&&(ne==null?void 0:ne.length)!==0?oa.map(vn=>{var ra,ia;return i.createElement(ee.A,{key:vn.id,item:!0,container:!0,xs:12,sm:4,md:4,xl:4},i.createElement(Ae.A,{className:Kn.card},i.createElement(Ae.A,{display:"flex",flexDirection:"column",m:3,alignItems:"center",justifyContent:"center"},i.createElement(Ae.A,{pt:2,sx:{width:"100%"},textAlign:"center"},i.createElement(he.Ay,{title:(ra=vn.status)!=null?ra:"No Status",placement:"top-start"},i.createElement(D.A,{variant:"outlined",severity:Q[vn.conclusion],style:{alignItems:"center"}},i.createElement(G.A,{variant:"h6"},i.createElement(ot.N_,{to:Yn({id:vn.id})},i.createElement(G.A,{color:"primary",variant:"h6"},vn.workflowName))))),i.createElement(he.Ay,{title:(ia=vn.message)!=null?ia:"No run message"},i.createElement(G.A,{variant:"body2",component:"span",style:{fontSize:"smaller"}},i.createElement(ot.h2,{content:`Commit ID : ${vn.source.commit.hash}`}))),vn.source.branchName&&i.createElement(ot.h2,{content:`Branch : ${vn.source.branchName}`}),i.createElement(oe.A,{key:vn.id,size:"small",label:`Workflow ID : ${vn.id}`}),i.createElement(oe.A,{size:"small",label:i.createElement(Ae.A,{display:"flex",alignItems:"center"},i.createElement(Wt,{status:vn.status,conclusion:vn.conclusion}))}),i.createElement("div",{className:Kn.bottomline},vn.githubUrl&&i.createElement(ot.N_,{to:vn.githubUrl},"Workflow runs on GitHub"," ",i.createElement(Ne.A,{className:Kn.externalLinkIcon})),i.createElement(Rt.A,null,i.createElement(he.Ay,{title:"Rerun workflow"},i.createElement(w.A,{onClick:vn.onReRunClick,style:{fontSize:"12px"}},i.createElement(an.A,null)))))))))}):i.createElement(Ae.A,{p:2},je?i.createElement(Ve.A,null):"No matching runs found."),i.createElement("div",{className:Kn.pagination},i.createElement(sn.A,{component:"div",count:on,page:cn,rowsPerPage:wn,onPageChange:(vn,ra)=>qt(ra),onRowsPerPageChange:vn=>Jt(parseInt(vn.target.value,6)),labelRowsPerPage:"Workflows per page",rowsPerPageOptions:[6,12,18,{label:"All",value:-1}]})))},ut=({searchTerm:ne,handleSearch:Pe,retry:je})=>i.createElement(i.Fragment,null,i.createElement(Ae.A,{flexGrow:1}),i.createElement(me.A,{type:"search",label:"Search",value:ne,onChange:Pe,"data-testid":"search-control",style:{marginRight:"20px"}}),i.createElement(Rt.A,null,i.createElement(he.Ay,{title:"Reload workflow runs"},i.createElement(w.A,{onClick:je},i.createElement(St.A,null))))),tn=({entity:ne})=>{const Pe=Lt(ne),je=ke(ne),[Jt,qt]=(Pe!=null?Pe:"/").split("/"),[cn,on]=(0,i.useState)("default"),[wn,Kn]=(0,i.useState)([]),[Yn,oa]=(0,i.useState)(""),vn=ht=>{oa(ht.target.value)},[{runs:ra,branches:ia,defaultBranch:na,...da},{retry:_a,setPage:qn,setPageSize:Ea}]=C({hostname:je,owner:Jt,repo:qt,branch:cn==="all"?void 0:cn}),Z=je||"github.com",Ue=!da.loading&&!ra,tt=ht=>{const Se=ht.target.value;on(Se),qn(0),_a()};return(0,i.useEffect)(()=>{Kn(ra)},[ra,cn]),(0,i.useEffect)(()=>{on(na)},[na]),i.createElement(ee.A,{item:!0},Ue?i.createElement(ot.pp,{missing:"data",title:"No Workflow Data",description:"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.",action:i.createElement(kt.A,{variant:"contained",color:"primary",href:`https://${Z}/${Pe}/actions/new`},"Create new Workflow")}):i.createElement(ot.nO,{title:i.createElement(Ae.A,{display:"flex",alignItems:"center"},i.createElement($t.A,null),i.createElement(Ae.A,{mr:1}),i.createElement(G.A,{variant:"h6"},Pe),i.createElement(yt.A,{value:cn,key:cn,label:"Branch",onChange:tt,"data-testid":"menu-control",style:{marginLeft:"30px",marginRight:"20px",width:"230px"}},ia.map(ht=>i.createElement(mt.A,{key:ht.name,value:ht.name},ht.name===na?i.createElement(G.A,{variant:"body2",component:"span"},ht.name," ",i.createElement(G.A,{variant:"body2",component:"span",style:{color:"lightgray",fontSize:"x-small"}},"(default)")):ht.name)),i.createElement(mt.A,{value:"all",key:"all",style:{color:"lightGrey",fontSize:"small"}},"select all branches")),i.createElement(ut,{searchTerm:Yn,handleSearch:vn,retry:_a}))},i.createElement(ct,{runs:wn,loading:da.loading,onChangePageSize:Ea,onChangePage:qn,page:da.page,total:da.total,pageSize:da.pageSize,searchTerm:Yn,projectName:Pe})))},mn=[{title:"ID",field:"id",type:"numeric",width:"150px"},{title:"Message",field:"message",highlight:!0,render:ne=>{const Pe=()=>{const je=(0,m.Sf)(Qe);return i.createElement(ot.N_,{component:Ke.N_,to:je({id:ne.id})},ne.message)};return i.createElement(Pe,null)}},{title:"Source",render:ne=>{var Pe,je;return i.createElement(G.A,{variant:"body2",noWrap:!0},i.createElement(G.A,{paragraph:!0,variant:"body2"},(Pe=ne.source)==null?void 0:Pe.branchName),i.createElement(G.A,{paragraph:!0,variant:"body2"},(je=ne.source)==null?void 0:je.commit.hash))}},{title:"Workflow",field:"workflowName"},{title:"Status",customSort:(ne,Pe)=>$e(ne).localeCompare($e(Pe)),render:ne=>i.createElement(Ae.A,{display:"flex",alignItems:"center"},i.createElement(Wt,{status:ne.status,conclusion:ne.conclusion}))},{title:"Actions",render:ne=>i.createElement(he.Ay,{title:"Rerun workflow"},i.createElement(w.A,{onClick:ne.onReRunClick},i.createElement(an.A,null))),width:"10%"}],Cn=({projectName:ne,loading:Pe,pageSize:je,page:Jt,retry:qt,runs:cn,onChangePage:on,onChangePageSize:wn,total:Kn})=>i.createElement(ot.XI,{isLoading:Pe,options:{paging:!0,pageSize:je,padding:"dense"},totalCount:Kn,page:Jt,actions:[{icon:()=>i.createElement(St.A,null),tooltip:"Reload workflow runs",isFreeAction:!0,onClick:()=>qt()}],data:cn!=null?cn:[],onPageChange:on,onRowsPerPageChange:wn,style:{width:"100%"},title:i.createElement(Ae.A,{display:"flex",alignItems:"center"},i.createElement($t.A,null),i.createElement(Ae.A,{mr:1}),i.createElement(G.A,{variant:"h6"},ne)),columns:mn}),An=({entity:ne,branch:Pe})=>{const je=Lt(ne),Jt=ke(ne),[qt,cn]=(je!=null?je:"/").split("/"),[{runs:on,...wn},{retry:Kn,setPage:Yn,setPageSize:oa}]=C({hostname:Jt,owner:qt,repo:cn,branch:Pe}),vn=Jt||"github.com";return!wn.loading&&!on?i.createElement(ot.pp,{missing:"data",title:"No Workflow Data",description:"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.",action:i.createElement(kt.A,{variant:"contained",color:"primary",href:`https://${vn}/${je}/actions/new`},"Create new Workflow")}):i.createElement(Cn,{...wn,runs:on,loading:wn.loading,retry:Kn,onChangePageSize:oa,onChangePage:Yn})},Gn=ne=>{var Pe;return Boolean((Pe=ne.metadata.annotations)==null?void 0:Pe[nt])};var Wn=Object.freeze({__proto__:null,isGithubActionsAvailable:Gn,Router:ne=>{const{view:Pe="table"}=ne,{entity:je}=(0,k.u)();if(!Gn(je))return i.createElement(Ze.o9,{annotation:nt});const Jt=Pe==="cards"?i.createElement(tn,{entity:je}):i.createElement(An,{entity:je});return i.createElement(a.BV,null,i.createElement(a.qh,{path:"/",element:Jt}),i.createElement(a.qh,{path:`${Qe.path}`,element:i.createElement(Be,{entity:je})}))}});const P=(0,De.A)({externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}}),K=ne=>{var Pe;const{error:je,loading:Jt,lastRun:qt,branch:cn}=ne,on=P();return je?i.createElement(G.A,null,"Couldn't fetch latest ",cn," run"):Jt?i.createElement(fe.A,null):i.createElement(ot.tA,{metadata:{status:i.createElement(i.Fragment,null,i.createElement(Wt,{status:qt.status,conclusion:qt.conclusion})),message:qt.message,url:i.createElement(ot.N_,{to:(Pe=qt.githubUrl)!=null?Pe:""},"See more on GitHub"," ",i.createElement(Ne.A,{className:on.externalLinkIcon}))}})},be=ne=>{var Pe,je,Jt;const{branch:qt="master",variant:cn}=ne,{entity:on}=(0,k.u)(),wn=(0,o.u)(o.r),Kn=ke(on),[Yn,oa]=((je=(Pe=on==null?void 0:on.metadata.annotations)==null?void 0:Pe[nt])!=null?je:"/").split("/"),[{runs:vn,loading:ra,error:ia}]=C({hostname:Kn,owner:Yn,repo:oa,branch:qt}),na=(Jt=vn==null?void 0:vn[0])!=null?Jt:{};return(0,i.useEffect)(()=>{ia&&wn.post(ia)},[ia,wn]),i.createElement(ot.nO,{title:`Last ${qt} build`,variant:cn},i.createElement(K,{error:ia,loading:ra,branch:qt,lastRun:na}))},vt=ne=>{const{branch:Pe="master",variant:je}=ne,{entity:Jt}=(0,k.u)();return i.createElement(ot.nO,{title:`Last ${Pe} build`,variant:je},i.createElement(An,{branch:Pe,entity:Jt}))},Ot=ne=>ne.split(`
`)[0],Vt=ne=>{var Pe,je;const{branch:Jt,dense:qt=!1,limit:cn=5,variant:on}=ne,{entity:wn}=(0,k.u)(),Kn=(0,o.u)(o.r),Yn=ke(wn),[oa,vn]=((je=(Pe=wn==null?void 0:wn.metadata.annotations)==null?void 0:Pe[nt])!=null?je:"/").split("/"),[{runs:ra=[],loading:ia,error:na}]=C({hostname:Yn,owner:oa,repo:vn,branch:Jt,initialPageSize:cn});(0,i.useEffect)(()=>{na&&Kn.post(na)},[na,Kn]);const da=Yn||"github.com",_a=(0,m.Sf)(Qe);return na?i.createElement(ot.bJ,{title:na.message,error:na}):i.createElement(ot.nO,{title:"Recent Workflow Runs",subheader:Jt?`Branch: ${Jt}`:"All Branches",noPadding:!0,variant:on},ra.length?i.createElement(ot.XI,{isLoading:ia,options:{search:!1,paging:!1,padding:qt?"dense":"default",toolbar:!1},columns:[{title:"Commit Message",field:"message",render:qn=>{var Ea;return i.createElement(ot.N_,{component:Ke.N_,to:_a({id:qn.id})},Ot((Ea=qn.message)!=null?Ea:""))}},{title:"Branch",field:"source.branchName"},{title:"Status",field:"status",render:Wt}],data:ra}):i.createElement("div",{style:{textAlign:"center"}},i.createElement(G.A,{variant:"body1"},"This component has GitHub Actions enabled, but no workflows were found."),i.createElement(G.A,{variant:"body2"},i.createElement(ot.N_,{to:`https://${da}/${oa}/${vn}/actions/new`},"Create a new workflow"))))}},78190:($n,Zt,e)=>{"use strict";e.d(Zt,{BX:()=>ze,IB:()=>se,Ju:()=>Qe,O2:()=>lt,VA:()=>Kt,iU:()=>zt,k8:()=>ke,lD:()=>Tt,sq:()=>O,yJ:()=>ot});var o=e(11638),m=e(7877),p=e(29835),j=e(58054),B=e(92651),i=e(58837),k=e(99703),Ze=e(77125),Ke=e(72501),a=e(42899),De=e(73643),Ie=e(8109),ie=e(46423),G=e(5951),Ve=e(37197),he=e(29365),_e=e(58007),re=e(71677),Re=e(65569),I=e(75892),c=e(14041),R=e(91638),A=e(23180),_=e(86486),F=e(74219),Ae=e(74011),fe=e(75625),ve=e(85121),J=e(47966),v=e(23127),ee=e(90749),oe=e(99993),Rt=e(48108),w=e(65398),sn=e.n(w),me=e(50308),kt=e.n(me),yt=e(45810),mt=e.n(yt),It=e(45250),Ne=e.n(It);const Ct=(0,o.Il)({id:"catalog-index"}),ot=(0,o.i1)({id:"org",externalRoutes:{catalogIndex:Ct}}),zt=ot.provide((0,o.NC)({name:"EntityGroupProfileCard",component:{lazy:()=>e.e(4708).then(e.bind(e,24708)).then(pe=>pe.GroupProfileCard)}})),Tt=ot.provide((0,o.NC)({name:"EntityMembersListCard",component:{lazy:()=>e.e(4708).then(e.bind(e,24708)).then(pe=>pe.MembersListCard)}})),Kt=ot.provide((0,o.NC)({name:"EntityOwnershipCard",component:{lazy:()=>e.e(4708).then(e.bind(e,24708)).then(pe=>pe.OwnershipCard)}})),lt=ot.provide((0,o.NC)({name:"EntityUserProfileCard",component:{lazy:()=>e.e(4708).then(e.bind(e,24708)).then(pe=>pe.UserProfileCard)}})),ft=async(pe,Le)=>(pe.length===0?{items:[]}:await Le.getEntities({filter:{kind:"User","relations.memberof":pe.map(pt=>(0,p.U2)({kind:"group",namespace:pt.namespace.toLocaleLowerCase("en-US"),name:pt.name.toLocaleLowerCase("en-US")}))}})).items,$t=async(pe,Le)=>{var et;const pt=new Map,en=[{kind:pe.kind,namespace:(et=pe.metadata.namespace)!=null?et:p.oQ,name:pe.metadata.name}],Ce=[];for(;en.length>0;){const Be=en.shift(),C=await Le.getEntityByRef(Be);pt.set((0,p.U2)(Be),!0);const W=(0,j.g)(C,p.Kx,{kind:"Group"}).filter(Q=>!pt.has((0,p.U2)(Q)));W.forEach(Q=>pt.set((0,p.U2)(Q),!0)),en.push(...W),Ce.push(...W)}return Ce},an=async(pe,Le)=>ft(await $t(pe,Le),Le),St=pe=>{const Le=new Map;return pe.filter(et=>{const pt=(0,p.U2)(et),Bt=Le.has(pt);return Le.set(pt,!0),!Bt})},jt=(0,i.A)(pe=>(0,k.A)({card:{border:`1px solid ${pe.palette.divider}`,boxShadow:pe.shadows[2],borderRadius:"4px",overflow:"visible",position:"relative",margin:pe.spacing(4,1,1),flex:"1",minWidth:"0px"}})),D=pe=>{var Le;const et=jt(),{metadata:{name:pt,description:Bt},spec:{profile:en}}=pe.member,Ce=(Le=en==null?void 0:en.displayName)!=null?Le:pt;return c.createElement(Ze.A,{className:et.card},c.createElement(Ze.A,{display:"flex",flexDirection:"column",m:3,alignItems:"center",justifyContent:"center"},c.createElement(A.eu,{displayName:Ce,picture:en==null?void 0:en.picture,customStyles:{position:"absolute",top:"-2rem"}}),c.createElement(Ze.A,{pt:2,sx:{width:"100%"},textAlign:"center"},c.createElement(Ke.A,{variant:"h6"},c.createElement(B.zI,{"data-testid":"user-link",entityRef:pe.member,title:Ce})),(en==null?void 0:en.email)&&c.createElement(A.N_,{to:`mailto:${en.email}`},c.createElement(A.Mm,{text:en.email})),Bt&&c.createElement(Ke.A,{variant:"subtitle2"},Bt))))},U=(0,i.A)(pe=>({root:{height:"100%"},cardContent:{overflow:"auto"},memberList:{display:"grid",gap:pe.spacing(1.5),gridTemplateColumns:`repeat(auto-fit, minmax(auto, ${pe.spacing(34)}px))`}})),O=pe=>{var Le;const{memberDisplayTitle:et="Members",pageSize:pt=50,showAggregateMembersToggle:Bt}=pe,en=U(),{entity:Ce}=(0,j.u)(),{metadata:{name:Be,namespace:C},spec:{profile:W}}=Ce,Q=(0,m.u)(B.vp),rt=(Le=W==null?void 0:W.displayName)!=null?Le:Be,ct=C||p.oQ,[ut,tn]=c.useState(1),mn=(Pe,je)=>{tn(je)},[Cn,An]=(0,c.useState)(!1),{loading:Gn,value:Mn}=(0,R.default)(async()=>Bt?await an(Ce,Q):[],[Q,Ce,Bt]),{loading:Wn,error:P,value:K}=(0,R.default)(async()=>(await Q.getEntities({filter:{kind:"User","relations.memberof":[(0,p.U2)({kind:"group",namespace:ct.toLocaleLowerCase("en-US"),name:Be.toLocaleLowerCase("en-US")})]}})).items,[Q,Ce]),be=St([...K!=null?K:[],...Mn&&Cn?Mn:[]].sort((Pe,je)=>(0,p.U2)(Pe).localeCompare((0,p.U2)(je))));if(Wn)return c.createElement(A.ke,null);if(P)return c.createElement(A._1,{error:P});const vt=Math.ceil(((be==null?void 0:be.length)||0)/pt),Ot=vt<2?"":`, page ${ut} of ${vt}`,Vt=c.createElement(I.A,{count:vt,page:ut,onChange:mn,showFirstButton:!0,showLastButton:!0});let ne;return be&&be.length>0?ne=c.createElement(Ze.A,{className:en.memberList},be.slice(pt*(ut-1),pt*ut).map(Pe=>c.createElement(D,{member:Pe,key:Pe.metadata.uid}))):ne=c.createElement(Ze.A,{p:2},c.createElement(Ke.A,null,"This group has no ",et.toLocaleLowerCase(),".")),c.createElement(a.A,{item:!0,className:en.root},c.createElement(A.nO,{title:`${et} (${(be==null?void 0:be.length)||0}${Ot})`,subheader:`of ${rt}`,...vt<=1?{}:{actions:Vt},className:en.root,cardClassName:en.cardContent},Bt&&c.createElement(c.Fragment,null,"Direct Members",c.createElement(De.A,{color:"primary",checked:Cn,onChange:()=>{An(!Cn)},inputProps:{"aria-label":"Users Type Switch"}}),"Aggregated Members"),Cn&&Gn?c.createElement(A.ke,null):ne))},M=({href:pe,Icon:Le,text:et})=>c.createElement(Ie.A,{key:pe},c.createElement(ie.A,null,Le?c.createElement(Le,null):c.createElement(v.A,null)),c.createElement(G.A,null,c.createElement(A.N_,{to:pe},et))),te=({links:pe})=>{const Le=(0,o.nm)(),et=pt=>{var Bt;return pt&&(Bt=Le.getSystemIcon(pt))!=null?Bt:v.A};return pe===void 0?null:c.createElement(c.Fragment,null,c.createElement(Ve.A,null),pe.map(pt=>c.createElement(M,{key:pt.url,href:pt.url,text:pt.title,Icon:et(pt.icon)})))},ge=pe=>c.createElement(Ze.A,{display:"flex",alignItems:"center"},c.createElement(J.A,{fontSize:"inherit"}),c.createElement(Ze.A,{ml:1},pe.title)),ze=pe=>{var Le,et,pt;const Bt=(0,m.u)(B.vp),en=(0,m.u)(m.l),{entity:Ce}=(0,j.u)(),{allowed:Be}=(0,ee.Az)(oe.tS),C=(0,c.useCallback)(async()=>{await Bt.refreshEntity((0,p.U2)(Ce)),en.post({message:"Refresh scheduled",severity:"info",display:"transient"})},[Bt,en,Ce]);if(!Ce)return c.createElement(F.A,{severity:"error"},"Group not found");const{metadata:{name:W,description:Q,title:rt,annotations:ct,links:ut},spec:{profile:tn}}=Ce,mn=(0,j.g)(Ce,p.Kx,{kind:"Group"}),Cn=(0,j.g)(Ce,p.Qz,{kind:"group"}),An=ct==null?void 0:ct[p.Eo],Gn=(An==null?void 0:An.startsWith("url:"))||(An==null?void 0:An.startsWith("file:")),Mn=(Le=Ce.metadata.annotations)==null?void 0:Le[p.P],Wn=(pt=(et=tn==null?void 0:tn.displayName)!=null?et:rt)!=null?pt:W,P=tn!=null&&tn.email?`mailto:${tn.email}`:"#",K=Mn?c.createElement(he.A,{"aria-label":"Edit",title:"Edit Metadata",component:A.N_,to:Mn},c.createElement(fe.A,null)):c.createElement(he.A,{"aria-label":"Edit",disabled:!0,title:"Edit Metadata"},c.createElement(fe.A,null));return c.createElement(A.nO,{title:c.createElement(ge,{title:Wn}),subheader:Q,variant:pe.variant,action:c.createElement(c.Fragment,null,Gn&&Be&&c.createElement(he.A,{"aria-label":"Refresh",title:"Schedule entity refresh",onClick:C},c.createElement(Ae.A,null)),K)},c.createElement(a.A,{container:!0,spacing:3},c.createElement(a.A,{item:!0,xs:12,sm:2,xl:1},c.createElement(A.eu,{displayName:Wn,picture:tn==null?void 0:tn.picture})),c.createElement(a.A,{item:!0,md:10,xl:11},c.createElement(_e.A,null,(tn==null?void 0:tn.email)&&c.createElement(Ie.A,null,c.createElement(ie.A,null,c.createElement(re.Ay,{title:"Email"},c.createElement(ve.A,null))),c.createElement(G.A,{primary:c.createElement(A.N_,{to:P},tn.email),secondary:"Email"})),c.createElement(Ie.A,null,c.createElement(ie.A,null,c.createElement(re.Ay,{title:"Parent Group"},c.createElement(_.A,null))),c.createElement(G.A,{primary:Cn.length?c.createElement(B.iI,{entityRefs:Cn,defaultKind:"Group"}):"N/A",secondary:"Parent Group"})),c.createElement(Ie.A,null,c.createElement(ie.A,null,c.createElement(re.Ay,{title:"Child Groups"},c.createElement(J.A,null))),c.createElement(G.A,{primary:mn.length?c.createElement(B.iI,{entityRefs:mn,defaultKind:"Group"}):"N/A",secondary:"Child Groups"})),(pe==null?void 0:pe.showLinks)&&c.createElement(te,{links:ut})))))},bt=pe=>pe.title?c.createElement(Ze.A,{display:"flex",alignItems:"center"},c.createElement(Rt.A,{fontSize:"inherit"}),c.createElement(Ze.A,{ml:1},pe.title)):null,Qe=pe=>{var Le,et;const{entity:pt}=(0,j.u)();if(!pt)return c.createElement(F.A,{severity:"error"},"User not found");const Bt=(Le=pt.metadata.annotations)==null?void 0:Le[p.P],{metadata:{name:en,description:Ce,links:Be},spec:{profile:C}}=pt,W=(et=C==null?void 0:C.displayName)!=null?et:en,Q=C!=null&&C.email?`mailto:${C.email}`:void 0,rt=(0,j.g)(pt,p.u0,{kind:"Group"});return c.createElement(A.nO,{title:c.createElement(bt,{title:W}),subheader:Ce,variant:pe.variant,action:c.createElement(c.Fragment,null,Bt&&c.createElement(he.A,{"aria-label":"Edit",title:"Edit Metadata",component:A.N_,to:Bt},c.createElement(fe.A,null)))},c.createElement(a.A,{container:!0,spacing:3,alignItems:"flex-start"},c.createElement(a.A,{item:!0,xs:12,sm:2,xl:1},c.createElement(A.eu,{displayName:W,picture:C==null?void 0:C.picture})),c.createElement(a.A,{item:!0,md:10,xl:11},c.createElement(_e.A,null,(C==null?void 0:C.email)&&c.createElement(Ie.A,null,c.createElement(ie.A,null,c.createElement(re.Ay,{title:"Email"},c.createElement(ve.A,null))),c.createElement(G.A,null,c.createElement(A.N_,{to:Q!=null?Q:""},C.email))),c.createElement(Ie.A,null,c.createElement(ie.A,null,c.createElement(re.Ay,{title:"Member of"},c.createElement(J.A,null))),c.createElement(G.A,null,c.createElement(B.iI,{entityRefs:rt,defaultKind:"Group"}))),(pe==null?void 0:pe.showLinks)&&c.createElement(te,{links:Be})))))},Mt=kt()(10),rn=(pe,Le)=>{const{kind:et,type:pt}=Le,Bt=pe.map(Ce=>(0,B.SE)((0,p.KU)(Ce),{defaultKind:"group"})),en={kind:et.toLocaleLowerCase("en-US"),type:pt,owners:Bt,user:"all"};return mt().stringify({filters:en},{arrayFormat:"repeat"})},Ft=pe=>[...(0,j.g)(pe,p.u0,{kind:"Group"}).map(({kind:pt,namespace:Bt,name:en})=>(0,p.U2)({kind:pt,namespace:Bt,name:en})),(0,p.U2)(pe)],Et=pe=>pe!==void 0,we=async(pe,Le,et=[])=>{const pt=(0,j.g)(pe,p.Kx,{kind:"Group"}),Bt=pt.length>0,en=(0,p.U2)(pe);if(Bt){const Ce=pt.map(rt=>(0,p.U2)(rt)),W=(await Le.getEntitiesByRefs({fields:["kind","metadata.namespace","metadata.name","relations"],entityRefs:Ce})).items.filter(Et).filter(rt=>!et.includes((0,p.U2)(rt))),Q=(await Promise.all(W.map(rt=>Mt(()=>we(rt,Le,[...et,en]))))).flatMap(rt=>rt);return(0,It.uniq)([...Q,en])}return[en]},nt=async(pe,Le,et)=>{const pt=pe.kind==="Group",Bt=Le==="aggregated",en=pe.kind==="User";return Bt&&pt?we(pe,et):Bt&&en?Ft(pe):[(0,p.U2)(pe)]},Lt=(pe,Le,et)=>et.getEntities({filter:[{kind:Le,"relations.ownedBy":pe}],fields:["kind","metadata.name","metadata.namespace","spec.type","relations"]});function Wt(pe,Le,et,pt=6){const Bt=(0,m.u)(B.vp),en=et!=null?et:["Component","API","System"],{loading:Ce,error:Be,value:C}=(0,R.default)(async()=>{const W=await nt(pe,Le,Bt);return(await Lt(W,en,Bt)).items.reduce((ut,tn)=>{var mn,Cn;const An=ut.find(Gn=>{var Mn;return Gn.kind===tn.kind&&Gn.type===((Mn=tn.spec)==null?void 0:Mn.type)});return An?An.count+=1:ut.push({kind:tn.kind,type:(Cn=(mn=tn.spec)==null?void 0:mn.type)==null?void 0:Cn.toString(),count:1}),ut},[]).sort((ut,tn)=>tn.count-ut.count).slice(0,pt).map(ut=>({counter:ut.count,type:ut.type,kind:ut.kind,queryParams:rn(W,ut)}))},[Bt,pe,Le]);return{componentsWithCounters:C,loading:Ce,error:Be}}const le=(0,i.A)(pe=>(0,k.A)({card:{border:`1px solid ${pe.palette.divider}`,boxShadow:pe.shadows[2],borderRadius:"4px",padding:pe.spacing(2),transition:`${pe.transitions.duration.standard}ms`,"&:hover":{boxShadow:pe.shadows[4]},height:"100%"},bold:{fontWeight:pe.typography.fontWeightBold},smallFont:{fontSize:pe.typography.body2.fontSize},entityTypeBox:{background:Le=>pe.getPageTheme({themeId:Le.type}).backgroundImage,color:Le=>pe.getPageTheme({themeId:Le.type}).fontColor}})),$e=({counter:pe,type:Le,kind:et,url:pt})=>{const Bt=le({type:Le!=null?Le:et}),en=Le!=null?Le:et,Ce=en.length>10;return c.createElement(A.N_,{to:pt,variant:"body2"},c.createElement(Ze.A,{className:`${Bt.card} ${Bt.entityTypeBox}`,display:"flex",flexDirection:"column",alignItems:"center"},c.createElement(Ke.A,{className:Bt.bold,variant:"h6"},pe),c.createElement(Ze.A,{sx:{width:"100%",textAlign:"center"}},c.createElement(Ke.A,{className:`${Bt.bold} ${Ce&&Bt.smallFont}`,variant:"h6"},c.createElement(A.Mm,{text:sn()(en.toLocaleUpperCase("en-US"),pe)}))),Le&&c.createElement(Ke.A,{variant:"subtitle1"},et)))},xt=({entity:pe,relationsType:Le,entityFilterKind:et,entityLimit:pt=6})=>{const Bt=(0,o.Sf)(Ct),{componentsWithCounters:en,loading:Ce,error:Be}=Wt(pe,Le,et,pt);return Ce?c.createElement(A.ke,null):Be?c.createElement(A._1,{error:Be}):c.createElement(a.A,{container:!0},en==null?void 0:en.map(C=>{var W;return c.createElement(a.A,{item:!0,xs:6,md:6,lg:4,key:(W=C.type)!=null?W:C.kind},c.createElement($e,{counter:C.counter,kind:C.kind,type:C.type,url:`${Bt()}/?${C.queryParams}`}))}))},Yt=(0,i.A)(pe=>({list:{[pe.breakpoints.down("xs")]:{padding:"0 0 12px"}},listItemText:{[pe.breakpoints.down("xs")]:{paddingRight:0,paddingLeft:0}},listItemSecondaryAction:{[pe.breakpoints.down("xs")]:{width:"100%",top:"auto",right:"auto",position:"relative",transform:"unset"}}})),se=pe=>{const{variant:Le,entityFilterKind:et,hideRelationsToggle:pt,relationsType:Bt,entityLimit:en=6}=pe,Ce=pt===void 0?!1:pt,Be=Yt(),{entity:C}=(0,j.u)(),W=C.kind==="User"?"aggregated":"direct",[Q,rt]=(0,c.useState)(Bt!=null?Bt:W);return(0,c.useEffect)(()=>{Bt||rt(W)},[rt,W,Bt]),c.createElement(A.nO,{title:"Ownership",variant:Le},!Ce&&c.createElement(_e.A,{dense:!0},c.createElement(Ie.A,{className:Be.list},c.createElement(G.A,{className:Be.listItemText}),c.createElement(Re.A,{className:Be.listItemSecondaryAction},"Direct Relations",c.createElement(re.Ay,{placement:"top",arrow:!0,title:`${Q==="direct"?"Direct":"Aggregated"} Relations`},c.createElement(De.A,{color:"primary",checked:Q!=="direct",onChange:()=>{rt(Q==="direct"?"aggregated":"direct")},name:"pin",inputProps:{"aria-label":"Ownership Type Switch"}})),"Aggregated Relations"))),c.createElement(xt,{entity:C,entityLimit:en,relationsType:Q,entityFilterKind:et}))},ke=pe=>{const{singularTitle:Le,pluralTitle:et,icon:pt,filter:Bt}=pe,en=(0,m.u)(m.t),Ce=(0,m.u)(B.vp),Be=(0,o.Sf)(B.sF),{value:C}=(0,R.default)(async()=>{const W=await en.getBackstageIdentity();return(await Ce.getEntities({filter:[{kind:"group","relations.hasMember":W.userEntityRef,...Bt!=null?Bt:{}}],fields:["metadata","kind"]})).items},[]);if(!(C!=null&&C.length))return null;if(C.length===1){const W=C[0];return c.createElement(A.uk,{text:Le,to:Be((0,p.sM)(W)),icon:pt})}return c.createElement(A.uk,{icon:pt,text:et},c.createElement(A.O6,{title:et},C==null?void 0:C.map(function(Q){return c.createElement(A.hl,{title:Q.metadata.title||Q.metadata.name,subtitle:Q.metadata.namespace!==p.oQ?Q.metadata.namespace:void 0,to:Be((0,p.sM)(Q)),icon:pt,key:(0,p.U2)(Q)})})))}},50585:($n,Zt,e)=>{"use strict";e.d(Zt,{$D:()=>R,OL:()=>Ze,bh:()=>i,iP:()=>G});var o=e(3399),m=e(10288),p=e.n(m),j=e(12106),B=e(46195),i=(A=>(A.DENY="DENY",A.ALLOW="ALLOW",A.CONDITIONAL="CONDITIONAL",A))(i||{});function k(A,_){return A.name===_.name}function Ze(A,_){return"resourceType"in A?!_||A.resourceType===_:!1}function Ke(A){return A.attributes.action==="create"}function a(A){return A.attributes.action==="read"}function De(A){return A.attributes.action==="update"}function Ie(A){return A.attributes.action==="delete"}function ie(A){return{authorize:async(_,F)=>await A.authorize(_,F),authorizeConditional(_,F){const Ae=_;return A.authorize(Ae,F)}}}function G({name:A,attributes:_,resourceType:F}){return F?{type:"resource",name:A,attributes:_,resourceType:F}:{type:"basic",name:A,attributes:_}}var Ve=Object.defineProperty,he=(A,_,F)=>_ in A?Ve(A,_,{enumerable:!0,configurable:!0,writable:!0,value:F}):A[_]=F,_e=(A,_,F)=>(he(A,typeof _!="symbol"?_+"":_,F),F);const re=B.z.lazy(()=>B.z.object({rule:B.z.string(),resourceType:B.z.string(),params:B.z.record(B.z.any()).optional()}).or(B.z.object({anyOf:B.z.array(re).nonempty()})).or(B.z.object({allOf:B.z.array(re).nonempty()})).or(B.z.object({not:re}))),Re=B.z.object({result:B.z.literal(i.ALLOW).or(B.z.literal(i.DENY))}),I=B.z.union([B.z.object({result:B.z.literal(i.ALLOW).or(B.z.literal(i.DENY))}),B.z.object({result:B.z.literal(i.CONDITIONAL),pluginId:B.z.string(),resourceType:B.z.string(),conditions:re})]),c=(A,_)=>B.z.object({items:B.z.array(B.z.intersection(B.z.object({id:B.z.string()}),A)).refine(F=>F.length===_.size&&F.every(({id:Ae})=>_.has(Ae)),{message:"Items in response do not match request"})});class R{constructor(_){_e(this,"enabled"),_e(this,"discovery");var F;this.discovery=_.discovery,this.enabled=(F=_.config.getOptionalBoolean("permission.enabled"))!=null?F:!1}async authorize(_,F){return this.makeRequest(_,Re,F)}async authorizeConditional(_,F){return this.makeRequest(_,I,F)}async makeRequest(_,F,Ae){if(!this.enabled)return _.map(Rt=>({result:i.ALLOW}));const fe={items:_.map(Rt=>({id:j.A(),...Rt}))},ve=await this.discovery.getBaseUrl("permission"),J=await p()(`${ve}/authorize`,{method:"POST",body:JSON.stringify(fe),headers:{...this.getAuthorizationHeader(Ae==null?void 0:Ae.token),"content-type":"application/json"}});if(!J.ok)throw await o.o3.fromResponse(J);const v=await J.json(),oe=c(F,new Set(fe.items.map(({id:Rt})=>Rt))).parse(v).items.reduce((Rt,w)=>(Rt[w.id]=w,Rt),{});return fe.items.map(Rt=>oe[Rt.id])}getAuthorizationHeader(_){return _?{Authorization:`Bearer ${_}`}:{}}}},17899:($n,Zt,e)=>{"use strict";e.d(Zt,{JT:()=>Ze,Tw:()=>a,ak:()=>k,x9:()=>i});var o=e(14041),m=e(7877),p=e(11638),j=e(50585),B=e(68721);const i=(0,m.c)({id:"plugin.permission.api"});class k{constructor(Ie,ie){this.permissionClient=Ie,this.identityApi=ie}static create(Ie){const{config:ie,discovery:G,identity:Ve}=Ie,he=new j.$D({discovery:G,config:ie});return new k(he,Ve)}async authorize(Ie){return(await this.permissionClient.authorize([Ie],await this.identityApi.getCredentials()))[0]}}function Ze(De){const Ie=(0,m.u)(i),{data:ie,error:G}=(0,B.Ay)(De,async Ve=>{if((0,j.OL)(Ve.permission)&&!Ve.resourceRef)return j.bh.DENY;const{result:he}=await Ie.authorize(Ve);return he});return G?{error:G,loading:!1,allowed:!1}:ie===void 0?{loading:!0,allowed:!1}:{loading:!1,allowed:ie===j.bh.ALLOW}}const Ke=De=>{const{permission:Ie,resourceRef:ie,errorComponent:G,...Ve}=De,he=Ze(isResourcePermission(Ie)?{permission:Ie,resourceRef:ie}:{permission:Ie}),_e=useApp(),{NotFoundErrorPage:re}=_e.getComponents();let Re=G===void 0?React.createElement(re,null):G;return he.loading?Re=null:he.allowed&&(Re=De.element),React.createElement(Route,{...Ve,element:Re})};function a(De){const{permission:Ie,resourceRef:ie}=De,G=Ze((0,j.OL)(Ie)?{permission:Ie,resourceRef:ie}:{permission:Ie}),Ve=(0,p.nm)();if(G.loading)return null;if(G.allowed)return o.createElement(o.Fragment,null,De.children);if(De.errorPage)return o.createElement(o.Fragment,null,De.errorPage);const{NotFoundErrorPage:he}=Ve.getComponents();return o.createElement(he,null)}},10015:($n,Zt,e)=>{"use strict";e.d(Zt,{c:()=>a});var o=e(29835),m="http://json-schema.org/draft-07/schema",p="TemplateV1beta3",j="A Template describes a scaffolding task for use with the Scaffolder. It describes the required parameters as well as a series of steps that will be taken to execute the scaffolding task.",B=[{apiVersion:"scaffolder.backstage.io/v1beta3",kind:"Template",metadata:{name:"react-ssr-template",title:"React SSR Template",description:"Next.js application skeleton for creating isomorphic web applications.",tags:["recommended","react"]},spec:{owner:"artist-relations-team",type:"website",parameters:{required:["name","description","repoUrl"],"backstage:permissions":{tags:["one","two"]},properties:{name:{title:"Name",type:"string",description:"Unique name of the component"},description:{title:"Description",type:"string",description:"Description of the component"},repoUrl:{title:"Pick a repository",type:"string","ui:field":"RepoUrlPicker"}}},steps:[{id:"fetch",name:"Fetch",action:"fetch:plain",parameters:{url:"./template"},"backstage:permissions":{tags:["one","two"]}},{id:"publish",name:"Publish to GitHub",action:"publish:github",parameters:{repoUrl:"${{ parameters.repoUrl }}"},if:"${{ parameters.repoUrl }}"}],output:{catalogInfoUrl:"${{ steps.publish.output.catalogInfoUrl }}"}}}],i=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["scaffolder.backstage.io/v1beta3"]},kind:{enum:["Template"]},spec:{type:"object",required:["type","steps"],properties:{type:{type:"string",description:"The type of component created by the template. The software catalog accepts any type value, but an organization should take great care to establish a proper taxonomy for these. Tools including Backstage itself may read this field and behave differently depending on its value. For example, a website type component may present tooling in the Backstage interface that is specific to just websites.",examples:["service","website","library"],minLength:1},owner:{type:"string",description:"The user (or group) owner of the template",minLength:1},parameters:{oneOf:[{type:"object",description:"The JSONSchema describing the inputs for the template.",properties:{"backstage:permissions":{type:"object",description:"Object used for authorizing the parameter",properties:{tags:{type:"array",items:{type:"string"}}}}}},{type:"array",description:"A list of separate forms to collect parameters.",items:{type:"object",description:"The JSONSchema describing the inputs for the template.",properties:{"backstage:permissions":{type:"object",description:"Object used for authorizing the parameter",properties:{tags:{type:"array",items:{type:"string"}}}}}}}]},presentation:{type:"object",description:"A way to redefine the labels for actionable buttons.",properties:{backButtonText:{type:"string",description:"A button which return the user to one step back."},createButtonText:{type:"string",description:"A button which start the execution of the template."},reviewButtonText:{type:"string",description:"A button which open the review step to verify the input prior to start the execution."}}},steps:{type:"array",description:"A list of steps to execute.",items:{type:"object",description:"A description of the step to execute.",required:["action"],properties:{id:{type:"string",description:"The ID of the step, which can be used to refer to its outputs."},name:{type:"string",description:"The name of the step, which will be displayed in the UI during the scaffolding process."},action:{type:"string",description:"The name of the action to execute."},input:{type:"object",description:"A templated object describing the inputs to the action."},if:{type:["string","boolean"],description:'A templated condition that skips the step when evaluated to false. If the condition is true or not defined, the step is executed. The condition is true, if the input is not `false`, `undefined`, `null`, `""`, `0`, or `[]`.'},"backstage:permissions":{type:"object",description:"Object used for authorizing the step",properties:{tags:{type:"array",items:{type:"string"}}}}}}},output:{type:"object",description:"A templated object describing the outputs of the scaffolding task.",properties:{links:{type:"array",description:"A list of external hyperlinks, typically pointing to resources created or updated by the template",items:{type:"object",required:[],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://github.com/my-org/my-new-repo"],minLength:1},entityRef:{type:"string",description:"An entity reference to an entity in the catalog.",examples:["Component:default/my-app"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["View new repo"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1}}}},text:{type:"array",description:"A list of Markdown text blobs, like output data from the template.",items:{type:"object",required:[],properties:{title:{type:"string",description:"A user friendly display name for the text.",examples:["Output Content"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},content:{type:"string",description:"The text blob to display in the UI, rendered as Markdown.",examples:["**hey** _I'm_ Markdown"]}}}}},additionalProperties:{type:"string"}}}}}}],k={$schema:m,$id:p,description:j,examples:B,allOf:i};const Ze=(0,o.zu)(k),Ke={async check(De){return Ze(De)===De}},a=De=>De.apiVersion==="scaffolder.backstage.io/v1beta3"&&De.kind==="Template"},97093:($n,Zt,e)=>{"use strict";e.d(Zt,{C1:()=>Ot,KE:()=>Ce,KV:()=>ia,RO:()=>ue,Wu:()=>Kn,bO:()=>Le,gZ:()=>Cn,g_:()=>tt,hJ:()=>on,he:()=>Y,lN:()=>Z,lV:()=>P});var o=e(7877),m=e(11638),p=e(58837),j=e(95061),B=e(72501),i=e(99703),k=e(4321),Ze=e(58007),Ke=e(8109),a=e(46423),De=e(5951),Ie=e(88951),ie=e(78733),G=e(21619),Ve=e(37877),he=e(64947),_e=e(54917),re=e(40703),Re=e(48653),I=e(42899),c=e(77125),R=e(37197),A=e(67720),_=e(59469),F=e(78467),Ae=e(54819),fe=e(86901),ve=e(69076),J=e(16249),v=e(14041),ee=e(42378),oe=e(23180),Rt=e(94403),w=e(45810),sn=e.n(w),me=e(91638),kt=e(16732),yt=e(46108),mt=e.n(yt),It=e(43157),Ne=e(44030),Ct=e(94384),ot=e(7147),zt=e(29835),Tt=e(92651),Kt=e(58054),lt=e(23127),ft=e(10015),$t=e(56907),an=e(51767),St=e(25711),jt=e(53373),D=e.n(jt),U=e(7707),O=e(9181),M=e(39221),te=e(52950),ge=e(4794),ze=e.n(ge),bt=e(7758),Qe=e(56005),Mt=e.n(Qe),rn=e(44148),Ft=e(41260),Et=e(6924),we=e(20577),nt=e(29365),Lt=e(26343),Wt=e(28233),le=e(55197),$e=e(4832),xt=e(75625),Yt=e(20353),se=e(71407);function ke(N){return typeof N=="object"&&N!==null&&!Array.isArray(N)}function pe(N,H){if(!ke(N))return;const{properties:q,items:ae,anyOf:We,oneOf:Je,allOf:Fe,dependencies:gt,then:Pt,else:dn}=N;for(const wt in N)N.hasOwnProperty(wt)&&wt.startsWith("ui:")&&(H[wt]=N[wt],delete N[wt]);if(ke(q))for(const wt in q){if(!q.hasOwnProperty(wt))continue;const un=q[wt];if(!ke(un))continue;const gn={};H[wt]=gn,pe(un,gn)}if(ke(ae)){const wt={};H.items=wt,pe(ae,wt)}if(Array.isArray(We))for(const wt of We)ke(wt)&&pe(wt,H);if(Array.isArray(Je))for(const wt of Je)ke(wt)&&pe(wt,H);if(Array.isArray(Fe))for(const wt of Fe)ke(wt)&&pe(wt,H);if(ke(gt))for(const wt of Object.keys(gt)){const un=gt[wt];ke(un)&&pe(un,H)}ke(Pt)&&pe(Pt,H),ke(dn)&&pe(dn,H)}const Le=N=>{const H={},q=JSON.parse(JSON.stringify(N));return pe(q,H),{uiSchema:H,schema:q}},et=()=>{const N={__errors:[],addError:H=>{var q;(q=N.__errors)==null||q.push(H)}};return N};function pt(N){return!!N&&"__errors"in N}function Bt(N){var H;if(!N)return!1;for(const q of Object.values(N)){if(pt(q)){if(((H=q.__errors)!=null?H:[]).length>0)return!0;continue}if(Bt(q))return!0}return!1}function en(N){return typeof N=="object"&&N!==null&&!Array.isArray(N)}const Ce=(N,H,q)=>{async function ae(We,Je="#",Fe=We){var gt,Pt;const dn=new ee.t0(N),wt={},un=async(gn,En,Nn,On,Ln)=>{const Sn=H[gn];if(Sn){const In=et();try{await Sn(Nn,In,{...q,formData:We,schema:On,uiSchema:Ln})}catch(pn){In.addError(pn.message)}wt[En]=In}};for(const[gn,En]of Object.entries(Fe)){const Nn=`${Je}/${gn}`,On=dn.getSchema(Nn,We),{schema:Ln,uiSchema:Sn}=Le(On),In=On&&On.items,pn=async(aa,sa,ba)=>{await un(aa["ui:field"],gn,En,sa,ba)},yn=async aa=>{if("ui:field"in aa){const{schema:sa,uiSchema:ba}=Le(On.items);await pn(aa,sa,ba)}};if(On&&"ui:field"in On)await pn(On,Ln,Sn);else if(In&&"ui:field"in On.items)await yn(On.items);else if(In&&On.items.type==="object"){const aa=(Pt=(gt=On.items)==null?void 0:gt.properties)!=null?Pt:[];for(const[,sa]of Object.entries(aa))await yn(sa)}else en(En)&&(wt[gn]=await ae(We,Nn,En))}return wt}return async We=>await ae(We)},Be=N=>{const H=Object.fromEntries(Object.entries(N.formState).map(([q,ae])=>{var We;for(const Je of N.schemas){const gt=new ee.t0(Je.mergedSchema).getSchema(`#/${q}`,N.formState);if(gt){const Pt=(We=gt["ui:backstage"])==null?void 0:We.review;if(Pt){if(Pt.mask)return[q,Pt.mask];if(Pt.show===!1)return[]}if(gt["ui:widget"]==="password")return[q,"******"];if(gt.enum&&gt.enumNames)return[q,gt.enumNames[gt.enum.indexOf(ae)]||ae]}}return[q,ae]}).filter(q=>q.length>0));return v.createElement(oe.tA,{metadata:H})},C=N=>{const H=(0,o.u)(o.f),ae=N.steps.map(({title:We,description:Je,schema:Fe})=>({title:We,description:Je,mergedSchema:Fe,...Le(Fe)})).filter(We=>{var Je;const Fe=(Je=We.uiSchema["ui:backstage"])==null?void 0:Je.featureFlag;return Fe?H.isActive(Fe):!0}).map(We=>{var Je,Fe,gt,Pt;const dn={...We,schema:{...We.schema,title:void 0}};return((Je=We.schema)!=null&&Je.properties||!((Fe=We.schema)!=null&&Fe.dependencies))&&(dn.schema.properties=Object.fromEntries(Object.entries((Pt=(gt=We.schema)==null?void 0:gt.properties)!=null?Pt:{}).filter(([wt])=>{var un,gn;const En=(gn=(un=We.uiSchema[wt])==null?void 0:un["ui:backstage"])==null?void 0:gn.featureFlag;return En?H.isActive(En):!0}))),dn});return{presentation:N.presentation,steps:ae}},W=N=>(0,v.useState)(()=>{if(N)return N;const H=sn().parse(window.location.search,{ignoreQueryPrefix:!0});try{return JSON.parse(H.formData)}catch{return{}}}),Q=N=>{const H=(0,o.u)(kt.s),{value:q,loading:ae,error:We}=(0,me.default)(()=>H.getTemplateParameterSchema(N),[H,N]);return{manifest:q,loading:ae,error:We}},rt=N=>{const H="backstage:featureFlag",q=(0,o.u)(o.f);if(!N)return;const ae=N==null?void 0:N.steps.filter(We=>{const Je=We.schema[H];return typeof Je!="string"||q.isActive(Je)}).map(We=>{var Je;const Fe=mt()(We),gt=[];return Fe.schema.properties&&(Fe.schema.properties=Object.fromEntries(Object.entries(Fe.schema.properties).filter(([Pt,dn])=>dn[H]?q.isActive(dn[H])?!0:(gt.push(Pt),!1):!0)),Fe.schema.required=Array.isArray(Fe.schema.required)?(Je=Fe.schema.required)==null?void 0:Je.filter(Pt=>!gt.includes(Pt)):Fe.schema.required),Fe});return{...N,steps:ae}},ct=(N,H={})=>{var q;const{layouts:ae=[]}=H,We=N==null?void 0:N.uiSchema["ui:ObjectFieldTemplate"];if(typeof We!="string")return N;const Je=(q=ae.find(Fe=>Fe.name===We))==null?void 0:q.component;return Je?{...N,uiSchema:{...N.uiSchema,["ui:ObjectFieldTemplate"]:Je}}:N};var tn=Object.freeze({__proto__:null,DescriptionField:({description:N})=>N&&v.createElement(oe.h2,{content:N,linkTarget:"_blank"})});const mn=(0,p.A)(N=>({markdownDescription:{fontSize:N.typography.caption.fontSize,margin:0,color:N.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),Cn=N=>{const{children:H,displayLabel:q=!0,rawErrors:ae=[],errors:We,help:Je,rawDescription:Fe,required:gt,disabled:Pt}=N,dn=mn();return v.createElement(j.A,{fullWidth:!0,error:!!ae.length,required:gt,disabled:Pt},H,q&&Fe?v.createElement(oe.h2,{content:Fe,className:dn.markdownDescription}):null,We,Je)},An=N=>{const{id:H,children:q,classNames:ae,style:We,disabled:Je,displayLabel:Fe,hidden:gt,label:Pt,onDropPropertyClick:dn,onKeyChange:wt,readonly:un,required:gn,rawErrors:En=[],errors:Nn,help:On,rawDescription:Ln,schema:Sn,uiSchema:In,registry:pn}=N,yn=(0,Ne.$R)(In),aa=(0,Ne.$F)("WrapIfAdditionalTemplate",pn,yn);return gt?v.createElement("div",{style:{display:"none"}},q):v.createElement(aa,{classNames:ae,style:We,disabled:Je,id:H,label:Pt,onDropPropertyClick:dn,onKeyChange:wt,readonly:un,required:gn,schema:Sn,uiSchema:In,registry:pn},v.createElement(Cn,{displayLabel:Fe,rawErrors:En,help:On,disabled:Je,rawDescription:Ln,errors:Nn,required:gn},q))},Gn=(0,p.A)(N=>({markdownDescription:{fontSize:N.typography.caption.fontSize,margin:0,color:N.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),Mn=N=>{const{id:H,description:q}=N,ae=Gn();return q?typeof q=="string"?v.createElement(oe.h2,{content:q,className:ae.markdownDescription}):v.createElement(B.A,{id:H,variant:"subtitle2",style:{marginTop:"5px"}},q):null},Wn=(0,It.SL)(Ct.Sx),P=N=>{const H=v.useMemo(()=>{var ae;return Object.fromEntries(Object.entries((ae=N.fields)!=null?ae:{}).map(([We,Je])=>[We,Fe=>{var gt,Pt;return v.createElement(Je,{...Fe,uiSchema:(gt=Fe.uiSchema)!=null?gt:{},formData:Fe.formData,rawErrors:(Pt=Fe.rawErrors)!=null?Pt:[]})}]))},[N.fields]),q=v.useMemo(()=>({FieldTemplate:An,DescriptionFieldTemplate:Mn,...N.templates}),[N.templates]);return v.createElement(Wn,{...N,templates:q,fields:H})},K=(0,p.A)(N=>(0,i.A)({list:{width:"100%"},text:{textWrap:"wrap"}})),be=({errors:N})=>{const H=K();return v.createElement(k.A,null,v.createElement(Ze.A,{dense:!0,className:H.list},N.map((q,ae)=>v.createElement(Ke.A,{key:ae},v.createElement(a.A,null,v.createElement(ot.A,{color:"error"})),v.createElement(De.A,{classes:{primary:H.text},primary:q.stack})))))},vt=(0,p.A)(N=>({backButton:{marginRight:N.spacing(1)},footer:{display:"flex",flexDirection:"row",justifyContent:"right",marginTop:N.spacing(2)},formWrapper:{padding:N.spacing(2)}})),Ot=N=>{var H,q,ae,We,Je,Fe,gt;const{layouts:Pt=[],components:dn={},...wt}=N,{ReviewStateComponent:un=Be,ReviewStepComponent:gn,backButtonText:En="Back",createButtonText:Nn="Create",reviewButtonText:On="Review"}=dn,Ln=(0,m.st)(),{presentation:Sn,steps:In}=C(wt.manifest),pn=(0,o.b)(),[yn,aa]=(0,v.useState)(0),[sa,ba]=(0,v.useState)(!1),[Ca,Na]=W(wt.initialState),[Fa,La]=(0,v.useState)(),Pa=vt(),za=(0,v.useMemo)(()=>Object.fromEntries(wt.extensions.map(({name:X,component:it})=>[X,it])),[wt.extensions]),Ya=(0,v.useMemo)(()=>({...tn,...za}),[za]),Ja=(0,v.useMemo)(()=>Object.fromEntries(wt.extensions.map(({name:X,validation:it})=>[X,it])),[wt.extensions]),lr=(0,v.useMemo)(()=>{var X;return Ce((X=In[yn])==null?void 0:X.mergedSchema,Ja,{apiHolder:pn})},[In,yn,Ja,pn]),Qa=()=>{aa(X=>X-1)},wa=(0,v.useCallback)(X=>Na(it=>({...it,...X.formData})),[Na]),ja=(0,v.useCallback)(()=>{var X;wt.onCreate(Ca);const it=typeof Ca.name=="string"?Ca.name:void 0;Ln.captureEvent("create",(X=it!=null?it:wt.templateName)!=null?X:"unknown")},[wt,Ca,Ln]),Ga=ct(In[yn],{layouts:Pt}),yr=async({formData:X={}})=>{La(void 0),ba(!0);const it=await lr(X);ba(!1),Bt(it)?La(it):(La(void 0),aa(_n=>{const xn=_n+1;return Ln.captureEvent("click",`Next Step (${xn})`),xn})),Na(_n=>({..._n,...X}))},Ua=(q=(H=Sn==null?void 0:Sn.buttonLabels)==null?void 0:H.backButtonText)!=null?q:En,Xa=(We=(ae=Sn==null?void 0:Sn.buttonLabels)==null?void 0:ae.createButtonText)!=null?We:Nn,Ge=(Fe=(Je=Sn==null?void 0:Sn.buttonLabels)==null?void 0:Je.reviewButtonText)!=null?Fe:On;return v.createElement(v.Fragment,null,sa&&v.createElement(Ie.A,{variant:"indeterminate"}),v.createElement(ie.A,{activeStep:yn,alternativeLabel:!0,variant:"elevation",style:{overflowX:"auto"}},In.map((X,it)=>{const _n=yn>it;return v.createElement(G.A,{key:it},v.createElement(Ve.A,{"aria-label":`Step ${it+1}`,style:{cursor:_n?"pointer":"default"},onClick:()=>{_n&&aa(it)}},X.title))}),v.createElement(G.A,null,v.createElement(Ve.A,null,"Review"))),v.createElement("div",{className:Pa.formWrapper},yn<In.length?v.createElement(P,{validator:Rt.Ay,extraErrors:Fa,formData:Ca,formContext:{formData:Ca},schema:Ga.schema,uiSchema:Ga.uiSchema,onSubmit:yr,fields:Ya,showErrorList:"top",templates:{ErrorListTemplate:be},onChange:wa,experimental_defaultFormStateBehavior:{allOf:"populateDefaults"},...(gt=wt.formProps)!=null?gt:{}},v.createElement("div",{className:Pa.footer},v.createElement(he.A,{onClick:Qa,className:Pa.backButton,disabled:yn<1||sa},Ua),v.createElement(he.A,{variant:"contained",color:"primary",type:"submit",disabled:sa},yn===In.length-1?Ge:"Next"))):gn?v.createElement(gn,{disableButtons:sa,formData:Ca,handleBack:Qa,handleReset:()=>{},steps:In,handleCreate:ja}):v.createElement(v.Fragment,null,v.createElement(un,{formState:Ca,schemas:In}),v.createElement("div",{className:Pa.footer},v.createElement(he.A,{onClick:Qa,className:Pa.backButton,disabled:yn<1},"Back"),v.createElement(he.A,{variant:"contained",color:"primary",onClick:ja},Xa)))))},Vt=(0,p.A)(()=>({header:{backgroundImage:({cardBackgroundImage:N})=>N,color:({cardFontColor:N})=>N},subtitleWrapper:{display:"flex",justifyContent:"space-between"}})),ne=N=>{const{template:{metadata:{title:H,name:q},spec:{type:ae}}}=N,{getPageTheme:We}=(0,_e.A)(),Je=We({themeId:ae}),Fe=Vt({cardFontColor:Je.fontColor,cardBackgroundImage:Je.backgroundImage}),gt=v.createElement("div",{className:Fe.subtitleWrapper},v.createElement("div",null,ae),v.createElement("div",null,v.createElement(Tt.uR,{entity:N.template,style:{padding:0}})));return v.createElement(oe.f1,{title:H!=null?H:q,subtitle:gt,classes:{root:Fe.header}})},Pe=(0,p.A)(()=>({linkText:{display:"inline-flex",alignItems:"center"}})),je=({icon:N,text:H,url:q})=>{const ae=Pe();return v.createElement("div",{className:ae.linkText},v.createElement(N,{fontSize:"small"}),v.createElement(oe.N_,{style:{marginLeft:"8px"},to:q},H||q))},Jt=(0,p.A)(N=>({box:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":10,"-webkit-box-orient":"vertical"},markdown:{"& :first-child":{margin:0}},label:{color:N.palette.text.secondary,textTransform:"uppercase",fontWeight:"bold",letterSpacing:.5,lineHeight:1,fontSize:"0.75rem"},footer:{display:"flex",justifyContent:"space-between",flex:1,alignItems:"center"},ownedBy:{display:"flex",alignItems:"center",flex:1,color:N.palette.link}})),qt=N=>{var H,q,ae,We,Je,Fe,gt;const{template:Pt}=N,dn=Jt(),wt=(0,Kt.g)(Pt,zt.vv),un=(0,m.nm)(),gn=En=>{var Nn;return En&&(Nn=un.getSystemIcon(En))!=null?Nn:lt.A};return v.createElement(re.A,null,v.createElement(ne,{template:Pt}),v.createElement(Re.A,null,v.createElement(I.A,{container:!0,spacing:2},v.createElement(I.A,{item:!0,xs:12},v.createElement(c.A,{className:dn.box},v.createElement(oe.h2,{className:dn.markdown,content:(H=Pt.metadata.description)!=null?H:"No description"}))),((ae=(q=Pt.metadata.tags)==null?void 0:q.length)!=null?ae:0)>0&&v.createElement(v.Fragment,null,v.createElement(I.A,{item:!0,xs:12},v.createElement(R.A,null)),v.createElement(I.A,{item:!0,xs:12},v.createElement(I.A,{container:!0,spacing:2},(We=Pt.metadata.tags)==null?void 0:We.map(En=>v.createElement(I.A,{item:!0},v.createElement(A.A,{style:{margin:0},size:"small",label:En,key:En})))))),(N.additionalLinks||((Je=Pt.metadata.links)==null?void 0:Je.length))&&v.createElement(v.Fragment,null,v.createElement(I.A,{item:!0,xs:12},v.createElement(R.A,null)),v.createElement(I.A,{item:!0,xs:12},v.createElement(I.A,{container:!0,spacing:2},(Fe=N.additionalLinks)==null?void 0:Fe.map(({icon:En,text:Nn,url:On},Ln)=>v.createElement(I.A,{className:dn.linkText,item:!0,xs:6,key:Ln},v.createElement(je,{icon:En,text:Nn,url:On}))),(gt=Pt.metadata.links)==null?void 0:gt.map(({url:En,icon:Nn,title:On},Ln)=>v.createElement(I.A,{className:dn.linkText,item:!0,xs:6,key:Ln},v.createElement(je,{icon:gn(Nn),text:On||En,url:En})))))))),v.createElement(_.A,{style:{padding:"16px",flex:1,alignItems:"flex-end"}},v.createElement("div",{className:dn.footer},v.createElement("div",{className:dn.ownedBy},wt.length>0&&v.createElement(v.Fragment,null,v.createElement(oe.ny,{fontSize:"small"}),v.createElement(Tt.iI,{style:{marginLeft:"8px"},entityRefs:wt,defaultKind:"Group",hideIcons:!0}))),v.createElement(he.A,{size:"small",variant:"outlined",color:"primary",onClick:()=>{var En;return(En=N.onSelected)==null?void 0:En.call(N,Pt)}},"Choose"))))},cn=N=>{const{templates:H,title:q,components:{CardComponent:ae}={},onSelected:We}=N,Je=typeof q=="string"?v.createElement(oe.dv,{title:q}):q;if(H.length===0)return null;const Fe=ae||qt;return v.createElement(oe.UC,null,Je,v.createElement(oe.s3,null,H.map(({template:gt,additionalLinks:Pt})=>v.createElement(Fe,{key:(0,zt.U2)(gt),additionalLinks:Pt,template:gt,onSelected:We}))))},on=N=>{const{loading:H,error:q,entities:ae}=(0,Tt.nK)(),{groups:We,templateFilter:Je,TemplateCardComponent:Fe,onTemplateSelected:gt}=N,Pt=(0,o.u)(o.r),dn=(0,v.useCallback)(wt=>{gt==null||gt(wt)},[gt]);return H?v.createElement(oe.ke,null):q?(Pt.post(q),null):!ae||!ae.length?v.createElement(B.A,{variant:"body2"},"No templates found that match your filter. Learn more about"," ",v.createElement(oe.N_,{to:"https://backstage.io/docs/features/software-templates/adding-templates"},"adding templates"),"."):v.createElement(v.Fragment,null,We.map(({title:wt,filter:un},gn)=>{const En=ae.filter(ft.c).filter(Nn=>Je?Je(Nn):!0).filter(un).map(Nn=>{var On,Ln;const Sn=(Ln=(On=N.additionalLinksForEntity)==null?void 0:On.call(N,Nn))!=null?Ln:[];return{template:Nn,additionalLinks:Sn}});return v.createElement(cn,{key:gn,templates:En,title:wt,components:{CardComponent:Fe},onSelected:dn})}))},wn=(0,p.A)({markdown:{"& :first-child":{marginTop:0},"& :last-child":{marginBottom:0}}}),Kn=N=>{var H;const{title:q,description:ae,namespace:We,templateName:Je,...Fe}=N,gt=wn(),Pt=(0,zt.U2)({kind:"Template",namespace:We,name:Je}),dn=(0,o.u)(o.r),{loading:wt,manifest:un,error:gn}=Q(Pt),En=rt(un);return(0,v.useEffect)(()=>{gn&&dn.post(new Error(`Failed to load template, ${gn}`))},[gn,dn]),gn?Fe.onError(gn):v.createElement(oe.UC,null,wt&&v.createElement(oe.ke,null),En&&v.createElement(oe.nO,{title:q!=null?q:En.title,subheader:v.createElement(oe.h2,{className:gt.markdown,content:(H=ae!=null?ae:En.description)!=null?H:"No description"}),noPadding:!0,titleTypographyProps:{component:"h2"}},v.createElement(Ot,{manifest:En,templateName:Je,...Fe})))},Yn=N=>React.createElement(SecretsContextProvider,null,React.createElement(Kn,{...N})),oa=(0,p.A)({root:{"&:hover":{textDecoration:"none"}}}),vn=N=>{const{links:H=[]}=N.output,q=oa(),ae=(0,m.nm)(),We=(0,m.Sf)(Tt.sF),Je=Fe=>{var gt;return(gt=ae.getSystemIcon(Fe))!=null?gt:$t.A};return v.createElement(v.Fragment,null,H.filter(({url:Fe,entityRef:gt})=>Fe||gt).map(({url:Fe,entityRef:gt,title:Pt,icon:dn})=>{if(gt){const wt=(0,zt.KU)(gt),un=We(wt);return{title:Pt,icon:dn,url:un}}return{title:Pt,icon:dn,url:Fe}}).map(({url:Fe,title:gt,icon:Pt},dn)=>{const wt=Je(Pt);return v.createElement(oe.N_,{to:Fe,key:dn,classes:{root:q.root}},v.createElement(he.A,{startIcon:v.createElement(wt,null),component:"div",color:"primary"},gt))}))},ra=N=>{const{output:{text:H=[]},index:q,setIndex:ae}=N,We=(0,m.nm)(),Je=Fe=>{var gt;return(gt=We.getSystemIcon(Fe))!=null?gt:$t.A};return v.createElement(v.Fragment,null,H.filter(({content:Fe})=>Fe!==void 0).map(({title:Fe,icon:gt},Pt)=>{const dn=Je(gt);return v.createElement(he.A,{key:Pt,startIcon:v.createElement(dn,null),component:"div",color:"primary",onClick:()=>{q!==Pt&&(ae==null||ae(Pt))},variant:q===Pt?"outlined":void 0},Fe)}))},ia=N=>{var H,q,ae;const{output:We}=N,[Je,Fe]=(0,v.useState)((H=We==null?void 0:We.text)!=null&&H.length?0:void 0),gt=(0,v.useMemo)(()=>{var Pt;return Je!==void 0?(Pt=We==null?void 0:We.text)==null?void 0:Pt[Je]:null},[We,Je]);return We?v.createElement(v.Fragment,null,v.createElement(c.A,{paddingBottom:2},v.createElement(k.A,null,v.createElement(c.A,{padding:2,justifyContent:"center",display:"flex",gridGap:16},v.createElement(ra,{output:We,index:Je,setIndex:Fe}),v.createElement(vn,{output:We})))),gt?v.createElement(c.A,{paddingBottom:2},v.createElement(oe.nO,{title:(q=gt.title)!=null?q:"Text Output",noPadding:!0,titleTypographyProps:{component:"h2"}},v.createElement(c.A,{padding:2,height:"100%"},v.createElement(oe.h2,{content:(ae=gt.content)!=null?ae:""})))):null):null},na=(0,p.A)(N=>({root:{color:N.palette.text.disabled},completed:{color:N.palette.status.ok},error:{color:N.palette.status.error}})),da=N=>{const H=na(),{active:q,completed:ae,error:We,skipped:Je}=N,Fe=()=>q?v.createElement(F.A,{size:"20px"}):ae?v.createElement(U.A,null):We?v.createElement(O.A,null):Je?v.createElement(an.A,null):v.createElement(St.A,null);return v.createElement("div",{className:D()(H.root,{[H.completed]:ae,[H.error]:We})},Fe())},_a=N=>{const[H,q]=(0,v.useState)(""),{step:ae}=N,We=()=>ae.startedAt&&ae.endedAt&&H?null:ae.startedAt&&ae.endedAt?1:1e3,Je=(0,v.useCallback)(()=>{if(!ae.startedAt){q("");return}const Fe=ae.endedAt?te.c9.fromISO(ae.endedAt):te.c9.local(),gt=te.c9.fromISO(ae.startedAt),Pt=te.IX.fromDateTimes(gt,Fe).toDuration().valueOf();q(ze()(Pt,{round:!0}))},[ae.endedAt,ae.startedAt]);return(0,bt.u)(Je),(0,M.A)(Je,We()),v.createElement(B.A,{variant:"caption"},H)},qn=(0,p.A)(N=>({failed:{backgroundColor:N.palette.error.main},success:{backgroundColor:N.palette.success.main}})),Ea=N=>{const H=qn();return N.isComplete?v.createElement(Ie.A,{variant:"determinate",classes:{bar:N.isError?H.failed:H.success},value:100}):v.createElement(Ie.A,{variant:"indeterminate"})},Z=N=>{var H,q;return v.createElement(k.A,{style:{position:"relative",overflow:"hidden"}},v.createElement(Ea,{isComplete:(H=N.isComplete)!=null?H:!1,isError:(q=N.isError)!=null?q:!1}),v.createElement(c.A,{padding:2},v.createElement(ie.A,{activeStep:N.activeStep,alternativeLabel:!0,variant:"elevation",style:{overflowX:"auto"}},N.steps.map(ae=>{const We=ae.status==="completed",Je=ae.status==="failed",Fe=ae.status==="processing",gt=ae.status==="skipped",Pt={completed:We,error:Je,active:Fe,skipped:gt};return v.createElement(G.A,{key:ae.id},v.createElement(Ae.A,null,v.createElement(Ve.A,{StepIconProps:Pt,StepIconComponent:da,"data-testid":"step-label"},v.createElement(c.A,null,ae.name),!gt&&v.createElement(_a,{step:ae}))))}))))},Ue=(0,p.A)({root:{width:"100%",height:"100%",position:"relative"}}),tt=N=>{const H=Ue();return v.createElement("div",{className:H.root},v.createElement(oe.rW,{text:Object.values(N.logs).map(q=>q.join(`
`)).filter(Boolean).join(`
`)}))},ht=v.createElement(Ft.A,{fontSize:"small"}),Se=v.createElement(rn.A,{fontSize:"small"}),Y=()=>{const N=(0,o.u)(o.l),{error:H,loading:q,availableTypes:ae,selectedTypes:We,setSelectedTypes:Je}=(0,Tt.jF)();return q?v.createElement(oe.ke,null):H?(N.post({message:`Failed to load entity types with error: ${H}`,severity:"error"}),null):ae?v.createElement(c.A,{pb:1,pt:1},v.createElement(B.A,{variant:"button",component:"label",htmlFor:"categories-picker"},"Categories"),v.createElement(we.Ay,{multiple:!0,id:"categories-picker",options:ae,value:We,onChange:(Fe,gt)=>Je(gt),renderOption:(Fe,{selected:gt})=>v.createElement(fe.A,{control:v.createElement(ve.A,{icon:ht,checkedIcon:Se,checked:gt}),label:Mt()(Fe)}),size:"small",popupIcon:v.createElement(Et.A,null),renderInput:Fe=>v.createElement(J.A,{...Fe,variant:"outlined"})})):null},Ee=(0,p.A)(N=>({button:{color:N.page.fontColor}}));function ue(N){const{onEditorClicked:H,onActionsClicked:q,onTasksClicked:ae}=N,We=Ee(),[Je,Fe]=(0,v.useState)();if(!H&&!q)return null;const gt=dn=>{Fe(dn.currentTarget)},Pt=()=>{Fe(void 0)};return v.createElement(v.Fragment,null,v.createElement(nt.A,{id:"long-menu","aria-label":"more","aria-controls":"long-menu","aria-expanded":!!Je,"aria-haspopup":"true",role:"button",onClick:gt,"data-testid":"menu-button",color:"inherit",className:We.button},v.createElement(se.A,null)),v.createElement(le.Ay,{"aria-labelledby":"long-menu",open:Boolean(Je),onClose:Pt,anchorEl:Je,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},v.createElement(Wt.A,null,H&&v.createElement(Lt.A,{onClick:H},v.createElement(a.A,null,v.createElement(xt.A,{fontSize:"small"})),v.createElement(De.A,{primary:"Template Editor"})),q&&v.createElement(Lt.A,{onClick:q},v.createElement(a.A,null,v.createElement($e.A,{fontSize:"small"})),v.createElement(De.A,{primary:"Installed Actions"})),ae&&v.createElement(Lt.A,{onClick:ae},v.createElement(a.A,null,v.createElement(Yt.A,{fontSize:"small"})),v.createElement(De.A,{primary:"Task List"})))))}function at(N){return{expose(){const H=()=>null;return attachComponentData(H,FIELD_EXTENSION_KEY,N),H}}}},16732:($n,Zt,e)=>{"use strict";e.d(Zt,{F:()=>j,S:()=>k,a:()=>B,s:()=>Ke,u:()=>Ze});var o=e(97388),m=e(14041),p=e(7877);const j="scaffolder.extensions.wrapper.v1",B="scaffolder.extensions.field.v1",i=(0,o.tK)("secrets-context"),k=a=>{const[De,Ie]=(0,m.useState)({});return m.createElement(i.Provider,{value:(0,o.Bl)({1:{secrets:De,setSecrets:Ie}})},a.children)},Ze=()=>{var a;const De=(a=(0,m.useContext)(i))==null?void 0:a.atVersion(1);if(!De)throw new Error("useTemplateSecrets must be used within a SecretsContextProvider");const{setSecrets:Ie,secrets:ie={}}=De;return{setSecrets:(0,m.useCallback)(Ve=>{Ie(he=>({...he,...Ve}))},[Ie]),secrets:ie}},Ke=(0,o.Q6)("scaffolder:scaffolder-api-ref",()=>(0,p.c)({id:"plugin.scaffolder.service"}))},77189:($n,Zt,e)=>{"use strict";e.d(Zt,{TA:()=>ie,cw:()=>De,l3:()=>Ze,zD:()=>i});var o=e(11638),m=e(7877),p=e(16732),j=e(82806),B=e(14041);function i(he){return{expose(){const _e=()=>null;return(0,o.h3)(_e,p.a,he),_e}}}const k=()=>null;(0,o.h3)(k,p.F,!0);const Ze=he=>(0,o.OJ)(he,_e=>_e.selectByComponentData({key:p.F}).findComponentData({key:p.a})),Ke="scaffolder.layout.v1",a="scaffolder.layouts.wrapper.v1",De=he=>(0,o.OJ)(he,_e=>_e.selectByComponentData({key:a}).findComponentData({key:Ke}));function Ie(he,_e){var re,Re,I;switch(_e.type){case"INIT":{he.steps=_e.data.spec.steps.reduce((c,R)=>(c[R.id]={status:"open",id:R.id},c),{}),he.stepLogs=_e.data.spec.steps.reduce((c,R)=>(c[R.id]=[],c),{}),he.loading=!1,he.error=void 0,he.completed=!1,he.task=_e.data;return}case"LOGS":{const c=_e.data;for(const R of c){const A=`${R.createdAt} ${R.body.message}`;if(!R.body.stepId||!((re=he.steps)!=null&&re[R.body.stepId]))continue;const _=(Re=he.stepLogs)==null?void 0:Re[R.body.stepId],F=(I=he.steps)==null?void 0:I[R.body.stepId];R.body.status&&R.body.status!==F.status&&(F.status=R.body.status,F.status==="processing"&&(F.startedAt=R.createdAt),["cancelled","completed","failed"].includes(F.status)&&(F.endedAt=R.createdAt)),_==null||_.push(A)}return}case"COMPLETED":{he.completed=!0,he.output=_e.data.body.output,he.error=_e.data.body.error;return}case"CANCELLED":{he.cancelled=!0;return}case"ERROR":{he.error=_e.data,he.loading=!1,he.completed=!0;return}default:return}}const ie=he=>{const _e=(0,m.u)(p.s),[re,Re]=(0,j.A)(Ie,{cancelled:!1,loading:!0,completed:!1,stepLogs:{},steps:{}});return(0,B.useEffect)(()=>{let I=!1,c,R,A=1;const _=()=>_e.getTask(he).then(F=>{if(I)return;Re({type:"INIT",data:F});const Ae=_e.streamLogs({taskId:he}),fe=new Array;function ve(){if(fe.length){const J=fe.splice(0,fe.length);Re({type:"LOGS",data:J})}}R=setInterval(ve,500),c=Ae.subscribe({next:J=>{switch(J.type){case"log":return fe.push(J);case"cancelled":Re({type:"CANCELLED"});return;case"completion":ve(),Re({type:"COMPLETED",data:J});return;default:throw new Error(`Unhandled event type ${J.type} in observer`)}},error:J=>{ve(),J.message||(J.message=`We cannot connect at the moment, trying again in some seconds... Retrying (${A}/3 retries)`),A<=3&&setTimeout(()=>{A+=1,_()},15e3),Re({type:"ERROR",data:J})}})},F=>{I||Re({type:"ERROR",data:F})});return _(),()=>{I=!0,c&&c.unsubscribe(),R&&clearInterval(R)}},[_e,Re,he]),re};function G(he){return{expose(){const _e=()=>null;return attachComponentData(_e,Ke,he),_e}}}const Ve=()=>null;(0,o.h3)(Ve,a,!0)},56703:($n,Zt,e)=>{"use strict";e.d(Zt,{A:()=>xt,B:()=>Wt,C:()=>$e,D:()=>Wn,F:()=>Mn,G:()=>ut,H:()=>Le,I:()=>ke,J:()=>se,K:()=>Cn,N:()=>mn,P:()=>cn,T:()=>Ea,d:()=>ra,e:()=>ht,i:()=>et,l:()=>qt,o:()=>Ot,p:()=>je,q:()=>Pe,r:()=>be,s:()=>on,t:()=>ne,u:()=>P,v:()=>K,w:()=>Vt,x:()=>vt,y:()=>Et,z:()=>Ft});var o=e(33478),m=e(16732),p=e(77189),j=e(29835),B=e(3399),i=e(45810),k=e.n(i),Ze=e(96403),Ke=e.n(Ze),a=e(4237),De=e.n(a),Ie=e(75757),ie=e(7877),G=e(11638),Ve=e(92651),he=e(16249),_e=e(77125),re=e(72501),Re=e(37197),I=e(95061),c=e(86901),R=e(69076),A=e(58837),_=e(54917),F=e(29365),Ae=e(55197),fe=e(28233),ve=e(26343),J=e(46423),v=e(5951),ee=e(4321),oe=e(64947),Rt=e(20577),w=e(14041),sn=e(91638),me=e(46195),kt=e(63177),yt=e(51253),mt=e(63301),It=e(48543),Ne=e(23180),Ct=e(16983),ot=e(97720),zt=e(56005),Tt=e.n(zt),Kt=e(44148),lt=e(41260),ft=e(6924),$t=e(18690),an=e(15166),St=e(92399),jt=e(55534),D=e(25283),U=e(86868),O=e(71407),M=e(97093),te=Object.defineProperty,ge=(Se,Y,Ee)=>Y in Se?te(Se,Y,{enumerable:!0,configurable:!0,writable:!0,value:Ee}):Se[Y]=Ee,ze=(Se,Y,Ee)=>(ge(Se,typeof Y!="symbol"?Y+"":Y,Ee),Ee);class bt{constructor(Y){ze(this,"discoveryApi"),ze(this,"scmIntegrationsApi"),ze(this,"fetchApi"),ze(this,"identityApi"),ze(this,"useLongPollingLogs");var Ee,ue;this.discoveryApi=Y.discoveryApi,this.fetchApi=(Ee=Y.fetchApi)!=null?Ee:{fetch},this.scmIntegrationsApi=Y.scmIntegrationsApi,this.useLongPollingLogs=(ue=Y.useLongPollingLogs)!=null?ue:!1,this.identityApi=Y.identityApi}async listTasks(Y){if(!this.identityApi)throw new Error("IdentityApi is not available in the ScaffolderClient, please pass through the IdentityApi to the ScaffolderClient constructor in order to use the listTasks method");const Ee=await this.discoveryApi.getBaseUrl("scaffolder"),{userEntityRef:ue}=await this.identityApi.getBackstageIdentity(),at=k().stringify(Y.filterByOwnership==="owned"?{createdBy:ue}:{}),N=await this.fetchApi.fetch(`${Ee}/v2/tasks?${at}`);if(!N.ok)throw await B.o3.fromResponse(N);return await N.json()}async getIntegrationsList(Y){return{integrations:[...this.scmIntegrationsApi.azure.list(),...this.scmIntegrationsApi.bitbucket.list().filter(ue=>!this.scmIntegrationsApi.bitbucketCloud.byHost(ue.config.host)&&!this.scmIntegrationsApi.bitbucketServer.byHost(ue.config.host)),...this.scmIntegrationsApi.bitbucketCloud.list(),...this.scmIntegrationsApi.bitbucketServer.list(),...this.scmIntegrationsApi.gerrit.list(),...this.scmIntegrationsApi.gitea.list(),...this.scmIntegrationsApi.github.list(),...this.scmIntegrationsApi.gitlab.list()].map(ue=>({type:ue.type,title:ue.title,host:ue.config.host})).filter(ue=>Y.allowedHosts.includes(ue.host))}}async getTemplateParameterSchema(Y){const{namespace:Ee,kind:ue,name:at}=(0,j.KU)(Y,{defaultKind:"template"}),N=await this.discoveryApi.getBaseUrl("scaffolder"),H=[Ee,ue,at].map(Je=>encodeURIComponent(Je)).join("/"),q=`${N}/v2/templates/${H}/parameter-schema`,ae=await this.fetchApi.fetch(q);if(!ae.ok)throw await B.o3.fromResponse(ae);return await ae.json()}async scaffold(Y){const{templateRef:Ee,values:ue,secrets:at={}}=Y,N=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks`,H=await this.fetchApi.fetch(N,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templateRef:Ee,values:{...ue},secrets:at})});if(H.status!==201){const ae=`${H.status} ${H.statusText}`,We=await H.text();throw new Error(`Backend request failed, ${ae} ${We.trim()}`)}const{id:q}=await H.json();return{taskId:q}}async getTask(Y){const ue=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(Y)}`,at=await this.fetchApi.fetch(ue);if(!at.ok)throw await B.o3.fromResponse(at);return await at.json()}streamLogs(Y){return this.useLongPollingLogs?this.streamLogsPolling(Y):this.streamLogsEventStream(Y)}async dryRun(Y){const Ee=await this.discoveryApi.getBaseUrl("scaffolder"),ue=await this.fetchApi.fetch(`${Ee}/v2/dry-run`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:Y.template,values:Y.values,secrets:Y.secrets,directoryContents:Y.directoryContents})});if(!ue.ok)throw await B.o3.fromResponse(ue);return ue.json()}streamLogsEventStream({taskId:Y,after:Ee}){return new(Ke())(ue=>{var at;const N=new URLSearchParams;Ee!==void 0&&N.set("after",String(Number(Ee))),Promise.all([this.discoveryApi.getBaseUrl("scaffolder"),(at=this.identityApi)==null?void 0:at.getCredentials()]).then(([H,q])=>{const ae=`${H}/v2/tasks/${encodeURIComponent(Y)}/eventstream`,We=Fe=>{if(Fe.data)try{ue.next(JSON.parse(Fe.data))}catch(gt){ue.error(gt)}},Je=new a.EventSourcePolyfill(ae,{withCredentials:!0,headers:q!=null&&q.token?{Authorization:`Bearer ${q.token}`}:{}});Je.addEventListener("log",We),Je.addEventListener("cancelled",We),Je.addEventListener("completion",Fe=>{We(Fe),Je.close(),ue.complete()}),Je.addEventListener("error",Fe=>{ue.error(Fe)})},H=>{ue.error(H)})})}streamLogsPolling({taskId:Y,after:Ee}){let ue=Ee;return new(Ke())(at=>{this.discoveryApi.getBaseUrl("scaffolder").then(async N=>{for(;!at.closed;){const H=`${N}/v2/tasks/${encodeURIComponent(Y)}/events?${k().stringify({after:ue})}`,q=await this.fetchApi.fetch(H);if(!q.ok){await new Promise(We=>setTimeout(We,1e3));continue}const ae=await q.json();for(const We of ae)if(ue=Number(We.id),at.next(We),We.type==="completion"){at.complete();return}}})})}async listActions(){const Y=await this.discoveryApi.getBaseUrl("scaffolder"),Ee=await this.fetchApi.fetch(`${Y}/v2/actions`);if(!Ee.ok)throw await B.o3.fromResponse(Ee);return await Ee.json()}async cancelTask(Y){const ue=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(Y)}/cancel`,at=await this.fetchApi.fetch(ue,{method:"POST"});if(!at.ok)throw await B.o3.fromResponse(at);return await at.json()}}function Qe(Se,Y){return{schema:{returnValue:(0,kt.Ay)(Se),uiOptions:Y?(0,kt.Ay)(Y):void 0},type:null,uiOptionsType:null}}const Mt=me.z.record(me.z.string().or(me.z.object({exists:me.z.boolean().optional()})).or(me.z.array(me.z.string()))),Ft=Qe(me.z.string(),me.z.object({allowedKinds:me.z.array(me.z.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:me.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:me.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:me.z.union([me.z.string(),me.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:me.z.array(Mt).or(Mt).optional().describe("List of key-value filter expression for entities")})).schema,Et=Se=>{var Y,Ee,ue,at,N;const{onChange:H,schema:{title:q="Entity",description:ae="An entity from the catalog"},required:We,uiSchema:Je,rawErrors:Fe,formData:gt,idSchema:Pt}=Se,dn=Lt(Je),wt=(Y=Je["ui:options"])==null?void 0:Y.defaultKind,un=((Ee=Je["ui:options"])==null?void 0:Ee.defaultNamespace)||void 0,gn=(0,ie.u)(Ve.vp),{value:En,loading:Nn}=(0,sn.default)(async()=>{const{items:pn}=await gn.getEntities(dn?{filter:dn}:void 0);return pn}),On=(at=(ue=Je["ui:options"])==null?void 0:ue.allowArbitraryValues)!=null?at:!0,Ln=(0,w.useCallback)(pn=>{try{return(0,Ve.SE)((0,j.KU)(pn,{defaultKind:wt,defaultNamespace:un}),{defaultKind:wt,defaultNamespace:un})}catch{return pn}},[wt,un]),Sn=(0,w.useCallback)((pn,yn,aa)=>{if(typeof yn!="string")H(yn?(0,j.U2)(yn):void 0);else if(aa==="blur"||aa==="create-option"){let sa=yn;try{sa=(0,j.U2)((0,j.KU)(yn,{defaultKind:wt,defaultNamespace:un}))}catch{}(gt!==yn||On)&&H(sa)}},[H,gt,wt,un,On]),In=(N=En==null?void 0:En.find(pn=>(0,j.U2)(pn)===gt))!=null?N:On&&gt?Ln(gt):"";return(0,w.useEffect)(()=>{(En==null?void 0:En.length)===1&&In===""&&H((0,j.U2)(En[0]))},[En,H,In]),w.createElement(I.A,{margin:"normal",required:We,error:(Fe==null?void 0:Fe.length)>0&&!gt},w.createElement(Rt.Ay,{disabled:(En==null?void 0:En.length)===1,id:Pt==null?void 0:Pt.$id,value:In,loading:Nn,onChange:Sn,options:En||[],getOptionLabel:pn=>typeof pn=="string"?pn:(0,Ve.SE)(pn,{defaultKind:wt,defaultNamespace:un}),autoSelect:!0,freeSolo:On,renderInput:pn=>w.createElement(he.A,{...pn,label:q,margin:"dense",helperText:ae,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:We,InputProps:pn.InputProps})}))};function we(Se){return typeof Se=="object"&&Se.exists?Ie.cr:Se==null?void 0:Se.toString()}function nt(Se){const Y={};for(const[Ee,ue]of Object.entries(Se))Array.isArray(ue)?Y[Ee]=ue:Y[Ee]=we(ue);return Y}function Lt(Se){var Y,Ee;const ue=(Y=Se["ui:options"])==null?void 0:Y.allowedKinds,at=((Ee=Se["ui:options"])==null?void 0:Ee.catalogFilter)||ue&&{kind:ue};if(at)return Array.isArray(at)?at.map(nt):nt(at)}const Wt=(Se,Y)=>{j.yz.isValidObjectName(Se)||Y.addError("Must start and end with an alphanumeric character, and contain only alphanumeric characters, hyphens, underscores, and periods. Maximum length is 63 characters.")},$e=Qe(me.z.string()).schema,xt=Se=>{const{onChange:Y,required:Ee,schema:{title:ue="Name",description:at="Unique name of the component"},rawErrors:N,formData:H,uiSchema:{"ui:autofocus":q},idSchema:ae,placeholder:We}=Se;return w.createElement(he.A,{id:ae==null?void 0:ae.$id,label:ue,placeholder:We,helperText:at,required:Ee,value:H!=null?H:"",onChange:({target:{value:Je}})=>Y(Je),margin:"normal",error:(N==null?void 0:N.length)>0&&!H,inputProps:{autoFocus:q}})},se=Qe(me.z.string(),me.z.object({allowedKinds:me.z.array(me.z.string()).default(["Group","User"]).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from. Defaults to Group and User"),allowArbitraryValues:me.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:me.z.union([me.z.string(),me.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:me.z.array(Mt).or(Mt).optional().describe("List of key-value filter expression for entities")})).schema,ke=Se=>{var Y,Ee,ue,at,N;const{schema:{title:H="Owner",description:q="The owner of the component"},uiSchema:ae,...We}=Se,Je=(Y=ae["ui:options"])==null?void 0:Y.defaultNamespace,Fe=(Ee=ae["ui:options"])==null?void 0:Ee.allowedKinds,gt=((ue=ae["ui:options"])==null?void 0:ue.catalogFilter)||{kind:Fe||["Group","User"]},Pt={...ae,"ui:options":{catalogFilter:gt,defaultKind:"Group",allowArbitraryValues:(N=(at=ae["ui:options"])==null?void 0:at.allowArbitraryValues)!=null?N:!0,...Je!==void 0?{defaultNamespace:Je}:{}}};return w.createElement(Et,{...We,schema:{title:H,description:q},uiSchema:Pt})},Le=Qe(me.z.string(),me.z.object({allowedHosts:me.z.array(me.z.string()).optional().describe("List of allowed SCM platform hosts"),allowedOrganizations:me.z.array(me.z.string()).optional().describe("List of allowed organizations in the given SCM platform"),allowedOwners:me.z.array(me.z.string()).optional().describe("List of allowed owners in the given SCM platform"),allowedProjects:me.z.array(me.z.string()).optional().describe("List of allowed projects in the given SCM platform"),allowedRepos:me.z.array(me.z.string()).optional().describe("List of allowed repos in the given SCM platform"),requestUserCredentials:me.z.object({secretsKey:me.z.string().describe("Key used within the template secrets context to store the credential"),additionalScopes:me.z.object({gitea:me.z.array(me.z.string()).optional().describe("Additional Gitea scopes to request"),gerrit:me.z.array(me.z.string()).optional().describe("Additional Gerrit scopes to request"),github:me.z.array(me.z.string()).optional().describe("Additional GitHub scopes to request"),gitlab:me.z.array(me.z.string()).optional().describe("Additional GitLab scopes to request"),bitbucket:me.z.array(me.z.string()).optional().describe("Additional BitBucket scopes to request"),azure:me.z.array(me.z.string()).optional().describe("Additional Azure scopes to request")}).optional().describe("Additional permission scopes to request")}).optional().describe("If defined will request user credentials to auth against the given SCM platform")})).schema,et=(Se,Y,Ee)=>{var ue,at;try{const{host:N,searchParams:H}=new URL(`https://${Se}`),q=Ee.apiHolder.get(o.YT);N?(((ue=q==null?void 0:q.byHost(N))==null?void 0:ue.type)==="bitbucket"?(N==="bitbucket.org"&&!H.get("workspace")&&Y.addError("Incomplete repository location provided, workspace not provided"),H.get("project")||Y.addError("Incomplete repository location provided, project not provided")):((at=q==null?void 0:q.byHost(N))==null?void 0:at.type)!=="gerrit"&&(H.get("owner")||Y.addError("Incomplete repository location provided, owner not provided")),H.get("repo")||Y.addError("Incomplete repository location provided, repo not provided")):Y.addError("Incomplete repository location provided, host not provided")}catch{Y.addError("Unable to parse the Repository URL")}},pt=Se=>{const{allowedOwners:Y=[],rawErrors:Ee,state:ue,onChange:at}=Se,N=Y?Y.map(q=>({label:q,value:q})):[{label:"Loading...",value:"loading"}],{owner:H}=ue;return w.createElement(w.Fragment,null,w.createElement(I.A,{margin:"normal",required:!0,error:(Ee==null?void 0:Ee.length)>0&&!H},Y!=null&&Y.length?w.createElement(Ne.l6,{native:!0,label:"Owner Available",onChange:q=>at({owner:String(Array.isArray(q)?q[0]:q)}),disabled:Y.length===1,selected:H,items:N}):w.createElement(w.Fragment,null,w.createElement(It.A,{htmlFor:"ownerInput"},"Owner"),w.createElement(mt.A,{id:"ownerInput",onChange:q=>at({owner:q.target.value}),value:H})),w.createElement(yt.A,null,"The organization, user or project that this repo will belong to")))},Bt=Se=>{const{allowedOwners:Y=[],state:Ee,onChange:ue,rawErrors:at}=Se,N=Y?Y.map(q=>({label:q,value:q})):[{label:"Loading...",value:"loading"}],{owner:H}=Ee;return w.createElement(w.Fragment,null,w.createElement(I.A,{margin:"normal",required:!0,error:(at==null?void 0:at.length)>0&&!H},Y!=null&&Y.length?w.createElement(Ne.l6,{native:!0,label:"Owner Available",onChange:q=>ue({owner:String(Array.isArray(q)?q[0]:q)}),disabled:Y.length===1,selected:H,items:N}):w.createElement(w.Fragment,null,w.createElement(It.A,{htmlFor:"ownerInput"},"Owner"),w.createElement(mt.A,{id:"ownerInput",onChange:q=>ue({owner:q.target.value}),value:H})),w.createElement(yt.A,null,"Gitea namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.")))},en=Se=>{const{allowedOwners:Y=[],state:Ee,onChange:ue,rawErrors:at}=Se,N=Y?Y.map(q=>({label:q,value:q})):[{label:"Loading...",value:"loading"}],{owner:H}=Ee;return w.createElement(w.Fragment,null,w.createElement(I.A,{margin:"normal",required:!0,error:(at==null?void 0:at.length)>0&&!H},Y!=null&&Y.length?w.createElement(Ne.l6,{native:!0,label:"Owner Available",onChange:q=>ue({owner:String(Array.isArray(q)?q[0]:q)}),disabled:Y.length===1,selected:H,items:N}):w.createElement(w.Fragment,null,w.createElement(It.A,{htmlFor:"ownerInput"},"Owner"),w.createElement(mt.A,{id:"ownerInput",onChange:q=>ue({owner:q.target.value}),value:H})),w.createElement(yt.A,null,"GitLab namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.")))},Ce=Se=>{const{allowedOrganizations:Y=[],allowedOwners:Ee=[],rawErrors:ue,state:at,onChange:N}=Se,H=Y?Y.map(Je=>({label:Je,value:Je})):[{label:"Loading...",value:"loading"}],q=Ee?Ee.map(Je=>({label:Je,value:Je})):[{label:"Loading...",value:"loading"}],{organization:ae,owner:We}=at;return w.createElement(w.Fragment,null,w.createElement(I.A,{margin:"normal",required:!0,error:(ue==null?void 0:ue.length)>0&&!ae},Y!=null&&Y.length?w.createElement(Ne.l6,{native:!0,label:"Organization",onChange:Je=>N({organization:String(Array.isArray(Je)?Je[0]:Je)}),disabled:Y.length===1,selected:ae,items:H}):w.createElement(w.Fragment,null,w.createElement(It.A,{htmlFor:"orgInput"},"Organization"),w.createElement(mt.A,{id:"orgInput",onChange:Je=>N({organization:Je.target.value}),value:ae})),w.createElement(yt.A,null,"The Organization that this repo will belong to")),w.createElement(I.A,{margin:"normal",required:!0,error:(ue==null?void 0:ue.length)>0&&!We},Ee!=null&&Ee.length?w.createElement(Ne.l6,{native:!0,label:"Owner",onChange:Je=>N({owner:String(Array.isArray(Je)?Je[0]:Je)}),disabled:Ee.length===1,selected:We,items:q}):w.createElement(w.Fragment,null,w.createElement(It.A,{htmlFor:"ownerInput"},"Project"),w.createElement(mt.A,{id:"ownerInput",onChange:Je=>N({owner:Je.target.value}),value:We})),w.createElement(yt.A,null,"The Project that this repo will belong to")))},Be=Se=>{const{allowedOwners:Y=[],allowedProjects:Ee=[],onChange:ue,rawErrors:at,state:N}=Se,{host:H,workspace:q,project:ae}=N,We=Y?Y==null?void 0:Y.map(Fe=>({label:Fe,value:Fe})):[],Je=Ee?Ee==null?void 0:Ee.map(Fe=>({label:Fe,value:Fe})):[];return(0,w.useEffect)(()=>{H==="bitbucket.org"&&Y.length&&ue({workspace:Y[0]})},[Y,H,ue]),w.createElement(w.Fragment,null,H==="bitbucket.org"&&w.createElement(I.A,{margin:"normal",required:!0,error:(at==null?void 0:at.length)>0&&!q},Y!=null&&Y.length?w.createElement(Ne.l6,{native:!0,label:"Allowed Workspaces",onChange:Fe=>ue({workspace:String(Array.isArray(Fe)?Fe[0]:Fe)}),disabled:Y.length===1,selected:q,items:We}):w.createElement(w.Fragment,null,w.createElement(It.A,{htmlFor:"workspaceInput"},"Workspace"),w.createElement(mt.A,{id:"workspaceInput",onChange:Fe=>ue({workspace:Fe.target.value}),value:q})),w.createElement(yt.A,null,"The Workspace that this repo will belong to")),w.createElement(I.A,{margin:"normal",required:!0,error:(at==null?void 0:at.length)>0&&!ae},Ee!=null&&Ee.length?w.createElement(Ne.l6,{native:!0,label:"Allowed Projects",onChange:Fe=>ue({project:String(Array.isArray(Fe)?Fe[0]:Fe)}),disabled:Ee.length===1,selected:ae,items:Je}):w.createElement(w.Fragment,null,w.createElement(It.A,{htmlFor:"projectInput"},"Project"),w.createElement(mt.A,{id:"projectInput",onChange:Fe=>ue({project:Fe.target.value}),value:ae})),w.createElement(yt.A,null,"The Project that this repo will belong to")))},C=Se=>{const{onChange:Y,rawErrors:Ee,state:ue}=Se,{workspace:at,owner:N}=ue;return w.createElement(w.Fragment,null,w.createElement(I.A,{margin:"normal",error:(Ee==null?void 0:Ee.length)>0&&!at},w.createElement(It.A,{htmlFor:"ownerInput"},"Owner"),w.createElement(mt.A,{id:"ownerInput",onChange:H=>Y({owner:H.target.value}),value:N}),w.createElement(yt.A,null,"The owner of the project (optional)")),w.createElement(I.A,{margin:"normal",required:!0,error:(Ee==null?void 0:Ee.length)>0&&!at},w.createElement(It.A,{htmlFor:"parentInput"},"Parent"),w.createElement(mt.A,{id:"parentInput",onChange:H=>Y({workspace:H.target.value}),value:at}),w.createElement(yt.A,null,"The project parent that the repo will belong to")))},W=Se=>{const{host:Y,hosts:Ee,onChange:ue,rawErrors:at}=Se,N=(0,ie.u)(m.s),{value:{integrations:H}={integrations:[]},loading:q}=(0,sn.default)(async()=>await N.getIntegrationsList({allowedHosts:Ee!=null?Ee:[]}));(0,w.useEffect)(()=>{Y||(Ee!=null&&Ee.length?ue(Ee[0]):H!=null&&H.length&&ue(H[0].host))},[Ee,Y,ue,H]);const ae=H?H.filter(We=>Ee!=null&&Ee.length?Ee==null?void 0:Ee.includes(We.host):!0).map(We=>({label:We.title,value:We.host})):[{label:"Loading...",value:"loading"}];return q?w.createElement(Ne.ke,null):w.createElement(w.Fragment,null,w.createElement(I.A,{margin:"normal",required:!0,error:(at==null?void 0:at.length)>0&&!Y},w.createElement(Ne.l6,{native:!0,disabled:(Ee==null?void 0:Ee.length)===1,label:"Host",onChange:We=>ue(String(Array.isArray(We)?We[0]:We)),selected:Y,items:ae,"data-testid":"host-select"}),w.createElement(yt.A,null,"The host where the repository will be created")))},Q=Se=>{const{repoName:Y,allowedRepos:Ee,onChange:ue,rawErrors:at}=Se;(0,w.useEffect)(()=>{Y||Ee!=null&&Ee.length&&ue(Ee[0])},[Ee,Y,ue]);const N=Ee?Ee.map(H=>({label:H,value:H})):[{label:"Loading...",value:"loading"}];return w.createElement(w.Fragment,null,w.createElement(I.A,{margin:"normal",required:!0,error:(at==null?void 0:at.length)>0&&!Y},Ee!=null&&Ee.length?w.createElement(Ne.l6,{native:!0,label:"Repositories Available",onChange:H=>ue(String(Array.isArray(H)?H[0]:H)),disabled:Ee.length===1,selected:Y,items:N}):w.createElement(w.Fragment,null,w.createElement(It.A,{htmlFor:"repoNameInput"},"Repository"),w.createElement(mt.A,{id:"repoNameInput",onChange:H=>ue(String(H.target.value)),value:Y})),w.createElement(yt.A,null,"The name of the repository")))};function rt(Se){if(!Se.host)return;const Y=new URLSearchParams;return Se.owner&&Y.set("owner",Se.owner),Se.repoName&&Y.set("repo",Se.repoName),Se.organization&&Y.set("organization",Se.organization),Se.workspace&&Y.set("workspace",Se.workspace),Se.project&&Y.set("project",Se.project),`${Se.host}?${Y.toString()}`}function ct(Se){let Y="",Ee="",ue="",at="",N="",H="";try{if(Se){const q=new URL(`https://${Se}`);Y=q.host,Ee=q.searchParams.get("owner")||"",ue=q.searchParams.get("repo")||"",at=q.searchParams.get("organization")||"",N=q.searchParams.get("workspace")||"",H=q.searchParams.get("project")||""}}catch{}return{host:Y,owner:Ee,repoName:ue,organization:at,workspace:N,project:H}}const ut=Se=>{var Y,Ee;const{uiSchema:ue,onChange:at,rawErrors:N,formData:H,schema:q}=Se,[ae,We]=(0,w.useState)(ct(H)),Je=(0,ie.u)(o.YT),Fe=(0,ie.u)(o.$J),{setSecrets:gt}=(0,m.u)(),Pt=(0,w.useMemo)(()=>{var pn,yn;return(yn=(pn=ue==null?void 0:ue["ui:options"])==null?void 0:pn.allowedHosts)!=null?yn:[]},[ue]),dn=(0,w.useMemo)(()=>{var pn,yn;return(yn=(pn=ue==null?void 0:ue["ui:options"])==null?void 0:pn.allowedOrganizations)!=null?yn:[]},[ue]),wt=(0,w.useMemo)(()=>{var pn,yn;return(yn=(pn=ue==null?void 0:ue["ui:options"])==null?void 0:pn.allowedOwners)!=null?yn:[]},[ue]),un=(0,w.useMemo)(()=>{var pn,yn;return(yn=(pn=ue==null?void 0:ue["ui:options"])==null?void 0:pn.allowedProjects)!=null?yn:[]},[ue]),gn=(0,w.useMemo)(()=>{var pn,yn;return(yn=(pn=ue==null?void 0:ue["ui:options"])==null?void 0:pn.allowedRepos)!=null?yn:[]},[ue]),{owner:En,organization:Nn,project:On,repoName:Ln}=ae;(0,w.useEffect)(()=>{at(rt(ae))},[ae,at]),(0,w.useEffect)(()=>{dn.length>0&&!Nn&&We(pn=>({...pn,organization:dn[0]}))},[We,dn,Nn]),(0,w.useEffect)(()=>{wt.length>0&&!En&&We(pn=>({...pn,owner:wt[0]}))},[We,wt,En]),(0,w.useEffect)(()=>{un.length>0&&!On&&We(pn=>({...pn,project:un[0]}))},[We,un,On]),(0,w.useEffect)(()=>{gn.length>0&&!Ln&&We(pn=>({...pn,repoName:gn[0]}))},[We,gn,Ln]);const Sn=(0,w.useCallback)(pn=>{We(yn=>({...yn,...pn}))},[We]);(0,Ct.A)(async()=>{var pn;const{requestUserCredentials:yn}=(pn=ue==null?void 0:ue["ui:options"])!=null?pn:{},aa=ae.owner?ae.owner:ae.project;if(!yn||!(ae.host&&aa&&ae.repoName))return;const[sa,ba]=[ae.host,ae.repoName].map(encodeURIComponent),{token:Ca}=await Fe.getCredentials({url:`https://${sa}/${aa}/${ba}`,additionalScope:{repoWrite:!0,customScopes:yn.additionalScopes}});gt({[yn.secretsKey]:Ca})},500,[ae,ue]);const In=(Ee=ae.host&&((Y=Je.byHost(ae.host))==null?void 0:Y.type))!=null?Ee:null;return w.createElement(w.Fragment,null,q.title&&w.createElement(_e.A,{my:1},w.createElement(re.A,{variant:"h5"},q.title),w.createElement(Re.A,null)),q.description&&w.createElement(re.A,{variant:"body1"},q.description),w.createElement(W,{host:ae.host,hosts:Pt,onChange:pn=>We(yn=>({...yn,host:pn})),rawErrors:N}),In==="github"&&w.createElement(pt,{allowedOwners:wt,onChange:Sn,rawErrors:N,state:ae}),In==="gitea"&&w.createElement(Bt,{allowedOwners:wt,allowedRepos:gn,rawErrors:N,state:ae,onChange:Sn}),In==="gitlab"&&w.createElement(en,{allowedOwners:wt,rawErrors:N,state:ae,onChange:Sn}),In==="bitbucket"&&w.createElement(Be,{allowedOwners:wt,allowedProjects:un,rawErrors:N,state:ae,onChange:Sn}),In==="azure"&&w.createElement(Ce,{allowedOrganizations:dn,allowedOwners:wt,rawErrors:N,state:ae,onChange:Sn}),In==="gerrit"&&w.createElement(C,{rawErrors:N,state:ae,onChange:Sn}),w.createElement(Q,{repoName:ae.repoName,allowedRepos:gn,onChange:pn=>We(yn=>({...yn,repoName:pn})),rawErrors:N}))},mn=Qe(me.z.string(),me.z.object({allowedKinds:me.z.array(me.z.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:me.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:me.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:me.z.union([me.z.string(),me.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:me.z.array(Mt).or(Mt).optional().describe("List of key-value filter expression for entities")})).schema,Cn=Se=>{const{schema:{title:Y="Entity",description:Ee="An entity from the catalog"},uiSchema:ue,required:at}=Se,N=(0,ie.u)(ie.t),{loading:H,value:q}=(0,sn.default)(async()=>(await N.getBackstageIdentity()).ownershipEntityRefs);if(H)return w.createElement(Rt.Ay,{loading:H,renderInput:We=>w.createElement(he.A,{...We,label:Y,margin:"dense",helperText:Ee,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:at,InputProps:We.InputProps}),options:[]});const ae=An(ue,q);return w.createElement(Et,{...Se,uiSchema:ae})};function An(Se,Y){const Ee=(Se==null?void 0:Se["ui:options"])||{},ue=Ee.allowedKinds;return{"ui:options":{catalogFilter:{...Ee.catalogFilter,...ue?{kind:ue,[`relations.${j.vv}`]:Y||[]}:{[`relations.${j.vv}`]:Y||[]}}}}}const Mn=Qe(me.z.array(me.z.string()),me.z.object({kinds:me.z.array(me.z.string()).optional().describe("List of kinds of entities to derive tags from"),showCounts:me.z.boolean().optional().describe("Whether to show usage counts per tag"),helperText:me.z.string().optional().describe("Helper text to display")})).schema,Wn=Se=>{var Y,Ee,ue;const{formData:at,onChange:N,uiSchema:H}=Se,q=(0,ie.u)(Ve.vp),[ae,We]=(0,w.useState)([]),[Je,Fe]=(0,w.useState)(""),[gt,Pt]=(0,w.useState)(!1),dn=(0,j.tj)().isValidTag,wt=(Y=H["ui:options"])==null?void 0:Y.kinds,un=(Ee=H["ui:options"])==null?void 0:Ee.showCounts,gn=(ue=H["ui:options"])==null?void 0:ue.helperText,{loading:En,value:Nn}=(0,sn.default)(async()=>{const Ln="metadata.tags",Sn={facets:[Ln]};wt&&(Sn.filter={kind:wt});const{facets:In}=await q.getEntityFacets(Sn),pn=Object.fromEntries(In[Ln].map(({value:yn,count:aa})=>[yn,aa]));return We(Object.keys(pn).sort((yn,aa)=>un?pn[aa]-pn[yn]:yn.localeCompare(aa))),pn}),On=(Ln,Sn)=>{let In=!1,pn=!1;const yn=at||[];if(Sn!=null&&Sn.length&&yn.length<Sn.length){const aa=Sn[Sn.length-1]=Sn[Sn.length-1].toLocaleLowerCase("en-US").trim();In=!dn(aa),pn=yn.indexOf(aa)!==-1}Pt(In),Fe(In?Je:""),!In&&!pn&&N(Sn||[])};return(0,ot.A)(()=>N(at||[])),w.createElement(I.A,{margin:"normal"},w.createElement(Rt.Ay,{multiple:!0,freeSolo:!0,filterSelectedOptions:!0,onChange:On,value:at||[],inputValue:Je,loading:En,options:ae,ChipProps:{size:"small"},renderOption:Ln=>un?`${Ln} (${Nn==null?void 0:Nn[Ln]})`:Ln,renderInput:Ln=>w.createElement(he.A,{...Ln,label:"Tags",onChange:Sn=>Fe(Sn.target.value),error:gt,helperText:gn!=null?gn:"Add any relevant tags, hit 'Enter' to add new tags. Valid format: [a-z0-9+#] separated by [-], at most 63 characters"})}))},P=(0,G.Il)({id:"register-component",optional:!0}),K=(0,G.Il)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),be=(0,G.HM)({id:"scaffolder"}),vt=(0,G.Vb)({id:"scaffolder/legacy/selected-template",parent:be,path:"/templates/:templateName"}),Ot=(0,G.Vb)({id:"scaffolder/selected-template",parent:be,path:"/templates/:namespace/:templateName"}),Vt=(0,G.Vb)({id:"scaffolder/task",parent:be,path:"/tasks/:taskId"}),ne=(0,G.Vb)({id:"scaffolder/list-tasks",parent:be,path:"/tasks"}),Pe=(0,G.Vb)({id:"scaffolder/actions",parent:be,path:"/actions"}),je=(0,G.Vb)({id:"scaffolder/edit",parent:be,path:"/edit"}),qt=Qe(me.z.string(),me.z.object({title:me.z.string().default("Group").describe("Group"),description:me.z.string().default("A group you are part of").describe("The group to which the entity belongs")})).schema,cn=Se=>{const{schema:{title:Y,description:Ee},required:ue,rawErrors:at,onChange:N}=Se,H=(0,ie.u)(ie.t),q=(0,ie.u)(Ve.vp),ae=(0,ie.u)(ie.r),[We,Je]=(0,w.useState)([]),[Fe,gt]=(0,w.useState)(null);(0,sn.default)(async()=>{const{userEntityRef:dn}=await H.getBackstageIdentity();if(!dn){ae.post(new B.m_("No user entity ref found"));return}const{items:wt}=await q.getEntities({filter:{kind:"Group",["relations.hasMember"]:[dn]}}),un=wt.filter(gn=>Boolean(gn)).map(gn=>{var En;return{label:(En=gn.metadata.title)!=null?En:gn.metadata.name,ref:(0,j.U2)(gn)}});Je(un)});const Pt=(dn,wt)=>{var un;gt(wt),N((un=wt==null?void 0:wt.ref)!=null?un:"")};return w.createElement(I.A,{margin:"normal",required:ue,error:(at==null?void 0:at.length)>0},w.createElement(Rt.Ay,{id:"OwnershipEntityRefPicker-dropdown",options:We||[],value:Fe,onChange:Pt,getOptionLabel:dn=>dn.label,renderInput:dn=>w.createElement(he.A,{...dn,label:Y,margin:"dense",helperText:Ee,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:ue})}))},on=(0,G.i1)({id:"scaffolder",apis:[(0,G.bW)({api:m.s,deps:{discoveryApi:ie.q,scmIntegrationsApi:o.YT,fetchApi:ie.s,identityApi:ie.t},factory:({discoveryApi:Se,scmIntegrationsApi:Y,fetchApi:Ee,identityApi:ue})=>new bt({discoveryApi:Se,scmIntegrationsApi:Y,fetchApi:Ee,identityApi:ue})})],routes:{root:be,selectedTemplate:Ot,ongoingTask:Vt,actions:Pe,listTasks:ne,edit:je},externalRoutes:{registerComponent:P,viewTechDoc:K}}),wn=on.provide((0,p.zD)({component:Et,name:"EntityPicker",schema:Ft})),Kn=on.provide((0,p.zD)({component:xt,name:"EntityNamePicker",validation:Wt,schema:$e})),Yn=on.provide((0,p.zD)({component:ut,name:"RepoUrlPicker",validation:et,schema:Le})),oa=on.provide((0,p.zD)({component:ke,name:"OwnerPicker",schema:se})),vn=on.provide((0,p.zD)({component:cn,name:"MyGroupsPicker",schema:qt})),ra=on.provide((0,G.QJ)({name:"ScaffolderPage",component:()=>Promise.all([e.e(9743),e.e(5620)]).then(e.bind(e,25620)).then(Se=>Se.Router),mountPoint:be})),ia=on.provide((0,p.zD)({component:Cn,name:"OwnedEntityPicker",schema:mn})),na=on.provide((0,p.zD)({component:Wn,name:"EntityTagsPicker",schema:Mn})),da=on.provide((0,G.QJ)({name:"LegacyScaffolderPage",component:()=>Promise.all([e.e(9743),e.e(9783)]).then(e.bind(e,9783)).then(Se=>Se.LegacyRouter),mountPoint:be})),_a=w.createElement(lt.A,{fontSize:"small"}),qn=w.createElement(Kt.A,{fontSize:"small"}),Ea=()=>{const Se=(0,ie.u)(ie.l),{error:Y,loading:Ee,availableTypes:ue,selectedTypes:at,setSelectedTypes:N}=(0,Ve.jF)();return Ee?w.createElement(Ne.ke,null):ue?Y?(Se.post({message:"Failed to load entity types",severity:"error"}),null):w.createElement(_e.A,{pb:1,pt:1},w.createElement(re.A,{variant:"button",component:"label",htmlFor:"categories-picker"},"Categories"),w.createElement(Rt.Ay,{id:"categories-picker",multiple:!0,options:ue,value:at,onChange:(H,q)=>N(q),renderOption:(H,{selected:q})=>w.createElement(c.A,{control:w.createElement(R.A,{icon:_a,checkedIcon:qn,checked:q}),label:Tt()(H)}),size:"small",popupIcon:w.createElement(ft.A,{"data-testid":"categories-picker-expand"}),renderInput:H=>w.createElement(he.A,{...H,variant:"outlined"})})):null},Z=(0,A.A)(()=>({button:{color:({fontColor:Se})=>Se}})),Ue=Se=>{const{cancelEnabled:Y,logsVisible:Ee,buttonBarVisible:ue,onStartOver:at,onToggleLogs:N,onToggleButtonBar:H,taskId:q}=Se,{getPageTheme:ae}=(0,_.A)(),We=ae({themeId:"website"}),Je=Z({fontColor:We.fontColor}),Fe=(0,ie.u)(m.s),[gt,Pt]=(0,w.useState)(),[{status:dn},{execute:wt}]=(0,an.Y)(async()=>{q&&await Fe.cancelTask(q)});return w.createElement(w.Fragment,null,w.createElement(F.A,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:un=>{Pt(un.currentTarget)},"data-testid":"menu-button",className:Je.button},w.createElement(O.A,null)),w.createElement(Ae.Ay,{open:Boolean(gt),onClose:()=>Pt(void 0),anchorEl:gt,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},w.createElement(fe.A,null,w.createElement(ve.A,{onClick:()=>N==null?void 0:N(!Ee)},w.createElement(J.A,null,w.createElement(D.A,{fontSize:"small"})),w.createElement(v.A,{primary:Ee?"Hide Logs":"Show Logs"})),w.createElement(ve.A,{onClick:()=>H==null?void 0:H(!ue)},w.createElement(J.A,null,w.createElement(U.A,{fontSize:"small"})),w.createElement(v.A,{primary:ue?"Hide Button Bar":"Show Button Bar"})),w.createElement(ve.A,{onClick:at},w.createElement(J.A,null,w.createElement(jt.A,{fontSize:"small"})),w.createElement(v.A,{primary:"Start Over"})),w.createElement(ve.A,{onClick:wt,disabled:!Y||dn!=="not-executed","data-testid":"cancel-task"},w.createElement(J.A,null,w.createElement(St.A,{fontSize:"small"})),w.createElement(v.A,{primary:"Cancel"})))))},tt=(0,A.A)(Se=>({contentWrapper:{display:"flex",flexDirection:"column"},buttonBar:{display:"flex",flexDirection:"row",justifyContent:"right"},cancelButton:{marginRight:Se.spacing(1)},logsVisibilityButton:{marginRight:Se.spacing(1)}})),ht=Se=>{var Y,Ee,ue,at,N,H,q,ae;const{taskId:We}=(0,$t.g)(),Je=(0,G.Sf)(Ot),Fe=(0,$t.Zp)(),gt=(0,ie.u)(m.s),Pt=(0,p.TA)(We),dn=tt(),wt=(0,w.useMemo)(()=>{var sa,ba;return(ba=(sa=Pt.task)==null?void 0:sa.spec.steps.map(Ca=>{var Na;return{...Ca,...(Na=Pt==null?void 0:Pt.steps)==null?void 0:Na[Ca.id]}}))!=null?ba:[]},[Pt]),[un,gn]=(0,w.useState)(!1),[En,Nn]=(0,w.useState)(!0);(0,w.useEffect)(()=>{Pt.error&&gn(!0)},[Pt.error]),(0,w.useEffect)(()=>{Pt.completed&&!Pt.error&&Nn(!1)},[Pt.error,Pt.completed]);const On=(0,w.useMemo)(()=>{for(let sa=wt.length-1;sa>=0;sa--)if(wt[sa].status!=="open")return sa;return 0},[wt]),Ln=(0,w.useCallback)(()=>{var sa,ba,Ca,Na,Fa,La;const{namespace:Pa,name:za}=(Na=(Ca=(ba=(sa=Pt.task)==null?void 0:sa.spec.templateInfo)==null?void 0:ba.entity)==null?void 0:Ca.metadata)!=null?Na:{},Ya=(La=(Fa=Pt.task)==null?void 0:Fa.spec.parameters)!=null?La:{};!Pa||!za||Fe({pathname:Je({namespace:Pa,templateName:za}),search:`?${k().stringify({formData:JSON.stringify(Ya)})}`})},[Fe,(Y=Pt.task)==null?void 0:Y.spec.parameters,(at=(ue=(Ee=Pt.task)==null?void 0:Ee.spec.templateInfo)==null?void 0:ue.entity)==null?void 0:at.metadata,Je]),[{status:Sn},{execute:In}]=(0,an.Y)(async()=>{We&&await gt.cancelTask(We)}),pn=(N=Se.TemplateOutputsComponent)!=null?N:M.KV,yn=(ae=(q=(H=Pt.task)==null?void 0:H.spec.templateInfo)==null?void 0:q.entity)==null?void 0:ae.metadata.name,aa=!(Pt.cancelled||Pt.completed);return w.createElement(Ne.YW,{themeId:"website"},w.createElement(Ne.Y9,{pageTitleOverride:`Run of ${yn}`,title:w.createElement("div",null,"Run of ",w.createElement("code",null,yn)),subtitle:`Task ${We}`},w.createElement(Ue,{cancelEnabled:aa,logsVisible:un,buttonBarVisible:En,onStartOver:Ln,onToggleLogs:gn,onToggleButtonBar:Nn,taskId:We})),w.createElement(Ne.UC,{className:dn.contentWrapper},Pt.error?w.createElement(_e.A,{paddingBottom:2},w.createElement(Ne.bJ,{error:Pt.error,titleFormat:"markdown",title:Pt.error.message})):null,w.createElement(_e.A,{paddingBottom:2},w.createElement(M.lN,{steps:wt,activeStep:On,isComplete:Pt.completed,isError:Boolean(Pt.error)})),w.createElement(pn,{output:Pt.output}),En?w.createElement(_e.A,{paddingBottom:2},w.createElement(ee.A,null,w.createElement(_e.A,{padding:2},w.createElement("div",{className:dn.buttonBar},w.createElement(oe.A,{className:dn.cancelButton,disabled:!aa||Sn!=="not-executed",onClick:In,"data-testid":"cancel-button"},"Cancel"),w.createElement(oe.A,{className:dn.logsVisibilityButton,color:"primary",variant:"outlined",onClick:()=>gn(!un)},un?"Hide Logs":"Show Logs"),w.createElement(oe.A,{variant:"contained",color:"primary",disabled:aa,onClick:Ln},"Start Over"))))):null,un?w.createElement(_e.A,{paddingBottom:2,height:"100%"},w.createElement(ee.A,{style:{height:"100%"}},w.createElement(_e.A,{padding:2,height:"100%"},w.createElement(M.g_,{logs:Pt.stepLogs})))):null))}},4237:function($n,Zt){var e,o,m;/** @license
* eventsource.js
* Available under MIT License (MIT)
* https://github.com/Yaffle/EventSource/
*/(function(p){"use strict";var j=p.setTimeout,B=p.clearTimeout,i=p.XMLHttpRequest,k=p.XDomainRequest,Ze=p.ActiveXObject,Ke=p.EventSource,a=p.document,De=p.Promise,Ie=p.fetch,ie=p.Response,G=p.TextDecoder,Ve=p.TextEncoder,he=p.AbortController;if(typeof window!="undefined"&&typeof a!="undefined"&&!("readyState"in a)&&a.body==null&&(a.readyState="loading",window.addEventListener("load",function(D){a.readyState="complete"},!1)),i==null&&Ze!=null&&(i=function(){return new Ze("Microsoft.XMLHTTP")}),Object.create==null&&(Object.create=function(D){function U(){}return U.prototype=D,new U}),Date.now||(Date.now=function(){return new Date().getTime()}),he==null){var _e=Ie;Ie=function(D,U){var O=U.signal;return _e(D,{headers:U.headers,credentials:U.credentials,cache:U.cache}).then(function(M){var te=M.body.getReader();return O._reader=te,O._aborted&&O._reader.cancel(),{status:M.status,statusText:M.statusText,headers:M.headers,body:{getReader:function(){return te}}}})},he=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){this.signal._reader!=null&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function re(){this.bitsNeeded=0,this.codePoint=0}re.prototype.decode=function(D){function U(Mt,rn,Ft){if(Ft===1)return Mt>=128>>rn&&Mt<<rn<=2047;if(Ft===2)return Mt>=2048>>rn&&Mt<<rn<=55295||Mt>=57344>>rn&&Mt<<rn<=65535;if(Ft===3)return Mt>=65536>>rn&&Mt<<rn<=1114111;throw new Error}function O(Mt,rn){if(Mt===6*1)return rn>>6>15?3:rn>31?2:1;if(Mt===6*2)return rn>15?3:2;if(Mt===6*3)return 3;throw new Error}for(var M=65533,te="",ge=this.bitsNeeded,ze=this.codePoint,bt=0;bt<D.length;bt+=1){var Qe=D[bt];ge!==0&&(Qe<128||Qe>191||!U(ze<<6|Qe&63,ge-6,O(ge,ze)))&&(ge=0,ze=M,te+=String.fromCharCode(ze)),ge===0?(Qe>=0&&Qe<=127?(ge=0,ze=Qe):Qe>=192&&Qe<=223?(ge=6*1,ze=Qe&31):Qe>=224&&Qe<=239?(ge=6*2,ze=Qe&15):Qe>=240&&Qe<=247?(ge=6*3,ze=Qe&7):(ge=0,ze=M),ge!==0&&!U(ze,ge,O(ge,ze))&&(ge=0,ze=M)):(ge-=6,ze=ze<<6|Qe&63),ge===0&&(ze<=65535?te+=String.fromCharCode(ze):(te+=String.fromCharCode(55296+(ze-65535-1>>10)),te+=String.fromCharCode(56320+(ze-65535-1&1023))))}return this.bitsNeeded=ge,this.codePoint=ze,te};var Re=function(){try{return new G().decode(new Ve().encode("test"),{stream:!0})==="test"}catch(D){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+D)}return!1};(G==null||Ve==null||!Re())&&(G=re);var I=function(){};function c(D){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=I,this.onload=I,this.onerror=I,this.onreadystatechange=I,this._contentType="",this._xhr=D,this._sendTimeout=0,this._abort=I}c.prototype.open=function(D,U){this._abort(!0);var O=this,M=this._xhr,te=1,ge=0;this._abort=function(Ft){O._sendTimeout!==0&&(B(O._sendTimeout),O._sendTimeout=0),(te===1||te===2||te===3)&&(te=4,M.onload=I,M.onerror=I,M.onabort=I,M.onprogress=I,M.onreadystatechange=I,M.abort(),ge!==0&&(B(ge),ge=0),Ft||(O.readyState=4,O.onabort(null),O.onreadystatechange())),te=0};var ze=function(){if(te===1){var Ft=0,Et="",we=void 0;if("contentType"in M)Ft=200,Et="OK",we=M.contentType;else try{Ft=M.status,Et=M.statusText,we=M.getResponseHeader("Content-Type")}catch{Ft=0,Et="",we=void 0}Ft!==0&&(te=2,O.readyState=2,O.status=Ft,O.statusText=Et,O._contentType=we,O.onreadystatechange())}},bt=function(){if(ze(),te===2||te===3){te=3;var Ft="";try{Ft=M.responseText}catch{}O.readyState=3,O.responseText=Ft,O.onprogress()}},Qe=function(Ft,Et){if((Et==null||Et.preventDefault==null)&&(Et={preventDefault:I}),bt(),te===1||te===2||te===3){if(te=4,ge!==0&&(B(ge),ge=0),O.readyState=4,Ft==="load")O.onload(Et);else if(Ft==="error")O.onerror(Et);else if(Ft==="abort")O.onabort(Et);else throw new TypeError;O.onreadystatechange()}},Mt=function(Ft){M!=null&&(M.readyState===4?(!("onload"in M)||!("onerror"in M)||!("onabort"in M))&&Qe(M.responseText===""?"error":"load",Ft):M.readyState===3?"onprogress"in M||bt():M.readyState===2&&ze())},rn=function(){ge=j(function(){rn()},500),M.readyState===3&&bt()};"onload"in M&&(M.onload=function(Ft){Qe("load",Ft)}),"onerror"in M&&(M.onerror=function(Ft){Qe("error",Ft)}),"onabort"in M&&(M.onabort=function(Ft){Qe("abort",Ft)}),"onprogress"in M&&(M.onprogress=bt),"onreadystatechange"in M&&(M.onreadystatechange=function(Ft){Mt(Ft)}),("contentType"in M||!("ontimeout"in i.prototype))&&(U+=(U.indexOf("?")===-1?"?":"&")+"padding=true"),M.open(D,U,!0),"readyState"in M&&(ge=j(function(){rn()},0))},c.prototype.abort=function(){this._abort(!1)},c.prototype.getResponseHeader=function(D){return this._contentType},c.prototype.setRequestHeader=function(D,U){var O=this._xhr;"setRequestHeader"in O&&O.setRequestHeader(D,U)},c.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders!=null&&this._xhr.getAllResponseHeaders()||""},c.prototype.send=function(){if((!("ontimeout"in i.prototype)||!("sendAsBinary"in i.prototype)&&!("mozAnon"in i.prototype))&&a!=null&&a.readyState!=null&&a.readyState!=="complete"){var D=this;D._sendTimeout=j(function(){D._sendTimeout=0,D.send()},4);return}var U=this._xhr;"withCredentials"in U&&(U.withCredentials=this.withCredentials);try{U.send(void 0)}catch(O){throw O}};function R(D){return D.replace(/[A-Z]/g,function(U){return String.fromCharCode(U.charCodeAt(0)+32)})}function A(D){for(var U=Object.create(null),O=D.split(`\r
`),M=0;M<O.length;M+=1){var te=O[M],ge=te.split(": "),ze=ge.shift(),bt=ge.join(": ");U[R(ze)]=bt}this._map=U}A.prototype.get=function(D){return this._map[R(D)]},i!=null&&i.HEADERS_RECEIVED==null&&(i.HEADERS_RECEIVED=2);function _(){}_.prototype.open=function(D,U,O,M,te,ge,ze){D.open("GET",te);var bt=0;D.onprogress=function(){var Mt=D.responseText,rn=Mt.slice(bt);bt+=rn.length,O(rn)},D.onerror=function(Mt){Mt.preventDefault(),M(new Error("NetworkError"))},D.onload=function(){M(null)},D.onabort=function(){M(null)},D.onreadystatechange=function(){if(D.readyState===i.HEADERS_RECEIVED){var Mt=D.status,rn=D.statusText,Ft=D.getResponseHeader("Content-Type"),Et=D.getAllResponseHeaders();U(Mt,rn,Ft,new A(Et))}},D.withCredentials=ge;for(var Qe in ze)Object.prototype.hasOwnProperty.call(ze,Qe)&&D.setRequestHeader(Qe,ze[Qe]);return D.send(),D};function F(D){this._headers=D}F.prototype.get=function(D){return this._headers.get(D)};function Ae(){}Ae.prototype.open=function(D,U,O,M,te,ge,ze){var bt=null,Qe=new he,Mt=Qe.signal,rn=new G;return Ie(te,{headers:ze,credentials:ge?"include":"same-origin",signal:Mt,cache:"no-store"}).then(function(Ft){return bt=Ft.body.getReader(),U(Ft.status,Ft.statusText,Ft.headers.get("Content-Type"),new F(Ft.headers)),new De(function(Et,we){var nt=function(){bt.read().then(function(Lt){if(Lt.done)Et(void 0);else{var Wt=rn.decode(Lt.value,{stream:!0});O(Wt),nt()}}).catch(function(Lt){we(Lt)})};nt()})}).catch(function(Ft){if(Ft.name!=="AbortError")return Ft}).then(function(Ft){M(Ft)}),{abort:function(){bt!=null&&bt.cancel(),Qe.abort()}}};function fe(){this._listeners=Object.create(null)}function ve(D){j(function(){throw D},0)}fe.prototype.dispatchEvent=function(D){D.target=this;var U=this._listeners[D.type];if(U!=null)for(var O=U.length,M=0;M<O;M+=1){var te=U[M];try{typeof te.handleEvent=="function"?te.handleEvent(D):te.call(this,D)}catch(ge){ve(ge)}}},fe.prototype.addEventListener=function(D,U){D=String(D);var O=this._listeners,M=O[D];M==null&&(M=[],O[D]=M);for(var te=!1,ge=0;ge<M.length;ge+=1)M[ge]===U&&(te=!0);te||M.push(U)},fe.prototype.removeEventListener=function(D,U){D=String(D);var O=this._listeners,M=O[D];if(M!=null){for(var te=[],ge=0;ge<M.length;ge+=1)M[ge]!==U&&te.push(M[ge]);te.length===0?delete O[D]:O[D]=te}};function J(D){this.type=D,this.target=void 0}function v(D,U){J.call(this,D),this.data=U.data,this.lastEventId=U.lastEventId}v.prototype=Object.create(J.prototype);function ee(D,U){J.call(this,D),this.status=U.status,this.statusText=U.statusText,this.headers=U.headers}ee.prototype=Object.create(J.prototype);function oe(D,U){J.call(this,D),this.error=U.error}oe.prototype=Object.create(J.prototype);var Rt=-1,w=0,sn=1,me=2,kt=-1,yt=0,mt=1,It=2,Ne=3,Ct=/^text\/event\-stream(;.*)?$/i,ot=1e3,zt=18e6,Tt=function(D,U){var O=D==null?U:parseInt(D,10);return O!==O&&(O=U),Kt(O)},Kt=function(D){return Math.min(Math.max(D,ot),zt)},lt=function(D,U,O){try{typeof U=="function"&&U.call(D,O)}catch(M){ve(M)}};function ft(D,U){fe.call(this),U=U||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,St(this,D,U)}function $t(){return i!=null&&"withCredentials"in i.prototype||k==null?new i:new k}var an=Ie!=null&&ie!=null&&"body"in ie.prototype;function St(D,U,O){U=String(U);var M=Boolean(O.withCredentials),te=O.lastEventIdQueryParameterName||"lastEventId",ge=Kt(1e3),ze=Tt(O.heartbeatTimeout,45e3),bt="",Qe=ge,Mt=!1,rn=0,Ft=O.headers||{},Et=O.Transport,we=an&&Et==null?void 0:new c(Et!=null?new Et:$t()),nt=Et!=null&&typeof Et!="string"?new Et:we==null?new Ae:new _,Lt=void 0,Wt=0,le=Rt,$e="",xt="",Yt="",se="",ke=yt,pe=0,Le=0,et=function(Be,C,W,Q){if(le===w)if(Be===200&&W!=null&&Ct.test(W)){le=sn,Mt=Date.now(),Qe=ge,D.readyState=sn;var rt=new ee("open",{status:Be,statusText:C,headers:Q});D.dispatchEvent(rt),lt(D,D.onopen,rt)}else{var ct="";Be!==200?(C&&(C=C.replace(/\s+/g," ")),ct="EventSource's response has a status "+Be+" "+C+" that is not 200. Aborting the connection."):ct="EventSource's response has a Content-Type specifying an unsupported type: "+(W==null?"-":W.replace(/\s+/g," "))+". Aborting the connection.",en();var rt=new ee("error",{status:Be,statusText:C,headers:Q});D.dispatchEvent(rt),lt(D,D.onerror,rt),console.error(ct)}},pt=function(Be){if(le===sn){for(var C=-1,W=0;W<Be.length;W+=1){var Q=Be.charCodeAt(W);(Q===`
`.charCodeAt(0)||Q==="\r".charCodeAt(0))&&(C=W)}var rt=(C!==-1?se:"")+Be.slice(0,C+1);se=(C===-1?se:"")+Be.slice(C+1),Be!==""&&(Mt=Date.now(),rn+=Be.length);for(var ct=0;ct<rt.length;ct+=1){var Q=rt.charCodeAt(ct);if(ke===kt&&Q===`
`.charCodeAt(0))ke=yt;else if(ke===kt&&(ke=yt),Q==="\r".charCodeAt(0)||Q===`
`.charCodeAt(0)){if(ke!==yt){ke===mt&&(Le=ct+1);var ut=rt.slice(pe,Le-1),tn=rt.slice(Le+(Le<ct&&rt.charCodeAt(Le)===" ".charCodeAt(0)?1:0),ct);ut==="data"?($e+=`
`,$e+=tn):ut==="id"?xt=tn:ut==="event"?Yt=tn:ut==="retry"?(ge=Tt(tn,ge),Qe=ge):ut==="heartbeatTimeout"&&(ze=Tt(tn,ze),Wt!==0&&(B(Wt),Wt=j(function(){Ce()},ze)))}if(ke===yt){if($e!==""){bt=xt,Yt===""&&(Yt="message");var mn=new v(Yt,{data:$e.slice(1),lastEventId:xt});if(D.dispatchEvent(mn),Yt==="open"?lt(D,D.onopen,mn):Yt==="message"?lt(D,D.onmessage,mn):Yt==="error"&&lt(D,D.onerror,mn),le===me)return}$e="",Yt=""}ke=Q==="\r".charCodeAt(0)?kt:yt}else ke===yt&&(pe=ct,ke=mt),ke===mt?Q===":".charCodeAt(0)&&(Le=ct+1,ke=It):ke===It&&(ke=Ne)}}},Bt=function(Be){if(le===sn||le===w){le=Rt,Wt!==0&&(B(Wt),Wt=0),Wt=j(function(){Ce()},Qe),Qe=Kt(Math.min(ge*16,Qe*2)),D.readyState=w;var C=new oe("error",{error:Be});D.dispatchEvent(C),lt(D,D.onerror,C),Be!=null&&console.error(Be)}},en=function(){le=me,Lt!=null&&(Lt.abort(),Lt=void 0),Wt!==0&&(B(Wt),Wt=0),D.readyState=me},Ce=function(){if(Wt=0,le!==Rt){if(!Mt&&Lt!=null)Bt(new Error("No activity within "+ze+" milliseconds. "+(le===w?"No response received.":rn+" chars received.")+" Reconnecting.")),Lt!=null&&(Lt.abort(),Lt=void 0);else{var Be=Math.max((Mt||Date.now())+ze-Date.now(),1);Mt=!1,Wt=j(function(){Ce()},Be)}return}Mt=!1,rn=0,Wt=j(function(){Ce()},ze),le=w,$e="",Yt="",xt=bt,se="",pe=0,Le=0,ke=yt;var C=U;if(U.slice(0,5)!=="data:"&&U.slice(0,5)!=="blob:"&&bt!==""){var W=U.indexOf("?");C=W===-1?U:U.slice(0,W+1)+U.slice(W+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(tn,mn){return mn===te?"":tn}),C+=(U.indexOf("?")===-1?"?":"&")+te+"="+encodeURIComponent(bt)}var Q=D.withCredentials,rt={};rt.Accept="text/event-stream";var ct=D.headers;if(ct!=null)for(var ut in ct)Object.prototype.hasOwnProperty.call(ct,ut)&&(rt[ut]=ct[ut]);try{Lt=nt.open(we,et,pt,Bt,C,Q,rt)}catch(tn){throw en(),tn}};D.url=U,D.readyState=w,D.withCredentials=M,D.headers=Ft,D._close=en,Ce()}ft.prototype=Object.create(fe.prototype),ft.prototype.CONNECTING=w,ft.prototype.OPEN=sn,ft.prototype.CLOSED=me,ft.prototype.close=function(){this._close()},ft.CONNECTING=w,ft.OPEN=sn,ft.CLOSED=me,ft.prototype.withCredentials=void 0;var jt=Ke;i!=null&&(Ke==null||!("withCredentials"in Ke.prototype))&&(jt=ft),function(D){if(typeof $n.exports=="object"){var U=D(Zt);U!==void 0&&($n.exports=U)}else o=[Zt],e=D,m=typeof e=="function"?e.apply(Zt,o):e,m!==void 0&&($n.exports=m)}(function(D){D.EventSourcePolyfill=ft,D.NativeEventSource=Ke,D.EventSource=jt})})(typeof globalThis=="undefined"?typeof window!="undefined"?window:typeof self!="undefined"?self:this:globalThis)},92805:($n,Zt,e)=>{"use strict";e.d(Zt,{S:()=>I,b:()=>Ie,c:()=>re});var o=e(14041),m=e(11638),p=e(58837),j=e(46423),B=e(5951),i=e(77125),k=e(8109),Ze=e(58007),Ke=e(72501),a=e(23180);const De=(0,p.A)(()=>({highlight:{}}),{name:"BackstageHighlightedSearchResultText"}),Ie=c=>{const{text:R,preTag:A,postTag:_}=c,F=De(),Ae=(0,o.useMemo)(()=>R.split(new RegExp(`(${A}.+?${_})`)),[_,A,R]);return o.createElement(o.Fragment,null,Ae.map((fe,ve)=>fe.includes(A)?o.createElement("mark",{className:F.highlight,key:ve},fe.replace(new RegExp(`${A}|${_}`,"g"),"")):fe))},ie=({result:c,highlight:R,icon:A,secondaryAction:_,lineClamp:F=5})=>c?o.createElement(o.Fragment,null,A&&o.createElement(j.A,null,A),o.createElement(B.A,{primaryTypographyProps:{variant:"h6"},primary:o.createElement(a.N_,{noTrack:!0,to:c.location},R!=null&&R.fields.title?o.createElement(Ie,{text:(R==null?void 0:R.fields.title)||"",preTag:(R==null?void 0:R.preTag)||"",postTag:(R==null?void 0:R.postTag)||""}):c.title),secondary:o.createElement(Ke.A,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:F,overflow:"hidden"},color:"textSecondary",variant:"body2"},R!=null&&R.fields.text?o.createElement(Ie,{text:R.fields.text,preTag:R.preTag,postTag:R.postTag}):c.text)}),_&&o.createElement(i.A,{alignItems:"flex-end"},_)):null,G=c=>o.createElement(m.Ig,{attributes:{pluginId:"search",extension:"DefaultResultListItem"}},o.createElement(ie,{...c})),Ve="search.results.list.items.extensions.v1",he=(c,R)=>{for(const A of c){if(!(0,o.isValidElement)(A))continue;const _=(0,m.E0)(A,Ve);if(_!=null&&_(R))return(0,o.cloneElement)(A,{rank:R.rank,highlight:R.highlight,result:R.document,...A.props})}return null},_e=c=>{const{rank:R,result:A,noTrack:_,children:F,alignItems:Ae="flex-start",...fe}=c,ve=(0,m.st)(),J=(0,o.useCallback)(()=>{_||A&&ve.captureEvent("discover",A.title,{attributes:{to:A.location},value:R})},[R,A,_,ve]);return o.createElement(k.A,{divider:!0,alignItems:Ae,onClickCapture:J,...fe},F)},re=c=>{const{name:R,component:A,predicate:_=()=>!0}=c;return(0,m.zZ)({name:R,component:{lazy:()=>A().then(F=>Ae=>o.createElement(_e,{rank:Ae.rank,result:Ae.result,noTrack:Ae.noTrack},(0,o.createElement)(F,Ae)))},data:{[Ve]:_}})},Re=c=>{const R=(0,m.OJ)(c,A=>A.selectByComponentData({key:Ve}).getElements(),[c]);return(0,o.useCallback)((A,_)=>{const F=he(R,A);return o.createElement(o.Fragment,{key:_},F!=null?F:o.createElement(_e,{rank:A.rank,result:A.document},o.createElement(G,{rank:A.rank,highlight:A.highlight,result:A.document})))},[R])},I=c=>{const{results:R,children:A,..._}=c,F=Re(A);return o.createElement(Ze.A,{..._},R.map(F))}},13270:($n,Zt,e)=>{"use strict";e.d(Zt,{$6:()=>ze,IW:()=>lt,Lt:()=>zt,SQ:()=>mt,Z5:()=>en,Zf:()=>Kt,nJ:()=>rn,pY:()=>St,q0:()=>Lt,yY:()=>me});var o=e(7877),m=e(11638),p=e(92805),j=e(34839),B=e(29365),i=e(16249),k=e(58837),Ze=e(78467),Ke=e(67720),a=e(95061),De=e(91761),Ie=e(86901),ie=e(69076),G=e(48543),Ve=e(81215),he=e(26343),_e=e(72501),re=e(60083),Re=e(64947),I=e(45917),c=e(14041),R=e(16983),A=e(45250),_=e.n(A),F=e(91638),Ae=e(50193),fe=e(97388),ve=e(20577),J=e(5030),v=e(23180),ee=e(45810),oe=e.n(ee),Rt=e(21098),w=e(22982),sn=e(1048).Buffer;const me=(0,o.c)({id:"plugin.search.queryservice"});class kt{constructor(Be){this.mockedResults=Be}query(){return Promise.resolve(this.mockedResults||{results:[]})}}const yt=(0,fe.tK)("search-context"),mt=()=>{const Ce=(0,c.useContext)(yt);if(!Ce)throw new Error("useSearch must be used within a SearchContextProvider");const Be=Ce.atVersion(1);if(!Be)throw new Error("No SearchContext v1 found");return Be},It=()=>(0,c.useContext)(yt)!==void 0,Ne={term:"",types:[],filters:{},pageLimit:void 0,pageCursor:void 0},Ct=(Ce=Ne)=>{var Be,C,W,Q;const rt=(0,o.u)(me),ct=(0,m.st)(),[ut,tn]=(0,c.useState)(Ce.term),[mn,Cn]=(0,c.useState)(Ce.types),[An,Gn]=(0,c.useState)(Ce.filters),[Mn,Wn]=(0,c.useState)(Ce.pageLimit),[P,K]=(0,c.useState)(Ce.pageCursor),be=(0,Ae.A)(ut),vt=(0,Ae.A)(An),Ot=(0,F.default)(async()=>{var qt,cn;const on=await rt.query({term:ut,types:mn,filters:An,pageLimit:Mn,pageCursor:P});return ut&&ct.captureEvent("search",ut,{value:(cn=(qt=Ot.value)==null?void 0:qt.numberOfResults)!=null?cn:void 0}),on},[ut,mn,An,Mn,P]),Vt=!Ot.loading&&!Ot.error&&((Be=Ot.value)==null?void 0:Be.nextPageCursor),ne=!Ot.loading&&!Ot.error&&((C=Ot.value)==null?void 0:C.previousPageCursor),Pe=(0,c.useCallback)(()=>{var qt;K((qt=Ot.value)==null?void 0:qt.nextPageCursor)},[(W=Ot.value)==null?void 0:W.nextPageCursor]),je=(0,c.useCallback)(()=>{var qt;K((qt=Ot.value)==null?void 0:qt.previousPageCursor)},[(Q=Ot.value)==null?void 0:Q.previousPageCursor]);return(0,c.useEffect)(()=>{be!==void 0&&ut!==be&&K(void 0)},[ut,be,K]),(0,c.useEffect)(()=>{vt!==void 0&&!(0,A.isEqual)(An,vt)&&K(void 0)},[An,vt,K]),{result:Ot,term:ut,setTerm:tn,types:mn,setTypes:Cn,filters:An,setFilters:Gn,pageLimit:Mn,setPageLimit:Wn,pageCursor:P,setPageCursor:K,fetchNextPage:Vt?Pe:void 0,fetchPreviousPage:ne?je:void 0}},ot=Ce=>{const{initialState:Be,children:C}=Ce,W=Ct(Be);return c.createElement(m.Ig,{attributes:{searchTypes:W.types.sort().join(",")}},c.createElement(yt.Provider,{value:(0,fe.Bl)({1:W})},C))},zt=Ce=>{const{initialState:Be,inheritParentContextIfAvailable:C,children:W}=Ce,Q=It(),rt=(0,o.u)(o.p),ct=Be!=null?Be:{},ut=rt.has("search.query.pageLimit")?{pageLimit:rt.getNumber("search.query.pageLimit")}:{},tn={...Ne,...ct,...ut};return Q&&C?c.createElement(c.Fragment,null,W):c.createElement(ot,{initialState:tn},W)};function Tt(Ce){return(0,c.forwardRef)((Be,C)=>c.createElement(zt,{inheritParentContextIfAvailable:!0},c.createElement(Ce,{...Be,ref:C})))}const Kt=Tt((0,c.forwardRef)((Ce,Be)=>{const{onChange:C,onKeyDown:W=()=>{},onClear:Q=()=>{},onSubmit:rt=()=>{},debounceTime:ct=200,clearButton:ut=!0,fullWidth:tn=!0,value:mn,label:Cn,placeholder:An,inputProps:Gn={},InputProps:Mn={},endAdornment:Wn,...P}=Ce,K=(0,o.u)(o.p),[be,vt]=(0,c.useState)(""),Ot=(0,c.useRef)("");(0,c.useEffect)(()=>{vt(on=>on===Ot.current?String(mn):on)},[mn,Ot]),(0,R.A)(()=>{Ot.current=be,C(be)},ct,[be]);const Vt=(0,c.useCallback)(on=>{vt(on.target.value)},[vt]),ne=(0,c.useCallback)(on=>{W&&W(on),rt&&on.key==="Enter"&&rt()},[W,rt]),Pe=(0,c.useCallback)(()=>{Ot.current="",C(""),vt(""),Q&&Q()},[C,Q]),je=Cn?void 0:"Search",Jt=An!=null?An:`Search in ${K.getOptionalString("app.title")||"Backstage"}`,qt=c.createElement(j.A,{position:"start"},c.createElement(B.A,{"aria-label":"Query",size:"small",disabled:!0},c.createElement(I.A,null))),cn=c.createElement(j.A,{position:"end"},c.createElement(Re.A,{"aria-label":"Clear",size:"small",onClick:Pe,onKeyDown:on=>{on.key==="Enter"&&on.stopPropagation()}},"Clear"));return c.createElement(i.A,{id:"search-bar-text-field","data-testid":"search-bar-next",variant:"outlined",margin:"normal",inputRef:Be,value:be,label:Cn,placeholder:Jt,InputProps:{startAdornment:qt,endAdornment:ut?cn:Wn,...Mn},inputProps:{"aria-label":je,...Gn},fullWidth:tn,onChange:Vt,onKeyDown:ne,...P})})),lt=Tt((0,c.forwardRef)((Ce,Be)=>{const{value:C="",onChange:W,...Q}=Ce,{term:rt,setTerm:ct}=mt();(0,c.useEffect)(()=>{C&&ct(String(C))},[C,ct]);const ut=(0,c.useCallback)(tn=>{W?W(tn):ct(tn)},[W,ct]);return c.createElement(m.Ig,{attributes:{pluginId:"search",extension:"SearchBar"}},c.createElement(Kt,{...Q,ref:Be,value:rt,onChange:ut}))})),ft=(0,k.A)(Ce=>({loading:{right:Ce.spacing(1),position:"absolute"}})),$t=Ce=>Be=>c.createElement(zt,{inheritParentContextIfAvailable:!0},c.createElement(Ce,{...Be})),an=()=>{const Ce=ft();return c.createElement(Ze.A,{className:Ce.loading,"data-testid":"search-autocomplete-progressbar",color:"inherit",size:20})},St=$t(function(Be){const{loading:C,value:W,onChange:Q=()=>{},options:rt=[],getOptionLabel:ct=Ot=>String(Ot),inputPlaceholder:ut,inputDebounceTime:tn,freeSolo:mn=!0,fullWidth:Cn=!0,clearOnBlur:An=!1,"data-testid":Gn="search-autocomplete",...Mn}=Be,{setTerm:Wn}=mt(),P=(0,c.useCallback)(Ot=>Ot?typeof Ot=="string"?Ot:ct(Ot):"",[ct]),K=(0,c.useMemo)(()=>P(W),[W,P]),be=(0,c.useCallback)((Ot,Vt,ne,Pe)=>{Wn(P(Vt)),Q(Ot,Vt,ne,Pe)},[P,Wn,Q]),vt=(0,c.useCallback)(({InputProps:{ref:Ot,className:Vt,endAdornment:ne},InputLabelProps:Pe,...je})=>c.createElement(lt,{...je,ref:Ot,clearButton:!1,value:K,placeholder:ut,debounceTime:tn,endAdornment:C?c.createElement(an,null):ne,InputProps:{className:Vt}}),[C,K,ut,tn]);return c.createElement(ve.Ay,{...Mn,"data-testid":Gn,value:W,onChange:be,options:rt,getOptionLabel:ct,renderInput:vt,freeSolo:mn,fullWidth:Cn,clearOnBlur:An})}),jt=Ce=>{const{icon:Be,primaryText:C,primaryTextTypographyProps:W,secondaryText:Q,secondaryTextTypographyProps:rt,disableTextTypography:ct}=Ce;return React.createElement(React.Fragment,null,Be?React.createElement(ListItemIcon,null,Be):null,React.createElement(ListItemText,{primary:C,primaryTypographyProps:W,secondary:Q,secondaryTypographyProps:rt,disableTypography:ct}))},D=(Ce,Be,C=[],W=250)=>{const Q=(0,c.useRef)({}),rt=Ce||(()=>Promise.resolve([])),[ct,ut]=(0,J.default)(rt,[Be],{loading:!0});if((0,R.A)(()=>{Q.current[Be]===void 0&&(Q.current[Be]=ut(Be).then(mn=>(Q.current[Be]=mn,mn)))},W,[ut,Be]),C.length)return{loading:!1,value:C};const tn=Q.current[Be];return Array.isArray(tn)?{loading:!1,value:tn}:ct},U=(Ce,Be)=>{const{setFilters:C}=mt();(0,c.useEffect)(()=>{Be&&[Be].flat().length>0&&C(W=>({...W,[Ce]:Be}))},[])},O=Ce=>{const{className:Be,defaultValue:C,name:W,values:Q,valuesDebounceMs:rt,label:ct,filterSelectedOptions:ut,limitTags:tn,multiple:mn}=Ce,[Cn,An]=(0,c.useState)("");U(W,C);const Gn=typeof Q=="function"?Q:void 0,Mn=typeof Q=="function"?void 0:Q,{value:Wn,loading:P}=D(Gn,Cn,Mn,rt),{filters:K,setFilters:be}=mt(),vt=K[W]||(mn?[]:null),Ot=(Pe,je)=>{be(Jt=>{const{[W]:qt,...cn}=Jt;return je?{...cn,[W]:je}:{...cn}})},Vt=Pe=>c.createElement(i.A,{...Pe,name:"search",variant:"outlined",label:ct,fullWidth:!0}),ne=(Pe,je)=>Pe.map((Jt,qt)=>c.createElement(Ke.A,{label:Jt,color:"primary",...je({index:qt})}));return c.createElement(ve.Ay,{filterSelectedOptions:ut,limitTags:tn,multiple:mn,className:Be,id:`${mn?"multi-":""}select-filter-${W}--select`,options:Wn||[],loading:P,value:vt,onChange:Ot,onInputChange:(Pe,je)=>An(je),renderInput:Vt,renderTags:ne})},M=(0,k.A)({label:{textTransform:"capitalize"},checkboxWrapper:{display:"flex",alignItems:"center",width:"100%"},textWrapper:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}),te=Ce=>{const{className:Be,defaultValue:C,label:W,name:Q,values:rt=[],valuesDebounceMs:ct}=Ce,ut=M(),{filters:tn,setFilters:mn}=mt();U(Q,C);const Cn=typeof rt=="function"?rt:void 0,An=typeof rt=="function"?void 0:rt,{value:Gn=[],loading:Mn}=D(Cn,"",An,ct),Wn=P=>{const{target:{value:K,checked:be}}=P;mn(vt=>{const{[Q]:Ot,...Vt}=vt,ne=(Ot||[]).filter(je=>je!==K),Pe=be?[...ne,K]:ne;return Pe.length?{...Vt,[Q]:Pe}:Vt})};return c.createElement(a.A,{className:Be,disabled:Mn,fullWidth:!0,"data-testid":"search-checkboxfilter-next"},W?c.createElement(De.A,{className:ut.label},W):null,Gn.map(P=>{var K;return c.createElement(Ie.A,{key:P,classes:{root:ut.checkboxWrapper,label:ut.textWrapper},label:P,control:c.createElement(ie.A,{color:"primary",inputProps:{"aria-labelledby":P},value:P,name:P,onChange:Wn,checked:((K=tn[Q])!=null?K:[]).includes(P)})})}))},ge=Ce=>{const{className:Be,defaultValue:C,label:W,name:Q,values:rt,valuesDebounceMs:ct}=Ce,ut=M();U(Q,C);const tn=typeof rt=="function"?rt:void 0,mn=typeof rt=="function"?void 0:rt,{value:Cn=[],loading:An}=D(tn,"",mn,ct),{filters:Gn,setFilters:Mn}=mt(),Wn=P=>{const{target:{value:K}}=P;Mn(be=>{const{[Q]:vt,...Ot}=be;return K?{...Ot,[Q]:K}:Ot})};return c.createElement(a.A,{disabled:An,className:Be,variant:"filled",fullWidth:!0,"data-testid":"search-selectfilter-next"},W?c.createElement(G.A,{className:ut.label,margin:"dense"},W):null,c.createElement(Ve.A,{variant:"outlined",value:Gn[Q]||"",onChange:Wn},c.createElement(he.A,{value:""},c.createElement("em",null,"All")),Cn.map(P=>c.createElement(he.A,{key:P,value:P},c.createElement(_e.A,{variant:"inherit",noWrap:!0},P)))))},ze=Ce=>{const{component:Be,...C}=Ce;return c.createElement(Be,{...C})};ze.Checkbox=Ce=>c.createElement(ze,{...Ce,component:te}),ze.Select=Ce=>c.createElement(ze,{...Ce,component:ge}),ze.Autocomplete=Ce=>c.createElement(ze,{...Ce,component:O});const bt=Ce=>sn.from(Ce.toString(),"utf-8").toString("base64"),Qe=Ce=>Ce?Number(sn.from(Ce,"base64").toString("utf-8")):0,Mt=Ce=>{const{total:Be=-1,cursor:C,hasNextPage:W,onCursorChange:Q,limit:rt=25,limitLabel:ct="Results per page:",limitText:ut=({from:Wn,to:P})=>Be>0?`of ${Be}`:`${Wn}-${P}`,limitOptions:tn,onLimitChange:mn,...Cn}=Ce,An=(0,c.useMemo)(()=>Qe(C),[C]),Gn=(0,c.useCallback)((Wn,P)=>{Q==null||Q(bt(P))},[Q]),Mn=(0,c.useCallback)(Wn=>{const P=Wn.target.value;mn==null||mn(parseInt(P,10))},[mn]);return c.createElement(re.A,{...Cn,component:"div",count:Be,page:An,nextIconButtonProps:{...W!==void 0&&{disabled:!W}},onPageChange:Gn,rowsPerPage:rt,labelRowsPerPage:ct,labelDisplayedRows:ut,rowsPerPageOptions:tn,onRowsPerPageChange:Mn})},rn=Ce=>{const{pageLimit:Be,setPageLimit:C,pageCursor:W,setPageCursor:Q,fetchNextPage:rt}=mt(),ct=(0,c.useCallback)(ut=>{C(ut),Q(void 0)},[C,Q]);return c.createElement(Mt,{...Ce,hasNextPage:!!rt,limit:Be,onLimitChange:ct,cursor:W,onCursorChange:Q})},Ft=Ce=>{const{children:Be}=Ce,C=mt(),{result:W,...Q}=C;return Be(W,Q)},Et=Ce=>{const{query:Be,children:C}=Ce,W=(0,o.u)(me),Q=(0,F.default)(()=>{const{term:rt="",types:ct=[],filters:ut={},...tn}=Be;return W.query({...tn,term:rt,types:ct,filters:ut})},[Be]);return C(Q,Be)},we=Ce=>{const{query:Be,children:C}=Ce;return Be?c.createElement(Et,{query:Be},C):c.createElement(Ft,null,C)},nt=Ce=>{const{query:Be,children:C,noResultsComponent:W=c.createElement(v.pp,{missing:"data",title:"Sorry, no results were found"}),...Q}=Ce;return c.createElement(we,{query:Be},({loading:rt,error:ct,value:ut})=>rt?c.createElement(v.ke,null):ct?c.createElement(v._1,{title:"Error encountered while fetching search results",error:ct}):ut!=null&&ut.results.length?(0,A.isFunction)(C)?C(ut):c.createElement(p.S,{...Q,results:ut.results},C):W)},Lt=Ce=>c.createElement(m.Ig,{attributes:{pluginId:"search",extension:"SearchResult"}},c.createElement(nt,{...Ce})),Wt=Ce=>{const{error:Be,loading:C,resultItems:W,renderResultItem:Q=tn=>React.createElement(HigherOrderDefaultResultListItem,{key:tn.document.location,result:tn.document}),disableRenderingWithNoResults:rt,noResultsComponent:ct=rt?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...ut}=Ce;return C?React.createElement(Progress,null):Be?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:Be}):W!=null&&W.length?React.createElement(List,{...ut},W.map(Q)):React.createElement(React.Fragment,null,ct)},le=Ce=>{const{query:Be,renderResultItem:C,children:W,...Q}=Ce,rt=useSearchResultListItemExtensions(W);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultList"}},React.createElement(we,{query:Be},({loading:ct,error:ut,value:tn})=>React.createElement(Wt,{...Q,error:ut,loading:ct,resultItems:tn==null?void 0:tn.results,renderResultItem:C!=null?C:rt})))},$e=(0,k.A)(Ce=>({listSubheader:{display:"flex",alignItems:"center"},listSubheaderName:{marginLeft:Ce.spacing(1),textTransform:"uppercase"},listSubheaderChip:{color:Ce.palette.text.secondary,margin:Ce.spacing(0,0,0,1.5)},listSubheaderFilter:{display:"flex",color:Ce.palette.text.secondary,margin:Ce.spacing(0,0,0,1.5)},listSubheaderLink:{marginLeft:"auto",display:"flex",alignItems:"center"},listSubheaderLinkIcon:{fontSize:"inherit",marginLeft:Ce.spacing(.5)}})),xt=Ce=>{const Be=$e(),{label:C,children:W,...Q}=Ce;return React.createElement(Chip,{...Q,className:Be.listSubheaderFilter,variant:"outlined",label:React.createElement(React.Fragment,null,C,": ",W)})},Yt=()=>null,se=(0,k.A)(Ce=>({root:{fontSize:"inherit","&:focus":{outline:"none",background:Ce.palette.common.white},"&:not(:focus)":{cursor:"pointer",color:Ce.palette.primary.main,"&:hover":{textDecoration:"underline"}}}})),ke=Ce=>{const Be=se(),{label:C,value:W="None",onChange:Q,onDelete:rt}=Ce,ct=useCallback(ut=>{Q(ut.target.value)},[Q]);return React.createElement(xt,{label:C,onDelete:rt},React.createElement(Typography,{role:"textbox",component:"span",className:Be.root,onChange:ct,contentEditable:!0,suppressContentEditableWarning:!0},W==null?void 0:W.toString()))},pe=(0,k.A)(Ce=>({root:{fontSize:"inherit","&:not(:focus)":{cursor:"pointer",color:Ce.palette.primary.main,"&:hover":{textDecoration:"underline"}},"&:focus":{outline:"none"},"&>div:first-child":{padding:0}}})),Le=Ce=>{const Be=pe(),{label:C,value:W="none",onChange:Q,onDelete:rt,children:ct}=Ce,ut=useCallback(tn=>{Q(tn.target.value)},[Q]);return React.createElement(xt,{label:C,onDelete:rt},React.createElement(Select,{className:Be.root,value:W,onChange:ut,input:React.createElement(InputBase,null),IconComponent:Yt},React.createElement(MenuItem,{value:"none"},"None"),ct))};function et(Ce){const Be=$e(),[C,W]=useState(null),{error:Q,loading:rt,icon:ct,title:ut,titleProps:tn={},link:mn=React.createElement(React.Fragment,null,"See all",React.createElement(ArrowRightIcon,{className:Be.listSubheaderLinkIcon})),linkProps:Cn={},filterOptions:An,renderFilterOption:Gn=Pe=>React.createElement(MenuItem,{key:String(Pe),value:String(Pe)},String(Pe)),filterFields:Mn,renderFilterField:Wn,resultItems:P,renderResultItem:K=Pe=>React.createElement(HigherOrderDefaultResultListItem,{key:Pe.document.location,result:Pe.document}),disableRenderingWithNoResults:be,noResultsComponent:vt=be?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...Ot}=Ce,Vt=useCallback(Pe=>{W(Pe.currentTarget)},[]),ne=useCallback(()=>{W(null)},[]);return rt?React.createElement(Progress,null):Q?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:Q}):P!=null&&P.length?React.createElement(List,{...Ot},React.createElement(ListSubheader,{className:Be.listSubheader},ct,React.createElement(Typography,{className:Be.listSubheaderName,component:"strong",...tn},ut),An?React.createElement(Chip,{className:Be.listSubheaderChip,component:"button",icon:React.createElement(AddIcon,null),variant:"outlined",label:"Add filter","aria-controls":"filters-menu","aria-haspopup":"true",onClick:Vt}):null,An?React.createElement(Menu,{id:"filters-menu",anchorEl:C,open:Boolean(C),onClose:ne,onClick:ne,keepMounted:!0},An.map(Gn)):null,Mn==null?void 0:Mn.map(Pe=>{var je;return(je=Wn==null?void 0:Wn(Pe))!=null?je:null}),React.createElement(Link,{className:Be.listSubheaderLink,to:"/search",...Cn},mn)),P.map(K)):React.createElement(React.Fragment,null,vt)}function pt(Ce){const{query:Be,children:C,renderResultItem:W,linkProps:Q={},...rt}=Ce,ct=useSearchResultListItemExtensions(C);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultGroup"}},React.createElement(we,{query:Be},({loading:ut,error:tn,value:mn},{term:Cn,types:An,pageCursor:Gn,filters:Mn={}})=>{const Wn=`/search?${qs.stringify({term:Cn,types:An,filters:Mn,pageCursor:Gn,query:Cn},{arrayFormat:"brackets"})}`;return React.createElement(et,{...rt,error:tn,loading:ut,linkProps:{to:Wn,...Q},filterFields:Object.keys(Mn),resultItems:mn==null?void 0:mn.results,renderResultItem:W!=null?W:ct})}))}const Bt=(0,k.A)(Ce=>({root:{display:"flex",justifyContent:"space-between",gap:Ce.spacing(2),margin:Ce.spacing(2,0)}})),en=()=>{const{fetchNextPage:Ce,fetchPreviousPage:Be}=mt(),C=Bt();return!Ce&&!Be?c.createElement(c.Fragment,null):c.createElement("nav",{"aria-label":"pagination navigation",className:C.root},c.createElement(Re.A,{"aria-label":"previous page",disabled:!Be,onClick:Be,startIcon:c.createElement(w.A,null)},"Previous"),c.createElement(Re.A,{"aria-label":"next page",disabled:!Ce,onClick:Ce,endIcon:c.createElement(Rt.A,null)},"Next"))}},96377:($n,Zt,e)=>{"use strict";e.d(Zt,{S:()=>zt,a:()=>an,b:()=>It,c:()=>Ne,r:()=>yt});var o=e(3399),m=e(45810),p=e.n(m),j=e(13270),B=e(11638),i=e(7877),k=e(14041),Ze=e(50193),Ke=e(18690),a=e(58837),De=e(40703),Ie=e(45685),ie=e(48653),G=e(8973),Ve=e(29655),he=e(91567),_e=e(58007),re=e(37197),Re=e(8109),I=e(46423),c=e(5951),R=e(31653),A=e(38605),_=e(95061),F=e(48543),Ae=e(81215),fe=e(67720),ve=e(26343),J=e(69076),v=e(97720),ee=e(6924),oe=e(53364),Rt=e(91638),w=Object.defineProperty,sn=(St,jt,D)=>jt in St?w(St,jt,{enumerable:!0,configurable:!0,writable:!0,value:D}):St[jt]=D,me=(St,jt,D)=>(sn(St,typeof jt!="symbol"?jt+"":jt,D),D);class kt{constructor(jt){me(this,"discoveryApi"),me(this,"identityApi"),this.discoveryApi=jt.discoveryApi,this.identityApi=jt.identityApi}async query(jt){const{token:D}=await this.identityApi.getCredentials(),U=p().stringify(jt),O=`${await this.discoveryApi.getBaseUrl("search")}/query?${U}`,M=await fetch(O,{headers:D?{Authorization:`Bearer ${D}`}:{}});if(!M.ok)throw await o.o3.fromResponse(M);return M.json()}}const yt=(0,B.HM)({id:"search"}),mt=(0,B.i1)({id:"search",apis:[(0,B.bW)({api:j.yY,deps:{discoveryApi:i.q,identityApi:i.t},factory:({discoveryApi:St,identityApi:jt})=>new kt({discoveryApi:St,identityApi:jt})})],routes:{root:yt}}),It=mt.provide((0,B.QJ)({name:"SearchPage",component:()=>e.e(5451).then(e.bind(e,25451)).then(St=>St.SearchPage),mountPoint:yt})),Ne=mt.provide((0,B.NC)({name:"SidebarSearchModal",component:{lazy:()=>e.e(7190).then(e.bind(e,94809)).then(St=>St.SidebarSearchModal)}})),Ct=mt.provide((0,B.NC)({name:"HomePageSearchBar",component:{lazy:()=>e.e(5241).then(e.bind(e,55241)).then(St=>St.HomePageSearchBar)}})),ot=()=>{const St=(0,Ke.zy)(),{term:jt,setTerm:D,types:U,setTypes:O,pageCursor:M,setPageCursor:te,filters:ge,setFilters:ze}=(0,j.SQ)(),bt=(0,Ze.A)(St.search);return(0,k.useEffect)(()=>{if(St.search===bt)return;const Qe=p().parse(St.search.substring(1),{arrayLimit:0})||{};Qe.filters&&ze(Qe.filters),Qe.query&&D(Qe.query),Qe.pageCursor&&te(Qe.pageCursor),Qe.types&&O(Qe.types)},[bt,St,D,O,te,ze]),(0,k.useEffect)(()=>{const Qe=p().stringify({query:jt,types:U,pageCursor:M,filters:ge},{arrayFormat:"brackets"}),Mt=`${window.location.pathname}?${Qe}`;window.history.replaceState(null,document.title,Mt)},[jt,U,M,ge]),null},zt=()=>{const St=(0,Ke.P1)();return k.createElement(j.Lt,null,k.createElement(ot,null),St)},Tt=(0,a.A)(St=>({card:{backgroundColor:"rgba(0, 0, 0, .11)"},cardContent:{paddingTop:St.spacing(1)},icon:{color:St.palette.common.black},list:{width:"100%"},listItemIcon:{width:"24px",height:"24px"},accordion:{backgroundColor:St.palette.background.paper},accordionSummary:{minHeight:"auto","&.Mui-expanded":{minHeight:"auto"}},accordionSummaryContent:{margin:St.spacing(2,0),"&.Mui-expanded":{margin:St.spacing(2,0)}},accordionDetails:{padding:St.spacing(0,0,1)}})),Kt=St=>{const jt=Tt(),{filters:D,setPageCursor:U,setTypes:O,term:M,types:te}=(0,j.SQ)(),ge=(0,i.u)(j.yY),[ze,bt]=(0,k.useState)(!0),{defaultValue:Qe,name:Mt,showCounts:rn,types:Ft}=St,Et=()=>bt(le=>!le),we=le=>()=>{O(le!==""?[le]:[]),U(void 0),bt(!1)};(0,k.useEffect)(()=>{Qe&&O([Qe])},[]);const nt=[{value:"",name:"All",icon:k.createElement(oe.A,null)},...Ft],Lt=te[0]||"",{value:Wt}=(0,Rt.default)(async()=>{if(!rn)return{};const le=await Promise.all(nt.map($e=>$e.value).map(async $e=>{const{numberOfResults:xt}=await ge.query({term:M,types:$e?[$e]:[],filters:te.includes($e)||!te.length&&!$e?D:{},pageLimit:0});return[$e,xt!==void 0?`${xt>=1e4?">10000":xt} results`:" -- "]}));return Object.fromEntries(le)},[D,rn,M,te]);return k.createElement(De.A,{className:jt.card},k.createElement(Ie.A,{title:Mt,titleTypographyProps:{variant:"overline"}}),k.createElement(ie.A,{className:jt.cardContent},k.createElement(G.A,{className:jt.accordion,expanded:ze,onChange:Et},k.createElement(Ve.A,{classes:{root:jt.accordionSummary,content:jt.accordionSummaryContent},expandIcon:k.createElement(ee.A,{className:jt.icon}),IconButtonProps:{size:"small"}},ze?"Collapse":nt.filter(le=>le.value===Lt)[0].name),k.createElement(he.A,{classes:{root:jt.accordionDetails}},k.createElement(_e.A,{className:jt.list,component:"nav","aria-label":"filter by type",disablePadding:!0,dense:!0},nt.map(le=>k.createElement(k.Fragment,{key:le.value},k.createElement(re.A,null),k.createElement(Re.A,{selected:te[0]===le.value||te.length===0&&le.value==="",onClick:we(le.value),button:!0},k.createElement(I.A,null,(0,k.cloneElement)(le.icon,{className:jt.listItemIcon})),k.createElement(c.A,{primary:le.name,secondary:Wt&&Wt[le.value]})))))))))},lt=(0,a.A)(St=>({tabs:{borderBottom:`1px solid ${St.palette.textVerySubtle}`},tab:{height:"50px",fontWeight:St.typography.fontWeightBold,fontSize:St.typography.pxToRem(13),color:St.palette.text.primary,minWidth:"130px"}})),ft=St=>{const jt=lt(),{setPageCursor:D,setTypes:U,types:O}=(0,j.SQ)(),{defaultValue:M,types:te}=St,ge=(bt,Qe)=>{U(Qe!==""?[Qe]:[]),D(void 0)};(0,k.useEffect)(()=>{M&&U([M])},[]);const ze=[{value:"",name:"All"},...te];return k.createElement(R.A,{"aria-label":"List of search types tabs",className:jt.tabs,indicatorColor:"primary",value:O.length===0?"":O[0],onChange:ge},ze.map((bt,Qe)=>k.createElement(A.A,{key:Qe,className:jt.tab,label:bt.name,value:bt.value})))},$t=(0,a.A)(St=>({label:{textTransform:"capitalize"},chips:{display:"flex",flexWrap:"wrap",marginTop:St.spacing(1)},chip:{margin:2}})),an=St=>{const{className:jt,defaultValue:D,name:U,values:O=[]}=St,M=$t(),{types:te,setTypes:ge}=(0,j.SQ)();(0,v.A)(()=>{te.length||(D&&Array.isArray(D)?ge(D):D&&ge([D]))});const ze=bt=>{const Qe=bt.target.value;ge(Qe)};return k.createElement(_.A,{className:jt,variant:"filled",fullWidth:!0,"data-testid":"search-typefilter-next"},k.createElement(F.A,{className:M.label,margin:"dense"},U),k.createElement(Ae.A,{multiple:!0,variant:"outlined",value:te,onChange:ze,placeholder:"All Results",renderValue:bt=>k.createElement("div",{className:M.chips},bt.map(Qe=>k.createElement(fe.A,{key:Qe,label:Qe,className:M.chip,size:"small"})))},O.map(bt=>k.createElement(ve.A,{key:bt,value:bt},k.createElement(J.A,{checked:te.indexOf(bt)>-1}),k.createElement(c.A,{primary:bt})))))};an.Accordion=St=>k.createElement(Kt,{...St}),an.Tabs=St=>k.createElement(ft,{...St})},52820:($n,Zt,e)=>{"use strict";e.d(Zt,{M:()=>j,T:()=>Ie,a:()=>p});var o=e(7877),m=e(11638);const p=(0,o.c)({id:"plugin.techradar.service"});var j=(ie=>(ie[ie.Down=-1]="Down",ie[ie.NoChange=0]="NoChange",ie[ie.Up=1]="Up",ie))(j||{});const B=new Array;B.push({id:"adopt",name:"ADOPT",color:"#5BA300",description:"Commodi accusantium culpa sed itaque excepturi rem eum nulla possimus."}),B.push({id:"trial",name:"TRIAL",color:"#009EB0",description:"Recusandae possimus ipsum dolores."}),B.push({id:"assess",name:"ASSESS",color:"#C7BA00",description:"In asperiores repellat error recusandae et adipisci laborum porro."}),B.push({id:"hold",name:"HOLD",color:"#E09B96",description:"Esse mollitia in."});const i=new Array;i.push({id:"infrastructure",name:"Infrastructure"}),i.push({id:"frameworks",name:"Frameworks"}),i.push({id:"languages",name:"Languages"}),i.push({id:"process",name:"Process"});const k=new Array;k.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06"),description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua"}],key:"javascript",id:"javascript",title:"JavaScript",quadrant:"languages",links:[{url:"https://www.javascript.com/",title:"Learn more"},{url:"https://www.typescriptlang.org/",title:"TypeScript"}],description:'Excepteur **sint** occaecat *cupidatat* non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\n```ts\nconst x = "3";\n```\n'}),k.push({timeline:[{moved:-1,ringId:"adopt",date:new Date("2020-08-06"),description:"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat"}],key:"typescript",id:"typescript",title:"TypeScript",quadrant:"languages",description:"Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat"}),k.push({timeline:[{moved:1,ringId:"adopt",date:new Date("2020-08-06"),description:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur"}],links:[{url:"https://webpack.js.org/",title:"Learn more"}],key:"webpack",id:"webpack",title:"Webpack",quadrant:"frameworks"}),k.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],links:[{url:"https://reactjs.org/",title:"Learn more"}],key:"react",id:"react",title:"React",quadrant:"frameworks"}),k.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"code-reviews",id:"code-reviews",title:"Code Reviews",quadrant:"process"}),k.push({timeline:[{moved:0,ringId:"assess",date:new Date("2020-08-06")}],key:"mob-programming",id:"mob-programming",title:"Mob Programming",quadrant:"process"}),k.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"docs-like-code",id:"docs-like-code",title:"Docs-like-code",quadrant:"process"}),k.push({timeline:[{ringId:"hold",date:new Date("2020-08-06")}],key:"force-push",id:"force-push",title:"Force push to master",quadrant:"process"}),k.push({timeline:[{ringId:"adopt",date:new Date("2020-08-06"),description:"long description"},{ringId:"trial",date:new Date("2020-07-05"),description:"long description"}],links:[{url:"https://github.com",title:"Learn more"}],key:"github-actions",id:"github-actions",title:"GitHub Actions",quadrant:"infrastructure"});const Ze={entries:k,quadrants:i,rings:B};class Ke{async load(){return Ze}}const a=(0,m.HM)({id:"tech-radar"}),Ie=(0,m.i1)({id:"tech-radar",routes:{root:a},apis:[(0,m.bW)(p,new Ke)]}).provide((0,m.QJ)({name:"TechRadarPage",component:()=>e.e(2822).then(e.bind(e,42822)).then(function(ie){return ie.b}).then(ie=>ie.RadarPage),mountPoint:a}))},51330:($n,Zt,e)=>{"use strict";e.d(Zt,{Gr:()=>Mt});var o=e(7877),m=e(11638),p=e(20443),j=e(14041),B=e(93548),i=e(7031),k=e(64947),Ze=e(58837),Ke=e(41883),a=e(4321),De=e(33466),Ie=e(54917),ie=e(26343),G=e(5951),Ve=e(72501),he=e(77125),_e=e(29365),re=e(63798),Re=e(6924),I=e(52536),c=e.n(I),R=e(63188),A=e(33478),_=e(85005),F=e(23180),Ae=e(18466),fe=e(80113),ve=e(10527),J=e(60367);const v=".md-nav__item--nested .md-toggle",ee="@backstage/techdocs-addons/nav-expanded",oe=(0,i.A)({root:{position:"absolute",left:"220px",top:"19px",padding:0,minWidth:0}})(k.A),Rt=(0,i.A)({root:{height:"20px",width:"20px"}})(re.A),w=(0,i.A)({root:{height:"20px",width:"20px"}})(Re.A),sn=()=>{const Et={expandAllNestedNavs:!1},{value:we,set:nt}=(0,B.t)(ee,{defaultValue:Et}),[Lt,Wt]=(0,j.useState)(!1),[...le]=(0,p.$r)([v]),$e=(0,j.useCallback)(Yt=>{const se=Yt.checked,ke=we==null?void 0:we.expandAllNestedNavs;return!!(ke&&!se||!ke&&se)},[we]);(0,j.useEffect)(()=>{le!=null&&le.length&&(Wt(!0),le.forEach(Yt=>{$e(Yt)&&Yt.click()}))},[we,$e,le]);const xt=()=>{nt(Yt=>({expandAllNestedNavs:!(Yt!=null&&Yt.expandAllNestedNavs)}))};return j.createElement(j.Fragment,null,Lt?j.createElement(oe,{size:"small",onClick:xt,"aria-label":we!=null&&we.expandAllNestedNavs?"collapse-nav":"expand-nav"},we!=null&&we.expandAllNestedNavs?j.createElement(w,null):j.createElement(Rt,null)):null)},me="techdocs-report-issue",kt=`#${me}`,yt='[title^="Edit this page"]',mt='[title^="Leave feedback for"]',It='[data-md-component="main"] .md-content',Ne=(Et,we)=>we==="github"?(0,R.Fw)(Et,"blob"):we==="gitlab"?(0,R.B)(Et,"blob"):(console.error(`Invalid SCM type ${we} found in ReportIssue addon for URL ${Et}!`),Et),Ct=Et=>{const we=Et.toString().substring(0,70),nt=we.length===70?"...":"";return`Documentation feedback: ${we}${nt}`},ot=(Et,we,nt)=>{const Lt="## Documentation Feedback \u{1F4DD}",Wt="#### The highlighted text:",le="#### The comment on the text:",$e="_>replace this line with your comment<_",xt=Et.toString().trim().split(`
`).map(se=>`> ${se.trim()}`).join(`
`),Yt=[`${nt} URL: <${window.location.href}> 
Markdown URL: <${we}>`];return`${Lt}

 ${Wt} 

 ${xt}

 ${le} 
 ${$e}

 ___
${Yt}`},zt=Et=>{var we,nt;const Lt={title:"",body:""},Wt=(0,p.k0)(Et),[le]=(0,p.$r)([yt]),$e=(we=le==null?void 0:le.href)!=null?we:"",xt=(0,o.u)(A.YT),se=(0,o.u)(o.p).getOptionalString("app.title")||"Backstage";if(!Wt||!$e)return Lt;const ke=(nt=xt.byUrl($e))==null?void 0:nt.type;return ke?{title:Ct(Wt),body:ot(Wt,Ne($e,ke),se)}:Lt},Tt=()=>{var Et,we;const nt=(0,o.u)(A.YT),[Lt]=(0,p.$r)([yt]),Wt=(Et=Lt==null?void 0:Lt.href)!=null?Et:"";if(!Wt)return null;const le=(we=nt.byUrl(Wt))==null?void 0:we.type;return le?{...c()(Ne(Wt,le)),type:le}:null},Kt=(0,Ze.A)(Et=>({root:{display:"grid",gridGap:Et.spacing(1),gridAutoFlow:"column",justifyContent:"center",alignItems:"center",color:Et.palette.common.black,fontSize:Et.typography.button.fontSize}})),lt=({type:Et})=>Et==="github"?F.Hk:_.A,ft=({type:Et})=>Et==="github"?"Github":"Gitlab",$t=(Et,we)=>{const{title:nt,body:Lt}=we,Wt=encodeURIComponent(nt),le=encodeURIComponent(Lt),{protocol:$e,resource:xt,owner:Yt,name:se,type:ke}=Et,pe=`${$e}://${xt}/${Yt}/${se}`,Le=encodeURI(pe);return ke==="github"?`${Le}/issues/new?title=${Wt}&body=${le}`:`${Le}/issues/new?issue[title]=${Wt}&issue[description]=${le}`},an=({template:Et,repository:we})=>{const nt=Kt(),Lt=lt(we),Wt=$t(we,Et);return j.createElement(F.N_,{className:nt.root,to:Wt,target:"_blank"},j.createElement(Lt,null)," Open new ",ft(we)," issue")},St=(0,Ze.A)(Et=>({root:{transform:"translate(-100%, -100%)",position:"absolute",padding:Et.spacing(1),zIndex:Et.zIndex.tooltip,background:Et.palette.common.white}})),jt=({debounceTime:Et=500,templateBuilder:we})=>{const nt=St(),[Lt,Wt]=(0,j.useState)(),le=Tt(),$e=zt(Et),xt=(0,p.k0)(Et),[Yt,se]=(0,p.$r)([It,mt]);let[ke]=(0,p.$r)([kt]);return se&&(se.style.display="none"),(0,j.useEffect)(()=>{if(!le||!xt||!xt.containsNode(Yt,!0)||xt!=null&&xt.containsNode(ke,!0))return;const pe=Yt.getBoundingClientRect(),Le=xt.getRangeAt(0).getBoundingClientRect();Wt({top:`${Le.top-pe.top-16}px`,left:`${Le.left+Le.width/2}px`})},[xt,Yt,ke]),!xt||!le||!["github","gitlab"].includes(le.type)?null:(ke||(ke=document.createElement("div"),ke.setAttribute("id",me),Yt.prepend(ke)),j.createElement(Ke.A,{container:ke},j.createElement(a.A,{"data-testid":"report-issue-addon",className:nt.root,style:Lt},j.createElement(an,{repository:le,template:we?we({selection:xt}):$e}))))},D="0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",U=(0,i.A)(Et=>({root:{height:2,padding:"15px 0"},thumb:{height:18,width:18,backgroundColor:Et.palette.common.white,boxShadow:D,marginTop:-9,marginLeft:-9,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:D}}},active:{},valueLabel:{top:"100%",left:"50%",transform:"scale(1) translate(-50%, -5px) !important","& *":{color:Et.palette.common.black,fontSize:Et.typography.caption.fontSize,background:"transparent"}},track:{height:2},rail:{height:2,opacity:.5},mark:{height:10,width:1,marginTop:-4},markActive:{opacity:1,backgroundColor:"currentColor"}}))(De.A),O={key:"techdocs.addons.settings.textsize",defaultValue:100},M=[{value:90},{value:100},{value:115},{value:130},{value:150}],te=(0,Ze.A)(Et=>({container:{color:Et.palette.textSubtle,display:"flex",alignItems:"center",margin:0,minWidth:200},menuItem:{"&:hover":{background:"transparent"}},decreaseButton:{marginRight:Et.spacing(1)},increaseButton:{marginLeft:Et.spacing(1)}})),ge=()=>{const Et=te(),we=(0,Ie.A)(),[nt]=(0,p.$r)(["body"]),[Lt,Wt]=(0,j.useState)(()=>{const et=localStorage==null?void 0:localStorage.getItem(O.key);return et?parseInt(et,10):O.defaultValue}),le=(0,j.useMemo)(()=>M.map(et=>et.value),[]),$e=(0,j.useMemo)(()=>le.indexOf(Lt),[le,Lt]),xt=(0,j.useMemo)(()=>le[0],[le]),Yt=(0,j.useMemo)(()=>le[le.length-1],[le]),se=(0,j.useCallback)(()=>`${Lt}%`,[Lt]),ke=(0,j.useCallback)((et,pt)=>{Array.isArray(pt)||(Wt(pt),localStorage==null||localStorage.setItem(O.key,String(pt)))},[Wt]),pe=(0,j.useCallback)(et=>{ke(et,le[$e-1])},[$e,le,ke]),Le=(0,j.useCallback)(et=>{ke(et,le[$e+1])},[$e,le,ke]);return(0,j.useEffect)(()=>{var et,pt;if(!nt)return;const Bt=(pt=(et=we.typography)==null?void 0:et.htmlFontSize)!=null?pt:16;nt.style.setProperty("--md-typeset-font-size",`${Bt*(Lt/100)}px`)},[nt,Lt,we]),j.createElement(ie.A,{className:Et.menuItem,button:!0,disableRipple:!0},j.createElement(G.A,{primary:j.createElement(Ve.A,{variant:"subtitle2",color:"textPrimary"},"Text size"),secondary:j.createElement(he.A,{className:Et.container},j.createElement(_e.A,{className:Et.decreaseButton,size:"small",edge:"start",disabled:Lt===xt,onClick:pe,"aria-label":"Decrease text size"},j.createElement(fe.A,null)),j.createElement(U,{value:Lt,"aria-labelledby":"text-size-slider",getAriaValueText:se,valueLabelDisplay:"on",valueLabelFormat:se,marks:M,step:null,min:xt,max:Yt,onChangeCommitted:ke}),j.createElement(_e.A,{className:Et.increaseButton,size:"small",edge:"end",disabled:Lt===Yt,onClick:Le,"aria-label":"Increase text size"},j.createElement(Ae.A,null))),disableTypography:!0}))},ze=()=>{const Et=(0,p.$r)(["img"]);return(0,j.useEffect)(()=>{let we=null,nt=new ve.A({pswpModule:J.A,initialZoomLevel:1,secondaryZoomLevel:Lt=>{const Wt=Lt.elementSize.x,le=Lt.elementSize.y,$e=Lt.panAreaSize.x,xt=Lt.panAreaSize.y,Yt=$e/Wt,se=xt/le;return Math.min(Yt,se)},wheelToZoom:!0,arrowPrevSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowBackIosIcon" aria-label="fontSize large"><path d="M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"></path></svg>',arrowNextSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowForwardIosIcon" aria-label="fontSize large"><path d="M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"></path></svg>',closeSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CloseIcon" aria-label="fontSize large"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>',zoomSVG:`<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomIcon" aria-label="fontSize large">
          <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z" id="photoswipe-zoom-icon-zoomin-path"></path><path d="M12 10H 7 V 9 H 12 Z" id="photoswipe-zoom-icon-zoomout-path">
        </svg>`});return Et.forEach((Lt,Wt)=>{Lt.onclick=()=>(we===null&&(we=Et.map(le=>({element:le,src:le.src,msrc:le.src,alt:le.alt,width:le.clientWidth,height:le.clientHeight}))),nt.loadAndOpen(Wt,we),!1)}),nt.init(),()=>{nt.destroy(),nt=null}},[Et]),null},bt=(0,m.i1)({id:"techdocsModuleAddonsContrib"}),Qe=bt.provide((0,p.Hr)({name:"ExpandableNavigation",location:p.eK.PrimarySidebar,component:sn})),Mt=bt.provide((0,p.Hr)({name:"ReportIssue",location:p.eK.Content,component:jt})),rn=bt.provide((0,p.Hr)({name:"TextSize",location:p.eK.Settings,component:ge})),Ft=bt.provide((0,p.Hr)({name:"LightBox",location:p.eK.Content,component:ze}))},20443:($n,Zt,e)=>{"use strict";e.d(Zt,{$r:()=>yt,AF:()=>he,Hr:()=>Re,K$:()=>Rt,R7:()=>v,V1:()=>ee,Wm:()=>Ve,YR:()=>A,_$:()=>sn,eK:()=>oe,eh:()=>me,k0:()=>It,l9:()=>_,po:()=>_e,sm:()=>F});var o=e(14041),m=e(18690),p=e(11638),j=e(7877),B=e(91638),i=e(38282),k=e(29835),Ze=e(97388),Ke=e(9394),a=e(22856),De=e(91360),Ie=e(23180),ie=e(12784),G=e.n(ie);const Ve="techdocs.addons.addon.v1",he="techdocs.addons.wrapper.v1",_e=()=>null;(0,p.h3)(_e,he,!0);const re=Ne=>`${Ve}.${Ne.toLocaleLowerCase("en-US")}`;function Re(Ne){const{name:Ct,component:ot}=Ne;return(0,p.zZ)({name:Ct,component:{sync:zt=>o.createElement(ot,{...zt})},data:{[Ve]:Ne,[re(Ct)]:!0}})}const I=(Ne,Ct)=>Ne.selectByComponentData({key:Ct}).getElements()[0],c=Ne=>Ne.selectByComponentData({key:he}).selectByComponentData({key:Ve}),R=Ne=>Ne.selectByComponentData({key:he}).findComponentData({key:Ve}),A=()=>{const Ne=(0,m.P1)(),Ct=(0,p.OJ)(Ne,c),ot=(0,p.OJ)(Ne,R),zt=(0,o.useCallback)(lt=>{var ft;if(!Ct||!lt)return null;const $t=re(lt.name);return(ft=I(Ct,$t))!=null?ft:null},[Ct]),Tt=(0,o.useCallback)(lt=>{const ft=ot.find($t=>$t.name===lt);return ft?zt(ft):null},[ot,zt]),Kt=(0,o.useCallback)(lt=>{const ft=ot.filter($t=>$t.location===lt);return ft.length?ft.map(zt):null},[ot,zt]);return{renderComponentByName:Tt,renderComponentsByLocation:Kt}},_=(0,j.c)({id:"plugin.techdocs.service"}),F=(0,j.c)({id:"plugin.techdocs.storageservice"});function Ae(Ne,Ct){return Ct.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")||(Ne.kind=Ne.kind.toLocaleLowerCase(),Ne.name=Ne.name.toLocaleLowerCase(),Ne.namespace=Ne.namespace.toLocaleLowerCase()),Ne}const fe=(Ne,Ct)=>(0,k.U2)(Ne)===(0,k.U2)(Ct),ve={title:"",subtitle:"",setTitle:()=>{},setSubtitle:()=>{},setShadowRoot:()=>{},metadata:{loading:!0},entityMetadata:{loading:!0},entityRef:{kind:"",name:"",namespace:""}},J=(0,Ze.tK)("techdocs-reader-page-context"),v=(0,o.memo)(Ne=>{const{entityRef:Ct,children:ot}=Ne,zt=(0,j.u)(_),Tt=(0,j.u)(j.p),Kt=(0,B.default)(async()=>zt.getEntityMetadata(Ct),[Ct]),lt=(0,i.A)(async()=>zt.getTechDocsMetadata(Ct),[Ct]),[ft,$t]=(0,o.useState)(ve.title),[an,St]=(0,o.useState)(ve.subtitle),[jt,D]=(0,o.useState)(ve.shadowRoot);(0,o.useEffect)(()=>{jt&&!lt.value&&!lt.loading&&lt.retry()},[lt.value,lt.loading,jt,lt.retry,lt]);const U={metadata:lt,entityRef:Ae(Ct,Tt),entityMetadata:Kt,shadowRoot:jt,setShadowRoot:D,title:ft,setTitle:$t,subtitle:an,setSubtitle:St},O=(0,Ze.Bl)({1:U});return o.createElement(p.Ig,{attributes:{entityRef:(0,k.U2)(Ct)}},o.createElement(J.Provider,{value:O},ot instanceof Function?ot(U):ot))},(Ne,Ct)=>fe(Ne.entityRef,Ct.entityRef)),ee=()=>{const Ne=(0,o.useContext)(J);if(Ne===void 0)return ve;const Ct=Ne.atVersion(1);if(Ct===void 0)throw new Error("No context found for version 1.");return Ct},oe=Object.freeze({Header:"Header",Subheader:"Subheader",Settings:"Settings",PrimarySidebar:"PrimarySidebar",SecondarySidebar:"SecondarySidebar",Content:"Content"}),Rt="TECH_DOCS_SHADOW_DOM_STYLE_LOAD",w=Ne=>{(0,o.useEffect)(()=>{var Ct;if(!Ne)return()=>{};const ot=Ne.querySelectorAll('head > link[rel="stylesheet"]');let zt=(Ct=ot==null?void 0:ot.length)!=null?Ct:0;const Tt=new CustomEvent(Rt);if(!zt)return Ne.dispatchEvent(Tt),()=>{};const Kt=()=>{--zt===0&&Ne.dispatchEvent(Tt)};return ot==null||ot.forEach(lt=>{lt.addEventListener("load",Kt)}),()=>{ot==null||ot.forEach(lt=>{lt.removeEventListener("load",Kt)})}},[Ne])},sn=Ne=>{const[Ct,ot]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{if(!Ne)return()=>{};ot(!0);const zt=Ne.style;zt.setProperty("opacity","0");const Tt=()=>{ot(!1),zt.setProperty("opacity","1")};return Ne.addEventListener(Rt,Tt),()=>{Ne.removeEventListener(Rt,Tt)}},[Ne]),Ct},me=Ne=>{const{element:Ct,onAppend:ot,children:zt}=Ne,[Tt,Kt]=(0,o.useState)((0,Ke.vt)({...(0,a.A)(),insertionPoint:void 0}));w(Ct);const lt=sn(Ct),ft=(0,o.useCallback)($t=>{if(!Ct||!$t)return;Kt((0,Ke.vt)({...(0,a.A)(),insertionPoint:Ct.querySelector("head")||void 0}));let an=$t.shadowRoot;an||(an=$t.attachShadow({mode:"open"})),an.replaceChildren(Ct),typeof ot=="function"&&ot(an)},[Ct,ot]);return o.createElement(o.Fragment,null,lt&&o.createElement(Ie.ke,null),o.createElement(De.Ay,{jss:Tt,sheetsManager:new Map},o.createElement("div",{ref:ft,"data-testid":"techdocs-native-shadowroot"}),zt))},kt=()=>{const{shadowRoot:Ne}=ee();return Ne},yt=Ne=>{const Ct=kt();return Ct?Ne.map(ot=>Ct==null?void 0:Ct.querySelectorAll(ot)).filter(ot=>ot.length).map(ot=>Array.from(ot)).flat():[]},mt=Ne=>Ne.toString()&&Ne.rangeCount&&Ne.getRangeAt(0).getBoundingClientRect().top,It=(Ne=0)=>{const Ct=kt(),[ot,zt]=(0,o.useState)(null),Tt=(0,o.useMemo)(()=>G()(()=>{const Kt=Ct,lt=Kt.getSelection?Kt.getSelection():document.getSelection();lt&&mt(lt)?zt(lt):zt(null)},Ne),[Ct,zt,Ne]);return(0,o.useEffect)(()=>(window.document.addEventListener("selectionchange",Tt),()=>{Tt.cancel(),window.document.removeEventListener("selectionchange",Tt)}),[Tt]),ot}},41449:($n,Zt,e)=>{"use strict";e.d(Zt,{E:()=>Ve,a:()=>_e,c:()=>re,d:()=>Re,t:()=>ie});var o=e(14041),m=e(18690),p=e(29835),j=e(20443),B=e(87266),i=e(11638),k=e(7877),Ze=e(92805),Ke=e(98520),a=e(61413),De=e(58054),Ie=e(92651);const ie=(0,i.i1)({id:"techdocs",apis:[(0,i.bW)({api:j.sm,deps:{configApi:k.p,discoveryApi:k.q,identityApi:k.t,fetchApi:k.s},factory:({configApi:ve,discoveryApi:J,identityApi:v,fetchApi:ee})=>new B.a({configApi:ve,discoveryApi:J,identityApi:v,fetchApi:ee})}),(0,i.bW)({api:j.l9,deps:{configApi:k.p,discoveryApi:k.q,fetchApi:k.s},factory:({configApi:ve,discoveryApi:J,fetchApi:v})=>new B.T({configApi:ve,discoveryApi:J,fetchApi:v})})],routes:{root:B.r,docRoot:B.b,entityContent:B.c}}),G=ie.provide((0,i.QJ)({name:"TechdocsPage",component:()=>Promise.resolve().then(function(){return fe}).then(ve=>ve.Router),mountPoint:B.r})),Ve=ie.provide((0,i.QJ)({name:"EntityTechdocsContent",component:()=>Promise.resolve().then(function(){return fe}).then(ve=>ve.EmbeddedDocsRouter),mountPoint:B.c})),he=ie.provide((0,i.QJ)({name:"TechDocsCustomHome",component:()=>e.e(4777).then(e.bind(e,4777)).then(ve=>ve.TechDocsCustomHome),mountPoint:B.r})),_e=ie.provide((0,i.QJ)({name:"TechDocsIndexPage",component:()=>Promise.resolve().then(e.bind(e,61413)).then(function(ve){return ve.d}).then(ve=>ve.TechDocsIndexPage),mountPoint:B.r})),re=ie.provide((0,i.QJ)({name:"TechDocsReaderPage",component:()=>e.e(8969).then(e.bind(e,68969)).then(ve=>ve.TechDocsReaderPage),mountPoint:B.b})),Re=ie.provide((0,Ze.c)({name:"TechDocsSearchResultListItem",component:()=>Promise.resolve().then(e.bind(e,75018)).then(ve=>ve.TechDocsSearchResultListItem),predicate:ve=>ve.type==="techdocs"})),I="backstage.io/techdocs-entity",c=({entity:ve})=>{var J,v;let ee=(0,p.sM)(ve);if((J=ve.metadata.annotations)!=null&&J[I])try{ee=(0,p.KU)((v=ve.metadata.annotations)==null?void 0:v[I])}catch{}return o.createElement(re,{entityRef:ee},o.createElement(Ke.d,null),o.createElement(Ke.c,{withSearch:!1}))},R="backstage.io/techdocs-ref",A="backstage.io/techdocs-entity";var fe=Object.freeze({__proto__:null,isTechDocsAvailable:ve=>{var J,v,ee,oe;return Boolean((v=(J=ve==null?void 0:ve.metadata)==null?void 0:J.annotations)==null?void 0:v[R])||Boolean((oe=(ee=ve==null?void 0:ve.metadata)==null?void 0:ee.annotations)==null?void 0:oe[A])},Router:()=>o.createElement(m.BV,null,o.createElement(m.qh,{path:"/",element:o.createElement(a.c,null)}),o.createElement(m.qh,{path:"/:namespace/:kind/:name/*",element:o.createElement(Ke.f,null)})),EmbeddedDocsRouter:ve=>{var J,v;const{children:ee}=ve,{entity:oe}=(0,De.u)(),Rt=(0,m.Ye)([{path:"/*",element:o.createElement(c,{entity:oe}),children:[{path:"*",element:ee}]}]);return((J=oe.metadata.annotations)==null?void 0:J[R])||((v=oe.metadata.annotations)==null?void 0:v[A])?Rt:o.createElement(Ie.o9,{annotation:[R]})}})},61413:($n,Zt,e)=>{"use strict";e.r(Zt),e.d(Zt,{D:()=>A,E:()=>_,T:()=>F,a:()=>ve,b:()=>fe,c:()=>J,d:()=>v,t:()=>re});var o=e(14041),m=e(18690),p=e(23180),j=e(92651),B=e(58054),i=e(75757),k=e(11638),Ze=e(7877),Ke=e(51100),a=e(45250),De=e.n(a),Ie=e(29835),ie=e(87266),G=e(55290),Ve=e(80430),he=e(80109),_e=e(15303);function re(ee,oe){return oe.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")?ee:ee.toLocaleLowerCase("en-US")}const Re=(0,Ve.A)({root:{color:"#f3ba37"}})(he.A),I={createCopyDocsUrlAction(ee){return oe=>({icon:()=>o.createElement(G.A,{fontSize:"small"}),tooltip:"Click to copy documentation link to clipboard",onClick:()=>ee(`${window.location.origin}${oe.resolved.docsUrl}`)})},createStarEntityAction(ee,oe){return Rt=>{const w=Rt.entity,sn=ee(w);return{cellStyle:{paddingLeft:"1em"},icon:()=>sn?o.createElement(Re,null):o.createElement(_e.A,null),tooltip:sn?"Remove from favorites":"Add to favorites",onClick:()=>oe(w)}}}};function c(ee){return ee.metadata.title||ee.metadata.name}const R={createNameColumn(){return{title:"Document",field:"entity.metadata.name",highlight:!0,render:ee=>o.createElement(p.md,{value:o.createElement(p.N_,{to:ee.resolved.docsUrl},c(ee.entity)),subvalue:ee.entity.metadata.description})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:ee})=>o.createElement(j.iI,{entityRefs:ee.ownedByRelations,defaultKind:"group"})}},createKindColumn(){return{title:"Kind",field:"entity.kind"}},createTypeColumn(){return{title:"Type",field:"entity.spec.type"}}},A=ee=>{const{entities:oe,title:Rt,loading:w,columns:sn,actions:me,options:kt}=ee,[,yt]=(0,Ke.A)(),mt=(0,k.Sf)(ie.b),It=(0,Ze.u)(Ze.p);if(!oe)return null;const Ne=oe.map(Kt=>{var lt;const ft=(0,B.g)(Kt,Ie.vv);return{entity:Kt,resolved:{docsUrl:mt({namespace:re((lt=Kt.metadata.namespace)!=null?lt:"default",It),kind:re(Kt.kind,It),name:re(Kt.metadata.name,It)}),ownedByRelations:ft,ownedByRelationsTitle:ft.map($t=>(0,j.SE)($t,{defaultKind:"group"})).join(", ")}}}),Ct=[R.createNameColumn(),R.createOwnerColumn(),R.createKindColumn(),R.createTypeColumn()],ot=[I.createCopyDocsUrlAction(yt)],zt=20,Tt=Ne&&Ne.length>zt;return o.createElement(o.Fragment,null,w||Ne&&Ne.length>0?o.createElement(p.XI,{isLoading:w,options:{paging:Tt,pageSize:zt,search:!0,actionsColumnIndex:-1,...kt},data:Ne,columns:sn||Ct,actions:me||ot,title:Rt?`${Rt} (${Ne.length})`:`All (${Ne.length})`}):o.createElement(p.pp,{missing:"data",title:"No documents to show",description:"Create your own document. Check out our Getting Started Information",action:o.createElement(p.z9,{color:"primary",to:"https://backstage.io/docs/features/techdocs/getting-started",variant:"contained"},"DOCS")}))};A.columns=R,A.actions=I;const _=ee=>{var oe,Rt;const{columns:w,actions:sn,options:me}=ee,{loading:kt,error:yt,entities:mt,filters:It}=(0,j.nK)(),{isStarredEntity:Ne,toggleStarredEntity:Ct}=(0,j.IT)(),[,ot]=(0,Ke.A)(),zt=(0,a.capitalize)((Rt=(oe=It.user)==null?void 0:oe.value)!=null?Rt:"all"),Tt=[I.createCopyDocsUrlAction(ot),I.createStarEntityAction(Ne,Ct)];return yt?o.createElement(p.Bp,{severity:"error",title:"Could not load available documentation."},o.createElement(p.z7,{language:"text",text:yt.toString()})):o.createElement(A,{title:zt,entities:mt,loading:kt,actions:sn||Tt,columns:w,options:me})};_.columns=R,_.actions=I;const F=ee=>{var oe;const{children:Rt}=ee,sn=`Documentation available in ${(oe=(0,Ze.u)(Ze.p).getOptionalString("organization.name"))!=null?oe:"Backstage"}`;return o.createElement(p.dT,{title:"Documentation",subtitle:sn,themeId:"documentation"},Rt)};class Ae{getCatalogFilters(){return{"metadata.annotations.backstage.io/techdocs-ref":i.cr}}}const fe=()=>{const{updateFilters:ee}=(0,j.nK)();return(0,o.useEffect)(()=>{ee({techdocs:new Ae})},[ee]),null},ve=ee=>{const{initialFilter:oe="owned",columns:Rt,actions:w}=ee;return o.createElement(F,null,o.createElement(p.UC,null,o.createElement(p.dv,{title:""},o.createElement(p.Yl,null,"Discover documentation in your ecosystem.")),o.createElement(j.B9,null,o.createElement(j.GI,null,o.createElement(j.GI.Filters,null,o.createElement(fe,null),o.createElement(j.y2,{initialFilter:oe}),o.createElement(j.t3,null),o.createElement(j.mo,null)),o.createElement(j.GI.Content,null,o.createElement(_,{actions:w,columns:Rt}))))))},J=ee=>(0,m.P1)()||o.createElement(ve,{...ee});var v=Object.freeze({__proto__:null,TechDocsIndexPage:J})},98520:($n,Zt,e)=>{"use strict";e.d(Zt,{a:()=>qn,c:()=>vn,d:()=>_a,f:()=>Ea});var o=e(14041),m=e(18690),p=e(23180),j=e(20443),B=e(58837),i=e(99703),k=e(42899),Ze=e(72501),Ke=e(29365),a=e(64947),De=e(73845),Ie=e(78467),ie=e(268),G=e(54917),Ve=e(7031),he=e(71677),_e=e(10437),re=e(50868),Re=e(5893),I=e(41883),c=e(75173),R=e(77125),A=e(37757),_=e(13270),F=e(75018),Ae=e(74219),fe=e(4387),ve=e(32881),J=e(7877),v=e(11638),ee=e(91638),oe=e(38282),Rt=e(33478),w=e(71651),sn=e.n(w),me=e(63188),kt=e(90292),yt=e(52536),mt=e.n(yt),It=e(27326),Ne=e(51100),Ct=e(93285),ot=e(13660),zt=e(58054),Tt=e(92651),Kt=e(29835),lt=e(45250),ft=e.n(lt),$t=e(87266),an=e(9684);function St({contentLoading:Z,content:Ue,activeSyncState:tt}){return Z||tt==="BUILD_READY_RELOAD"||!Ue&&tt==="CHECKING"?"CHECKING":!Ue&&tt==="BUILDING"?"INITIAL_BUILD":Ue?tt==="BUILDING"?"CONTENT_STALE_REFRESHING":tt==="BUILD_READY"?"CONTENT_STALE_READY":tt==="ERROR"?"CONTENT_STALE_ERROR":"CONTENT_FRESH":"CONTENT_NOT_FOUND"}function jt(Z,Ue){const tt={...Z};switch(Ue.type){case"sync":Ue.state==="CHECKING"&&(tt.buildLog=[]),tt.activeSyncState=Ue.state,tt.syncError=Ue.syncError;break;case"contentLoading":tt.contentLoading=!0,tt.contentError=void 0;break;case"content":typeof Ue.path=="string"&&(tt.path=Ue.path),tt.contentLoading=!1,tt.content=Ue.content,tt.contentError=Ue.contentError;break;case"buildLog":tt.buildLog=tt.buildLog.concat(Ue.log);break;default:throw new Error}return["BUILD_READY","BUILD_READY_RELOAD"].includes(tt.activeSyncState)&&["contentLoading","content"].includes(Ue.type)&&(tt.activeSyncState="UP_TO_DATE",tt.buildLog=[]),tt}function D(Z,Ue,tt,ht){var Se,Y;const[Ee,ue]=(0,o.useReducer)(jt,{activeSyncState:"CHECKING",path:ht,contentLoading:!0,buildLog:[]}),at=(0,J.u)(j.sm),{retry:N}=(0,oe.A)(async()=>{ue({type:"contentLoading"});try{const ae=await at.getEntityDocs({kind:Z,namespace:Ue,name:tt},ht);return ue({type:"content",content:ae,path:ht}),ae}catch(ae){ue({type:"content",contentError:ae,path:ht})}},[at,Z,Ue,tt,ht]),H=(0,o.useRef)({content:void 0,reload:()=>{}});return H.current={content:Ee.content,reload:N},(0,ee.default)(async()=>{ue({type:"sync",state:"CHECKING"});const ae=setTimeout(()=>{ue({type:"sync",state:"BUILDING"})},1e3);try{switch(await at.syncEntityDocs({kind:Z,namespace:Ue,name:tt},Je=>{ue({type:"buildLog",log:Je})})){case"updated":H.current.content?ue({type:"sync",state:"BUILD_READY"}):(H.current.reload(),ue({type:"sync",state:"BUILD_READY_RELOAD"}));break;case"cached":ue({type:"sync",state:"UP_TO_DATE"});break;default:ue({type:"sync",state:"ERROR",syncError:new Error("Unexpected return state")});break}}catch(We){ue({type:"sync",state:"ERROR",syncError:We})}finally{clearTimeout(ae)}},[Z,tt,Ue,at,ue,H]),{state:(0,o.useMemo)(()=>St({activeSyncState:Ee.activeSyncState,contentLoading:Ee.contentLoading,content:Ee.content}),[Ee.activeSyncState,Ee.content,Ee.contentLoading]),contentReload:N,path:Ee.path,content:Ee.content,contentErrorMessage:(Se=Ee.contentError)==null?void 0:Se.toString(),syncErrorMessage:(Y=Ee.syncError)==null?void 0:Y.toString(),buildLog:Ee.buildLog}}const U=(0,o.createContext)({}),O=()=>(0,o.useContext)(U),M=Z=>{const{children:Ue}=Z,{"*":tt=""}=(0,m.g)(),{entityRef:ht}=(0,j.V1)(),{kind:Se,namespace:Y,name:Ee}=ht,ue=D(Se,Y,Ee,tt);return o.createElement(U.Provider,{value:ue},Ue instanceof Function?Ue(ue):Ue)},te=Z=>Ue=>o.createElement(M,null,o.createElement(Z,{...Ue})),ge=Z=>Z==null?void 0:Z.document,ze=Z=>{const{entityId:Ue,entityTitle:tt,debounceTime:ht=150}=Z,[Se,Y]=(0,o.useState)(!1),Ee=(0,m.Zp)(),{setFilters:ue,result:{loading:at,value:N}}=(0,_.SQ)(),[H,q]=(0,o.useState)([]);(0,o.useEffect)(()=>{let gt=!0;if(gt&&N){const Pt=N.results.slice(0,10);q(Pt)}return()=>{gt=!1}},[at,N]);const{kind:ae,name:We,namespace:Je}=Ue;(0,o.useEffect)(()=>{ue(gt=>({...gt,kind:ae,namespace:Je,name:We}))},[ae,Je,We,ue]);const Fe=(gt,Pt)=>{if(ge(Pt)){const{location:dn}=Pt.document;Ee(dn)}};return o.createElement(_.pY,{"data-testid":"techdocs-search-bar",size:"small",open:Se,getOptionLabel:()=>"",filterOptions:gt=>gt,onClose:()=>{Y(!1)},onFocus:()=>{Y(!0)},onChange:Fe,blurOnSelect:!0,noOptionsText:"No results found",value:null,options:H,renderOption:({document:gt,highlight:Pt})=>o.createElement(F.TechDocsSearchResultListItem,{result:gt,lineClamp:3,asListItem:!1,asLink:!1,title:gt.title,highlight:Pt}),loading:at,inputDebounceTime:ht,inputPlaceholder:`Search ${tt||Ue.name} docs`,freeSolo:!1})},bt=Z=>{const Ue={term:"",types:["techdocs"],pageCursor:"",filters:Z.entityId};return o.createElement(_.Lt,{initialState:Ue},o.createElement(ze,{...Z}))},Qe=(0,B.A)(Z=>(0,i.A)({paper:{width:"100%",[Z.breakpoints.up("sm")]:{width:"75%"},[Z.breakpoints.up("md")]:{width:"50%"},padding:Z.spacing(2.5)},root:{height:"100%",overflow:"hidden"},logs:{background:Z.palette.background.default}})),Mt=({buildLog:Z,onClose:Ue})=>{const tt=Qe(),ht=Z.length===0?"Waiting for logs...":Z.join(`
`);return o.createElement(k.A,{container:!0,direction:"column",className:tt.root,spacing:0,wrap:"nowrap"},o.createElement(k.A,{item:!0,container:!0,justifyContent:"space-between",alignItems:"center",spacing:0,wrap:"nowrap"},o.createElement(Ze.A,{variant:"h5"},"Build Details"),o.createElement(Ke.A,{key:"dismiss",title:"Close the drawer",onClick:Ue,color:"inherit"},o.createElement(ve.A,null))),o.createElement(k.A,{item:!0,xs:!0},o.createElement(p.rW,{text:ht,classes:{root:tt.logs}})))},rn=({buildLog:Z})=>{const Ue=Qe(),[tt,ht]=(0,o.useState)(!1);return o.createElement(o.Fragment,null,o.createElement(a.A,{color:"inherit",onClick:()=>ht(!0)},"Show Build Logs"),o.createElement(De.Ay,{classes:{paper:Ue.paper},anchor:"right",open:tt,onClose:()=>ht(!1)},o.createElement(Mt,{buildLog:Z,onClose:()=>ht(!1)})))},Ft=({errorMessage:Z})=>{const Ue=(0,J.u)(J.p).getOptionalString("techdocs.builder"),tt=(0,v.st)(),{entityRef:ht}=(0,j.V1)(),Se=(0,m.zy)();(0,o.useEffect)(()=>{const{pathname:Ee,search:ue,hash:at}=Se;tt.captureEvent("not-found",`${Ee}${ue}${at}`,{attributes:ht})},[tt,ht,Se]);let Y="";return Ue!=="local"&&(Y="Note that techdocs.builder is not set to 'local' in your config, which means this Backstage app will not generate docs if they are not found. Make sure the project's docs are generated and published by some external process (e.g. CI/CD pipeline). Or change techdocs.builder to 'local' to generate docs from this Backstage instance."),o.createElement(p.M,{status:"404",statusMessage:Z||"Documentation not found",additionalInfo:Y})},Et=(0,B.A)(Z=>({root:{marginBottom:Z.spacing(2)},message:{wordBreak:"break-word",overflowWrap:"anywhere"}})),we=()=>{let Z=null;const Ue=Et(),{state:tt,contentReload:ht,contentErrorMessage:Se,syncErrorMessage:Y,buildLog:Ee}=O();return tt==="INITIAL_BUILD"&&(Z=o.createElement(Ae.A,{classes:{root:Ue.root},variant:"outlined",severity:"info",icon:o.createElement(Ie.A,{size:"24px"}),action:o.createElement(rn,{buildLog:Ee})},"Documentation is accessed for the first time and is being prepared. The subsequent loads are much faster.")),tt==="CONTENT_STALE_REFRESHING"&&(Z=o.createElement(Ae.A,{variant:"outlined",severity:"info",icon:o.createElement(Ie.A,{size:"24px"}),action:o.createElement(rn,{buildLog:Ee}),classes:{root:Ue.root}},"A newer version of this documentation is being prepared and will be available shortly.")),tt==="CONTENT_STALE_READY"&&(Z=o.createElement(Ae.A,{variant:"outlined",severity:"success",action:o.createElement(a.A,{color:"inherit",onClick:()=>ht()},"Refresh"),classes:{root:Ue.root}},"A newer version of this documentation is now available, please refresh to view.")),tt==="CONTENT_STALE_ERROR"&&(Z=o.createElement(Ae.A,{variant:"outlined",severity:"error",action:o.createElement(rn,{buildLog:Ee}),classes:{root:Ue.root,message:Ue.message}},"Building a newer version of this documentation failed."," ",Y)),tt==="CONTENT_NOT_FOUND"&&(Z=o.createElement(o.Fragment,null,Y&&o.createElement(Ae.A,{variant:"outlined",severity:"error",action:o.createElement(rn,{buildLog:Ee}),classes:{root:Ue.root,message:Ue.message}},"Building a newer version of this documentation failed."," ",Y),o.createElement(Ft,{errorMessage:Se}))),Z},nt=/main\.[A-Fa-f0-9]{8}\.min\.css$/,Lt=/^https:\/\/fonts\.googleapis\.com/,Wt=/^https:\/\/fonts\.gstatic\.com/,le=Z=>Z.nodeName==="LINK",$e=Z=>{const Ue=(Z==null?void 0:Z.getAttribute("href"))||"",tt=Ue.match(nt),ht=Ue.match(Lt),Se=Ue.match(Wt);return tt||ht||Se},xt=Z=>(le(Z)&&!$e(Z)&&Z.remove(),Z),Yt=Z=>Z.nodeName==="IFRAME",se=(Z,Ue)=>{const tt=Z.getAttribute("src")||"";try{const{host:ht}=new URL(tt);return Ue.includes(ht)}catch{return!1}},ke=Z=>Ue=>(Yt(Ue)&&!se(Ue,Z)&&Ue.remove(),Ue),pe=()=>{const Z=(0,J.u)(J.p);return(0,o.useMemo)(()=>Z.getOptionalConfig("techdocs.sanitizer"),[Z])},Le=()=>{const Z=pe();return(0,o.useCallback)(async Ue=>{const tt=Z==null?void 0:Z.getOptionalStringArray("allowedIframeHosts");sn().addHook("beforeSanitizeElements",xt);const ht=["link"];return tt&&(ht.push("iframe"),sn().addHook("beforeSanitizeElements",ke(tt))),sn().sanitize(Ue.outerHTML,{ADD_TAGS:ht,FORBID_TAGS:["style"],WHOLE_DOCUMENT:!0,RETURN_DOM:!0})},[Z])};var et=({theme:Z})=>`
/*==================  Variables  ==================*/
/*
  As the MkDocs output is rendered in shadow DOM, the CSS variable definitions on the root selector are not applied. Instead, they have to be applied on :host.
  As there is no way to transform the served main*.css yet (for example in the backend), we have to copy from main*.css and modify them.
*/

:host {
  /* FONT */
  --md-default-fg-color: ${Z.palette.text.primary};
  --md-default-fg-color--light: ${Z.palette.text.secondary};
  --md-default-fg-color--lighter: ${(0,ie.a)(Z.palette.text.secondary,.7)};
  --md-default-fg-color--lightest: ${(0,ie.a)(Z.palette.text.secondary,.3)};

  /* BACKGROUND */
  --md-default-bg-color:${Z.palette.background.default};
  --md-default-bg-color--light: ${Z.palette.background.paper};
  --md-default-bg-color--lighter: ${(0,ie.a)(Z.palette.background.paper,.7)};
  --md-default-bg-color--lightest: ${(0,ie.a)(Z.palette.background.paper,.3)};

  /* PRIMARY */
  --md-primary-fg-color: ${Z.palette.primary.main};
  --md-primary-fg-color--light: ${Z.palette.primary.light};
  --md-primary-fg-color--dark: ${Z.palette.primary.dark};
  --md-primary-bg-color: ${Z.palette.primary.contrastText};
  --md-primary-bg-color--light: ${(0,ie.a)(Z.palette.primary.contrastText,.7)};

  /* ACCENT */
  --md-accent-fg-color: var(--md-primary-fg-color);

  /* SHADOW */
  --md-shadow-z1: ${Z.shadows[1]};
  --md-shadow-z2: ${Z.shadows[2]};
  --md-shadow-z3: ${Z.shadows[3]};

  /* EXTENSIONS */
  --md-admonition-fg-color: var(--md-default-fg-color);
  --md-admonition-bg-color: var(--md-default-bg-color);
  /* Admonitions and others are using SVG masks to define icons. These masks are defined as CSS variables. */
  --md-admonition-icon--note: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>');
  --md-admonition-icon--abstract: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 5h16v2H4V5m0 4h16v2H4V9m0 4h16v2H4v-2m0 4h10v2H4v-2z"/></svg>');
  --md-admonition-icon--info: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z"/></svg>');
  --md-admonition-icon--tip: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.55 11.2c-.23-.3-.5-.56-.76-.82-.65-.6-1.4-1.03-2.03-1.66C13.3 7.26 13 4.85 13.91 3c-.91.23-1.75.75-2.45 1.32-2.54 2.08-3.54 5.75-2.34 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.22.1-.46.04-.64-.12a.83.83 0 01-.15-.17c-1.1-1.43-1.28-3.48-.53-5.12C5.89 10 5 12.3 5.14 14.47c.04.5.1 1 .27 1.5.14.6.4 1.2.72 1.73 1.04 1.73 2.87 2.97 4.84 3.22 2.1.27 4.35-.12 5.96-1.6 1.8-1.66 2.45-4.32 1.5-6.6l-.13-.26c-.2-.46-.47-.87-.8-1.25l.05-.01m-3.1 6.3c-.28.24-.73.5-1.08.6-1.1.4-2.2-.16-2.87-.82 1.19-.28 1.89-1.16 2.09-2.05.17-.8-.14-1.46-.27-2.23-.12-.74-.1-1.37.18-2.06.17.38.37.76.6 1.06.76 1 1.95 1.44 2.2 2.8.04.14.06.28.06.43.03.82-.32 1.72-.92 2.27h.01z"/></svg>');
  --md-admonition-icon--success: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-admonition-icon--question: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.07 11.25l-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 00-2-2 2 2 0 00-2 2H8a4 4 0 014-4 4 4 0 014 4 3.2 3.2 0 01-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10c0-5.53-4.5-10-10-10z"/></svg>');
  --md-admonition-icon--warning: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14h-2v-4h2m0 8h-2v-2h2M1 21h22L12 2 1 21z"/></svg>');
  --md-admonition-icon--failure: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41 15.59 7z"/></svg>');
  --md-admonition-icon--danger: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.5 20l4.86-9.73H13V4l-5 9.73h3.5V20M12 2c2.75 0 5.1 1 7.05 2.95C21 6.9 22 9.25 22 12s-1 5.1-2.95 7.05C17.1 21 14.75 22 12 22s-5.1-1-7.05-2.95C3 17.1 2 14.75 2 12s1-5.1 2.95-7.05C6.9 3 9.25 2 12 2z"/></svg>');
  --md-admonition-icon--bug: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 12h-4v-2h4m0 6h-4v-2h4m6-6h-2.81a5.985 5.985 0 00-1.82-1.96L17 4.41 15.59 3l-2.17 2.17a6.002 6.002 0 00-2.83 0L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8z"/></svg>');
  --md-admonition-icon--example: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 01.75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25z"/></svg>');
  --md-admonition-icon--quote: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4z"/></svg>');
  --md-footnotes-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.42L5.83 13H21V7h-2z"/></svg>');
  --md-details-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-tasklist-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg>');
  --md-tasklist-icon--checked: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-nav-icon--prev: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>');
  --md-nav-icon--next: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-toc-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>');
  --md-clipboard-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1z"/></svg>');
  --md-search-result-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h7c-.41-.25-.8-.56-1.14-.9-.33-.33-.61-.7-.86-1.1H6V4h7v5h5v1.18c.71.16 1.39.43 2 .82V8l-6-6m6.31 16.9c1.33-2.11.69-4.9-1.4-6.22-2.11-1.33-4.91-.68-6.22 1.4-1.34 2.11-.69 4.89 1.4 6.22 1.46.93 3.32.93 4.79.02L22 23.39 23.39 22l-3.08-3.1m-3.81.1a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5z"/></svg>');
  --md-source-forks-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 3.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm0 2.122a2.25 2.25 0 1 0-1.5 0v.878A2.25 2.25 0 0 0 5.75 8.5h1.5v2.128a2.251 2.251 0 1 0 1.5 0V8.5h1.5a2.25 2.25 0 0 0 2.25-2.25v-.878a2.25 2.25 0 1 0-1.5 0v.878a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 5 6.25v-.878zm3.75 7.378a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm3-8.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5z"/></svg>');
  --md-source-repositories-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 1 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 0 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 0 1 1-1h8zM5 12.25v3.25a.25.25 0 0 0 .4.2l1.45-1.087a.25.25 0 0 1 .3 0L8.6 15.7a.25.25 0 0 0 .4-.2v-3.25a.25.25 0 0 0-.25-.25h-3.5a.25.25 0 0 0-.25.25z"/></svg>');
  --md-source-stars-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694v.001z"/></svg>');
  --md-source-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/></svg>');
  --md-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="m310.6 246.6-127.1 128c-7.1 6.3-15.3 9.4-23.5 9.4s-16.38-3.125-22.63-9.375l-127.1-128C.224 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75s3.12 25.75-6.08 34.85z"/></svg>');
}

:host > * {
  /* CODE */
  --md-code-fg-color: ${Z.palette.text.primary};
  --md-code-bg-color: ${Z.palette.background.paper};
  --md-code-hl-color: ${(0,ie.X4)(Z.palette.warning.main,.5)};
  --md-code-hl-keyword-color: ${Z.palette.type==="dark"?Z.palette.primary.light:Z.palette.primary.dark};
  --md-code-hl-function-color: ${Z.palette.type==="dark"?Z.palette.secondary.light:Z.palette.secondary.dark};
  --md-code-hl-string-color: ${Z.palette.type==="dark"?Z.palette.success.light:Z.palette.success.dark};
  --md-code-hl-number-color: ${Z.palette.type==="dark"?Z.palette.error.light:Z.palette.error.dark};
  --md-code-hl-constant-color: var(--md-code-hl-function-color);
  --md-code-hl-special-color: var(--md-code-hl-function-color);
  --md-code-hl-name-color: var(--md-code-fg-color);
  --md-code-hl-comment-color: var(--md-default-fg-color--light);
  --md-code-hl-generic-color: var(--md-default-fg-color--light);
  --md-code-hl-variable-color: var(--md-default-fg-color--light);
  --md-code-hl-operator-color: var(--md-default-fg-color--light);
  --md-code-hl-punctuation-color: var(--md-default-fg-color--light);

  /* TYPESET */
  --md-typeset-font-size: 1rem;
  --md-typeset-color: var(--md-default-fg-color);
  --md-typeset-a-color: ${Z.palette.link};
  --md-typeset-table-color: ${Z.palette.text.primary};
  --md-typeset-del-color: ${Z.palette.type==="dark"?(0,ie.X4)(Z.palette.error.dark,.5):(0,ie.X4)(Z.palette.error.light,.5)};
  --md-typeset-ins-color: ${Z.palette.type==="dark"?(0,ie.X4)(Z.palette.success.dark,.5):(0,ie.X4)(Z.palette.success.light,.5)};
  --md-typeset-mark-color: ${Z.palette.type==="dark"?(0,ie.X4)(Z.palette.warning.dark,.5):(0,ie.X4)(Z.palette.warning.light,.5)};
}

@media screen and (max-width: 76.1875em) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .9rem;
  }
}

@media screen and (max-width: 600px) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .7rem;
  }
}
`,pt=({theme:Z})=>`
/*==================  Reset  ==================*/

body {
  --md-text-color: var(--md-default-fg-color);
  --md-text-link-color: var(--md-accent-fg-color);
  --md-text-font-family: ${Z.typography.fontFamily};
  font-family: var(--md-text-font-family);
  background-color: unset;
}
`;const Bt="224px";var en=({theme:Z,sidebar:Ue})=>`
/*==================  Layout  ==================*/

/* mkdocs material v9 compat */
.md-nav__title {
  color: var(--md-default-fg-color);
}

.md-grid {
  max-width: 100%;
  margin: 0;
}

.md-nav {
  font-size: calc(var(--md-typeset-font-size) * 0.9);
}
.md-nav__link {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.md-nav__icon {
  height: 20px !important;
  width: 20px !important;
  margin-left:${Z.spacing(1)}px;
}
.md-nav__icon svg {
  margin: 0;
  width: 20px !important;
  height: 20px !important;
}
.md-nav__icon:after {
  width: 20px !important;
  height: 20px !important;
}

.md-nav__item--active > .md-nav__link, a.md-nav__link--active {
  text-decoration: underline;
  color: var(--md-typeset-a-color);
}

.md-main__inner {
  margin-top: 0;
}

.md-sidebar {
  bottom: 75px;
  position: fixed;
  width: 16rem;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-color: rgb(193, 193, 193) #eee;
  scrollbar-width: thin;
}
.md-sidebar .md-sidebar__scrollwrap {
  width: calc(12.1rem);
}
.md-sidebar--secondary {
  right: ${Z.spacing(3)}px;
}
.md-sidebar::-webkit-scrollbar {
  width: 5px;
}
.md-sidebar::-webkit-scrollbar-button {
  width: 5px;
  height: 5px;
}
.md-sidebar::-webkit-scrollbar-track {
  background: #eee;
  border: 1 px solid rgb(250, 250, 250);
  box-shadow: 0px 0px 3px #dfdfdf inset;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb {
  width: 5px;
  background: rgb(193, 193, 193);
  border: transparent;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb:hover {
  background: rgb(125, 125, 125);
}

.md-content {
  max-width: calc(100% - 16rem * 2);
  margin-left: 16rem;
  margin-bottom: 50px;
}

.md-footer {
  position: fixed;
  bottom: 0px;
  pointer-events: none;
}

.md-footer-nav__link, .md-footer__link {
  pointer-events: all;
}

.md-footer__title {
  background-color: unset;
}
.md-footer-nav__link, .md-footer__link {
  width: 16rem;
}

.md-dialog {
  background-color: unset;
}

@media screen and (min-width: 76.25em) {
  .md-sidebar {
    height: auto;
  }
}

@media screen and (max-width: 76.1875em) {
  .md-nav {
    transition: none !important;
    background-color: var(--md-default-bg-color)
  }
  .md-nav--primary .md-nav__title {
    cursor: auto;
    color: var(--md-default-fg-color);
    font-weight: 700;
    white-space: normal;
    line-height: 1rem;
    height: auto;
    display: flex;
    flex-flow: column;
    row-gap: 1.6rem;
    padding: 1.2rem .8rem .8rem;
    background-color: var(--md-default-bg-color);
  }
  .md-nav--primary .md-nav__title~.md-nav__list {
    box-shadow: none;
  }
  .md-nav--primary .md-nav__title ~ .md-nav__list > :first-child {
    border-top: none;
  }
  .md-nav--primary .md-nav__title .md-nav__button {
    display: none;
  }
  .md-nav--primary .md-nav__title .md-nav__icon {
    color: var(--md-default-fg-color);
    position: static;
    height: auto;
    margin: 0 0 0 -0.2rem;
  }
  .md-nav--primary > .md-nav__title [for="none"] {
    padding-top: 0;
  }
  .md-nav--primary .md-nav__item {
    border-top: none;
  }
  .md-nav--primary :is(.md-nav__title,.md-nav__item) {
    font-size : var(--md-typeset-font-size);
  }
  .md-nav .md-source {
    display: none;
  }

  .md-sidebar {
    height: 100%;
  }
  .md-sidebar--primary {
    width: 12.1rem !important;
    z-index: 200;
    left: ${Ue.isPinned?`calc(-12.1rem + ${Bt})`:"calc(-12.1rem + 72px)"} !important;
  }
  .md-sidebar--secondary:not([hidden]) {
    display: none;
  }

  .md-content {
    max-width: 100%;
    margin-left: 0;
  }

  .md-header__button {
    margin: 0.4rem 0;
    margin-left: 0.4rem;
    padding: 0;
  }

  .md-overlay {
    left: 0;
  }

  .md-footer {
    position: static;
    padding-left: 0;
  }
  .md-footer-nav__link {
    /* footer links begin to overlap at small sizes without setting width */
    width: 50%;
  }
}

@media screen and (max-width: 600px) {
  .md-sidebar--primary {
    left: -12.1rem !important;
    width: 12.1rem;
  }
}


@media print {
  .md-sidebar,
  #toggle-sidebar {
    display: none;
  }
  
  .md-content {
    margin: 0;
    width: 100%;
    max-width: 100%;
  }
}
`;const Ce=["h1","h2","h3","h4","h5","h6"];var Be=({theme:Z})=>`
/*==================  Typeset  ==================*/

.md-typeset {
  font-size: var(--md-typeset-font-size);
}

${Ce.reduce((Ue,tt)=>{var ht;const Se=(ht=Z.typography.htmlFontSize)!=null?ht:16,Y=Z.typography[tt],{lineHeight:Ee,fontFamily:ue,fontWeight:at,fontSize:N}=Y,H=q=>{let ae=1;return typeof q=="number"&&(ae=q/Se*.6),typeof q=="string"&&(ae=q.replace("rem","")),`calc(${ae} * var(--md-typeset-font-size))`};return Ue.concat(`
    .md-typeset ${tt} {
      color: var(--md-default-fg-color);
      line-height: ${Ee};
      font-family: ${ue};
      font-weight: ${at};
      font-size: ${H(N)};
    }
  `)},"")}

.md-typeset .md-content__button {
  color: var(--md-default-fg-color);
}

.md-typeset hr {
  border-bottom: 0.05rem dotted ${Z.palette.divider};
}

.md-typeset details {
  font-size: var(--md-typeset-font-size) !important;
}
.md-typeset details summary {
  padding-left: 2.5rem !important;
}
.md-typeset details summary:before,
.md-typeset details summary:after {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: rotate(0deg) translateY(-50%) !important;
}
.md-typeset details[open] > summary:after {
  transform: rotate(90deg) translateX(-50%) !important;
}

.md-typeset blockquote {
  color: var(--md-default-fg-color--light);
  border-left: 0.2rem solid var(--md-default-fg-color--light);
}

.md-typeset table:not([class]) {
  font-size: var(--md-typeset-font-size);
  border: 1px solid var(--md-default-fg-color);
  border-bottom: none;
  border-collapse: collapse;
}
.md-typeset table:not([class]) th {
  font-weight: bold;
}
.md-typeset table:not([class]) td, .md-typeset table:not([class]) th {
  border-bottom: 1px solid var(--md-default-fg-color);
}

.md-typeset pre > code::-webkit-scrollbar-thumb {
  background-color: hsla(0, 0%, 0%, 0.32);
}
.md-typeset pre > code::-webkit-scrollbar-thumb:hover {
  background-color: hsla(0, 0%, 0%, 0.87);
}
`,C=()=>`
/*==================  Animations  ==================*/
/*
  Disable CSS animations on link colors as they lead to issues in dark mode.
  The dark mode color theme is applied later and theirfore there is always an animation from light to dark mode when navigation between pages.
*/
.md-dialog, .md-nav__link, .md-footer__link, .md-typeset a, .md-typeset a::before, .md-typeset .headerlink {
  transition: none;
}
`,W=({theme:Z})=>`
/*==================  Extensions  ==================*/

/* HIGHLIGHT */
.highlight .md-clipboard:after {
  content: unset;
}

.highlight .nx {
  color: ${Z.palette.type==="dark"?"#ff53a3":"#ec407a"};
}

/* CODE HILITE */
.codehilite .gd {
  background-color: ${Z.palette.type==="dark"?"rgba(248,81,73,0.65)":"#fdd"};
}

.codehilite .gi {
  background-color: ${Z.palette.type==="dark"?"rgba(46,160,67,0.65)":"#dfd"};
}

/* TABBED */
.tabbed-set>input:nth-child(1):checked~.tabbed-labels>:nth-child(1),
.tabbed-set>input:nth-child(2):checked~.tabbed-labels>:nth-child(2),
.tabbed-set>input:nth-child(3):checked~.tabbed-labels>:nth-child(3),
.tabbed-set>input:nth-child(4):checked~.tabbed-labels>:nth-child(4),
.tabbed-set>input:nth-child(5):checked~.tabbed-labels>:nth-child(5),
.tabbed-set>input:nth-child(6):checked~.tabbed-labels>:nth-child(6),
.tabbed-set>input:nth-child(7):checked~.tabbed-labels>:nth-child(7),
.tabbed-set>input:nth-child(8):checked~.tabbed-labels>:nth-child(8),
.tabbed-set>input:nth-child(9):checked~.tabbed-labels>:nth-child(9),
.tabbed-set>input:nth-child(10):checked~.tabbed-labels>:nth-child(10),
.tabbed-set>input:nth-child(11):checked~.tabbed-labels>:nth-child(11),
.tabbed-set>input:nth-child(12):checked~.tabbed-labels>:nth-child(12),
.tabbed-set>input:nth-child(13):checked~.tabbed-labels>:nth-child(13),
.tabbed-set>input:nth-child(14):checked~.tabbed-labels>:nth-child(14),
.tabbed-set>input:nth-child(15):checked~.tabbed-labels>:nth-child(15),
.tabbed-set>input:nth-child(16):checked~.tabbed-labels>:nth-child(16),
.tabbed-set>input:nth-child(17):checked~.tabbed-labels>:nth-child(17),
.tabbed-set>input:nth-child(18):checked~.tabbed-labels>:nth-child(18),
.tabbed-set>input:nth-child(19):checked~.tabbed-labels>:nth-child(19),
.tabbed-set>input:nth-child(20):checked~.tabbed-labels>:nth-child(20) {
  color: var(--md-accent-fg-color);
  border-color: var(--md-accent-fg-color);
}

/* TASK-LIST */
.task-list-control .task-list-indicator::before {
  background-color: ${Z.palette.action.disabledBackground};
}
.task-list-control [type="checkbox"]:checked + .task-list-indicator:before {
 background-color: ${Z.palette.success.main};
}

/* ADMONITION */
.admonition {
  font-size: var(--md-typeset-font-size) !important;
}
.admonition .admonition-title {
  padding-left: 2.5rem !important;
}

.admonition .admonition-title:before {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: translateY(-50%) !important;
}
`;const Q=[et,pt,en,Be,C,W],rt=()=>(0,p.Ut)(),ct=()=>{const Z=rt(),Ue=(0,G.A)();return(0,o.useMemo)(()=>{const tt={theme:Ue,sidebar:Z};return Q.reduce((ht,Se)=>ht+Se(tt),"")},[Ue,Z])},ut=()=>{const Z=ct();return(0,o.useCallback)(Ue=>(Ue.getElementsByTagName("head")[0].insertAdjacentHTML("beforeend",`<style>${Z}</style>`),Ue),[Z])},tn=(Z,Ue,tt)=>{const ht=Z==="src"&&Ue.endsWith(".svg"),Se=!Ue.match(/^([a-z]*:)?\/\//i),Y=Ue.startsWith(tt);return ht&&(Se||Y)},mn=({techdocsStorageApi:Z,entityId:Ue,path:tt})=>async ht=>{const Se=await Z.getApiOrigin(),Y=async(Ee,ue)=>{for(const at of Ee)if(at.hasAttribute(ue)){const N=at.getAttribute(ue);if(!N)return;const H=await Z.getBaseUrl(N,Ue,tt);if(tn(ue,N,Se))try{const ae=await(await fetch(H,{credentials:"include"})).text();at.setAttribute(ue,`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(ae)))}`)}catch{at.setAttribute("alt",`Error: ${N}`)}else at.setAttribute(ue,H)}};return await Promise.all([Y(ht.querySelectorAll("img"),"src"),Y(ht.querySelectorAll("script"),"src"),Y(ht.querySelectorAll("source"),"src"),Y(ht.querySelectorAll("link"),"href"),Y(ht.querySelectorAll("a[download]"),"href")]),ht};let Cn;Cn=Promise.resolve().then(e.t.bind(e,25873,19));function An(Z,Ue){Cn.then(tt=>{"createRoot"in tt?tt.createRoot(Ue).render(Z):tt.render(Z,Ue)})}const Gn=Z=>Ue=>{var tt;const ht=Ue.querySelector('[title="Edit this page"]');if(!ht||!ht.href)return Ue;const Se=new URL(ht.href),Y=Z.byUrl(Se);if((Y==null?void 0:Y.type)!=="github"&&(Y==null?void 0:Y.type)!=="gitlab")return Ue;const Ee=((tt=Ue.querySelector("article>h1"))==null?void 0:tt.childNodes[0].textContent)||"",ue=encodeURIComponent(`Documentation Feedback: ${Ee}`),at=encodeURIComponent(`Page source:
${ht.href}

Feedback:`),N=(Y==null?void 0:Y.type)==="github"?(0,me.Fw)(Se.href,"blob"):Se.href,H=mt()(N),q=`/${H.organization}/${H.name}`,ae=ht.cloneNode();switch(Y==null?void 0:Y.type){case"gitlab":ae.href=`${Se.origin}${q}/issues/new?issue[title]=${ue}&issue[description]=${at}`;break;case"github":ae.href=`${Se.origin}${q}/issues/new?title=${ue}&body=${at}`;break;default:return Ue}return An(o.createElement(kt.A),ae),ae.style.paddingLeft="5px",ae.title="Leave feedback for this page",ae.id="git-feedback-link",ht==null||ht.insertAdjacentElement("beforebegin",ae),Ue},Mn=()=>Z=>{const Ue=Z.querySelector('.md-header label[for="__drawer"]'),tt=Z.querySelector("article");if(!Ue||!tt)return Z;const ht=Ue.cloneNode();return An(o.createElement(It.A),ht),ht.id="toggle-sidebar",ht.title="Toggle Sidebar",ht.classList.add("md-content__button"),ht.style.setProperty("padding","0 0 0 5px"),ht.style.setProperty("margin","0.4rem 0 0.4rem 0.4rem"),tt==null||tt.prepend(ht),Z},Wn=()=>Z=>(((tt,ht)=>{Array.from(tt).filter(Se=>Se.hasAttribute(ht)).forEach(Se=>{const Y=Se.getAttribute(ht);if(Y){Y.match(/^https?:\/\//i)&&Se.setAttribute("target","_blank");try{const Ee=P(window.location.href);Se.setAttribute(ht,new URL(Y,Ee).toString())}catch{Se.replaceWith(Se.textContent||Y)}}})})(Array.from(Z.getElementsByTagName("a")),"href"),Z);function P(Z){const Ue=new URL(Z);return!Ue.pathname.endsWith("/")&&!Ue.pathname.endsWith(".html")&&(Ue.pathname+="/"),Ue.toString()}const K=({baseUrl:Z,onClick:Ue})=>tt=>(Array.from(tt.getElementsByTagName("a")).forEach(ht=>{ht.addEventListener("click",Se=>{const Ee=ht.getAttribute("href");Ee&&Ee.startsWith(Z)&&!ht.hasAttribute("download")&&(Se.preventDefault(),Ue(Se,Ee))})}),tt),be=(0,Ve.A)(Z=>({tooltip:{fontSize:"inherit",color:Z.palette.text.primary,margin:0,padding:Z.spacing(.5),backgroundColor:"transparent",boxShadow:"none"}}))(he.Ay),vt=()=>o.createElement(_e.A,null,o.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})),Ot=({text:Z})=>{const[Ue,tt]=(0,o.useState)(!1),[,ht]=(0,Ne.A)(),Se=(0,o.useCallback)(()=>{ht(Z),tt(!0)},[Z,ht]),Y=(0,o.useCallback)(()=>{tt(!1)},[tt]);return o.createElement(be,{title:"Copied to clipboard",placement:"left",open:Ue,onClose:Y,leaveDelay:1e3},o.createElement(Ke.A,{style:{color:"inherit"},className:"md-clipboard md-icon",onClick:Se},o.createElement(vt,null)))},Vt=Z=>Ue=>{var tt;const ht=Ue.querySelectorAll("pre > code");for(const Se of ht){const Y=Se.textContent||"",Ee=document.createElement("div");(tt=Se==null?void 0:Se.parentElement)==null||tt.prepend(Ee),An(o.createElement(re.A,{theme:Z},o.createElement(Ot,{text:Y})),Ee)}return Ue},ne=()=>Z=>{var Ue;return(Ue=Z.querySelector(".md-header"))==null||Ue.remove(),Z},Pe=()=>Z=>{var Ue,tt;return(Ue=Z.querySelector(".md-footer .md-copyright"))==null||Ue.remove(),(tt=Z.querySelector(".md-footer-copyright"))==null||tt.remove(),Z},je=({onLoading:Z,onLoaded:Ue})=>tt=>(Z(),tt.addEventListener(j.K$,function ht(){Ue(),tt.removeEventListener(j.K$,ht)}),tt),Jt=()=>Z=>(setTimeout(()=>{const Ue=Z==null?void 0:Z.querySelectorAll("li.md-nav__item--active");Ue.length!==0&&(Ue.forEach(ht=>{const Se=ht==null?void 0:ht.querySelector("input");Se!=null&&Se.checked||Se==null||Se.click()}),Ue[Ue.length-1].scrollIntoView())},200),Z),qt=async(Z,Ue)=>{let tt;if(typeof Z=="string")tt=new DOMParser().parseFromString(Z,"text/html").documentElement;else if(Z instanceof Element)tt=Z;else throw new Error("dom is not a recognized type");for(const ht of Ue)tt=await ht(tt);return tt};function cn(Z,Ue){const tt=new URL(Ue),ht=`${tt.origin}${tt.pathname.replace(/\/$/,"")}`,Se=Z.replace(ht,"").replace(/^\/+/,""),Y=new URL(`http://localhost/${Se}`);return`${Y.pathname}${Y.search}${Y.hash}`}function on(){const Z=(0,m.Zp)(),tt=(0,J.u)(J.p).getOptionalString("app.baseUrl");return(0,o.useCallback)(Se=>{let Y=Se;if(tt)try{Y=cn(Se,tt)}catch{}Z(Y)},[Z,tt])}const wn="screen and (max-width: 76.1875em)",Kn=Z=>{const Ue=on(),tt=(0,G.A)(),ht=(0,Re.A)(wn),Se=Le(),Y=ut(),Ee=(0,v.st)(),ue=(0,J.u)(j.sm),at=(0,J.u)(Rt.YT),{state:N,path:H,content:q}=O(),[ae,We]=(0,o.useState)(null),Je=(0,j._$)(ae),Fe=(0,o.useCallback)(()=>{if(!ae)return;ae.querySelectorAll(".md-sidebar").forEach(un=>{var gn,En,Nn;if(ht)un.style.top="0px";else{const On=document==null?void 0:document.querySelector(".techdocs-reader-page"),Ln=(gn=On==null?void 0:On.getBoundingClientRect().top)!=null?gn:0;let Sn=(En=ae.getBoundingClientRect().top)!=null?En:0;const In=ae.querySelector(".md-container > .md-tabs"),pn=(Nn=In==null?void 0:In.getBoundingClientRect().height)!=null?Nn:0;Sn<Ln&&(Sn=Ln),un.style.top=`${Math.max(Sn,0)+pn}px`}un.style.setProperty("opacity","1")})},[ae,ht]);(0,o.useEffect)(()=>(window.addEventListener("resize",Fe),window.addEventListener("scroll",Fe,!0),()=>{window.removeEventListener("resize",Fe),window.removeEventListener("scroll",Fe,!0)}),[ae,Fe]);const gt=(0,o.useCallback)(()=>{if(!ae)return;const wt=ae.querySelector(".md-footer");wt&&(wt.style.width=`${ae.getBoundingClientRect().width}px`)},[ae]);(0,o.useEffect)(()=>(window.addEventListener("resize",gt),()=>{window.removeEventListener("resize",gt)}),[ae,gt]),(0,o.useEffect)(()=>{Je||(gt(),Fe())},[N,Je,gt,Fe]);const Pt=(0,o.useCallback)((wt,un)=>qt(wt,[Se,mn({techdocsStorageApi:ue,entityId:Z,path:un}),Wn(),Mn(),ne(),Pe(),Gn(at),Y]),[Z,at,ue,Se,Y]),dn=(0,o.useCallback)(async wt=>qt(wt,[Jt(),Vt(tt),K({baseUrl:window.location.origin,onClick:(un,gn)=>{var En,Nn;const On=un.ctrlKey||un.metaKey,Ln=new URL(gn),Sn=((En=un.target)==null?void 0:En.innerText)||gn,In=gn.replace(window.location.origin,"");Ee.captureEvent("click",Sn,{attributes:{to:In}}),Ln.hash?On?window.open(gn,"_blank"):(Ue(gn),(Nn=wt==null?void 0:wt.querySelector(`[id="${Ln.hash.slice(1)}"]`))==null||Nn.scrollIntoView()):On?window.open(gn,"_blank"):Ue(gn)}}),je({onLoading:()=>{},onLoaded:()=>{var un;(un=wt.querySelector(".md-nav__title"))==null||un.removeAttribute("for")}}),je({onLoading:()=>{Array.from(wt.querySelectorAll(".md-sidebar")).forEach(gn=>{gn.style.setProperty("opacity","0")})},onLoaded:()=>{}})]),[tt,Ue,Ee]);return(0,o.useEffect)(()=>{if(!q)return()=>{};let wt=!0;return Pt(q,H).then(async un=>{if(!(un!=null&&un.innerHTML)||!wt)return;window.scroll({top:0});const gn=await dn(un);We(gn)}),()=>{wt=!1}},[q,H,Pt,dn]),ae},Yn=()=>{const Z=(0,j.YR)(),{shadowRoot:Ue}=(0,j.V1)(),tt=Ue==null?void 0:Ue.querySelector('[data-md-component="content"]'),ht=Ue==null?void 0:Ue.querySelector('div[data-md-component="sidebar"][data-md-type="navigation"], div[data-md-component="navigation"]');let Se=ht==null?void 0:ht.querySelector('[data-techdocs-addons-location="primary sidebar"]');Se||(Se=document.createElement("div"),Se.setAttribute("data-techdocs-addons-location","primary sidebar"),ht==null||ht.prepend(Se));const Y=Ue==null?void 0:Ue.querySelector('div[data-md-component="sidebar"][data-md-type="toc"], div[data-md-component="toc"]');let Ee=Y==null?void 0:Y.querySelector('[data-techdocs-addons-location="secondary sidebar"]');return Ee||(Ee=document.createElement("div"),Ee.setAttribute("data-techdocs-addons-location","secondary sidebar"),Y==null||Y.prepend(Ee)),o.createElement(o.Fragment,null,o.createElement(I.A,{container:Se},Z.renderComponentsByLocation(j.eK.PrimarySidebar)),o.createElement(I.A,{container:tt},Z.renderComponentsByLocation(j.eK.Content)),o.createElement(I.A,{container:Ee},Z.renderComponentsByLocation(j.eK.SecondarySidebar)))},oa=(0,B.A)({search:{width:"100%","@media (min-width: 76.1875em)":{width:"calc(100% - 34.4rem)",margin:"0 auto"},"@media print":{display:"none"}}}),vn=te(Z=>{var Ue;const{withSearch:tt=!0,onReady:ht}=Z,Se=oa(),{entityMetadata:{value:Y,loading:Ee},entityRef:ue,setShadowRoot:at}=(0,j.V1)(),N=Kn(ue),H=window.location.pathname,q=window.location.hash,ae=(0,j._$)(N),[We]=(0,j.$r)([`[id="${q.slice(1)}"]`]);(0,o.useEffect)(()=>{var Fe;ae||(q?We&&We.scrollIntoView():(Fe=document==null?void 0:document.querySelector("header"))==null||Fe.scrollIntoView())},[H,q,We,ae]);const Je=(0,o.useCallback)(Fe=>{at(Fe),ht instanceof Function&&ht()},[at,ht]);return Ee===!1&&!Y?o.createElement(p.M,{status:"404",statusMessage:"PAGE NOT FOUND"}):N?o.createElement(p.UC,null,o.createElement(k.A,{container:!0},o.createElement(k.A,{xs:12,item:!0},o.createElement(we,null)),tt&&o.createElement(k.A,{className:Se.search,xs:"auto",item:!0},o.createElement(bt,{entityId:ue,entityTitle:(Ue=Y==null?void 0:Y.metadata)==null?void 0:Ue.title})),o.createElement(k.A,{xs:12,item:!0},o.createElement(j.eh,{element:N,onAppend:Je},o.createElement(Yn,null))))):o.createElement(p.UC,null,o.createElement(k.A,{container:!0},o.createElement(k.A,{xs:12,item:!0},o.createElement(we,null))))}),ra=null,ia=o.createElement(fe.A,{animation:"wave",variant:"text",height:40}),na=Z=>{const{palette:{common:{white:Ue}}}=(0,G.A)(),{children:tt}=Z,ht=(0,j.YR)(),Se=(0,J.u)(J.p),{title:Y,setTitle:Ee,subtitle:ue,setSubtitle:at,entityRef:N,metadata:{value:H,loading:q},entityMetadata:{value:ae,loading:We}}=(0,j.V1)();(0,o.useEffect)(()=>{H&&(Ee(H.site_name),at(()=>{let{site_description:On}=H;return(!On||On==="None")&&(On=""),On}))},[H,Ee,at]);const Je=Se.getOptional("app.title")||"Backstage",Fe=[Y,ue,Je].filter(Boolean).join(" | "),{locationMetadata:gt,spec:Pt}=ae||{},dn=Pt==null?void 0:Pt.lifecycle,wt=ae?(0,zt.g)(ae,Kt.vv):[],un=(0,v.Sf)($t.r)(),gn=o.createElement(o.Fragment,null,o.createElement(p.ST,{label:(0,lt.capitalize)((ae==null?void 0:ae.kind)||"entity"),value:o.createElement(Tt.zI,{color:"inherit",entityRef:N,title:ae==null?void 0:ae.metadata.title,defaultKind:"Component"})}),wt.length>0&&o.createElement(p.ST,{label:"Owner",value:o.createElement(Tt.iI,{color:"inherit",entityRefs:wt,defaultKind:"group"})}),dn?o.createElement(p.ST,{label:"Lifecycle",value:String(dn)}):null,gt&&gt.type!=="dir"&&gt.type!=="file"?o.createElement(p.ST,{label:"",value:o.createElement(k.A,{container:!0,direction:"column",alignItems:"center",style:{color:Ue}},o.createElement(k.A,{style:{padding:0},item:!0},o.createElement(ot.A,{style:{marginTop:"-25px"}})),o.createElement(k.A,{style:{padding:0},item:!0},"Source")),url:gt.target}):null);return!We&&ae===void 0||!q&&H===void 0?null:o.createElement(p.Y9,{type:"Documentation",typeLink:un,title:Y||ia,subtitle:ue===""?void 0:ue||ia},o.createElement(Ct.A,{titleTemplate:"%s"},o.createElement("title",null,Fe)),gn,tt,ht.renderComponentsByLocation(j.eK.Header))},da=(0,B.A)(Z=>({root:{gridArea:"pageSubheader",flexDirection:"column",minHeight:"auto",padding:Z.spacing(3,3,0),"@media print":{display:"none"}}})),_a=Z=>{const Ue=da(),[tt,ht]=(0,o.useState)(null),Se=(0,o.useCallback)(q=>{ht(q.currentTarget)},[]),Y=(0,o.useCallback)(()=>{ht(null)},[]),{entityMetadata:{value:Ee,loading:ue}}=(0,j.V1)(),at=(0,j.YR)(),N=at.renderComponentsByLocation(j.eK.Subheader),H=at.renderComponentsByLocation(j.eK.Settings);return!N&&!H||ue===!1&&!Ee?null:o.createElement(c.A,{classes:Ue,...Z.toolbarProps},o.createElement(R.A,{display:"flex",justifyContent:"flex-end",width:"100%",flexWrap:"wrap"},N,H?o.createElement(o.Fragment,null,o.createElement(he.Ay,{title:"Settings"},o.createElement(Ke.A,{"aria-controls":"tech-docs-reader-page-settings","aria-haspopup":"true",onClick:Se},o.createElement(an.A,null))),o.createElement(A.A,{id:"tech-docs-reader-page-settings",getContentAnchorEl:null,anchorEl:tt,anchorOrigin:{vertical:"bottom",horizontal:"right"},open:Boolean(tt),onClose:Y,keepMounted:!0},o.createElement("div",null,H))):null))},qn=Z=>{const{withSearch:Ue,withHeader:tt=!0}=Z;return o.createElement(p.YW,{themeId:"documentation"},tt&&o.createElement(na,null),o.createElement(_a,null),o.createElement(vn,{withSearch:Ue}))},Ea=Z=>{const{kind:Ue,name:tt,namespace:ht}=(0,v.KS)($t.b),{children:Se,entityRef:Y={kind:Ue,name:tt,namespace:ht}}=Z,Ee=(0,m.P1)();if(!Se){const N=(Ee?o.Children.toArray(Ee.props.children):[]).flatMap(H=>{var q,ae;return(ae=(q=H==null?void 0:H.props)==null?void 0:q.children)!=null?ae:[]}).find(H=>!(0,v.E0)(H,j.AF)&&!(0,v.E0)(H,j.Wm));return o.createElement(j.R7,{entityRef:Y},N||o.createElement(qn,null))}return o.createElement(j.R7,{entityRef:Y},({metadata:ue,entityMetadata:at,onReady:N})=>o.createElement("div",{className:"techdocs-reader-page"},o.createElement(p.YW,{themeId:"documentation"},Se instanceof Function?Se({entityRef:Y,techdocsMetadataValue:ue.value,entityMetadataValue:at.value,onReady:N}):Se)))}},75018:($n,Zt,e)=>{"use strict";e.r(Zt),e.d(Zt,{TechDocsSearchResultListItem:()=>Ke});var o=e(14041),m=e(58837),p=e(5951),j=e(46423),B=e(72501),i=e(23180),k=e(92805);const Ze=(0,m.A)({flexContainer:{flexWrap:"wrap"},itemText:{width:"100%",marginBottom:"1rem"}}),Ke=a=>{const{result:De,highlight:Ie,lineClamp:ie=5,asListItem:G=!0,asLink:Ve=!0,title:he,icon:_e}=a,re=Ze(),Re=({children:R})=>Ve?o.createElement(i.N_,{noTrack:!0,to:De.location},R):o.createElement(o.Fragment,null,R),I=()=>{const R=Ie!=null&&Ie.fields.title?o.createElement(k.b,{text:Ie.fields.title,preTag:Ie.preTag,postTag:Ie.postTag}):De.title,A=Ie!=null&&Ie.fields.entityTitle?o.createElement(k.b,{text:Ie.fields.entityTitle,preTag:Ie.preTag,postTag:Ie.postTag}):De.entityTitle,_=Ie!=null&&Ie.fields.name?o.createElement(k.b,{text:Ie.fields.name,preTag:Ie.preTag,postTag:Ie.postTag}):De.name;return De?o.createElement(p.A,{className:re.itemText,primaryTypographyProps:{variant:"h6"},primary:o.createElement(Re,null,he||o.createElement(o.Fragment,null,R," | ",A!=null?A:_," docs")),secondary:o.createElement(B.A,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:ie,overflow:"hidden"},color:"textSecondary",variant:"body2"},Ie!=null&&Ie.fields.text?o.createElement(k.b,{text:Ie.fields.text,preTag:Ie.preTag,postTag:Ie.postTag}):De.text)}):null},c=({children:R})=>G?o.createElement(o.Fragment,null,_e&&o.createElement(j.A,null,typeof _e=="function"?_e(De):_e),o.createElement("div",{className:re.flexContainer},R)):o.createElement(o.Fragment,null,R);return o.createElement(c,null,o.createElement(I,null))}},87266:($n,Zt,e)=>{"use strict";e.d(Zt,{T:()=>Ze,a:()=>Ke,b:()=>De,c:()=>Ie,r:()=>a});var o=e(3399),m=e(17520),p=e.n(m),j=e(11638),B=Object.defineProperty,i=(ie,G,Ve)=>G in ie?B(ie,G,{enumerable:!0,configurable:!0,writable:!0,value:Ve}):ie[G]=Ve,k=(ie,G,Ve)=>(i(ie,typeof G!="symbol"?G+"":G,Ve),Ve);class Ze{constructor(G){k(this,"configApi"),k(this,"discoveryApi"),k(this,"fetchApi"),this.configApi=G.configApi,this.discoveryApi=G.discoveryApi,this.fetchApi=G.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getTechDocsMetadata(G){const{kind:Ve,namespace:he,name:_e}=G,Re=`${await this.getApiOrigin()}/metadata/techdocs/${he}/${Ve}/${_e}`,I=await this.fetchApi.fetch(`${Re}`);if(!I.ok)throw await o.o3.fromResponse(I);return await I.json()}async getEntityMetadata(G){const{kind:Ve,namespace:he,name:_e}=G,Re=`${await this.getApiOrigin()}/metadata/entity/${he}/${Ve}/${_e}`,I=await this.fetchApi.fetch(`${Re}`);if(!I.ok)throw await o.o3.fromResponse(I);return await I.json()}}class Ke{constructor(G){k(this,"configApi"),k(this,"discoveryApi"),k(this,"identityApi"),k(this,"fetchApi"),this.configApi=G.configApi,this.discoveryApi=G.discoveryApi,this.identityApi=G.identityApi,this.fetchApi=G.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getStorageUrl(){var G;return(G=this.configApi.getOptionalString("techdocs.storageUrl"))!=null?G:`${await this.discoveryApi.getBaseUrl("techdocs")}/static/docs`}async getBuilder(){return this.configApi.getString("techdocs.builder")}async getEntityDocs(G,Ve){const{kind:he,namespace:_e,name:re}=G,I=`${await this.getStorageUrl()}/${_e}/${he}/${re}/${Ve}`,c=await this.fetchApi.fetch(`${I.endsWith("/")?I:`${I}/`}index.html`);let R="";switch(c.status){case 404:throw R="Page not found. ",Ve||(R+="This could be because there is no index.md file in the root of the docs directory of this repository."),new o.m_(R);case 500:throw R="Could not generate documentation or an error in the TechDocs backend. ",new Error(R)}return c.text()}async syncEntityDocs(G,Ve=()=>{}){const{kind:he,namespace:_e,name:re}=G,I=`${await this.getApiOrigin()}/sync/${_e}/${he}/${re}`,{token:c}=await this.identityApi.getCredentials();return new Promise((R,A)=>{const _=new m.EventSourcePolyfill(I,{withCredentials:!0,headers:c?{Authorization:`Bearer ${c}`}:{}});_.addEventListener("log",F=>{F.data&&Ve(JSON.parse(F.data))}),_.addEventListener("finish",F=>{let Ae=!1;F.data&&({updated:Ae}=JSON.parse(F.data)),R(Ae?"updated":"cached")}),_.onerror=F=>{switch(_.close(),F.status){case 404:A(new o.m_(F.message));return;default:A(new Error(F.data));return}}})}async getBaseUrl(G,Ve,he){const{kind:_e,namespace:re,name:Re}=Ve,c=`${await this.getApiOrigin()}/static/docs/${re}/${_e}/${Re}/${he}`;return new URL(G,c.endsWith("/")?c:`${c}/`).toString()}}const a=(0,j.HM)({id:"techdocs:index-page"}),De=(0,j.HM)({id:"techdocs:reader-page",params:["namespace","kind","name"]}),Ie=(0,j.HM)({id:"techdocs:catalog-reader-view"})},44114:($n,Zt,e)=>{"use strict";e.d(Zt,{L:()=>Et,S:()=>nt,a:()=>Wt,e:()=>an});var o=e(18690),m=e(14041),p=e(72501),j=e(64947),B=e(58837),i=e(19087),k=e(8109),Ze=e(46423),Ke=e(5951),a=e(71677),De=e(42899),Ie=e(65569),ie=e(58007),G=e(73643),Ve=e(16249),he=e(29365),_e=e(37757),re=e(26343),Re=e(23180),I=e(80109),c=e(7877),R=e(11638),A=e(64704),_=e(91638),F=e(89383),Ae=e(71407),fe=e(45145),ve=e(93970),J=e(15485),v=e(42247),ee=e(59294),oe=e(93962),Rt=e(92651);const w=`auth:
  providers:
    google:
      development:
        clientId: \${AUTH_GOOGLE_CLIENT_ID}
        clientSecret: \${AUTH_GOOGLE_CLIENT_SECRET}
`,sn=()=>m.createElement(Re.pp,{missing:"content",title:"No Authentication Providers",description:"You can add Authentication Providers to Backstage which allows you to use these providers to authenticate yourself.",action:m.createElement(m.Fragment,null,m.createElement(p.A,{variant:"body1"},"Open ",m.createElement("code",null,"app-config.yaml")," and make the changes as highlighted below:"),m.createElement(Re.z7,{text:w,language:"yaml",showLineNumbers:!0,highlightedNumbers:[3,4,5,6,7,8],customStyle:{background:"inherit",fontSize:"115%"}}),m.createElement(j.A,{variant:"contained",color:"primary",href:"https://backstage.io/docs/auth/add-auth-provider"},"Read More"))}),me=(0,B.A)(le=>({avatar:{width:({size:$e})=>$e,height:({size:$e})=>$e,fontSize:({size:$e})=>$e*.7,border:`1px solid ${le.palette.textSubtle}`}})),kt=({size:le,picture:$e})=>{const{iconSize:xt}=Re.hC,Yt=me(le?{size:le}:{size:xt});return m.createElement(i.A,{src:$e,className:Yt.avatar})},yt={},mt=le=>{const{title:$e,description:xt,icon:Yt,apiRef:se}=le,ke=(0,c.u)(se),pe=(0,c.u)(c.r),[Le,et]=(0,m.useState)(!1),[pt,Bt]=(0,m.useState)(yt);return(0,m.useEffect)(()=>{let en=!1;const Ce=ke.sessionState$().subscribe(Be=>{Be!==c.S.SignedIn&&(Bt(yt),et(!1)),en||ke.getProfile({optional:!0}).then(C=>{en||(Be===c.S.SignedIn&&et(!0),C&&Bt(C))})});return()=>{en=!0,Ce.unsubscribe()}},[ke]),m.createElement(k.A,null,m.createElement(Ze.A,null,m.createElement(Yt,null)),m.createElement(Ke.A,{primary:$e,secondary:m.createElement(a.Ay,{placement:"top",arrow:!0,title:xt},m.createElement(De.A,{container:!0,spacing:6},m.createElement(De.A,{item:!0},m.createElement(kt,{size:48,picture:pt.picture})),m.createElement(De.A,{item:!0,xs:12,sm:!0,container:!0},m.createElement(De.A,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},m.createElement(De.A,{item:!0,xs:!0},m.createElement(p.A,{variant:"subtitle1",color:"textPrimary",gutterBottom:!0},pt.displayName),m.createElement(p.A,{variant:"body2",color:"textSecondary"},pt.email),m.createElement(p.A,{variant:"body2",color:"textSecondary"},xt)))))),secondaryTypographyProps:{noWrap:!0,style:{width:"80%"}}}),m.createElement(Ie.A,null,m.createElement(a.Ay,{placement:"top",arrow:!0,title:Le?`Sign out from ${$e}`:`Sign in to ${$e}`},m.createElement(j.A,{variant:"outlined",color:"primary",onClick:()=>{(Le?ke.signOut():ke.signIn()).catch(Ce=>pe.post(Ce))}},Le?"Sign out":"Sign in"))))},It=le=>{const{configuredProviders:$e}=le;return m.createElement(m.Fragment,null,$e.includes("google")&&m.createElement(mt,{title:"Google",description:"Provides authentication towards Google APIs and identities",apiRef:c.g,icon:I.A}),$e.includes("microsoft")&&m.createElement(mt,{title:"Microsoft",description:"Provides authentication towards Microsoft APIs and identities",apiRef:c.m,icon:I.A}),$e.includes("github")&&m.createElement(mt,{title:"GitHub",description:"Provides authentication towards GitHub APIs",apiRef:c.d,icon:I.A}),$e.includes("gitlab")&&m.createElement(mt,{title:"GitLab",description:"Provides authentication towards GitLab APIs",apiRef:c.e,icon:I.A}),$e.includes("okta")&&m.createElement(mt,{title:"Okta",description:"Provides authentication towards Okta APIs",apiRef:c.o,icon:I.A}),$e.includes("bitbucket")&&m.createElement(mt,{title:"Bitbucket",description:"Provides authentication towards Bitbucket APIs",apiRef:c.i,icon:I.A}),$e.includes("onelogin")&&m.createElement(mt,{title:"OneLogin",description:"Provides authentication towards OneLogin APIs",apiRef:c.h,icon:I.A}),$e.includes("atlassian")&&m.createElement(mt,{title:"Atlassian",description:"Provides authentication towards Atlassian APIs",apiRef:c.k,icon:I.A}),$e.includes("bitbucketServer")&&m.createElement(mt,{title:"Bitbucket Server",description:"Provides authentication towards Bitbucket Server APIs",apiRef:c.j,icon:I.A}))},Ne=le=>{const{providerSettings:$e}=le,Yt=(0,c.u)(c.p).getOptionalConfig("auth.providers"),se=(Yt==null?void 0:Yt.keys())||[],ke=$e!=null?$e:m.createElement(It,{configuredProviders:se});return!$e&&!(se!=null&&se.length)?m.createElement(sn,null):m.createElement(Re.nO,{title:"Available Providers"},m.createElement(ie.A,{dense:!0},ke))},Ct=`import { createPlugin } from '@backstage/core-plugin-api';

export default createPlugin({
  id: 'plugin-name',
  featureFlags: [{ name: 'enable-example-feature' }],
});
`,ot=()=>m.createElement(Re.pp,{missing:"content",title:"No Feature Flags",description:"Feature Flags make it possible for plugins to register features in Backstage for users to opt into. You can use this to split out logic in your code for manual A/B testing, etc.",action:m.createElement(m.Fragment,null,m.createElement(p.A,{variant:"body1"},"An example for how to add a feature flag is highlighted below:"),m.createElement(Re.z7,{text:Ct,language:"typescript",showLineNumbers:!0,highlightedNumbers:[6],customStyle:{background:"inherit",fontSize:"115%"}}),m.createElement(j.A,{variant:"contained",color:"primary",href:"https://backstage.io/docs/api/utility-apis"},"Read More"))}),zt=le=>le.description?le.description:le.pluginId?`Registered in ${le.pluginId} plugin`:"Registered in the application",Tt=({flag:le,enabled:$e,toggleHandler:xt})=>m.createElement(k.A,{divider:!0,button:!0,onClick:()=>xt(le.name)},m.createElement(Ze.A,null,m.createElement(a.Ay,{placement:"top",arrow:!0,title:$e?"Disable":"Enable"},m.createElement(G.A,{color:"primary",checked:$e,name:le.name}))),m.createElement(Ke.A,{primary:le.name,secondary:zt(le)})),Kt=(le,$e)=>{const xt=le.filter(se=>$e.isActive(se.name)),Yt=le.filter(se=>!$e.isActive(se.name));return[...xt,...Yt]},lt=()=>{const le=(0,c.u)(c.f),$e=m.useRef(),xt=le.getRegisteredFlags(),Yt=Kt(xt,le),[se]=(0,m.useState)(Yt),ke=Object.fromEntries(se.map(({name:C})=>[C,le.isActive(C)])),[pe,Le]=(0,m.useState)(ke),[et,pt]=(0,m.useState)(""),Bt=(0,m.useCallback)(C=>{const W=le.isActive(C)?c.F.None:c.F.Active;le.save({states:{[C]:W},merge:!0}),Le(Q=>({...Q,[C]:W===c.F.Active}))},[le]);if(!se.length)return m.createElement(ot,null);const en=()=>{var C;pt(""),(C=$e==null?void 0:$e.current)==null||C.focus()},Ce=se.filter(C=>C.name.toLocaleLowerCase("en-US").includes(et.toLocaleLowerCase("en-US"))),Be=()=>m.createElement(De.A,{container:!0,style:{justifyContent:"space-between"}},m.createElement(De.A,{item:!0,xs:6,md:8},m.createElement(p.A,{variant:"h5"},"Feature Flags"),m.createElement(p.A,{variant:"subtitle1"},"Please refresh the page when toggling feature flags")),se.length>=10&&m.createElement(De.A,{item:!0,xs:6,md:4},m.createElement(Ve.A,{label:"Filter",style:{display:"flex",justifyContent:"flex-end"},inputRef:C=>C&&C.focus(),InputProps:{...et.length&&{endAdornment:m.createElement(he.A,{"aria-label":"Clear filter",onClick:en,edge:"end"},m.createElement(A.A,null))}},onChange:C=>pt(C.target.value),value:et})));return m.createElement(Re.nO,{title:m.createElement(Be,null)},m.createElement(ie.A,{dense:!0},Ce.map(C=>{const W=Boolean(pe[C.name]);return m.createElement(Tt,{key:C.name,flag:C,enabled:W,toggleHandler:Bt})})))},ft=()=>{var le;const $e=(0,c.u)(c.t),xt=(0,c.u)(c.l),{value:Yt,loading:se,error:ke}=(0,_.default)(async()=>({profile:await $e.getProfileInfo(),identity:await $e.getBackstageIdentity()}),[]);return(0,m.useEffect)(()=>{ke&&xt.post({message:`Failed to load user identity: ${ke}`,severity:"error"})},[ke,xt]),se||ke?{profile:{},displayName:"",loading:se}:{profile:Yt.profile,backstageIdentity:Yt.identity,displayName:(le=Yt.profile.displayName)!=null?le:Yt.identity.userEntityRef,loading:se}},$t=(0,B.A)(le=>({avatar:{width:({size:$e})=>$e,height:({size:$e})=>$e,fontSize:({size:$e})=>$e*.7,border:`1px solid ${le.palette.textSubtle}`}})),an=le=>{const{size:$e}=le,{iconSize:xt}=Re.hC,Yt=$t($e?{size:$e}:{size:xt}),{profile:se}=ft();return m.createElement(i.A,{src:se.picture,className:Yt.avatar,alt:"Profile picture"})},St=()=>{const le=(0,c.u)(c.r),$e=(0,c.u)(c.t),[xt,Yt]=m.useState(!1),[se,ke]=m.useState(void 0),pe=et=>{ke(et.currentTarget),Yt(!0)},Le=()=>{ke(void 0),Yt(!1)};return m.createElement(m.Fragment,null,m.createElement(he.A,{"data-testid":"user-settings-menu","aria-label":"more",onClick:pe},m.createElement(Ae.A,null)),m.createElement(_e.A,{anchorEl:se,open:xt,onClose:Le},m.createElement(re.A,{"data-testid":"sign-out",onClick:()=>$e.signOut().catch(et=>le.post(et))},m.createElement(Ze.A,null,m.createElement(F.A,null)),"Sign Out")))},jt=()=>{const{profile:le,displayName:$e}=ft();return m.createElement(Re.nO,{title:"Profile",variant:"gridItem"},m.createElement(De.A,{container:!0,spacing:6},m.createElement(De.A,{item:!0},m.createElement(an,{size:96})),m.createElement(De.A,{item:!0,xs:12,sm:!0,container:!0},m.createElement(De.A,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},m.createElement(De.A,{item:!0,xs:!0},m.createElement(p.A,{variant:"subtitle1",gutterBottom:!0},$e),le.email&&m.createElement(p.A,{variant:"body2",color:"textSecondary"},le.email))),m.createElement(De.A,{item:!0},m.createElement(St,null)))))},D=()=>{const{isPinned:le,toggleSidebarPinState:$e}=(0,Re.Ut)();return m.createElement(k.A,null,m.createElement(Ke.A,{primary:"Pin Sidebar",secondary:"Prevent the sidebar from collapsing"}),m.createElement(Ie.A,null,m.createElement(a.Ay,{placement:"top",arrow:!0,title:`${le?"Unpin":"Pin"} Sidebar`},m.createElement(G.A,{color:"primary",checked:le,onChange:()=>$e(),name:"pin",inputProps:{"aria-label":"Pin Sidebar Switch"}}))))},U=({id:le,activeId:$e,icon:xt})=>xt?(0,m.cloneElement)(xt,{color:$e===le?"primary":void 0}):m.createElement(ve.A,{color:$e===le?"primary":void 0}),O=(0,B.A)(le=>({container:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"space-between",alignItems:"center",paddingBottom:8,paddingRight:16},list:{width:"initial",[le.breakpoints.down("xs")]:{width:"100%",padding:"0 0 12px"}},listItemText:{paddingRight:0,paddingLeft:0},listItemSecondaryAction:{position:"relative",transform:"unset",top:"auto",right:"auto",paddingLeft:16,[le.breakpoints.down("xs")]:{paddingLeft:0}}})),M=({children:le,title:$e,value:xt,...Yt})=>m.createElement(a.Ay,{placement:"top",arrow:!0,title:$e},m.createElement(J.A,{value:xt,...Yt},le)),te=()=>{const le=O(),$e=(0,c.u)(c.n),xt=(0,fe.A)($e.activeThemeId$(),$e.getActiveThemeId()),Yt=$e.getInstalledThemes(),{t:se}=(0,ee.ie)(oe.a),ke=(pe,Le)=>{Yt.some(et=>et.id===Le)?$e.setActiveThemeId(Le):$e.setActiveThemeId(void 0)};return m.createElement(k.A,{className:le.list,classes:{container:le.container}},m.createElement(Ke.A,{className:le.listItemText,primary:se("themeToggle.title"),secondary:se("themeToggle.description")}),m.createElement(Ie.A,{className:le.listItemSecondaryAction},m.createElement(v.A,{exclusive:!0,size:"small",value:xt!=null?xt:"auto",onChange:ke},Yt.map(pe=>{const Le=pe.id,et=pe.icon,pt=pe.title||(Le==="light"||Le==="dark"?se(`themeToggle.names.${Le}`):Le);return m.createElement(M,{key:Le,title:se("themeToggle.select",{theme:pt}),value:Le},m.createElement(m.Fragment,null,pt,"\xA0",m.createElement(U,{id:Le,icon:et,activeId:xt})))}),m.createElement(a.Ay,{placement:"top",arrow:!0,title:se("themeToggle.selectAuto")},m.createElement(J.A,{value:"auto",selected:xt===void 0},se("themeToggle.names.auto"),"\xA0",m.createElement(ve.A,{color:xt===void 0?"primary":void 0}))))))},ge=(0,B.A)(le=>({container:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"space-between",alignItems:"center",paddingBottom:8,paddingRight:16},list:{width:"initial",[le.breakpoints.down("xs")]:{width:"100%",padding:"0 0 12px"}},listItemText:{paddingRight:0,paddingLeft:0},listItemSecondaryAction:{position:"relative",transform:"unset",top:"auto",right:"auto",paddingLeft:16,[le.breakpoints.down("xs")]:{paddingLeft:0}}})),ze=()=>{const le=ge(),$e=(0,c.u)(ee.pl),{t:xt}=(0,ee.ie)(oe.a),[Yt]=(0,m.useState)(()=>$e.language$()),{language:se}=(0,fe.A)(Yt,$e.getLanguage()),{languages:ke}=$e.getAvailableLanguages();if(ke.length<=1)return null;const pe=et=>{$e.setLanguage(et)},Le=et=>{try{return new Intl.DisplayNames([et],{type:"language"}).of(et)||et}catch{return et}};return m.createElement(k.A,{className:le.list,classes:{container:le.container}},m.createElement(Ke.A,{className:le.listItemText,primary:xt("languageToggle.title"),secondary:xt("languageToggle.description")}),m.createElement(Ie.A,{className:le.listItemSecondaryAction},m.createElement(Re.l6,{label:"",selected:se,items:ke.map(et=>({label:Le(et),value:et})),onChange:et=>pe(et)})))},bt=()=>{const{isMobile:le}=(0,Re.Ut)();return m.createElement(Re.nO,{title:"Appearance",variant:"gridItem"},m.createElement(ie.A,{dense:!0},m.createElement(te,null),m.createElement(ze,null),!le&&m.createElement(D,null)))},Qe=()=>{const{backstageIdentity:le}=ft();return le?m.createElement(De.A,{container:!0,spacing:1},m.createElement(De.A,{item:!0,xs:12},m.createElement(p.A,{variant:"subtitle1",gutterBottom:!0},"User Entity:"," ",m.createElement(Rt.iI,{entityRefs:[le.userEntityRef]}))),m.createElement(De.A,{item:!0,xs:12},m.createElement(p.A,{variant:"subtitle1"},"Ownership Entities:"," ",m.createElement(Rt.iI,{entityRefs:le.ownershipEntityRefs})))):m.createElement(p.A,null,"No Backstage Identity")},Mt=()=>m.createElement(Re.nO,{title:"Backstage Identity"},m.createElement(Qe,null)),rn=()=>m.createElement(De.A,{container:!0,direction:"row",spacing:3},m.createElement(De.A,{item:!0,xs:12,md:6},m.createElement(jt,null)),m.createElement(De.A,{item:!0,xs:12,md:6},m.createElement(bt,null)),m.createElement(De.A,{item:!0,xs:12,md:6},m.createElement(Mt,null))),Ft="plugin.user-settings.settingsLayout",Et="plugin.user-settings.settingsLayoutRoute",we=()=>null;(0,R.h3)(we,Et,!0),(0,R.h3)(we,"core.gatherMountPoints",!0);const nt=le=>{const{title:$e,children:xt}=le,{isMobile:Yt}=(0,Re.Ut)(),se=(0,R.OJ)(xt,ke=>ke.selectByComponentData({key:Et,withStrictError:"Child of SettingsLayout must be an SettingsLayout.Route"}).getElements().map(pe=>pe.props));return m.createElement(Re.YW,{themeId:"home"},!Yt&&m.createElement(Re.Y9,{title:$e!=null?$e:"Settings"}),m.createElement(Re.kE,{routes:se}))};(0,R.h3)(nt,Ft,!0),nt.Route=we;const Lt=le=>{const{providerSettings:$e,tabs:xt}=le;return m.createElement(nt,null,m.createElement(nt.Route,{path:"general",title:"General"},m.createElement(rn,null)),m.createElement(nt.Route,{path:"auth-providers",title:"Authentication Providers"},m.createElement(Ne,{providerSettings:$e})),m.createElement(nt.Route,{path:"feature-flags",title:"Feature Flags"},m.createElement(lt,null)),xt)},Wt=le=>{const{providerSettings:$e}=le,xt=(0,o.P1)(),Yt=(0,R.OJ)(xt,ke=>ke.selectByComponentData({key:Ft}).getElements()),se=(0,R.OJ)(xt,ke=>ke.selectByComponentData({key:Et}).getElements());return m.createElement(m.Fragment,null,Yt.length!==0&&Yt||m.createElement(Lt,{tabs:se,providerSettings:$e}))}},93962:($n,Zt,e)=>{"use strict";e.d(Zt,{U:()=>B,a:()=>i,s:()=>p});var o=e(11638),m=e(59294);const p=(0,o.HM)({id:"user-settings"}),B=(0,o.i1)({id:"user-settings",routes:{settingsPage:p}}).provide((0,o.QJ)({name:"UserSettingsPage",component:()=>e.e(4890).then(e.bind(e,4890)).then(k=>k.SettingsPage),mountPoint:p})),i=(0,m.h2)({id:"user-settings",messages:{languageToggle:{title:"Language",description:"Change the language",select:"Select language {{language}}"},themeToggle:{title:"Theme",description:"Change the theme mode",select:"Select theme {{theme}}",selectAuto:"Select Auto Theme",names:{light:"Light",dark:"Dark",auto:"Auto"}}}})},93449:($n,Zt,e)=>{"use strict";e.d(Zt,{wB:()=>Ve});var o=e(96403),m=e.n(o),p=e(93962),j=e(14041),B=e(9684),i=e(23180),k=e(11638),Ze=e(44114),Ke=Object.defineProperty,a=(re,Re,I)=>Re in re?Ke(re,Re,{enumerable:!0,configurable:!0,writable:!0,value:I}):re[Re]=I,De=(re,Re,I)=>(a(re,typeof Re!="symbol"?Re+"":Re,I),I);const Ie={"Content-Type":"application/json; charset=utf-8",Accept:"application/json"},ie=new Map;class G{constructor(Re,I,c,R,A,_){this.namespace=Re,this.fetchApi=I,this.discoveryApi=c,this.errorApi=R,this.identityApi=A,this.fallback=_,De(this,"subscribers",new Set),De(this,"observables",new Map)}static create(Re){var I;return new G((I=Re.namespace)!=null?I:"default",Re.fetchApi,Re.discoveryApi,Re.errorApi,Re.identityApi,WebStorage.create({namespace:Re.namespace,errorApi:Re.errorApi}))}forBucket(Re){const I=`${this.namespace}.${Re}`;return ie.has(I)||ie.set(I,new G(I,this.fetchApi,this.discoveryApi,this.errorApi,this.identityApi,this.fallback)),ie.get(I)}async remove(Re){const I=await this.getFetchUrl(Re),c=await this.fetchApi.fetch(I,{method:"DELETE"});if(!c.ok&&c.status!==404)throw await ResponseError.fromResponse(c);this.notifyChanges({key:Re,presence:"absent"})}async set(Re,I){if(!await this.isSignedIn()){await this.fallback.set(Re,I),this.notifyChanges({key:Re,presence:"present",value:I});return}const c=await this.getFetchUrl(Re),R=await this.fetchApi.fetch(c,{method:"PUT",headers:Ie,body:JSON.stringify({value:I})});if(!R.ok)throw await ResponseError.fromResponse(R);const{value:A}=await R.json();this.notifyChanges({key:Re,value:A,presence:"present"})}observe$(Re){return this.observables.has(Re)||this.observables.set(Re,new ObservableImpl(I=>(this.subscribers.add(I),Promise.resolve().then(()=>this.get(Re)).then(c=>I.next(c)).catch(c=>this.errorApi.post(c)),()=>{this.subscribers.delete(I)})).filter(({key:I})=>I===Re)),this.observables.get(Re)}snapshot(Re){return{key:Re,presence:"unknown"}}async get(Re){if(!await this.isSignedIn())return this.fallback.snapshot(Re);const I=await this.getFetchUrl(Re),c=await this.fetchApi.fetch(I);if(c.status===404)return{key:Re,presence:"absent"};if(!c.ok)throw await ResponseError.fromResponse(c);try{const{value:R}=await c.json(),A=JSON.parse(JSON.stringify(R),(_,F)=>(typeof F=="object"&&F!==null&&Object.freeze(F),F));return{key:Re,presence:"present",value:A}}catch{return{key:Re,presence:"absent"}}}async getFetchUrl(Re){const I=await this.discoveryApi.getBaseUrl("user-settings"),c=encodeURIComponent(this.namespace),R=encodeURIComponent(Re);return`${I}/buckets/${c}/keys/${R}`}async notifyChanges(Re){for(const I of this.subscribers)try{I.next(Re)}catch{}}async isSignedIn(){try{const Re=await this.identityApi.getCredentials();return!!(Re!=null&&Re.token)}catch{return!1}}}const Ve=re=>{const Re=(0,k.Sf)(p.s),I=re.icon?re.icon:B.A;return j.createElement(i.uk,{text:"Settings",to:Re(),icon:I})},he=Ze.L,_e=re=>j.createElement(Ze.S.Route,{path:re.path,title:re.title},j.createElement(j.Fragment,null,"props.children"));(0,k.h3)(_e,he,"UserSettingsTab")},97388:($n,Zt,e)=>{"use strict";e.d(Zt,{Bl:()=>i,Q6:()=>B,qO:()=>Ze,tK:()=>k});var o=e(14041);function m(){return typeof window!="undefined"&&window.Math===Math?window:typeof self!="undefined"&&self.Math===Math?self:Function("return this")()}const p=m(),j=a=>`__@backstage/${a}__`;function B(a,De){const Ie=j(a);let ie=p[Ie];return ie||(ie=De(),p[Ie]=ie,ie)}function i(a){Object.freeze(a);const De={atVersion(Ie){return a[Ie]}};return Object.defineProperty(De,"$map",{configurable:!0,enumerable:!0,get(){return a}}),De}function k(a){return B(a,()=>(0,o.createContext)(void 0))}function Ze(a){return(0,o.useContext)(k(a))}function Ke(a){return{set(De){globalThis[`__@backstage/${a}__`]=createContext(i(De))},reset(){delete globalThis[`__@backstage/${a}__`]}}}}}]);})();

//# sourceMappingURL=module-backstage.5ed6a73e.js.map