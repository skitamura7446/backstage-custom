{"version":3,"file":"index-4aa81aae.esm.js","sources":["../../src/types.ts","../../src/api/index.ts","../../src/plugin.ts","../../src/components/useArgoCDAppData.ts","../../src/conditions.ts"],"sourcesContent":["import * as t from 'io-ts';\n\nexport const argoCDAppDeployRevisionDetails = t.type({\n  author: t.union([t.string, t.undefined]),\n  date: t.union([t.string, t.undefined]),\n  message: t.union([t.string, t.undefined]),\n});\n\nexport const argoCDAppHistory = t.type({\n  id: t.union([t.number, t.undefined]),\n  revision: t.union([\n    t.type({\n      revisionID: t.union([t.number, t.undefined]),\n      author: t.union([t.number, t.undefined]),\n      date: t.union([t.string, t.undefined]),\n      message: t.union([t.string, t.undefined]),\n    }),\n    t.undefined,\n    t.string,\n  ]),\n  deployStartedAt: t.union([t.string, t.undefined]),\n  deployedAt: t.union([t.string, t.undefined]),\n});\n\nexport const argoCDAppDetails = t.type({\n  metadata: t.type({\n    name: t.string,\n    namespace: t.string,\n    instance: t.union([\n      t.type({\n        name: t.union([t.string, t.undefined]),\n        url: t.union([t.string, t.undefined]),\n      }),\n      t.undefined,\n    ]),\n  }),\n  status: t.type({\n    sync: t.type({\n      status: t.string,\n    }),\n    health: t.type({\n      status: t.string,\n    }),\n    operationState: t.union([\n      t.type({\n        startedAt: t.string,\n        finishedAt: t.union([t.string, t.undefined]),\n      }),\n      t.undefined,\n    ]),\n    history: t.union([t.array(argoCDAppHistory), t.undefined]),\n  }),\n});\n\nexport type ArgoCDAppDetails = t.TypeOf<typeof argoCDAppDetails>;\nexport type ArgoCDAppHistoryDetails = t.TypeOf<typeof argoCDAppHistory>;\nexport type ArgoCDAppDeployRevisionDetails = t.TypeOf<\n  typeof argoCDAppDeployRevisionDetails\n>;\n\nexport const argoCDAppList = t.type({\n  items: t.union([t.array(argoCDAppDetails), t.null]),\n});\n\nexport type ArgoCDAppList = t.TypeOf<typeof argoCDAppList>;\n\nexport const argoCDService = t.type({\n  name: t.string,\n  url: t.string,\n  appName: t.union([t.array(t.string), t.undefined]),\n});\n\nexport const argoCDServiceList = t.array(argoCDService);\n\nexport type ArgoCDServiceList = t.TypeOf<typeof argoCDServiceList>;\n","import {\n  createApiRef,\n  DiscoveryApi,\n  IdentityApi,\n} from '@backstage/core-plugin-api';\nimport {\n  argoCDAppDetails,\n  ArgoCDAppDetails,\n  argoCDAppList,\n  ArgoCDAppList,\n  argoCDAppDeployRevisionDetails,\n  ArgoCDAppDeployRevisionDetails,\n  argoCDServiceList,\n  ArgoCDServiceList,\n} from '../types';\nimport { Type as tsType } from 'io-ts';\nimport {\n  decode as tsDecode,\n  isDecodeError as tsIsDecodeError,\n} from 'io-ts-promise';\nimport reporter from 'io-ts-reporters';\n\nexport interface ArgoCDApi {\n  listApps(options: {\n    url: string;\n    appSelector?: string;\n    appNamespace?: string;\n    projectName?: string;\n  }): Promise<ArgoCDAppList>;\n  getRevisionDetails(options: {\n    url: string;\n    app: string;\n    appNamespace?: string;\n    revisionID: string;\n    instanceName?: string;\n  }): Promise<ArgoCDAppDeployRevisionDetails>;\n  getAppDetails(options: {\n    url: string;\n    appName: string;\n    appNamespace?: string;\n    instance?: string;\n  }): Promise<ArgoCDAppDetails>;\n  getAppListDetails(options: {\n    url: string;\n    appSelector: string;\n    appNamespace?: string;\n    instance?: string;\n  }): Promise<ArgoCDAppList>;\n  serviceLocatorUrl(options: {\n    appName?: string;\n    appSelector?: string;\n    appNamespace?: string;\n  }): Promise<ArgoCDServiceList | Error>;\n}\n\nexport const argoCDApiRef = createApiRef<ArgoCDApi>({\n  id: 'plugin.argocd.service',\n});\n\nexport type Options = {\n  discoveryApi: DiscoveryApi;\n  backendBaseUrl: string;\n  searchInstances: boolean;\n  identityApi: IdentityApi;\n  proxyPath?: string;\n  useNamespacedApps: boolean;\n};\n\nconst APP_NAMESPACE_QUERY_PARAM = 'appNamespace';\n\nexport class ArgoCDApiClient implements ArgoCDApi {\n  private readonly discoveryApi: DiscoveryApi;\n  private readonly backendBaseUrl: string;\n  private readonly searchInstances: boolean;\n  private readonly identityApi: IdentityApi;\n  private readonly useNamespacedApps: boolean;\n\n  constructor(options: Options) {\n    this.discoveryApi = options.discoveryApi;\n    this.backendBaseUrl = options.backendBaseUrl;\n    this.searchInstances = options.searchInstances;\n    this.identityApi = options.identityApi;\n    this.useNamespacedApps = options.useNamespacedApps;\n  }\n\n  async getBaseUrl() {\n    if (this.searchInstances) {\n      return `${this.backendBaseUrl}/api/argocd`;\n    }\n    return await this.discoveryApi.getBaseUrl('proxy');\n  }\n\n  getQueryParams(params: { [p: string]: string | undefined }) {\n    const result = Object.keys(params)\n      .filter(key => params[key] !== undefined)\n      .filter(\n        key => key !== APP_NAMESPACE_QUERY_PARAM || this.useNamespacedApps,\n      )\n      .map(\n        k =>\n          `${encodeURIComponent(k)}=${encodeURIComponent(params[k] as string)}`,\n      )\n      .join('&');\n    return result ? `?${result}` : '';\n  }\n\n  async fetchDecode<A, O, I>(url: string, typeCodec: tsType<A, O, I>) {\n    const { token } = await this.identityApi.getCredentials();\n    const response = await fetch(url, {\n      headers: token\n        ? {\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${token}`,\n          }\n        : undefined,\n    });\n    if (!response.ok) {\n      throw new Error(\n        `failed to fetch data, status ${response.status}: ${response.statusText}`,\n      );\n    }\n    const json = await response.json();\n    try {\n      return await tsDecode(typeCodec, json);\n    } catch (e) {\n      if (tsIsDecodeError(e)) {\n        throw new Error(\n          `remote data validation failed: ${reporter\n            .report(typeCodec.decode(json))\n            .join('; ')}`,\n        );\n      } else {\n        throw e;\n      }\n    }\n  }\n\n  async listApps(options: {\n    url: string;\n    appSelector?: string;\n    appNamespace?: string;\n    projectName?: string;\n  }) {\n    const proxyUrl = await this.getBaseUrl();\n    const query = this.getQueryParams({\n      selector: options.appSelector,\n      project: options.projectName,\n      appNamespace: options.appNamespace,\n    });\n    return this.fetchDecode(\n      `${proxyUrl}${options.url}/applications${query}`,\n      argoCDAppList,\n    );\n  }\n\n  async getRevisionDetails(options: {\n    url: string;\n    app: string;\n    appNamespace?: string;\n    revisionID: string;\n    instanceName?: string;\n  }) {\n    const proxyUrl = await this.getBaseUrl();\n    const query = this.getQueryParams({\n      appNamespace: options.appNamespace,\n    });\n    if (this.searchInstances) {\n      return this.fetchDecode(\n        `${proxyUrl}/argoInstance/${\n          options.instanceName\n        }/applications/name/${encodeURIComponent(\n          options.app as string,\n        )}/revisions/${encodeURIComponent(\n          options.revisionID as string,\n        )}/metadata${query}`,\n        argoCDAppDeployRevisionDetails,\n      );\n    }\n    return this.fetchDecode(\n      `${proxyUrl}${options.url}/applications/${encodeURIComponent(\n        options.app as string,\n      )}/revisions/${encodeURIComponent(\n        options.revisionID as string,\n      )}/metadata${query}`,\n      argoCDAppDeployRevisionDetails,\n    );\n  }\n\n  async getAppDetails(options: {\n    url: string;\n    appName: string;\n    appNamespace?: string;\n    instance?: string;\n  }) {\n    const proxyUrl = await this.getBaseUrl();\n    const query = this.getQueryParams({\n      appNamespace: options.appNamespace,\n    });\n    if (this.searchInstances) {\n      return this.fetchDecode(\n        `${proxyUrl}/argoInstance/${\n          options.instance\n        }/applications/name/${encodeURIComponent(\n          options.appName as string,\n        )}${query}`,\n        argoCDAppDetails,\n      );\n    }\n    return this.fetchDecode(\n      `${proxyUrl}${options.url}/applications/${encodeURIComponent(\n        options.appName as string,\n      )}${query}`,\n      argoCDAppDetails,\n    );\n  }\n\n  async getAppListDetails(options: {\n    url: string;\n    appSelector: string;\n    appNamespace?: string;\n    instance?: string;\n  }) {\n    const proxyUrl = await this.getBaseUrl();\n    const query = this.getQueryParams({\n      appNamespace: options.appNamespace,\n    });\n    if (this.searchInstances) {\n      return this.fetchDecode(\n        `${proxyUrl}/argoInstance/${\n          options.instance\n        }/applications/selector/${encodeURIComponent(\n          options.appSelector as string,\n        )}${query}`,\n        argoCDAppList,\n      );\n    }\n    return this.fetchDecode(\n      `${proxyUrl}${options.url}/applications/selector/${encodeURIComponent(\n        options.appSelector as string,\n      )}${query}`,\n      argoCDAppList,\n    );\n  }\n\n  async serviceLocatorUrl(options: {\n    appName?: string;\n    appSelector?: string;\n    appNamespace?: string;\n  }) {\n    if (!options.appName && !options.appSelector) {\n      throw new Error('Need to provide appName or appSelector');\n    }\n    const baseUrl = await this.getBaseUrl();\n    const query = this.getQueryParams({\n      appNamespace: options.appNamespace,\n    });\n    const url = options.appName\n      ? `${baseUrl}/find/name/${encodeURIComponent(\n          options.appName as string,\n        )}${query}`\n      : `${baseUrl}/find/selector/${encodeURIComponent(\n          options.appSelector as string,\n        )}${query}`;\n\n    return this.fetchDecode(url, argoCDServiceList).catch(_ => {\n      throw new Error('Cannot get argo location(s) for service');\n    });\n  }\n}\n","import {\n  configApiRef,\n  createApiFactory,\n  createComponentExtension,\n  createPlugin,\n  createRoutableExtension,\n  createRouteRef,\n  discoveryApiRef,\n  identityApiRef,\n} from '@backstage/core-plugin-api';\nimport { ArgoCDApiClient, argoCDApiRef } from './api';\n\nexport const entityContentRouteRef = createRouteRef({\n  id: 'ArgoCD Entity Content',\n});\n\nexport const argocdPlugin = createPlugin({\n  id: 'argocd',\n  apis: [\n    createApiFactory({\n      api: argoCDApiRef,\n      deps: {\n        discoveryApi: discoveryApiRef,\n        identityApi: identityApiRef,\n        configApi: configApiRef,\n      },\n      factory: ({ discoveryApi, identityApi, configApi }) =>\n        new ArgoCDApiClient({\n          discoveryApi,\n          identityApi,\n          backendBaseUrl: configApi.getString('backend.baseUrl'),\n          useNamespacedApps: Boolean(\n            configApi.getOptionalBoolean('argocd.namespacedApps'),\n          ),\n          searchInstances: Boolean(\n            configApi.getOptionalConfigArray('argocd.appLocatorMethods')\n              ?.length,\n          ),\n        }),\n    }),\n  ],\n  routes: {\n    entityContent: entityContentRouteRef,\n  },\n});\n\nexport const EntityArgoCDContent = argocdPlugin.provide(\n  createRoutableExtension({\n    name: 'EntityArgoCDContent',\n    component: () => import('./Router').then(m => m.Router),\n    mountPoint: entityContentRouteRef,\n  }),\n);\n\nexport const EntityArgoCDOverviewCard = argocdPlugin.provide(\n  createComponentExtension({\n    name: 'EntityArgoCDOverviewCard',\n    component: {\n      lazy: () =>\n        import('./components/ArgoCDDetailsCard').then(m => m.ArgoCDDetailsCard),\n    },\n  }),\n);\n\nexport const EntityArgoCDHistoryCard = argocdPlugin.provide(\n  createComponentExtension({\n    name: 'EntityArgoCDHistoryCard',\n    component: {\n      lazy: () =>\n        import('./components/ArgoCDHistoryCard').then(m => m.ArgoCDHistoryCard),\n    },\n  }),\n);\n","/*\n * Copyright 2021 Larder Software Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Entity } from '@backstage/catalog-model';\n\nexport const ARGOCD_ANNOTATION_APP_NAME = 'argocd/app-name';\nexport const ARGOCD_ANNOTATION_APP_SELECTOR = 'argocd/app-selector';\nexport const ARGOCD_ANNOTATION_APP_NAMESPACE = 'argocd/app-namespace';\nexport const ARGOCD_ANNOTATION_PROJECT_NAME = 'argocd/project-name';\nexport const ARGOCD_ANNOTATION_PROXY_URL = 'argocd/proxy-url';\n\nexport const useArgoCDAppData = ({ entity }: { entity: Entity }) => {\n  const appName =\n    entity?.metadata.annotations?.[ARGOCD_ANNOTATION_APP_NAME] ?? '';\n  const appSelector =\n    entity?.metadata.annotations?.[ARGOCD_ANNOTATION_APP_SELECTOR] ?? '';\n  const appNamespace =\n    entity?.metadata.annotations?.[ARGOCD_ANNOTATION_APP_NAMESPACE];\n  const projectName =\n    entity?.metadata.annotations?.[ARGOCD_ANNOTATION_PROJECT_NAME];\n  const url =\n    entity?.metadata.annotations?.[ARGOCD_ANNOTATION_PROXY_URL] ??\n    '/argocd/api';\n  if (!(appName || appSelector || projectName)) {\n    throw new Error(\"'argocd' annotation is missing\");\n  } else if (appName && (appSelector || projectName)) {\n    throw new Error(\n      \"Cannot provide both 'argocd/app-name' and 'argocd-app' annotations\",\n    );\n  }\n  return { url, appName, appSelector, appNamespace, projectName };\n};\n","import { Entity } from '@backstage/catalog-model';\nimport {\n  ARGOCD_ANNOTATION_APP_NAME,\n  ARGOCD_ANNOTATION_APP_SELECTOR,\n  ARGOCD_ANNOTATION_PROJECT_NAME,\n} from './components/useArgoCDAppData';\n\nexport const isArgocdAvailable = (entity: Entity) =>\n  Boolean(entity?.metadata.annotations?.[ARGOCD_ANNOTATION_APP_NAME]) ||\n  Boolean(entity?.metadata.annotations?.[ARGOCD_ANNOTATION_APP_SELECTOR]) ||\n  Boolean(entity?.metadata.annotations?.[ARGOCD_ANNOTATION_PROJECT_NAME]);\n"],"names":["tsDecode","tsIsDecodeError"],"mappings":"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"}